var Ow=Object.create;var Ad=Object.defineProperty,kw=Object.defineProperties,Lw=Object.getOwnPropertyDescriptor,Fw=Object.getOwnPropertyDescriptors,Vw=Object.getOwnPropertyNames,Zm=Object.getOwnPropertySymbols,jw=Object.getPrototypeOf,Xm=Object.prototype.hasOwnProperty,Hw=Object.prototype.propertyIsEnumerable;var Qm=(t,n,e)=>n in t?Ad(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,N=(t,n)=>{for(var e in n||={})Xm.call(n,e)&&Qm(t,e,n[e]);if(Zm)for(var e of Zm(n))Hw.call(n,e)&&Qm(t,e,n[e]);return t},ue=(t,n)=>kw(t,Fw(n));var Bw=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var Uw=(t,n,e,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of Vw(n))!Xm.call(t,r)&&r!==e&&Ad(t,r,{get:()=>n[r],enumerable:!(i=Lw(n,r))||i.enumerable});return t};var $w=(t,n,e)=>(e=t!=null?Ow(jw(t)):{},Uw(n||!t||!t.__esModule?Ad(e,"default",{value:t,enumerable:!0}):e,t));var mt=(t,n,e)=>new Promise((i,r)=>{var o=l=>{try{s(e.next(l))}catch(c){r(c)}},a=l=>{try{s(e.throw(l))}catch(c){r(c)}},s=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,a);s((e=e.apply(t,n)).next())});var PE=Bw((wm,Dm)=>{"use strict";((t,n)=>{typeof define=="function"&&define.amd?define([],n):typeof Dm=="object"&&typeof wm<"u"?Dm.exports=n():t.Papa=n()})(wm,function t(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},e,i=!n.document&&!!n.postMessage,r=n.IS_PAPA_WORKER||!1,o={},a=0,s={};function l(S){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(m){var w=H(m);w.chunkSize=parseInt(w.chunkSize),m.step||m.chunk||(w.chunkSize=null),this._handle=new f(w),(this._handle.streamer=this)._config=w}).call(this,S),this.parseChunk=function(m,w){var P=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<P){let G=this._config.newline;G||(x=this._config.quoteChar||'"',G=this._handle.guessLineEndings(m,x)),m=[...m.split(G).slice(P)].join(G)}this.isFirstChunk&&V(this._config.beforeFirstChunk)&&(x=this._config.beforeFirstChunk(m))!==void 0&&(m=x),this.isFirstChunk=!1,this._halted=!1;var P=this._partialLine+m,x=(this._partialLine="",this._handle.parse(P,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(m=x.meta.cursor,P=(this._finished||(this._partialLine=P.substring(m-this._baseIndex),this._baseIndex=m),x&&x.data&&(this._rowCount+=x.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),r)n.postMessage({results:x,workerId:s.WORKER_ID,finished:P});else if(V(this._config.chunk)&&!w){if(this._config.chunk(x,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=x=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(x.data),this._completeResults.errors=this._completeResults.errors.concat(x.errors),this._completeResults.meta=x.meta),this._completed||!P||!V(this._config.complete)||x&&x.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),P||x&&x.meta.paused||this._nextChunk(),x}this._halted=!0},this._sendError=function(m){V(this._config.error)?this._config.error(m):r&&this._config.error&&n.postMessage({workerId:s.WORKER_ID,error:m,finished:!1})}}function c(S){var m;(S=S||{}).chunkSize||(S.chunkSize=s.RemoteChunkSize),l.call(this,S),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(w){this._input=w,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(m=new XMLHttpRequest,this._config.withCredentials&&(m.withCredentials=this._config.withCredentials),i||(m.onload=O(this._chunkLoaded,this),m.onerror=O(this._chunkError,this)),m.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var w,P=this._config.downloadRequestHeaders;for(w in P)m.setRequestHeader(w,P[w])}var x;this._config.chunkSize&&(x=this._start+this._config.chunkSize-1,m.setRequestHeader("Range","bytes="+this._start+"-"+x));try{m.send(this._config.downloadRequestBody)}catch(G){this._chunkError(G.message)}i&&m.status===0&&this._chunkError()}},this._chunkLoaded=function(){m.readyState===4&&(m.status<200||400<=m.status?this._chunkError():(this._start+=this._config.chunkSize||m.responseText.length,this._finished=!this._config.chunkSize||this._start>=(w=>(w=w.getResponseHeader("Content-Range"))!==null?parseInt(w.substring(w.lastIndexOf("/")+1)):-1)(m),this.parseChunk(m.responseText)))},this._chunkError=function(w){w=m.statusText||w,this._sendError(new Error(w))}}function u(S){(S=S||{}).chunkSize||(S.chunkSize=s.LocalChunkSize),l.call(this,S);var m,w,P=typeof FileReader<"u";this.stream=function(x){this._input=x,w=x.slice||x.webkitSlice||x.mozSlice,P?((m=new FileReader).onload=O(this._chunkLoaded,this),m.onerror=O(this._chunkError,this)):m=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var x=this._input,G=(this._config.chunkSize&&(G=Math.min(this._start+this._config.chunkSize,this._input.size),x=w.call(x,this._start,G)),m.readAsText(x,this._config.encoding));P||this._chunkLoaded({target:{result:G}})},this._chunkLoaded=function(x){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(x.target.result)},this._chunkError=function(){this._sendError(m.error)}}function d(S){var m;l.call(this,S=S||{}),this.stream=function(w){return m=w,this._nextChunk()},this._nextChunk=function(){var w,P;if(!this._finished)return w=this._config.chunkSize,m=w?(P=m.substring(0,w),m.substring(w)):(P=m,""),this._finished=!m,this.parseChunk(P)}}function _(S){l.call(this,S=S||{});var m=[],w=!0,P=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(x){this._input=x,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){P&&m.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),m.length?this.parseChunk(m.shift()):w=!0},this._streamData=O(function(x){try{m.push(typeof x=="string"?x:x.toString(this._config.encoding)),w&&(w=!1,this._checkIsFinished(),this.parseChunk(m.shift()))}catch(G){this._streamError(G)}},this),this._streamError=O(function(x){this._streamCleanUp(),this._sendError(x)},this),this._streamEnd=O(function(){this._streamCleanUp(),P=!0,this._streamData("")},this),this._streamCleanUp=O(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(S){var m,w,P,x,G=Math.pow(2,53),ee=-G,le=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,A=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,I=this,R=0,F=0,J=!1,Y=!1,se=[],X={data:[],errors:[],meta:{}};function Ie(ce){return S.skipEmptyLines==="greedy"?ce.join("").trim()==="":ce.length===1&&ce[0].length===0}function Qe(){if(X&&P&&(at("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),P=!1),S.skipEmptyLines&&(X.data=X.data.filter(function(ze){return!Ie(ze)})),rt()){let ze=function(lt,We){V(S.transformHeader)&&(lt=S.transformHeader(lt,We)),se.push(lt)};var ye=ze;if(X)if(Array.isArray(X.data[0])){for(var ce=0;rt()&&ce<X.data.length;ce++)X.data[ce].forEach(ze);X.data.splice(0,1)}else X.data.forEach(ze)}function be(ze,lt){for(var We=S.header?{}:[],ke=0;ke<ze.length;ke++){var Se=ke,Ct=ze[ke],Ct=((Re,qe)=>(ot=>(S.dynamicTypingFunction&&S.dynamicTyping[ot]===void 0&&(S.dynamicTyping[ot]=S.dynamicTypingFunction(ot)),(S.dynamicTyping[ot]||S.dynamicTyping)===!0))(Re)?qe==="true"||qe==="TRUE"||qe!=="false"&&qe!=="FALSE"&&((ot=>{if(le.test(ot)&&(ot=parseFloat(ot),ee<ot&&ot<G))return 1})(qe)?parseFloat(qe):A.test(qe)?new Date(qe):qe===""?null:qe):qe)(Se=S.header?ke>=se.length?"__parsed_extra":se[ke]:Se,Ct=S.transform?S.transform(Ct,Se):Ct);Se==="__parsed_extra"?(We[Se]=We[Se]||[],We[Se].push(Ct)):We[Se]=Ct}return S.header&&(ke>se.length?at("FieldMismatch","TooManyFields","Too many fields: expected "+se.length+" fields but parsed "+ke,F+lt):ke<se.length&&at("FieldMismatch","TooFewFields","Too few fields: expected "+se.length+" fields but parsed "+ke,F+lt)),We}var Ge;X&&(S.header||S.dynamicTyping||S.transform)&&(Ge=1,!X.data.length||Array.isArray(X.data[0])?(X.data=X.data.map(be),Ge=X.data.length):X.data=be(X.data,0),S.header&&X.meta&&(X.meta.fields=se),F+=Ge)}function rt(){return S.header&&se.length===0}function at(ce,be,Ge,ye){ce={type:ce,code:be,message:Ge},ye!==void 0&&(ce.row=ye),X.errors.push(ce)}V(S.step)&&(x=S.step,S.step=function(ce){X=ce,rt()?Qe():(Qe(),X.data.length!==0&&(R+=ce.data.length,S.preview&&R>S.preview?w.abort():(X.data=X.data[0],x(X,I))))}),this.parse=function(ce,be,Ge){var ye=S.quoteChar||'"',ye=(S.newline||(S.newline=this.guessLineEndings(ce,ye)),P=!1,S.delimiter?V(S.delimiter)&&(S.delimiter=S.delimiter(ce),X.meta.delimiter=S.delimiter):((ye=((ze,lt,We,ke,Se)=>{var Ct,Re,qe,ot;Se=Se||[",","	","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var Wr=0;Wr<Se.length;Wr++){for(var On,Ss=Se[Wr],Et=0,kn=0,ct=0,Lt=(qe=void 0,new T({comments:ke,delimiter:Ss,newline:lt,preview:10}).parse(ze)),si=0;si<Lt.data.length;si++)We&&Ie(Lt.data[si])?ct++:(On=Lt.data[si].length,kn+=On,qe===void 0?qe=On:0<On&&(Et+=Math.abs(On-qe),qe=On));0<Lt.data.length&&(kn/=Lt.data.length-ct),(Re===void 0||Et<=Re)&&(ot===void 0||ot<kn)&&1.99<kn&&(Re=Et,Ct=Ss,ot=kn)}return{successful:!!(S.delimiter=Ct),bestDelimiter:Ct}})(ce,S.newline,S.skipEmptyLines,S.comments,S.delimitersToGuess)).successful?S.delimiter=ye.bestDelimiter:(P=!0,S.delimiter=s.DefaultDelimiter),X.meta.delimiter=S.delimiter),H(S));return S.preview&&S.header&&ye.preview++,m=ce,w=new T(ye),X=w.parse(m,be,Ge),Qe(),J?{meta:{paused:!0}}:X||{meta:{paused:!1}}},this.paused=function(){return J},this.pause=function(){J=!0,w.abort(),m=V(S.chunk)?"":m.substring(w.getCharIndex())},this.resume=function(){I.streamer._halted?(J=!1,I.streamer.parseChunk(m,!0)):setTimeout(I.resume,3)},this.aborted=function(){return Y},this.abort=function(){Y=!0,w.abort(),X.meta.aborted=!0,V(S.complete)&&S.complete(X),m=""},this.guessLineEndings=function(ze,ye){ze=ze.substring(0,1048576);var ye=new RegExp(v(ye)+"([^]*?)"+v(ye),"gm"),Ge=(ze=ze.replace(ye,"")).split("\r"),ye=ze.split(`
`),ze=1<ye.length&&ye[0].length<Ge[0].length;if(Ge.length===1||ze)return`
`;for(var lt=0,We=0;We<Ge.length;We++)Ge[We][0]===`
`&&lt++;return lt>=Ge.length/2?`\r
`:"\r"}}function v(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function T(S){var m=(S=S||{}).delimiter,w=S.newline,P=S.comments,x=S.step,G=S.preview,ee=S.fastMode,le=null,A=!1,I=S.quoteChar==null?'"':S.quoteChar,R=I;if(S.escapeChar!==void 0&&(R=S.escapeChar),(typeof m!="string"||-1<s.BAD_DELIMITERS.indexOf(m))&&(m=","),P===m)throw new Error("Comment character same as delimiter");P===!0?P="#":(typeof P!="string"||-1<s.BAD_DELIMITERS.indexOf(P))&&(P=!1),w!==`
`&&w!=="\r"&&w!==`\r
`&&(w=`
`);var F=0,J=!1;this.parse=function(Y,se,X){if(typeof Y!="string")throw new Error("Input must be a string");var Ie=Y.length,Qe=m.length,rt=w.length,at=P.length,ce=V(x),be=[],Ge=[],ye=[],ze=F=0;if(!Y)return Et();if(ee||ee!==!1&&Y.indexOf(I)===-1){for(var lt=Y.split(w),We=0;We<lt.length;We++){if(ye=lt[We],F+=ye.length,We!==lt.length-1)F+=w.length;else if(X)return Et();if(!P||ye.substring(0,at)!==P){if(ce){if(be=[],ot(ye.split(m)),kn(),J)return Et()}else ot(ye.split(m));if(G&&G<=We)return be=be.slice(0,G),Et(!0)}}return Et()}for(var ke=Y.indexOf(m,F),Se=Y.indexOf(w,F),Ct=new RegExp(v(R)+v(I),"g"),Re=Y.indexOf(I,F);;)if(Y[F]===I)for(Re=F,F++;;){if((Re=Y.indexOf(I,Re+1))===-1)return X||Ge.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:be.length,index:F}),On();if(Re===Ie-1)return On(Y.substring(F,Re).replace(Ct,I));if(I===R&&Y[Re+1]===R)Re++;else if(I===R||Re===0||Y[Re-1]!==R){ke!==-1&&ke<Re+1&&(ke=Y.indexOf(m,Re+1));var qe=Wr((Se=Se!==-1&&Se<Re+1?Y.indexOf(w,Re+1):Se)===-1?ke:Math.min(ke,Se));if(Y.substr(Re+1+qe,Qe)===m){ye.push(Y.substring(F,Re).replace(Ct,I)),Y[F=Re+1+qe+Qe]!==I&&(Re=Y.indexOf(I,F)),ke=Y.indexOf(m,F),Se=Y.indexOf(w,F);break}if(qe=Wr(Se),Y.substring(Re+1+qe,Re+1+qe+rt)===w){if(ye.push(Y.substring(F,Re).replace(Ct,I)),Ss(Re+1+qe+rt),ke=Y.indexOf(m,F),Re=Y.indexOf(I,F),ce&&(kn(),J))return Et();if(G&&be.length>=G)return Et(!0);break}Ge.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:be.length,index:F}),Re++}}else if(P&&ye.length===0&&Y.substring(F,F+at)===P){if(Se===-1)return Et();F=Se+rt,Se=Y.indexOf(w,F),ke=Y.indexOf(m,F)}else if(ke!==-1&&(ke<Se||Se===-1))ye.push(Y.substring(F,ke)),F=ke+Qe,ke=Y.indexOf(m,F);else{if(Se===-1)break;if(ye.push(Y.substring(F,Se)),Ss(Se+rt),ce&&(kn(),J))return Et();if(G&&be.length>=G)return Et(!0)}return On();function ot(ct){be.push(ct),ze=F}function Wr(ct){var Lt=0;return Lt=ct!==-1&&(ct=Y.substring(Re+1,ct))&&ct.trim()===""?ct.length:Lt}function On(ct){return X||(ct===void 0&&(ct=Y.substring(F)),ye.push(ct),F=Ie,ot(ye),ce&&kn()),Et()}function Ss(ct){F=ct,ot(ye),ye=[],Se=Y.indexOf(w,F)}function Et(ct){if(S.header&&!se&&be.length&&!A){var Lt=be[0],si=Object.create(null),Rd=new Set(Lt);let Ym=!1;for(let qr=0;qr<Lt.length;qr++){let Ln=Lt[qr];if(si[Ln=V(S.transformHeader)?S.transformHeader(Ln,qr):Ln]){let Cs,Km=si[Ln];for(;Cs=Ln+"_"+Km,Km++,Rd.has(Cs););Rd.add(Cs),Lt[qr]=Cs,si[Ln]++,Ym=!0,(le=le===null?{}:le)[Cs]=Ln}else si[Ln]=1,Lt[qr]=Ln;Rd.add(Ln)}Ym&&console.warn("Duplicate headers found and renamed."),A=!0}return{data:be,errors:Ge,meta:{delimiter:m,linebreak:w,aborted:J,truncated:!!ct,cursor:ze+(se||0),renamedHeaders:le}}}function kn(){x(Et()),be=[],Ge=[]}},this.abort=function(){J=!0},this.getCharIndex=function(){return F}}function b(S){var m=S.data,w=o[m.workerId],P=!1;if(m.error)w.userError(m.error,m.file);else if(m.results&&m.results.data){var x={abort:function(){P=!0,M(m.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:W,resume:W};if(V(w.userStep)){for(var G=0;G<m.results.data.length&&(w.userStep({data:m.results.data[G],errors:m.results.errors,meta:m.results.meta},x),!P);G++);delete m.results}else V(w.userChunk)&&(w.userChunk(m.results,x,m.file),delete m.results)}m.finished&&!P&&M(m.workerId,m.results)}function M(S,m){var w=o[S];V(w.userComplete)&&w.userComplete(m),w.terminate(),delete o[S]}function W(){throw new Error("Not implemented.")}function H(S){if(typeof S!="object"||S===null)return S;var m,w=Array.isArray(S)?[]:{};for(m in S)w[m]=H(S[m]);return w}function O(S,m){return function(){S.apply(m,arguments)}}function V(S){return typeof S=="function"}return s.parse=function(S,m){var w=(m=m||{}).dynamicTyping||!1;if(V(w)&&(m.dynamicTypingFunction=w,w={}),m.dynamicTyping=w,m.transform=!!V(m.transform)&&m.transform,!m.worker||!s.WORKERS_SUPPORTED)return w=null,s.NODE_STREAM_INPUT,typeof S=="string"?(S=(P=>P.charCodeAt(0)!==65279?P:P.slice(1))(S),w=new(m.download?c:d)(m)):S.readable===!0&&V(S.read)&&V(S.on)?w=new _(m):(n.File&&S instanceof File||S instanceof Object)&&(w=new u(m)),w.stream(S);(w=(()=>{var P;return!!s.WORKERS_SUPPORTED&&(P=(()=>{var x=n.URL||n.webkitURL||null,G=t.toString();return s.BLOB_URL||(s.BLOB_URL=x.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",G,")();"],{type:"text/javascript"})))})(),(P=new n.Worker(P)).onmessage=b,P.id=a++,o[P.id]=P)})()).userStep=m.step,w.userChunk=m.chunk,w.userComplete=m.complete,w.userError=m.error,m.step=V(m.step),m.chunk=V(m.chunk),m.complete=V(m.complete),m.error=V(m.error),delete m.worker,w.postMessage({input:S,config:m,workerId:w.id})},s.unparse=function(S,m){var w=!1,P=!0,x=",",G=`\r
`,ee='"',le=ee+ee,A=!1,I=null,R=!1,F=((()=>{if(typeof m=="object"){if(typeof m.delimiter!="string"||s.BAD_DELIMITERS.filter(function(se){return m.delimiter.indexOf(se)!==-1}).length||(x=m.delimiter),typeof m.quotes!="boolean"&&typeof m.quotes!="function"&&!Array.isArray(m.quotes)||(w=m.quotes),typeof m.skipEmptyLines!="boolean"&&typeof m.skipEmptyLines!="string"||(A=m.skipEmptyLines),typeof m.newline=="string"&&(G=m.newline),typeof m.quoteChar=="string"&&(ee=m.quoteChar),typeof m.header=="boolean"&&(P=m.header),Array.isArray(m.columns)){if(m.columns.length===0)throw new Error("Option columns is empty");I=m.columns}m.escapeChar!==void 0&&(le=m.escapeChar+ee),m.escapeFormulae instanceof RegExp?R=m.escapeFormulae:typeof m.escapeFormulae=="boolean"&&m.escapeFormulae&&(R=/^[=+\-@\t\r].*$/)}})(),new RegExp(v(ee),"g"));if(typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(S)){if(!S.length||Array.isArray(S[0]))return J(null,S,A);if(typeof S[0]=="object")return J(I||Object.keys(S[0]),S,A)}else if(typeof S=="object")return typeof S.data=="string"&&(S.data=JSON.parse(S.data)),Array.isArray(S.data)&&(S.fields||(S.fields=S.meta&&S.meta.fields||I),S.fields||(S.fields=Array.isArray(S.data[0])?S.fields:typeof S.data[0]=="object"?Object.keys(S.data[0]):[]),Array.isArray(S.data[0])||typeof S.data[0]=="object"||(S.data=[S.data])),J(S.fields||[],S.data||[],A);throw new Error("Unable to serialize unrecognized input");function J(se,X,Ie){var Qe="",rt=(typeof se=="string"&&(se=JSON.parse(se)),typeof X=="string"&&(X=JSON.parse(X)),Array.isArray(se)&&0<se.length),at=!Array.isArray(X[0]);if(rt&&P){for(var ce=0;ce<se.length;ce++)0<ce&&(Qe+=x),Qe+=Y(se[ce],ce);0<X.length&&(Qe+=G)}for(var be=0;be<X.length;be++){var Ge=(rt?se:X[be]).length,ye=!1,ze=rt?Object.keys(X[be]).length===0:X[be].length===0;if(Ie&&!rt&&(ye=Ie==="greedy"?X[be].join("").trim()==="":X[be].length===1&&X[be][0].length===0),Ie==="greedy"&&rt){for(var lt=[],We=0;We<Ge;We++){var ke=at?se[We]:We;lt.push(X[be][ke])}ye=lt.join("").trim()===""}if(!ye){for(var Se=0;Se<Ge;Se++){0<Se&&!ze&&(Qe+=x);var Ct=rt&&at?se[Se]:Se;Qe+=Y(X[be][Ct],Se)}be<X.length-1&&(!Ie||0<Ge&&!ze)&&(Qe+=G)}}return Qe}function Y(se,X){var Ie,Qe;return se==null?"":se.constructor===Date?JSON.stringify(se).slice(1,25):(Qe=!1,R&&typeof se=="string"&&R.test(se)&&(se="'"+se,Qe=!0),Ie=se.toString().replace(F,le),(Qe=Qe||w===!0||typeof w=="function"&&w(se,X)||Array.isArray(w)&&w[X]||((rt,at)=>{for(var ce=0;ce<at.length;ce++)if(-1<rt.indexOf(at[ce]))return!0;return!1})(Ie,s.BAD_DELIMITERS)||-1<Ie.indexOf(x)||Ie.charAt(0)===" "||Ie.charAt(Ie.length-1)===" ")?ee+Ie+ee:Ie)}},s.RECORD_SEP="",s.UNIT_SEP="",s.BYTE_ORDER_MARK="\uFEFF",s.BAD_DELIMITERS=["\r",`
`,'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!i&&!!n.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=T,s.ParserHandle=f,s.NetworkStreamer=c,s.FileStreamer=u,s.StringStreamer=d,s.ReadableStreamStreamer=_,n.jQuery&&((e=n.jQuery).fn.parse=function(S){var m=S.config||{},w=[];return this.each(function(G){if(!(e(this).prop("tagName").toUpperCase()==="INPUT"&&e(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var ee=0;ee<this.files.length;ee++)w.push({file:this.files[ee],inputElem:this,instanceConfig:e.extend({},m)})}),P(),this;function P(){if(w.length===0)V(S.complete)&&S.complete();else{var G,ee,le,A,I=w[0];if(V(S.before)){var R=S.before(I.file,I.inputElem);if(typeof R=="object"){if(R.action==="abort")return G="AbortError",ee=I.file,le=I.inputElem,A=R.reason,void(V(S.error)&&S.error({name:G},ee,le,A));if(R.action==="skip")return void x();typeof R.config=="object"&&(I.instanceConfig=e.extend(I.instanceConfig,R.config))}else if(R==="skip")return void x()}var F=I.instanceConfig.complete;I.instanceConfig.complete=function(J){V(F)&&F(J,I.file,I.inputElem),x()},s.parse(I.file,I.instanceConfig)}}function x(){w.splice(0,1),P()}}),r&&(n.onmessage=function(S){S=S.data,s.WORKER_ID===void 0&&S&&(s.WORKER_ID=S.workerId),typeof S.input=="string"?n.postMessage({workerId:s.WORKER_ID,results:s.parse(S.input,S.config),finished:!0}):(n.File&&S.input instanceof File||S.input instanceof Object)&&(S=s.parse(S.input,S.config))&&n.postMessage({workerId:s.WORKER_ID,results:S,finished:!0})}),(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,(d.prototype=Object.create(d.prototype)).constructor=d,(_.prototype=Object.create(l.prototype)).constructor=_,s})});var Pd;function il(){return Pd}function Fn(t){let n=Pd;return Pd=t,n}var Jm=Symbol("NotFound");function Yr(t){return t===Jm||t?.name==="\u0275NotFound"}function ll(t,n){return Object.is(t,n)}var wt=null,rl=!1,Nd=1,Gw=null,Dt=Symbol("SIGNAL");function me(t){let n=wt;return wt=t,n}function cl(){return wt}var tr={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Kr(t){if(rl)throw new Error("");if(wt===null)return;wt.consumerOnSignalRead(t);let n=wt.producersTail;if(n!==void 0&&n.producer===t)return;let e,i=wt.recomputing;if(i&&(e=n!==void 0?n.nextProducer:wt.producers,e!==void 0&&e.producer===t)){wt.producersTail=e,e.lastReadVersion=t.version;return}let r=t.consumersTail;if(r!==void 0&&r.consumer===wt&&(!i||Ww(r,wt)))return;let o=Qr(wt),a={producer:t,consumer:wt,nextProducer:e,prevConsumer:r,lastReadVersion:t.version,nextConsumer:void 0};wt.producersTail=a,n!==void 0?n.nextProducer=a:wt.producers=a,o&&t0(t,a)}function e0(){Nd++}function ul(t){if(!(Qr(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Nd)){if(!t.producerMustRecompute(t)&&!ws(t)){al(t);return}t.producerRecomputeValue(t),al(t)}}function Od(t){if(t.consumers===void 0)return;let n=rl;rl=!0;try{for(let e=t.consumers;e!==void 0;e=e.nextConsumer){let i=e.consumer;i.dirty||zw(i)}}finally{rl=n}}function kd(){return wt?.consumerAllowSignalWrites!==!1}function zw(t){t.dirty=!0,Od(t),t.consumerMarkedDirty?.(t)}function al(t){t.dirty=!1,t.lastCleanEpoch=Nd}function nr(t){return t&&(t.producersTail=void 0,t.recomputing=!0),me(t)}function Zr(t,n){if(me(n),!t)return;t.recomputing=!1;let e=t.producersTail,i=e!==void 0?e.nextProducer:t.producers;if(i!==void 0){if(Qr(t))do i=Ld(i);while(i!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function ws(t){for(let n=t.producers;n!==void 0;n=n.nextProducer){let e=n.producer,i=n.lastReadVersion;if(i!==e.version||(ul(e),i!==e.version))return!0}return!1}function Ds(t){if(Qr(t)){let n=t.producers;for(;n!==void 0;)n=Ld(n)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function t0(t,n){let e=t.consumersTail,i=Qr(t);if(e!==void 0?(n.nextConsumer=e.nextConsumer,e.nextConsumer=n):(n.nextConsumer=void 0,t.consumers=n),n.prevConsumer=e,t.consumersTail=n,!i)for(let r=t.producers;r!==void 0;r=r.nextProducer)t0(r.producer,r)}function Ld(t){let n=t.producer,e=t.nextProducer,i=t.nextConsumer,r=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:n.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(n.consumers=i,!Qr(n)){let o=n.producers;for(;o!==void 0;)o=Ld(o)}return e}function Qr(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function dl(t){Gw?.(t)}function Ww(t,n){let e=n.producersTail;if(e!==void 0){let i=n.producers;do{if(i===t)return!0;if(i===e)break;i=i.nextProducer}while(i!==void 0)}return!1}function fl(t,n){let e=Object.create(qw);e.computation=t,n!==void 0&&(e.equal=n);let i=()=>{if(ul(e),Kr(e),e.value===Es)throw e.error;return e.value};return i[Dt]=e,dl(e),i}var ol=Symbol("UNSET"),sl=Symbol("COMPUTING"),Es=Symbol("ERRORED"),qw=ue(N({},tr),{value:ol,dirty:!0,error:null,equal:ll,kind:"computed",producerMustRecompute(t){return t.value===ol||t.value===sl},producerRecomputeValue(t){if(t.value===sl)throw new Error("");let n=t.value;t.value=sl;let e=nr(t),i,r=!1;try{i=t.computation(),me(null),r=n!==ol&&n!==Es&&i!==Es&&t.equal(n,i)}catch(o){i=Es,t.error=o}finally{Zr(t,e)}if(r){t.value=n;return}t.value=i,t.version++}});function Yw(){throw new Error}var n0=Yw;function i0(t){n0(t)}function Fd(t){n0=t}var Kw=null;function Vd(t,n){let e=Object.create(hl);e.value=t,n!==void 0&&(e.equal=n);let i=()=>r0(e);return i[Dt]=e,dl(e),[i,a=>Xr(e,a),a=>jd(e,a)]}function r0(t){return Kr(t),t.value}function Xr(t,n){kd()||i0(t),t.equal(t.value,n)||(t.value=n,Zw(t))}function jd(t,n){kd()||i0(t),Xr(t,n(t.value))}var hl=ue(N({},tr),{equal:ll,value:void 0,kind:"signal"});function Zw(t){t.version++,e0(),Od(t),Kw?.(t)}function fe(t){return typeof t=="function"}function Jr(t){let e=t(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var pl=Jr(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function ir(t,n){if(t){let e=t.indexOf(n);0<=e&&t.splice(e,1)}}var Me=class t{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(fe(i))try{i()}catch(o){n=o instanceof pl?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{o0(o)}catch(a){n=n??[],a instanceof pl?n=[...n,...a.errors]:n.push(a)}}if(n)throw new pl(n)}}add(n){var e;if(n&&n!==this)if(this.closed)o0(n);else{if(n instanceof t){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(n)}}_hasParent(n){let{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){let{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&ir(e,n)}remove(n){let{_finalizers:e}=this;e&&ir(e,n),n instanceof t&&n._removeParent(this)}};Me.EMPTY=(()=>{let t=new Me;return t.closed=!0,t})();var Hd=Me.EMPTY;function gl(t){return t instanceof Me||t&&"closed"in t&&fe(t.remove)&&fe(t.add)&&fe(t.unsubscribe)}function o0(t){fe(t)?t():t.unsubscribe()}var vn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var eo={setTimeout(t,n,...e){let{delegate:i}=eo;return i?.setTimeout?i.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){let{delegate:n}=eo;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ml(t){eo.setTimeout(()=>{let{onUnhandledError:n}=vn;if(n)n(t);else throw t})}function rr(){}var s0=Bd("C",void 0,void 0);function a0(t){return Bd("E",void 0,t)}function l0(t){return Bd("N",t,void 0)}function Bd(t,n,e){return{kind:t,value:n,error:e}}var or=null;function to(t){if(vn.useDeprecatedSynchronousErrorHandling){let n=!or;if(n&&(or={errorThrown:!1,error:null}),t(),n){let{errorThrown:e,error:i}=or;if(or=null,e)throw i}}else t()}function c0(t){vn.useDeprecatedSynchronousErrorHandling&&or&&(or.errorThrown=!0,or.error=t)}var sr=class extends Me{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,gl(n)&&n.add(this)):this.destination=Jw}static create(n,e,i){return new no(n,e,i)}next(n){this.isStopped?$d(l0(n),this):this._next(n)}error(n){this.isStopped?$d(a0(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?$d(s0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Qw=Function.prototype.bind;function Ud(t,n){return Qw.call(t,n)}var Gd=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){vl(i)}}error(n){let{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){vl(i)}else vl(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){vl(e)}}},no=class extends sr{constructor(n,e,i){super();let r;if(fe(n)||!n)r={next:n??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&vn.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&Ud(n.next,o),error:n.error&&Ud(n.error,o),complete:n.complete&&Ud(n.complete,o)}):r=n}this.destination=new Gd(r)}};function vl(t){vn.useDeprecatedSynchronousErrorHandling?c0(t):ml(t)}function Xw(t){throw t}function $d(t,n){let{onStoppedNotification:e}=vn;e&&eo.setTimeout(()=>e(t,n))}var Jw={closed:!0,next:rr,error:Xw,complete:rr};var io=typeof Symbol=="function"&&Symbol.observable||"@@observable";function zt(t){return t}function zd(...t){return Wd(t)}function Wd(t){return t.length===0?zt:t.length===1?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}var oe=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){let o=tD(e)?e:new no(e,i,r);return to(()=>{let{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=u0(i),new i((r,o)=>{let a=new no({next:s=>{try{e(s)}catch(l){o(l),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[io](){return this}pipe(...e){return Wd(e)(this)}toPromise(e){return e=u0(e),new e((i,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>i(o))})}}return t.create=n=>new t(n),t})();function u0(t){var n;return(n=t??vn.Promise)!==null&&n!==void 0?n:Promise}function eD(t){return t&&fe(t.next)&&fe(t.error)&&fe(t.complete)}function tD(t){return t&&t instanceof sr||eD(t)&&gl(t)}function qd(t){return fe(t?.lift)}function Ce(t){return n=>{if(qd(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ve(t,n,e,i,r){return new Yd(t,n,e,i,r)}var Yd=class extends sr{constructor(n,e,i,r,o,a){super(n),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=e?function(s){try{e(s)}catch(l){n.error(l)}}:super._next,this._error=r?function(s){try{r(s)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(s){n.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function ro(){return Ce((t,n)=>{let e=null;t._refCount++;let i=ve(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){e=null;return}let r=t._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}var oo=class extends oe{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,qd(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Me;let e=this.getSubject();n.add(this.source.subscribe(ve(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Me.EMPTY)}return n}refCount(){return ro()(this)}};var so={schedule(t){let n=requestAnimationFrame,e=cancelAnimationFrame,{delegate:i}=so;i&&(n=i.requestAnimationFrame,e=i.cancelAnimationFrame);let r=n(o=>{e=void 0,t(o)});return new Me(()=>e?.(r))},requestAnimationFrame(...t){let{delegate:n}=so;return(n?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){let{delegate:n}=so;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};var d0=Jr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=(()=>{class t extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new _l(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new d0}next(e){to(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){to(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){to(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:o}=this;return i||r?Hd:(this.currentObservers=null,o.push(e),new Me(()=>{this.currentObservers=null,ir(o,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){let e=new oe;return e.source=this,e}}return t.create=(n,e)=>new _l(n,e),t})(),_l=class extends ne{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,n)}error(n){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,n)}complete(){var n,e;(e=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||e===void 0||e.call(n)}_subscribe(n){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(n))!==null&&i!==void 0?i:Hd}};var Le=class extends ne{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){let{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}};var Kd={now(){return(Kd.delegate||Date).now()},delegate:void 0};var yl=class extends Me{constructor(n,e){super()}schedule(n,e=0){return this}};var bs={setInterval(t,n,...e){let{delegate:i}=bs;return i?.setInterval?i.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){let{delegate:n}=bs;return(n?.clearInterval||clearInterval)(t)},delegate:void 0};var ao=class extends yl{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var i;if(this.closed)return this;this.state=n;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(n,e,i=0){return bs.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&bs.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(n,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let i=!1,r;try{this.work(n)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,ir(i,this),n!=null&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}};var lo=class t{constructor(n,e=t.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}};lo.now=Kd.now;var co=class extends lo{constructor(n,e=lo.now){super(n,e),this.actions=[],this._active=!1}flush(n){let{actions:e}=this;if(this._active){e.push(n);return}let i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}};var Is=new co(ao),f0=Is;var Sl=class extends ao{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return i!==null&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n._scheduled||(n._scheduled=so.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,e,i=0){var r;if(i!=null?i>0:this.delay>0)return super.recycleAsyncId(n,e,i);let{actions:o}=n;e!=null&&e===n._scheduled&&((r=o[o.length-1])===null||r===void 0?void 0:r.id)!==e&&(so.cancelAnimationFrame(e),n._scheduled=void 0)}};var Cl=class extends co{flush(n){this._active=!0;let e;n?e=n.id:(e=this._scheduled,this._scheduled=void 0);let{actions:i}=this,r;n=n||i.shift();do if(r=n.execute(n.state,n.delay))break;while((n=i[0])&&n.id===e&&i.shift());if(this._active=!1,r){for(;(n=i[0])&&n.id===e&&i.shift();)n.unsubscribe();throw r}}};var El=new Cl(Sl);var bt=new oe(t=>t.complete());function wl(t){return t&&fe(t.schedule)}function Zd(t){return t[t.length-1]}function Dl(t){return fe(Zd(t))?t.pop():void 0}function Vn(t){return wl(Zd(t))?t.pop():void 0}function h0(t,n){return typeof Zd(t)=="number"?t.pop():n}function g0(t,n,e,i){function r(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(u){try{c(i.next(u))}catch(d){a(d)}}function l(u){try{c(i.throw(u))}catch(d){a(d)}}function c(u){u.done?o(u.value):r(u.value).then(s,l)}c((i=i.apply(t,n||[])).next())})}function p0(t){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function ar(t){return this instanceof ar?(this.v=t,this):new ar(t)}function m0(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(t,n||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(f){return function(v){return Promise.resolve(v).then(f,d)}}function s(f,v){i[f]&&(r[f]=function(T){return new Promise(function(b,M){o.push([f,T,b,M])>1||l(f,T)})},v&&(r[f]=v(r[f])))}function l(f,v){try{c(i[f](v))}catch(T){_(o[0][3],T)}}function c(f){f.value instanceof ar?Promise.resolve(f.value.v).then(u,d):_(o[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function _(f,v){f(v),o.shift(),o.length&&l(o[0][0],o[0][1])}}function v0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],e;return n?n.call(t):(t=typeof p0=="function"?p0(t):t[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=t[o]&&function(a){return new Promise(function(s,l){a=t[o](a),r(s,l,a.done,a.value)})}}function r(o,a,s,l){Promise.resolve(l).then(function(c){o({value:c,done:s})},a)}}var bl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Il(t){return fe(t?.then)}function Tl(t){return fe(t[io])}function Ml(t){return Symbol.asyncIterator&&fe(t?.[Symbol.asyncIterator])}function xl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function nD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Rl=nD();function Al(t){return fe(t?.[Rl])}function Pl(t){return m0(this,arguments,function*(){let e=t.getReader();try{for(;;){let{value:i,done:r}=yield ar(e.read());if(r)return yield ar(void 0);yield yield ar(i)}}finally{e.releaseLock()}})}function Nl(t){return fe(t?.getReader)}function Ye(t){if(t instanceof oe)return t;if(t!=null){if(Tl(t))return iD(t);if(bl(t))return rD(t);if(Il(t))return oD(t);if(Ml(t))return _0(t);if(Al(t))return sD(t);if(Nl(t))return aD(t)}throw xl(t)}function iD(t){return new oe(n=>{let e=t[io]();if(fe(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function rD(t){return new oe(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}function oD(t){return new oe(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,ml)})}function sD(t){return new oe(n=>{for(let e of t)if(n.next(e),n.closed)return;n.complete()})}function _0(t){return new oe(n=>{lD(t,n).catch(e=>n.error(e))})}function aD(t){return _0(Pl(t))}function lD(t,n){var e,i,r,o;return g0(this,void 0,void 0,function*(){try{for(e=v0(t);i=yield e.next(),!i.done;){let a=i.value;if(n.next(a),n.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}n.complete()})}function Ft(t,n,e,i=0,r=!1){let o=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function Ol(t,n=0){return Ce((e,i)=>{e.subscribe(ve(i,r=>Ft(i,t,()=>i.next(r),n),()=>Ft(i,t,()=>i.complete(),n),r=>Ft(i,t,()=>i.error(r),n)))})}function kl(t,n=0){return Ce((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function y0(t,n){return Ye(t).pipe(kl(n),Ol(n))}function S0(t,n){return Ye(t).pipe(kl(n),Ol(n))}function C0(t,n){return new oe(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}function E0(t,n){return new oe(e=>{let i;return Ft(e,n,()=>{i=t[Rl](),Ft(e,n,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(a){e.error(a);return}o?e.complete():e.next(r)},0,!0)}),()=>fe(i?.return)&&i.return()})}function Ll(t,n){if(!t)throw new Error("Iterable cannot be null");return new oe(e=>{Ft(e,n,()=>{let i=t[Symbol.asyncIterator]();Ft(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function w0(t,n){return Ll(Pl(t),n)}function D0(t,n){if(t!=null){if(Tl(t))return y0(t,n);if(bl(t))return C0(t,n);if(Il(t))return S0(t,n);if(Ml(t))return Ll(t,n);if(Al(t))return E0(t,n);if(Nl(t))return w0(t,n)}throw xl(t)}function je(t,n){return n?D0(t,n):Ye(t)}function te(...t){let n=Vn(t);return je(t,n)}function uo(t,n){let e=fe(t)?t:()=>t,i=r=>r.error(e());return new oe(n?r=>n.schedule(i,0,r):i)}function Fl(t){return!!t&&(t instanceof oe||fe(t.lift)&&fe(t.subscribe))}var ai=Jr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function b0(t){return t instanceof Date&&!isNaN(t)}function ie(t,n){return Ce((e,i)=>{let r=0;e.subscribe(ve(i,o=>{i.next(t.call(n,o,r++))}))})}var{isArray:cD}=Array;function uD(t,n){return cD(n)?t(...n):t(n)}function Vl(t){return ie(n=>uD(t,n))}var{isArray:dD}=Array,{getPrototypeOf:fD,prototype:hD,keys:pD}=Object;function jl(t){if(t.length===1){let n=t[0];if(dD(n))return{args:n,keys:null};if(gD(n)){let e=pD(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}function gD(t){return t&&typeof t=="object"&&fD(t)===hD}function Hl(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}function Ts(...t){let n=Vn(t),e=Dl(t),{args:i,keys:r}=jl(t);if(i.length===0)return je([],n);let o=new oe(mD(i,n,r?a=>Hl(r,a):zt));return e?o.pipe(Vl(e)):o}function mD(t,n,e=zt){return i=>{I0(n,()=>{let{length:r}=t,o=new Array(r),a=r,s=r;for(let l=0;l<r;l++)I0(n,()=>{let c=je(t[l],n),u=!1;c.subscribe(ve(i,d=>{o[l]=d,u||(u=!0,s--),s||i.next(e(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}function I0(t,n,e){t?Ft(e,t,n):n()}function T0(t,n,e,i,r,o,a,s){let l=[],c=0,u=0,d=!1,_=()=>{d&&!l.length&&!c&&n.complete()},f=T=>c<i?v(T):l.push(T),v=T=>{o&&n.next(T),c++;let b=!1;Ye(e(T,u++)).subscribe(ve(n,M=>{r?.(M),o?f(M):n.next(M)},()=>{b=!0},void 0,()=>{if(b)try{for(c--;l.length&&c<i;){let M=l.shift();a?Ft(n,a,()=>v(M)):v(M)}_()}catch(M){n.error(M)}}))};return t.subscribe(ve(n,f,()=>{d=!0,_()})),()=>{s?.()}}function et(t,n,e=1/0){return fe(n)?et((i,r)=>ie((o,a)=>n(i,o,r,a))(Ye(t(i,r))),e):(typeof n=="number"&&(e=n),Ce((i,r)=>T0(i,r,t,e)))}function Mi(t=1/0){return et(zt,t)}function M0(){return Mi(1)}function fo(...t){return M0()(je(t,Vn(t)))}function Ms(t){return new oe(n=>{Ye(t()).subscribe(n)})}function xs(...t){let n=Dl(t),{args:e,keys:i}=jl(t),r=new oe(o=>{let{length:a}=e;if(!a){o.complete();return}let s=new Array(a),l=a,c=a;for(let u=0;u<a;u++){let d=!1;Ye(e[u]).subscribe(ve(o,_=>{d||(d=!0,c--),s[u]=_},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(i?Hl(i,s):s),o.complete())}))}});return n?r.pipe(Vl(n)):r}function Bl(t=0,n,e=f0){let i=-1;return n!=null&&(wl(n)?e=n:i=n),new oe(r=>{let o=b0(t)?+t-e.now():t;o<0&&(o=0);let a=0;return e.schedule(function(){r.closed||(r.next(a++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Qd(t=0,n=Is){return t<0&&(t=0),Bl(t,t,n)}function Rs(...t){let n=Vn(t),e=h0(t,1/0),i=t;return i.length?i.length===1?Ye(i[0]):Mi(e)(je(i,n)):bt}var li=new oe(rr);function tt(t,n){return Ce((e,i)=>{let r=0;e.subscribe(ve(i,o=>t.call(n,o,r++)&&i.next(o)))})}function x0(t){return Ce((n,e)=>{let i=!1,r=null,o=null,a=!1,s=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let c=r;r=null,e.next(c)}a&&e.complete()},l=()=>{o=null,a&&e.complete()};n.subscribe(ve(e,c=>{i=!0,r=c,o||Ye(t(c)).subscribe(o=ve(e,s,l))},()=>{a=!0,(!i||!o||o.closed)&&e.complete()}))})}function Ul(t,n=Is){return x0(()=>Bl(t,n))}function ci(t){return Ce((n,e)=>{let i=null,r=!1,o;i=n.subscribe(ve(e,void 0,void 0,a=>{o=Ye(t(a,ci(t)(n))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function R0(t,n,e,i,r){return(o,a)=>{let s=e,l=n,c=0;o.subscribe(ve(a,u=>{let d=c++;l=s?t(l,u,d):(s=!0,u),i&&a.next(l)},r&&(()=>{s&&a.next(l),a.complete()})))}}function jn(t,n){return fe(n)?et(t,n,1):et(t,1)}function xi(t){return Ce((n,e)=>{let i=!1;n.subscribe(ve(e,r=>{i=!0,e.next(r)},()=>{i||e.next(t),e.complete()}))})}function vt(t){return t<=0?()=>bt:Ce((n,e)=>{let i=0;n.subscribe(ve(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}function $l(t=vD){return Ce((n,e)=>{let i=!1;n.subscribe(ve(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(t())))})}function vD(){return new ai}function Ri(t){return Ce((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}function ui(t,n){let e=arguments.length>=2;return i=>i.pipe(t?tt((r,o)=>t(r,o,i)):zt,vt(1),e?xi(n):$l(()=>new ai))}function ho(t){return t<=0?()=>bt:Ce((n,e)=>{let i=[];n.subscribe(ve(e,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function Xd(t,n){let e=arguments.length>=2;return i=>i.pipe(t?tt((r,o)=>t(r,o,i)):zt,ho(1),e?xi(n):$l(()=>new ai))}function Jd(t,n){return Ce(R0(t,n,arguments.length>=2,!0))}function lr(...t){let n=Vn(t);return Ce((e,i)=>{(n?fo(t,e,n):fo(t,e)).subscribe(i)})}function Ue(t,n){return Ce((e,i)=>{let r=null,o=0,a=!1,s=()=>a&&!r&&i.complete();e.subscribe(ve(i,l=>{r?.unsubscribe();let c=0,u=o++;Ye(t(l,u)).subscribe(r=ve(i,d=>i.next(n?n(l,d,u,c++):d),()=>{r=null,s()}))},()=>{a=!0,s()}))})}function Hn(t){return Ce((n,e)=>{Ye(t).subscribe(ve(e,()=>e.complete(),rr)),!e.closed&&n.subscribe(e)})}function Xe(t,n,e){let i=fe(t)||n||e?{next:t,error:n,complete:e}:t;return i?Ce((r,o)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let s=!0;r.subscribe(ve(o,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),o.next(l)},()=>{var l;s=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var c;s=!1,(c=i.error)===null||c===void 0||c.call(i,l),o.error(l)},()=>{var l,c;s&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):zt}function A0(t){let n=me(null);try{return t()}finally{me(n)}}var Yl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(n,e){super(yn(n,e)),this.code=n}};function _D(t){return`NG0${Math.abs(t)}`}function yn(t,n){return`${_D(t)}${n?": "+n:""}`}var it=globalThis;function Ae(t){for(let n in t)if(t[n]===Ae)return n;throw Error("")}function O0(t,n){for(let e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function fi(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(fi).join(", ")}]`;if(t==null)return""+t;let n=t.overriddenName||t.name;if(n)return`${n}`;let e=t.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i>=0?e.slice(0,i):e}function hf(t,n){return t?n?`${t} ${n}`:t:n||""}var yD=Ae({__forward_ref__:Ae});function qt(t){return t.__forward_ref__=qt,t.toString=function(){return fi(this())},t}function _t(t){return pf(t)?t():t}function pf(t){return typeof t=="function"&&t.hasOwnProperty(yD)&&t.__forward_ref__===qt}function k0(t,n){t==null&&gf(n,t,null,"!=")}function gf(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(i==null?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}function k(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Be(t){return{providers:t.providers||[],imports:t.imports||[]}}function ks(t){return SD(t,Kl)}function mf(t){return ks(t)!==null}function SD(t,n){return t.hasOwnProperty(n)&&t[n]||null}function CD(t){let n=t?.[Kl]??null;return n||null}function tf(t){return t&&t.hasOwnProperty(zl)?t[zl]:null}var Kl=Ae({\u0275prov:Ae}),zl=Ae({\u0275inj:Ae}),z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(n,e){this._desc=n,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=k({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function vf(t){return t&&!!t.\u0275providers}var _f=Ae({\u0275cmp:Ae}),yf=Ae({\u0275dir:Ae}),Sf=Ae({\u0275pipe:Ae}),Cf=Ae({\u0275mod:Ae}),Ns=Ae({\u0275fac:Ae}),hr=Ae({__NG_ELEMENT_ID__:Ae}),P0=Ae({__NG_ENV_ID__:Ae});function en(t){return typeof t=="string"?t:t==null?"":String(t)}function Wl(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():en(t)}var Ef=Ae({ngErrorCode:Ae}),L0=Ae({ngErrorMessage:Ae}),Ps=Ae({ngTokenPath:Ae});function wf(t,n){return F0("",-200,n)}function Zl(t,n){throw new j(-201,!1)}function ED(t,n){t[Ps]??=[];let e=t[Ps],i;typeof n=="object"&&"multi"in n&&n?.multi===!0?(k0(n.provide,"Token with multi: true should have a provide property"),i=Wl(n.provide)):i=Wl(n),e[0]!==i&&t[Ps].unshift(i)}function wD(t,n){let e=t[Ps],i=t[Ef],r=t[L0]||t.message;return t.message=bD(r,i,e,n),t}function F0(t,n,e){let i=new j(n,t);return i[Ef]=n,i[L0]=t,e&&(i[Ps]=e),i}function DD(t){return t[Ef]}function bD(t,n,e=[],i=null){let r="";e&&e.length>1&&(r=` Path: ${e.join(" -> ")}.`);let o=i?` Source: ${i}.`:"";return yn(n,`${t}${o}${r}`)}var nf;function V0(){return nf}function Rt(t){let n=nf;return nf=t,n}function Df(t,n,e){let i=ks(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&8)return null;if(n!==void 0)return n;Zl(t,"Injector")}var ID={},cr=ID,rf="__NG_DI_FLAG__",of=class{injector;constructor(n){this.injector=n}retrieve(n,e){let i=ur(e)||0;try{return this.injector.get(n,i&8?null:cr,i)}catch(r){if(Yr(r))return r;throw r}}};function TD(t,n=0){let e=il();if(e===void 0)throw new j(-203,!1);if(e===null)return Df(t,void 0,n);{let i=MD(n),r=e.retrieve(t,i);if(Yr(r)){if(i.optional)return null;throw r}return r}}function B(t,n=0){return(V0()||TD)(_t(t),n)}function D(t,n){return B(t,ur(n))}function ur(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function MD(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function sf(t){let n=[];for(let e=0;e<t.length;e++){let i=_t(t[e]);if(Array.isArray(i)){if(i.length===0)throw new j(900,!1);let r,o=0;for(let a=0;a<i.length;a++){let s=i[a],l=xD(s);typeof l=="number"?l===-1?r=s.token:o|=l:r=s}n.push(B(r,o))}else n.push(B(i))}return n}function bf(t,n){return t[rf]=n,t.prototype[rf]=n,t}function xD(t){return t[rf]}function Ai(t,n){let e=t.hasOwnProperty(Ns);return e?t[Ns]:null}function j0(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=n[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}function H0(t){return t.flat(Number.POSITIVE_INFINITY)}function Ql(t,n){t.forEach(e=>Array.isArray(e)?Ql(e,n):n(e))}function If(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Ls(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function B0(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(r===1)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;){let o=r-2;t[r]=t[o],r--}t[n]=e,t[n+1]=i}}function U0(t,n,e){let i=go(t,n);return i>=0?t[i|1]=e:(i=~i,B0(t,i,n,e)),i}function Xl(t,n){let e=go(t,n);if(e>=0)return t[e|1]}function go(t,n){return RD(t,n,1)}function RD(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){let o=i+(r-i>>1),a=t[o<<e];if(n===a)return o<<e;a>n?r=o:i=o+1}return~(r<<e)}var Ni={},Wt=[],pi=new z(""),Tf=new z("",-1),Mf=new z(""),Os=class{get(n,e=cr){if(e===cr){let r=F0("",-201);throw r.name="\u0275NotFound",r}return e}};function xf(t){return t[Cf]||null}function Bn(t){return t[_f]||null}function Rf(t){return t[yf]||null}function $0(t){return t[Sf]||null}function gi(t){return{\u0275providers:t}}function G0(...t){return{\u0275providers:Af(!0,t),\u0275fromNgModule:!0}}function Af(t,...n){let e=[],i=new Set,r,o=a=>{e.push(a)};return Ql(n,a=>{let s=a;ql(s,o,[],i)&&(r||=[],r.push(s))}),r!==void 0&&z0(r,o),e}function z0(t,n){for(let e=0;e<t.length;e++){let{ngModule:i,providers:r}=t[e];Pf(r,o=>{n(o,i)})}}function ql(t,n,e,i){if(t=_t(t),!t)return!1;let r=null,o=tf(t),a=!o&&Bn(t);if(!o&&!a){let l=t.ngModule;if(o=tf(l),o)r=l;else return!1}else{if(a&&!a.standalone)return!1;r=t}let s=i.has(r);if(a){if(s)return!1;if(i.add(r),a.dependencies){let l=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let c of l)ql(c,n,e,i)}}else if(o){if(o.imports!=null&&!s){i.add(r);let c;try{Ql(o.imports,u=>{ql(u,n,e,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&z0(c,n)}if(!s){let c=Ai(r)||(()=>new r);n({provide:r,useFactory:c,deps:Wt},r),n({provide:Mf,useValue:r,multi:!0},r),n({provide:pi,useValue:()=>B(r),multi:!0},r)}let l=o.providers;if(l!=null&&!s){let c=t;Pf(l,u=>{n(u,c)})}}else return!1;return r!==t&&t.providers!==void 0}function Pf(t,n){for(let e of t)vf(e)&&(e=e.\u0275providers),Array.isArray(e)?Pf(e,n):n(e)}var AD=Ae({provide:String,useValue:Ae});function W0(t){return t!==null&&typeof t=="object"&&AD in t}function PD(t){return!!(t&&t.useExisting)}function ND(t){return!!(t&&t.useFactory)}function dr(t){return typeof t=="function"}function q0(t){return!!t.useClass}var Fs=new z(""),Gl={},N0={},ef;function mo(){return ef===void 0&&(ef=new Os),ef}var Ze=class{},fr=class extends Ze{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(n,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,lf(n,a=>this.processProvider(a)),this.records.set(Tf,po(void 0,this)),r.has("environment")&&this.records.set(Ze,po(void 0,this));let o=this.records.get(Fs);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Mf,Wt,{self:!0}))}retrieve(n,e){let i=ur(e)||0;try{return this.get(n,cr,i)}catch(r){if(Yr(r))return r;throw r}}destroy(){As(this),this._destroyed=!0;let n=me(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(n)}}onDestroy(n){return As(this),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){As(this);let e=Fn(this),i=Rt(void 0),r;try{return n()}finally{Fn(e),Rt(i)}}get(n,e=cr,i){if(As(this),n.hasOwnProperty(P0))return n[P0](this);let r=ur(i),o,a=Fn(this),s=Rt(void 0);try{if(!(r&4)){let c=this.records.get(n);if(c===void 0){let u=VD(n)&&ks(n);u&&this.injectableDefInScope(u)?c=po(af(n),Gl):c=null,this.records.set(n,c)}if(c!=null)return this.hydrate(n,c,r)}let l=r&2?mo():this.parent;return e=r&8&&e===cr?null:e,l.get(n,e)}catch(l){let c=DD(l);throw c===-200||c===-201?new j(c,null):l}finally{Rt(s),Fn(a)}}resolveInjectorInitializers(){let n=me(null),e=Fn(this),i=Rt(void 0),r;try{let o=this.get(pi,Wt,{self:!0});for(let a of o)a()}finally{Fn(e),Rt(i),me(n)}}toString(){let n=[],e=this.records;for(let i of e.keys())n.push(fi(i));return`R3Injector[${n.join(", ")}]`}processProvider(n){n=_t(n);let e=dr(n)?n:_t(n&&n.provide),i=kD(n);if(!dr(n)&&n.multi===!0){let r=this.records.get(e);r||(r=po(void 0,Gl,!0),r.factory=()=>sf(r.multi),this.records.set(e,r)),e=n,r.multi.push(n)}this.records.set(e,i)}hydrate(n,e,i){let r=me(null);try{if(e.value===N0)throw wf(fi(n));return e.value===Gl&&(e.value=N0,e.value=e.factory(void 0,i)),typeof e.value=="object"&&e.value&&FD(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{me(r)}}injectableDefInScope(n){if(!n.providedIn)return!1;let e=_t(n.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){let e=this._onDestroyHooks.indexOf(n);e!==-1&&this._onDestroyHooks.splice(e,1)}};function af(t){let n=ks(t),e=n!==null?n.factory:Ai(t);if(e!==null)return e;if(t instanceof z)throw new j(204,!1);if(t instanceof Function)return OD(t);throw new j(204,!1)}function OD(t){if(t.length>0)throw new j(204,!1);let e=CD(t);return e!==null?()=>e.factory(t):()=>new t}function kD(t){if(W0(t))return po(void 0,t.useValue);{let n=Nf(t);return po(n,Gl)}}function Nf(t,n,e){let i;if(dr(t)){let r=_t(t);return Ai(r)||af(r)}else if(W0(t))i=()=>_t(t.useValue);else if(ND(t))i=()=>t.useFactory(...sf(t.deps||[]));else if(PD(t))i=(r,o)=>B(_t(t.useExisting),o!==void 0&&o&8?8:void 0);else{let r=_t(t&&(t.useClass||t.provide));if(LD(t))i=()=>new r(...sf(t.deps));else return Ai(r)||af(r)}return i}function As(t){if(t.destroyed)throw new j(205,!1)}function po(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function LD(t){return!!t.deps}function FD(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function VD(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function lf(t,n){for(let e of t)Array.isArray(e)?lf(e,n):e&&vf(e)?lf(e.\u0275providers,n):n(e)}function dt(t,n){let e;t instanceof fr?(As(t),e=t):e=new of(t);let i,r=Fn(e),o=Rt(void 0);try{return n()}finally{Fn(r),Rt(o)}}function Of(){return V0()!==void 0||il()!=null}var Sn=0,ae=1,de=2,ut=3,tn=4,nn=5,Vs=6,vo=7,It=8,pr=9,Un=10,Ke=11,_o=12,kf=13,gr=14,rn=15,Oi=16,mr=17,$n=18,js=19,Lf=20,di=21,Jl=22,Hs=23,Yt=24,vr=25,ft=26,Y0=1;var ki=7,Bs=8,_r=9,At=10;function Gn(t){return Array.isArray(t)&&typeof t[Y0]=="object"}function Cn(t){return Array.isArray(t)&&t[Y0]===!0}function Ff(t){return(t.flags&4)!==0}function Li(t){return t.componentOffset>-1}function yo(t){return(t.flags&1)===1}function zn(t){return!!t.template}function So(t){return(t[de]&512)!==0}function yr(t){return(t[de]&256)===256}var K0="svg",Z0="math";function on(t){for(;Array.isArray(t);)t=t[Sn];return t}function Vf(t,n){return on(n[t])}function En(t,n){return on(n[t.index])}function ec(t,n){return t.data[n]}function jf(t,n){return t[n]}function Hf(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}function sn(t,n){let e=n[t];return Gn(e)?e:e[Sn]}function Q0(t){return(t[de]&4)===4}function tc(t){return(t[de]&128)===128}function X0(t){return Cn(t[ut])}function Sr(t,n){return n==null?null:t[n]}function Bf(t){t[mr]=0}function Uf(t){t[de]&1024||(t[de]|=1024,tc(t)&&Co(t))}function J0(t,n){for(;t>0;)n=n[gr],t--;return n}function Us(t){return!!(t[de]&9216||t[Yt]?.dirty)}function nc(t){t[Un].changeDetectionScheduler?.notify(8),t[de]&64&&(t[de]|=1024),Us(t)&&Co(t)}function Co(t){t[Un].changeDetectionScheduler?.notify(0);let n=Pi(t);for(;n!==null&&!(n[de]&8192||(n[de]|=8192,!tc(n)));)n=Pi(n)}function $f(t,n){if(yr(t))throw new j(911,!1);t[di]===null&&(t[di]=[]),t[di].push(n)}function ev(t,n){if(t[di]===null)return;let e=t[di].indexOf(n);e!==-1&&t[di].splice(e,1)}function Pi(t){let n=t[ut];return Cn(n)?n[ut]:n}function Gf(t){return t[vo]??=[]}function zf(t){return t.cleanup??=[]}function tv(t,n,e,i){let r=Gf(n);r.push(e),t.firstCreatePass&&zf(t).push(i,r.length-1)}var _e={lFrame:hv(null),bindingsEnabled:!0,skipHydrationRootTNode:null},$s=function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t}($s||{}),jD=0,cf=!1;function nv(){return _e.lFrame.elementDepthCount}function iv(){_e.lFrame.elementDepthCount++}function Wf(){_e.lFrame.elementDepthCount--}function ic(){return _e.bindingsEnabled}function rv(){return _e.skipHydrationRootTNode!==null}function qf(t){return _e.skipHydrationRootTNode===t}function Yf(){_e.skipHydrationRootTNode=null}function he(){return _e.lFrame.lView}function ht(){return _e.lFrame.tView}function U(t){return _e.lFrame.contextLView=t,t[It]}function $(t){return _e.lFrame.contextLView=null,t}function yt(){let t=Kf();for(;t!==null&&t.type===64;)t=t.parent;return t}function Kf(){return _e.lFrame.currentTNode}function ov(){let t=_e.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function Eo(t,n){let e=_e.lFrame;e.currentTNode=t,e.isParent=n}function Zf(){return _e.lFrame.isParent}function sv(){_e.lFrame.isParent=!1}function Qf(t){gf("Must never be called in production mode"),jD=t}function Xf(){return cf}function Jf(t){let n=cf;return cf=t,n}function wo(){let t=_e.lFrame,n=t.bindingRootIndex;return n===-1&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function eh(){return _e.lFrame.bindingIndex}function av(t){return _e.lFrame.bindingIndex=t}function Cr(){return _e.lFrame.bindingIndex++}function rc(t){let n=_e.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function lv(){return _e.lFrame.inI18n}function cv(t,n){let e=_e.lFrame;e.bindingIndex=e.bindingRootIndex=t,oc(n)}function uv(){return _e.lFrame.currentDirectiveIndex}function oc(t){_e.lFrame.currentDirectiveIndex=t}function dv(t){let n=_e.lFrame.currentDirectiveIndex;return n===-1?null:t[n]}function th(){return _e.lFrame.currentQueryIndex}function sc(t){_e.lFrame.currentQueryIndex=t}function HD(t){let n=t[ae];return n.type===2?n.declTNode:n.type===1?t[nn]:null}function nh(t,n,e){if(e&4){let r=n,o=t;for(;r=r.parent,r===null&&!(e&1);)if(r=HD(o),r===null||(o=o[gr],r.type&10))break;if(r===null)return!1;n=r,t=o}let i=_e.lFrame=fv();return i.currentTNode=n,i.lView=t,!0}function ac(t){let n=fv(),e=t[ae];_e.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function fv(){let t=_e.lFrame,n=t===null?null:t.child;return n===null?hv(t):n}function hv(t){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=n),n}function pv(){let t=_e.lFrame;return _e.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ih=pv;function lc(){let t=pv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function gv(t){return(_e.lFrame.contextLView=J0(t,_e.lFrame.contextLView))[It]}function mi(){return _e.lFrame.selectedIndex}function Fi(t){_e.lFrame.selectedIndex=t}function Gs(){let t=_e.lFrame;return ec(t.tView,t.selectedIndex)}function mv(){return _e.lFrame.currentNamespace}var vv=!0;function cc(){return vv}function zs(t){vv=t}function uf(t,n=null,e=null,i){let r=rh(t,n,e,i);return r.resolveInjectorInitializers(),r}function rh(t,n=null,e=null,i,r=new Set){let o=[e||Wt,G0(t)];return i=i||(typeof t=="object"?void 0:fi(t)),new fr(o,n||mo(),i||null,r)}var He=class t{static THROW_IF_NOT_FOUND=cr;static NULL=new Os;static create(n,e){if(Array.isArray(n))return uf({name:""},e,n,"");{let i=n.name??"";return uf({name:i},n.parent,n.providers,i)}}static \u0275prov=k({token:t,providedIn:"any",factory:()=>B(Tf)});static __NG_ELEMENT_ID__=-1},Pe=new z(""),an=(()=>{class t{static __NG_ELEMENT_ID__=BD;static __NG_ENV_ID__=e=>e}return t})(),df=class extends an{_lView;constructor(n){super(),this._lView=n}get destroyed(){return yr(this._lView)}onDestroy(n){let e=this._lView;return $f(e,n),()=>ev(e,n)}};function BD(){return new df(he())}var _n=class{_console=console;handleError(n){this._console.error("ERROR",n)}},Kt=new z("",{providedIn:"root",factory:()=>{let t=D(Ze),n;return e=>{t.destroyed&&!n?setTimeout(()=>{throw e}):(n??=t.get(_n),n.handleError(e))}}}),_v={provide:pi,useValue:()=>void D(_n),multi:!0};function oh(t){return typeof t=="function"&&t[Dt]!==void 0}function Vt(t,n){let[e,i,r]=Vd(t,n?.equal),o=e,a=o[Dt];return o.set=i,o.update=r,o.asReadonly=yv.bind(o),o}function yv(){let t=this[Dt];if(t.readonlyFn===void 0){let n=()=>this();n[Dt]=t,t.readonlyFn=n}return t.readonlyFn}function sh(t){return oh(t)&&typeof t.set=="function"}var hi=class{},Ws=new z("",{providedIn:"root",factory:()=>!1});var ah=new z(""),lh=new z("");var uc=(()=>{class t{view;node;constructor(e,i){this.view=e,this.node=i}static __NG_ELEMENT_ID__=UD}return t})();function UD(){return new uc(he(),yt())}var Wn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Le(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new oe(e=>{e.next(!1),e.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=k({token:t,providedIn:"root",factory:()=>new t})}return t})(),qs=(()=>{class t{internalPendingTasks=D(Wn);scheduler=D(hi);errorHandler=D(Kt);add(){let e=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(e)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(e))}}run(e){let i=this.add();e().catch(this.errorHandler).finally(i)}static \u0275prov=k({token:t,providedIn:"root",factory:()=>new t})}return t})();function Ys(...t){}var ch=(()=>{class t{static \u0275prov=k({token:t,providedIn:"root",factory:()=>new ff})}return t})(),ff=class{dirtyEffectCount=0;queues=new Map;add(n){this.enqueue(n),this.schedule(n)}schedule(n){n.dirty&&this.dirtyEffectCount++}remove(n){let e=n.zone,i=this.queues.get(e);i.has(n)&&(i.delete(n),n.dirty&&this.dirtyEffectCount--)}enqueue(n){let e=n.zone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(n)||i.add(n)}flush(){for(;this.dirtyEffectCount>0;){let n=!1;for(let[e,i]of this.queues)e===null?n||=this.flushQueue(i):n||=e.run(()=>this.flushQueue(i));n||(this.dirtyEffectCount=0)}}flushQueue(n){let e=!1;for(let i of n)i.dirty&&(this.dirtyEffectCount--,e=!0,i.run());return e}};function xo(t){return{toString:t}.toString()}var dc="__parameters__";function ZD(t){return function(...e){if(t){let i=t(...e);for(let r in i)this[r]=i[r]}}}function e_(t,n,e){return xo(()=>{let i=ZD(n);function r(...o){if(this instanceof r)return i.apply(this,o),this;let a=new r(...o);return s.annotation=a,s;function s(l,c,u){let d=l.hasOwnProperty(dc)?l[dc]:Object.defineProperty(l,dc,{value:[]})[dc];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(a),l}}return r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var ia=bf(e_("Optional"),8);var ep=bf(e_("SkipSelf"),4);function t_(t){let n=it.ng;if(n&&n.\u0275compilerFacade)return n.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function QD(t){return typeof t=="function"}var Cc=class{previousValue;currentValue;firstChange;constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function n_(t,n,e,i){n!==null?n.applyValueToInputSignal(n,i):t[e]=i}var ln=(()=>{let t=()=>i_;return t.ngInherit=!0,t})();function i_(t){return t.type.prototype.ngOnChanges&&(t.setInput=JD),XD}function XD(){let t=o_(this),n=t?.current;if(n){let e=t.previous;if(e===Ni)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function JD(t,n,e,i,r){let o=this.declaredInputs[i],a=o_(t)||eb(t,{previous:Ni,current:null}),s=a.current||(a.current={}),l=a.previous,c=l[o];s[o]=new Cc(c&&c.currentValue,e,l===Ni),n_(t,n,r,e)}var r_="__ngSimpleChanges__";function o_(t){return t[r_]||null}function eb(t,n){return t[r_]=n}var Sv=[];var Fe=function(t,n=null,e){for(let i=0;i<Sv.length;i++){let r=Sv[i];r(t,n,e)}};function tb(t,n,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=n.type.prototype;if(i){let a=i_(n);(e.preOrderHooks??=[]).push(t,a),(e.preOrderCheckHooks??=[]).push(t,a)}r&&(e.preOrderHooks??=[]).push(0-t,r),o&&((e.preOrderHooks??=[]).push(t,o),(e.preOrderCheckHooks??=[]).push(t,o))}function s_(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){let o=t.data[e].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;a&&(t.contentHooks??=[]).push(-e,a),s&&((t.contentHooks??=[]).push(e,s),(t.contentCheckHooks??=[]).push(e,s)),l&&(t.viewHooks??=[]).push(-e,l),c&&((t.viewHooks??=[]).push(e,c),(t.viewCheckHooks??=[]).push(e,c)),u!=null&&(t.destroyHooks??=[]).push(e,u)}}function vc(t,n,e){a_(t,n,3,e)}function _c(t,n,e,i){(t[de]&3)===e&&a_(t,n,e,i)}function uh(t,n){let e=t[de];(e&3)===n&&(e&=16383,e+=1,t[de]=e)}function a_(t,n,e,i){let r=i!==void 0?t[mr]&65535:0,o=i??-1,a=n.length-1,s=0;for(let l=r;l<a;l++)if(typeof n[l+1]=="number"){if(s=n[l],i!=null&&s>=i)break}else n[l]<0&&(t[mr]+=65536),(s<o||o==-1)&&(nb(t,e,n,l),t[mr]=(t[mr]&4294901760)+l+2),l++}function Cv(t,n){Fe(4,t,n);let e=me(null);try{n.call(t)}finally{me(e),Fe(5,t,n)}}function nb(t,n,e,i){let r=e[i]<0,o=e[i+1],a=r?-e[i]:e[i],s=t[a];r?t[de]>>14<t[mr]>>16&&(t[de]&3)===n&&(t[de]+=16384,Cv(s,o)):Cv(s,o)}var bo=-1,Dr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(n,e,i,r){this.factory=n,this.name=r,this.canSeeViewProviders=e,this.injectImpl=i}};function ib(t){return(t.flags&8)!==0}function rb(t){return(t.flags&16)!==0}function ob(t,n,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let o=e[i++],a=e[i++],s=e[i++];t.setAttribute(n,a,s,o)}else{let o=r,a=e[++i];ab(o)?t.setProperty(n,o,a):t.setAttribute(n,o,a),i++}}return i}function sb(t){return t===3||t===4||t===6}function ab(t){return t.charCodeAt(0)===64}function Io(t,n){if(!(n===null||n.length===0))if(t===null||t.length===0)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){let r=n[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?Ev(t,e,r,null,n[++i]):Ev(t,e,r,null,null))}}return t}function Ev(t,n,e,i,r){let o=0,a=t.length;if(n===-1)a=-1;else for(;o<t.length;){let s=t[o++];if(typeof s=="number"){if(s===n){a=-1;break}else if(s>n){a=o-1;break}}}for(;o<t.length;){let s=t[o];if(typeof s=="number")break;if(s===e){r!==null&&(t[o+1]=r);return}o++,r!==null&&o++}a!==-1&&(t.splice(a,0,n),o=a+1),t.splice(o++,0,e),r!==null&&t.splice(o++,0,r)}function l_(t){return t!==bo}function Ec(t){return t&32767}function lb(t){return t>>16}function wc(t,n){let e=lb(t),i=n;for(;e>0;)i=i[gr],e--;return i}var Ch=!0;function Dc(t){let n=Ch;return Ch=t,n}var cb=256,c_=cb-1,u_=5,ub=0,qn={};function db(t,n,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(hr)&&(i=e[hr]),i==null&&(i=e[hr]=ub++);let r=i&c_,o=1<<r;n.data[t+(r>>u_)]|=o}function bc(t,n){let e=d_(t,n);if(e!==-1)return e;let i=n[ae];i.firstCreatePass&&(t.injectorIndex=n.length,dh(i.data,t),dh(n,null),dh(i.blueprint,null));let r=tp(t,n),o=t.injectorIndex;if(l_(r)){let a=Ec(r),s=wc(r,n),l=s[ae].data;for(let c=0;c<8;c++)n[o+c]=s[a+c]|l[a+c]}return n[o+8]=r,o}function dh(t,n){t.push(0,0,0,0,0,0,0,0,n)}function d_(t,n){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||n[t.injectorIndex+8]===null?-1:t.injectorIndex}function tp(t,n){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;r!==null;){if(i=m_(r),i===null)return bo;if(e++,r=r[gr],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return bo}function Eh(t,n,e){db(t,n,e)}function f_(t,n,e){if(e&8||t!==void 0)return t;Zl(n,"NodeInjector")}function h_(t,n,e,i){if(e&8&&i===void 0&&(i=null),(e&3)===0){let r=t[pr],o=Rt(void 0);try{return r?r.get(n,i,e&8):Df(n,i,e&8)}finally{Rt(o)}}return f_(i,n,e)}function p_(t,n,e,i=0,r){if(t!==null){if(n[de]&2048&&!(i&2)){let a=gb(t,n,e,i,qn);if(a!==qn)return a}let o=g_(t,n,e,i,qn);if(o!==qn)return o}return h_(n,e,i,r)}function g_(t,n,e,i,r){let o=hb(e);if(typeof o=="function"){if(!nh(n,t,i))return i&1?f_(r,e,i):h_(n,e,i,r);try{let a;if(a=o(i),a==null&&!(i&8))Zl(e);else return a}finally{ih()}}else if(typeof o=="number"){let a=null,s=d_(t,n),l=bo,c=i&1?n[rn][nn]:null;for((s===-1||i&4)&&(l=s===-1?tp(t,n):n[s+8],l===bo||!Dv(i,!1)?s=-1:(a=n[ae],s=Ec(l),n=wc(l,n)));s!==-1;){let u=n[ae];if(wv(o,s,u.data)){let d=fb(s,n,e,a,i,c);if(d!==qn)return d}l=n[s+8],l!==bo&&Dv(i,n[ae].data[s+8]===c)&&wv(o,s,n)?(a=u,s=Ec(l),n=wc(l,n)):s=-1}}return r}function fb(t,n,e,i,r,o){let a=n[ae],s=a.data[t+8],l=i==null?Li(s)&&Ch:i!=a&&(s.type&3)!==0,c=r&1&&o===s,u=yc(s,a,e,l,c);return u!==null?Qs(n,a,u,s,r):qn}function yc(t,n,e,i,r){let o=t.providerIndexes,a=n.data,s=o&1048575,l=t.directiveStart,c=t.directiveEnd,u=o>>20,d=i?s:s+u,_=r?s+u:c;for(let f=d;f<_;f++){let v=a[f];if(f<l&&e===v||f>=l&&v.type===e)return f}if(r){let f=a[l];if(f&&zn(f)&&f.type===e)return l}return null}function Qs(t,n,e,i,r){let o=t[e],a=n.data;if(o instanceof Dr){let s=o;if(s.resolving){let f=Wl(a[e]);throw wf(f)}let l=Dc(s.canSeeViewProviders);s.resolving=!0;let c=a[e].type||a[e],u,d=s.injectImpl?Rt(s.injectImpl):null,_=nh(t,i,0);try{o=t[e]=s.factory(void 0,r,a,t,i),n.firstCreatePass&&e>=i.directiveStart&&tb(e,a[e],n)}finally{d!==null&&Rt(d),Dc(l),s.resolving=!1,ih()}}return o}function hb(t){if(typeof t=="string")return t.charCodeAt(0)||0;let n=t.hasOwnProperty(hr)?t[hr]:void 0;return typeof n=="number"?n>=0?n&c_:pb:n}function wv(t,n,e){let i=1<<t;return!!(e[n+(t>>u_)]&i)}function Dv(t,n){return!(t&2)&&!(t&1&&n)}var wr=class{_tNode;_lView;constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return p_(this._tNode,this._lView,n,ur(i),e)}};function pb(){return new wr(yt(),he())}function yi(t){return xo(()=>{let n=t.prototype.constructor,e=n[Ns]||wh(n),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[Ns]||wh(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function wh(t){return pf(t)?()=>{let n=wh(_t(t));return n&&n()}:Ai(t)}function gb(t,n,e,i,r){let o=t,a=n;for(;o!==null&&a!==null&&a[de]&2048&&!So(a);){let s=g_(o,a,e,i|2,qn);if(s!==qn)return s;let l=o.parent;if(!l){let c=a[Lf];if(c){let u=c.get(e,qn,i);if(u!==qn)return u}l=m_(a),a=a[gr]}o=l}return r}function m_(t){let n=t[ae],e=n.type;return e===2?n.declTNode:e===1?t[nn]:null}function mb(){return Ro(yt(),he())}function Ro(t,n){return new Je(En(t,n))}var Je=(()=>{class t{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=mb}return t})();function vb(t){return t instanceof Je?t.nativeElement:t}function _b(){return this._results[Symbol.iterator]()}var Ic=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ne}constructor(n=!1){this._emitDistinctChangesOnly=n}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){this.dirty=!1;let i=H0(n);(this._changesDetected=!j0(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=_b};function v_(t){return(t.flags&128)===128}var np=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(np||{}),__=new Map,yb=0;function Sb(){return yb++}function Cb(t){__.set(t[js],t)}function Dh(t){__.delete(t[js])}var bv="__ngContext__";function To(t,n){Gn(n)?(t[bv]=n[js],Cb(n)):t[bv]=n}function y_(t){return C_(t[_o])}function S_(t){return C_(t[tn])}function C_(t){for(;t!==null&&!Cn(t);)t=t[tn];return t}var bh;function ip(t){bh=t}function rp(){if(bh!==void 0)return bh;if(typeof document<"u")return document;throw new j(210,!1)}var Ao=new z("",{providedIn:"root",factory:()=>Eb}),Eb="ng",Fc=new z(""),Hi=new z("",{providedIn:"platform",factory:()=>"unknown"});var Vc=new z("",{providedIn:"root",factory:()=>rp().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var wb="h",Db="b";var E_=!1,w_=new z("",{providedIn:"root",factory:()=>E_});var bb=(t,n,e,i)=>{};function Ib(t,n,e,i){bb(t,n,e,i)}function op(t){return(t.flags&32)===32}var Tb=()=>null;function D_(t,n,e=!1){return Tb(t,n,e)}function b_(t,n){let e=t.contentQueries;if(e!==null){let i=me(null);try{for(let r=0;r<e.length;r+=2){let o=e[r],a=e[r+1];if(a!==-1){let s=t.data[a];sc(o),s.contentQueries(2,n[a],a)}}}finally{me(i)}}}function Ih(t,n,e){sc(0);let i=me(null);try{n(t,e)}finally{me(i)}}function sp(t,n,e){if(Ff(n)){let i=me(null);try{let r=n.directiveStart,o=n.directiveEnd;for(let a=r;a<o;a++){let s=t.data[a];if(s.contentQueries){let l=e[a];s.contentQueries(1,l,a)}}}finally{me(i)}}}var vi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(vi||{}),fc;function Mb(){if(fc===void 0&&(fc=null,it.trustedTypes))try{fc=it.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return fc}function jc(t){return Mb()?.createHTML(t)||t}var hc;function xb(){if(hc===void 0&&(hc=null,it.trustedTypes))try{hc=it.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return hc}function Iv(t){return xb()?.createHTML(t)||t}var _i=class{changingThisBreaksApplicationSecurity;constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Yl})`}},Th=class extends _i{getTypeName(){return"HTML"}},Mh=class extends _i{getTypeName(){return"Style"}},xh=class extends _i{getTypeName(){return"Script"}},Rh=class extends _i{getTypeName(){return"URL"}},Ah=class extends _i{getTypeName(){return"ResourceURL"}};function In(t){return t instanceof _i?t.changingThisBreaksApplicationSecurity:t}function Si(t,n){let e=I_(t);if(e!=null&&e!==n){if(e==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${Yl})`)}return e===n}function I_(t){return t instanceof _i&&t.getTypeName()||null}function ap(t){return new Th(t)}function lp(t){return new Mh(t)}function cp(t){return new xh(t)}function up(t){return new Rh(t)}function dp(t){return new Ah(t)}function Rb(t){let n=new Nh(t);return Ab()?new Ph(n):n}var Ph=class{inertDocumentHelper;constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{let e=new window.DOMParser().parseFromString(jc(n),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(n):(e.firstChild?.remove(),e)}catch{return null}}},Nh=class{defaultDoc;inertDocument;constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){let e=this.inertDocument.createElement("template");return e.innerHTML=jc(n),e}};function Ab(){try{return!!new window.DOMParser().parseFromString(jc(""),"text/html")}catch{return!1}}var Pb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ra(t){return t=String(t),t.match(Pb)?t:"unsafe:"+t}function Ci(t){let n={};for(let e of t.split(","))n[e]=!0;return n}function oa(...t){let n={};for(let e of t)for(let i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}var T_=Ci("area,br,col,hr,img,wbr"),M_=Ci("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),x_=Ci("rp,rt"),Nb=oa(x_,M_),Ob=oa(M_,Ci("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),kb=oa(x_,Ci("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Tv=oa(T_,Ob,kb,Nb),R_=Ci("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Lb=Ci("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fb=Ci("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Vb=oa(R_,Lb,Fb),jb=Ci("script,style,template"),Oh=class{sanitizedSomething=!1;buf=[];sanitizeChildren(n){let e=n.firstChild,i=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild){r.push(e),e=Ub(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=Bb(e);if(o){e=o;break}e=r.pop()}}return this.buf.join("")}startElement(n){let e=Mv(n).toLowerCase();if(!Tv.hasOwnProperty(e))return this.sanitizedSomething=!0,!jb.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let i=n.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),a=o.name,s=a.toLowerCase();if(!Vb.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let l=o.value;R_[s]&&(l=ra(l)),this.buf.push(" ",a,'="',xv(l),'"')}return this.buf.push(">"),!0}endElement(n){let e=Mv(n).toLowerCase();Tv.hasOwnProperty(e)&&!T_.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(xv(n))}};function Hb(t,n){return(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function Bb(t){let n=t.nextSibling;if(n&&t!==n.previousSibling)throw A_(n);return n}function Ub(t){let n=t.firstChild;if(n&&Hb(t,n))throw A_(n);return n}function Mv(t){let n=t.nodeName;return typeof n=="string"?n:"FORM"}function A_(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var $b=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gb=/([^\#-~ |!])/g;function xv(t){return t.replace(/&/g,"&amp;").replace($b,function(n){let e=n.charCodeAt(0),i=n.charCodeAt(1);return"&#"+((e-55296)*1024+(i-56320)+65536)+";"}).replace(Gb,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var pc;function Hc(t,n){let e=null;try{pc=pc||Rb(t);let i=n?String(n):"";e=pc.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=e.innerHTML,e=pc.getInertBodyElement(i)}while(i!==o);let s=new Oh().sanitizeChildren(Rv(e)||e);return jc(s)}finally{if(e){let i=Rv(e)||e;for(;i.firstChild;)i.firstChild.remove()}}}function Rv(t){return"content"in t&&zb(t)?t.content:null}function zb(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Tn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Tn||{});function Tt(t){let n=P_();return n?Iv(n.sanitize(Tn.HTML,t)||""):Si(t,"HTML")?Iv(In(t)):Hc(rp(),en(t))}function Ne(t){let n=P_();return n?n.sanitize(Tn.URL,t)||"":Si(t,"URL")?In(t):ra(en(t))}function P_(){let t=he();return t&&t[Un].sanitizer}var Wb=/^>|^->|<!--|-->|--!>|<!-$/g,qb=/(<|>)/g,Yb="\u200B$1\u200B";function Kb(t){return t.replace(Wb,n=>n.replace(qb,Yb))}function N_(t){return t instanceof Function?t():t}function Zb(t,n,e){let i=t.length;for(;;){let r=t.indexOf(n,e);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=n.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}e=r+1}}var O_="ng-template";function Qb(t,n,e,i){let r=0;if(i){for(;r<n.length&&typeof n[r]=="string";r+=2)if(n[r]==="class"&&Zb(n[r+1].toLowerCase(),e,0)!==-1)return!0}else if(fp(t))return!1;if(r=n.indexOf(1,r),r>-1){let o;for(;++r<n.length&&typeof(o=n[r])=="string";)if(o.toLowerCase()===e)return!0}return!1}function fp(t){return t.type===4&&t.value!==O_}function Xb(t,n,e){let i=t.type===4&&!e?O_:t.value;return n===i}function Jb(t,n,e){let i=4,r=t.attrs,o=r!==null?nI(r):0,a=!1;for(let s=0;s<n.length;s++){let l=n[s];if(typeof l=="number"){if(!a&&!wn(i)&&!wn(l))return!1;if(a&&wn(l))continue;a=!1,i=l|i&1;continue}if(!a)if(i&4){if(i=2|i&1,l!==""&&!Xb(t,l,e)||l===""&&n.length===1){if(wn(i))return!1;a=!0}}else if(i&8){if(r===null||!Qb(t,r,l,e)){if(wn(i))return!1;a=!0}}else{let c=n[++s],u=eI(l,r,fp(t),e);if(u===-1){if(wn(i))return!1;a=!0;continue}if(c!==""){let d;if(u>o?d="":d=r[u+1].toLowerCase(),i&2&&c!==d){if(wn(i))return!1;a=!0}}}}return wn(i)||a}function wn(t){return(t&1)===0}function eI(t,n,e,i){if(n===null)return-1;let r=0;if(i||!e){let o=!1;for(;r<n.length;){let a=n[r];if(a===t)return r;if(a===3||a===6)o=!0;else if(a===1||a===2){let s=n[++r];for(;typeof s=="string";)s=n[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=o?1:2}return-1}else return iI(n,t)}function tI(t,n,e=!1){for(let i=0;i<n.length;i++)if(Jb(t,n[i],e))return!0;return!1}function nI(t){for(let n=0;n<t.length;n++){let e=t[n];if(sb(e))return n}return t.length}function iI(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){let i=t[e];if(typeof i=="number")return-1;if(i===n)return e;e++}return-1}function Av(t,n){return t?":not("+n.trim()+")":n}function rI(t){let n=t[0],e=1,i=2,r="",o=!1;for(;e<t.length;){let a=t[e];if(typeof a=="string")if(i&2){let s=t[++e];r+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!wn(a)&&(n+=Av(o,r),r=""),i=a,o=o||!wn(i);e++}return r!==""&&(n+=Av(o,r)),n}function oI(t){return t.map(rI).join(",")}function sI(t){let n=[],e=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&n.push(o,t[++i]):r===8&&e.push(o);else{if(!wn(r))break;r=o}i++}return e.length&&n.push(1,...e),n}var Pt={};function aI(t,n){return t.createText(n)}function lI(t,n,e){t.setValue(n,e)}function cI(t,n){return t.createComment(Kb(n))}function k_(t,n,e){return t.createElement(n,e)}function Tc(t,n,e,i,r){t.insertBefore(n,e,i,r)}function L_(t,n,e){t.appendChild(n,e)}function Pv(t,n,e,i,r){i!==null?Tc(t,n,e,i,r):L_(t,n,e)}function uI(t,n,e){t.removeChild(null,n,e)}function dI(t,n,e){t.setAttribute(n,"style",e)}function fI(t,n,e){e===""?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function F_(t,n,e){let{mergedAttrs:i,classes:r,styles:o}=e;i!==null&&ob(t,n,i),r!==null&&fI(t,n,r),o!==null&&dI(t,n,o)}function hp(t,n,e,i,r,o,a,s,l,c,u){let d=ft+i,_=d+r,f=hI(d,_),v=typeof c=="function"?c():c;return f[ae]={type:t,blueprint:f,template:e,queries:null,viewQuery:s,declTNode:n,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1,ssrId:u}}function hI(t,n){let e=[];for(let i=0;i<n;i++)e.push(i<t?null:Pt);return e}function pI(t){let n=t.tView;return n===null||n.incompleteFirstPass?t.tView=hp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function pp(t,n,e,i,r,o,a,s,l,c,u){let d=n.blueprint.slice();return d[Sn]=r,d[de]=i|4|128|8|64|1024,(c!==null||t&&t[de]&2048)&&(d[de]|=2048),Bf(d),d[ut]=d[gr]=t,d[It]=e,d[Un]=a||t&&t[Un],d[Ke]=s||t&&t[Ke],d[pr]=l||t&&t[pr]||null,d[nn]=o,d[js]=Sb(),d[Vs]=u,d[Lf]=c,d[rn]=n.type==2?t[rn]:d,d}function gI(t,n,e){let i=En(n,t),r=pI(e),o=t[Un].rendererFactory,a=gp(t,pp(t,r,null,V_(e),i,n,null,o.createRenderer(i,e),null,null,null));return t[n.index]=a}function V_(t){let n=16;return t.signals?n=4096:t.onPush&&(n=64),n}function j_(t,n,e,i){if(e===0)return-1;let r=n.length;for(let o=0;o<e;o++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function gp(t,n){return t[_o]?t[kf][tn]=n:t[_o]=n,t[kf]=n,n}function p(t=1){H_(ht(),he(),mi()+t,!1)}function H_(t,n,e,i){if(!i)if((n[de]&3)===3){let o=t.preOrderCheckHooks;o!==null&&vc(n,o,e)}else{let o=t.preOrderHooks;o!==null&&_c(n,o,0,e)}Fi(e)}var Bc=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Bc||{});function kh(t,n,e,i){let r=me(null);try{let[o,a,s]=t.inputs[e],l=null;(a&Bc.SignalBased)!==0&&(l=n[o][Dt]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):s!==null&&(i=s.call(n,i)),t.setInput!==null?t.setInput(n,l,i,e,o):n_(n,l,o,i)}finally{me(r)}}var Dn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Dn||{}),mI;function mp(t,n){return mI(t,n)}function Do(t,n,e,i,r){if(i!=null){let o,a=!1;Cn(i)?o=i:Gn(i)&&(a=!0,i=i[Sn]);let s=on(i);t===0&&e!==null?r==null?L_(n,e,s):Tc(n,e,s,r||null,!0):t===1&&e!==null?Tc(n,e,s,r||null,!0):t===2?uI(n,s,a):t===3&&n.destroyNode(s),o!=null&&MI(n,t,o,e,r)}}function vI(t,n){B_(t,n),n[Sn]=null,n[nn]=null}function _I(t,n,e,i,r,o){i[Sn]=r,i[nn]=n,Uc(t,i,e,1,r,o)}function B_(t,n){n[Un].changeDetectionScheduler?.notify(9),Uc(t,n,n[Ke],2,null,null)}function yI(t){let n=t[_o];if(!n)return fh(t[ae],t);for(;n;){let e=null;if(Gn(n))e=n[_o];else{let i=n[At];i&&(e=i)}if(!e){for(;n&&!n[tn]&&n!==t;)Gn(n)&&fh(n[ae],n),n=n[ut];n===null&&(n=t),Gn(n)&&fh(n[ae],n),e=n&&n[tn]}n=e}}function vp(t,n){let e=t[_r],i=e.indexOf(n);e.splice(i,1)}function U_(t,n){if(yr(n))return;let e=n[Ke];e.destroyNode&&Uc(t,n,e,3,null,null),yI(n)}function fh(t,n){if(yr(n))return;let e=me(null);try{n[de]&=-129,n[de]|=256,n[Yt]&&Ds(n[Yt]),CI(t,n),SI(t,n),n[ae].type===1&&n[Ke].destroy();let i=n[Oi];if(i!==null&&Cn(n[ut])){i!==n[ut]&&vp(i,n);let r=n[$n];r!==null&&r.detachView(t)}Dh(n)}finally{me(e)}}function SI(t,n){let e=t.cleanup,i=n[vo];if(e!==null)for(let a=0;a<e.length-1;a+=2)if(typeof e[a]=="string"){let s=e[a+3];s>=0?i[s]():i[-s].unsubscribe(),a+=2}else{let s=i[e[a+1]];e[a].call(s)}i!==null&&(n[vo]=null);let r=n[di];if(r!==null){n[di]=null;for(let a=0;a<r.length;a++){let s=r[a];s()}}let o=n[Hs];if(o!==null){n[Hs]=null;for(let a of o)a.destroy()}}function CI(t,n){let e;if(t!=null&&(e=t.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=n[e[i]];if(!(r instanceof Dr)){let o=e[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let s=r[o[a]],l=o[a+1];Fe(4,s,l);try{l.call(s)}finally{Fe(5,s,l)}}else{Fe(4,r,o);try{o.call(r)}finally{Fe(5,r,o)}}}}}function EI(t,n,e){return wI(t,n.parent,e)}function wI(t,n,e){let i=n;for(;i!==null&&i.type&168;)n=i,i=n.parent;if(i===null)return e[Sn];if(Li(i)){let{encapsulation:r}=t.data[i.directiveStart+i.componentOffset];if(r===vi.None||r===vi.Emulated)return null}return En(i,e)}function DI(t,n,e){return II(t,n,e)}function bI(t,n,e){return t.type&40?En(t,e):null}var II=bI,Nv;function _p(t,n,e,i){let r=EI(t,i,n),o=n[Ke],a=i.parent||n[nn],s=DI(a,i,n);if(r!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)Pv(o,r,e[l],s,!1);else Pv(o,r,e,s,!1);Nv!==void 0&&Nv(o,i,n,e,r)}function Ks(t,n){if(n!==null){let e=n.type;if(e&3)return En(n,t);if(e&4)return Lh(-1,t[n.index]);if(e&8){let i=n.child;if(i!==null)return Ks(t,i);{let r=t[n.index];return Cn(r)?Lh(-1,r):on(r)}}else{if(e&128)return Ks(t,n.next);if(e&32)return mp(n,t)()||on(t[n.index]);{let i=$_(t,n);if(i!==null){if(Array.isArray(i))return i[0];let r=Pi(t[rn]);return Ks(r,i)}else return Ks(t,n.next)}}}return null}function $_(t,n){if(n!==null){let i=t[rn][nn],r=n.projection;return i.projection[r]}return null}function Lh(t,n){let e=At+t+1;if(e<n.length){let i=n[e],r=i[ae].firstChild;if(r!==null)return Ks(i,r)}return n[ki]}function yp(t,n,e,i,r,o,a){for(;e!=null;){if(e.type===128){e=e.next;continue}let s=i[e.index],l=e.type;if(a&&n===0&&(s&&To(on(s),i),e.flags|=2),!op(e))if(l&8)yp(t,n,e.child,i,r,o,!1),Do(n,t,r,s,o);else if(l&32){let c=mp(e,i),u;for(;u=c();)Do(n,t,r,u,o);Do(n,t,r,s,o)}else l&16?TI(t,n,i,e,r,o):Do(n,t,r,s,o);e=a?e.projectionNext:e.next}}function Uc(t,n,e,i,r,o){yp(e,i,t.firstChild,n,r,o,!1)}function TI(t,n,e,i,r,o){let a=e[rn],l=a[nn].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Do(n,t,r,u,o)}else{let c=l,u=a[ut];v_(i)&&(c.flags|=128),yp(t,n,c,u,r,o,!0)}}function MI(t,n,e,i,r){let o=e[ki],a=on(e);o!==a&&Do(n,t,i,o,r);for(let s=At;s<e.length;s++){let l=e[s];Uc(l[ae],l,t,n,i,o)}}function xI(t,n,e,i,r){if(n)r?t.addClass(e,i):t.removeClass(e,i);else{let o=i.indexOf("-")===-1?void 0:Dn.DashCase;r==null?t.removeStyle(e,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Dn.Important),t.setStyle(e,i,r,o))}}function G_(t,n,e,i,r){let o=mi(),a=i&2;try{Fi(-1),a&&n.length>ft&&H_(t,n,ft,!1),Fe(a?2:0,r,e),e(i,r)}finally{Fi(o),Fe(a?3:1,r,e)}}function $c(t,n,e){kI(t,n,e),(e.flags&64)===64&&LI(t,n,e)}function Gc(t,n,e=En){let i=n.localNames;if(i!==null){let r=n.index+1;for(let o=0;o<i.length;o+=2){let a=i[o+1],s=a===-1?e(n,t):t[a];t[r++]=s}}}function RI(t,n,e,i){let o=i.get(w_,E_)||e===vi.ShadowDom,a=t.selectRootElement(n,o);return AI(a),a}function AI(t){PI(t)}var PI=()=>null;function NI(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function z_(t,n,e,i,r,o){let a=n[ae];if(wp(t,a,n,e,i)){Li(t)&&OI(n,t.index);return}t.type&3&&(e=NI(e)),W_(t,n,e,i,r,o)}function W_(t,n,e,i,r,o){if(t.type&3){let a=En(t,n);i=o!=null?o(i,t.value||"",e):i,r.setProperty(a,e,i)}else t.type&12}function OI(t,n){let e=sn(n,t);e[de]&16||(e[de]|=64)}function kI(t,n,e){let i=e.directiveStart,r=e.directiveEnd;Li(e)&&gI(n,e,t.data[i+e.componentOffset]),t.firstCreatePass||bc(e,n);let o=e.initialInputs;for(let a=i;a<r;a++){let s=t.data[a],l=Qs(n,t,a,e);if(To(l,n),o!==null&&HI(n,a-i,l,s,e,o),zn(s)){let c=sn(e.index,n);c[It]=Qs(n,t,a,e)}}}function LI(t,n,e){let i=e.directiveStart,r=e.directiveEnd,o=e.index,a=uv();try{Fi(o);for(let s=i;s<r;s++){let l=t.data[s],c=n[s];oc(s),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&FI(l,c)}}finally{Fi(-1),oc(a)}}function FI(t,n){t.hostBindings!==null&&t.hostBindings(1,n)}function Sp(t,n){let e=t.directiveRegistry,i=null;if(e)for(let r=0;r<e.length;r++){let o=e[r];tI(n,o.selectors,!1)&&(i??=[],zn(o)?i.unshift(o):i.push(o))}return i}function VI(t,n,e,i,r,o){let a=En(t,n);jI(n[Ke],a,o,t.value,e,i,r)}function jI(t,n,e,i,r,o,a){if(o==null)t.removeAttribute(n,r,e);else{let s=a==null?en(o):a(o,i||"",r);t.setAttribute(n,r,s,e)}}function HI(t,n,e,i,r,o){let a=o[n];if(a!==null)for(let s=0;s<a.length;s+=2){let l=a[s],c=a[s+1];kh(i,e,l,c)}}function Cp(t,n,e,i,r){let o=ft+e,a=n[ae],s=r(a,n,t,i,e);n[o]=s,Eo(t,!0);let l=t.type===2;return l?(F_(n[Ke],s,t),(nv()===0||yo(t))&&To(s,n),iv()):To(s,n),cc()&&(!l||!op(t))&&_p(a,n,s,t),t}function Ep(t){let n=t;return Zf()?sv():(n=n.parent,Eo(n,!1)),n}function BI(t,n){let e=t[pr];if(!e)return;e.get(Kt,null)?.(n)}function wp(t,n,e,i,r){let o=t.inputs?.[i],a=t.hostDirectiveInputs?.[i],s=!1;if(a)for(let l=0;l<a.length;l+=2){let c=a[l],u=a[l+1],d=n.data[c];kh(d,e[c],u,r),s=!0}if(o)for(let l of o){let c=e[l],u=n.data[l];kh(u,c,i,r),s=!0}return s}function UI(t,n){let e=sn(n,t),i=e[ae];$I(i,e);let r=e[Sn];r!==null&&e[Vs]===null&&(e[Vs]=D_(r,e[pr])),Fe(18),Dp(i,e,e[It]),Fe(19,e[It])}function $I(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}function Dp(t,n,e){ac(n);try{let i=t.viewQuery;i!==null&&Ih(1,i,e);let r=t.template;r!==null&&G_(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),n[$n]?.finishViewCreation(t),t.staticContentQueries&&b_(t,n),t.staticViewQueries&&Ih(2,t.viewQuery,e);let o=t.components;o!==null&&GI(n,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[de]&=-5,lc()}}function GI(t,n){for(let e=0;e<n.length;e++)UI(t,n[e])}function zI(t,n,e,i){let r=me(null);try{let o=n.tView,s=t[de]&4096?4096:16,l=pp(t,o,e,s,null,n,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=t[n.index];l[Oi]=c;let u=t[$n];return u!==null&&(l[$n]=u.createEmbeddedView(o)),Dp(o,l,e),l}finally{me(r)}}function Ov(t,n){return!n||n.firstChild===null||v_(t)}var kv=!1,WI=new z("");function Xs(t,n,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let o=n[e.index];o!==null&&i.push(on(o)),Cn(o)&&q_(o,i);let a=e.type;if(a&8)Xs(t,n,e.child,i);else if(a&32){let s=mp(e,n),l;for(;l=s();)i.push(l)}else if(a&16){let s=$_(n,e);if(Array.isArray(s))i.push(...s);else{let l=Pi(n[rn]);Xs(l[ae],l,s,i,!0)}}e=r?e.projectionNext:e.next}return i}function q_(t,n){for(let e=At;e<t.length;e++){let i=t[e],r=i[ae].firstChild;r!==null&&Xs(i[ae],i,r,n)}t[ki]!==t[Sn]&&n.push(t[ki])}function Y_(t){if(t[vr]!==null){for(let n of t[vr])n.impl.addSequence(n);t[vr].length=0}}var K_=[];function qI(t){return t[Yt]??YI(t)}function YI(t){let n=K_.pop()??Object.create(ZI);return n.lView=t,n}function KI(t){t.lView[Yt]!==t&&(t.lView=null,K_.push(t))}var ZI=ue(N({},tr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Co(t.lView)},consumerOnSignalRead(){this.lView[Yt]=this}});function QI(t){let n=t[Yt]??Object.create(XI);return n.lView=t,n}var XI=ue(N({},tr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let n=Pi(t.lView);for(;n&&!Z_(n[ae]);)n=Pi(n);n&&Uf(n)},consumerOnSignalRead(){this.lView[Yt]=this}});function Z_(t){return t.type!==2}function Q_(t){if(t[Hs]===null)return;let n=!0;for(;n;){let e=!1;for(let i of t[Hs])i.dirty&&(e=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));n=e&&!!(t[de]&8192)}}var JI=100;function bp(t,n=0){let i=t[Un].rendererFactory,r=!1;r||i.begin?.();try{e1(t,n)}finally{r||i.end?.()}}function e1(t,n){let e=Xf();try{Jf(!0),Fh(t,n);let i=0;for(;Us(t);){if(i===JI)throw new j(103,!1);i++,Fh(t,1)}}finally{Jf(e)}}function X_(t,n){Qf(n?$s.Exhaustive:$s.OnlyDirtyViews);try{bp(t)}finally{Qf($s.Off)}}function t1(t,n,e,i){if(yr(n))return;let r=n[de],o=!1,a=!1;ac(n);let s=!0,l=null,c=null;o||(Z_(t)?(c=qI(n),l=nr(c)):cl()===null?(s=!1,c=QI(n),l=nr(c)):n[Yt]&&(Ds(n[Yt]),n[Yt]=null));try{Bf(n),av(t.bindingStartIndex),e!==null&&G_(t,n,e,2,i);let u=(r&3)===3;if(!o)if(u){let f=t.preOrderCheckHooks;f!==null&&vc(n,f,null)}else{let f=t.preOrderHooks;f!==null&&_c(n,f,0,null),uh(n,0)}if(a||n1(n),Q_(n),J_(n,0),t.contentQueries!==null&&b_(t,n),!o)if(u){let f=t.contentCheckHooks;f!==null&&vc(n,f)}else{let f=t.contentHooks;f!==null&&_c(n,f,1),uh(n,1)}r1(t,n);let d=t.components;d!==null&&ty(n,d,0);let _=t.viewQuery;if(_!==null&&Ih(2,_,i),!o)if(u){let f=t.viewCheckHooks;f!==null&&vc(n,f)}else{let f=t.viewHooks;f!==null&&_c(n,f,2),uh(n,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),n[Jl]){for(let f of n[Jl])f();n[Jl]=null}o||(Y_(n),n[de]&=-73)}catch(u){throw o||Co(n),u}finally{c!==null&&(Zr(c,l),s&&KI(c)),lc()}}function J_(t,n){for(let e=y_(t);e!==null;e=S_(e))for(let i=At;i<e.length;i++){let r=e[i];ey(r,n)}}function n1(t){for(let n=y_(t);n!==null;n=S_(n)){if(!(n[de]&2))continue;let e=n[_r];for(let i=0;i<e.length;i++){let r=e[i];Uf(r)}}}function i1(t,n,e){Fe(18);let i=sn(n,t);ey(i,e),Fe(19,i[It])}function ey(t,n){tc(t)&&Fh(t,n)}function Fh(t,n){let i=t[ae],r=t[de],o=t[Yt],a=!!(n===0&&r&16);if(a||=!!(r&64&&n===0),a||=!!(r&1024),a||=!!(o?.dirty&&ws(o)),a||=!1,o&&(o.dirty=!1),t[de]&=-9217,a)t1(i,t,i.template,t[It]);else if(r&8192){let s=me(null);try{Q_(t),J_(t,1);let l=i.components;l!==null&&ty(t,l,1),Y_(t)}finally{me(s)}}}function ty(t,n,e){for(let i=0;i<n.length;i++)i1(t,n[i],e)}function r1(t,n){let e=t.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)Fi(~r);else{let o=r,a=e[++i],s=e[++i];cv(a,o);let l=n[o];Fe(24,l),s(2,l),Fe(25,l)}}}finally{Fi(-1)}}function Ip(t,n){let e=Xf()?64:1088;for(t[Un].changeDetectionScheduler?.notify(n);t;){t[de]|=e;let i=Pi(t);if(So(t)&&!i)return t;t=i}return null}function ny(t,n,e,i){return[t,!0,0,n,null,i,null,e,null,null]}function o1(t,n,e,i=!0){let r=n[ae];if(s1(r,n,t,e),i){let a=Lh(e,t),s=n[Ke],l=s.parentNode(t[ki]);l!==null&&_I(r,t[nn],s,n,l,a)}let o=n[Vs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Vh(t,n){if(t.length<=At)return;let e=At+n,i=t[e];if(i){let r=i[Oi];r!==null&&r!==t&&vp(r,i),n>0&&(t[e-1][tn]=i[tn]);let o=Ls(t,At+n);vI(i[ae],i);let a=o[$n];a!==null&&a.detachView(o[ae]),i[ut]=null,i[tn]=null,i[de]&=-129}return i}function s1(t,n,e,i){let r=At+i,o=e.length;i>0&&(e[r-1][tn]=n),i<o-At?(n[tn]=e[r],If(e,At+i,n)):(e.push(n),n[tn]=null),n[ut]=e;let a=n[Oi];a!==null&&e!==a&&iy(a,n);let s=n[$n];s!==null&&s.insertView(t),nc(n),n[de]|=128}function iy(t,n){let e=t[_r],i=n[ut];if(Gn(i))t[de]|=2;else{let r=i[ut][rn];n[rn]!==r&&(t[de]|=2)}e===null?t[_r]=[n]:e.push(n)}var Vi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let n=this._lView,e=n[ae];return Xs(e,n,e.firstChild,[])}constructor(n,e){this._lView=n,this._cdRefInjectingView=e}get context(){return this._lView[It]}set context(n){this._lView[It]=n}get destroyed(){return yr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[ut];if(Cn(n)){let e=n[Bs],i=e?e.indexOf(this):-1;i>-1&&(Vh(n,i),Ls(e,i))}this._attachedToViewContainer=!1}U_(this._lView[ae],this._lView)}onDestroy(n){$f(this._lView,n)}markForCheck(){Ip(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[de]&=-129}reattach(){nc(this._lView),this._lView[de]|=128}detectChanges(){this._lView[de]|=1024,bp(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[pr].get(WI,kv)}catch{this.exhaustive=kv}}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=So(this._lView),e=this._lView[Oi];e!==null&&!n&&vp(e,this._lView),B_(this._lView[ae],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=n;let e=So(this._lView),i=this._lView[Oi];i!==null&&!e&&iy(i,this._lView),nc(this._lView)}};var Yn=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=a1;constructor(e,i,r){this._declarationLView=e,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,i){return this.createEmbeddedViewImpl(e,i)}createEmbeddedViewImpl(e,i,r){let o=zI(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:i,dehydratedView:r});return new Vi(o)}}return t})();function a1(){return Tp(yt(),he())}function Tp(t,n){return t.type&4?new Yn(n,t,Ro(t,n)):null}function zc(t,n,e,i,r){let o=t.data[n];if(o===null)o=l1(t,n,e,i,r),lv()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=i,o.attrs=r;let a=ov();o.injectorIndex=a===null?-1:a.injectorIndex}return Eo(o,!0),o}function l1(t,n,e,i,r){let o=Kf(),a=Zf(),s=a?o:o&&o.parent,l=t.data[n]=u1(t,s,e,n,i,r);return c1(t,l,o,a),l}function c1(t,n,e,i){t.firstChild===null&&(t.firstChild=n),e!==null&&(i?e.child==null&&n.parent!==null&&(e.child=n):e.next===null&&(e.next=n,n.prev=e))}function u1(t,n,e,i,r,o){let a=n?n.injectorIndex:-1,s=0;return rv()&&(s|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var L3=new RegExp(`^(\\d+)*(${Db}|${wb})*(.*)`);var d1=()=>null;function Lv(t,n){return d1(t,n)}var ry=class{},Wc=class{},jh=class{resolveComponentFactory(n){throw new j(917,!1)}},sa=class{static NULL=new jh},Zt=class{},cn=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>f1()}return t})();function f1(){let t=he(),n=yt(),e=sn(n.index,t);return(Gn(e)?e:t)[Ke]}var oy=(()=>{class t{static \u0275prov=k({token:t,providedIn:"root",factory:()=>null})}return t})();var Sc={},Hh=class{injector;parentInjector;constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,i){let r=this.injector.get(n,Sc,i);return r!==Sc||e===Sc?r:this.parentInjector.get(n,e,i)}};function Mc(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,o=0;if(n!==null)for(let a=0;a<n.length;a++){let s=n[a];if(typeof s=="number")o=s;else if(o==1)r=hf(r,s);else if(o==2){let l=s,c=n[++a];i=hf(i,l+": "+c+";")}}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}function K(t,n=0){let e=he();if(e===null)return B(t,n);let i=yt();return p_(i,e,_t(t),n)}function Mp(){let t="invalid";throw new Error(t)}function sy(t,n,e,i,r){let o=i===null?null:{"":-1},a=r(t,e);if(a!==null){let s=a,l=null,c=null;for(let u of a)if(u.resolveHostDirectives!==null){[s,l,c]=u.resolveHostDirectives(a);break}g1(t,n,e,s,o,l,c)}o!==null&&i!==null&&h1(e,i,o)}function h1(t,n,e){let i=t.localNames=[];for(let r=0;r<n.length;r+=2){let o=e[n[r+1]];if(o==null)throw new j(-301,!1);i.push(n[r],o)}}function p1(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function g1(t,n,e,i,r,o,a){let s=i.length,l=!1;for(let _=0;_<s;_++){let f=i[_];!l&&zn(f)&&(l=!0,p1(t,e,_)),Eh(bc(e,n),t,f.type)}C1(e,t.data.length,s);for(let _=0;_<s;_++){let f=i[_];f.providersResolver&&f.providersResolver(f)}let c=!1,u=!1,d=j_(t,n,s,null);s>0&&(e.directiveToIndex=new Map);for(let _=0;_<s;_++){let f=i[_];if(e.mergedAttrs=Io(e.mergedAttrs,f.hostAttrs),v1(t,e,n,d,f),S1(d,f,r),a!==null&&a.has(f)){let[T,b]=a.get(f);e.directiveToIndex.set(f.type,[d,T+e.directiveStart,b+e.directiveStart])}else(o===null||!o.has(f))&&e.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(e.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(e.flags|=64);let v=f.type.prototype;!c&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),c=!0),!u&&(v.ngOnChanges||v.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),u=!0),d++}m1(t,e,o)}function m1(t,n,e){for(let i=n.directiveStart;i<n.directiveEnd;i++){let r=t.data[i];if(e===null||!e.has(r))Fv(0,n,r,i),Fv(1,n,r,i),jv(n,i,!1);else{let o=e.get(r);Vv(0,n,o,i),Vv(1,n,o,i),jv(n,i,!0)}}}function Fv(t,n,e,i){let r=t===0?e.inputs:e.outputs;for(let o in r)if(r.hasOwnProperty(o)){let a;t===0?a=n.inputs??={}:a=n.outputs??={},a[o]??=[],a[o].push(i),ay(n,o)}}function Vv(t,n,e,i){let r=t===0?e.inputs:e.outputs;for(let o in r)if(r.hasOwnProperty(o)){let a=r[o],s;t===0?s=n.hostDirectiveInputs??={}:s=n.hostDirectiveOutputs??={},s[a]??=[],s[a].push(i,o),ay(n,a)}}function ay(t,n){n==="class"?t.flags|=8:n==="style"&&(t.flags|=16)}function jv(t,n,e){let{attrs:i,inputs:r,hostDirectiveInputs:o}=t;if(i===null||!e&&r===null||e&&o===null||fp(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let a=null,s=0;for(;s<i.length;){let l=i[s];if(l===0){s+=4;continue}else if(l===5){s+=2;continue}else if(typeof l=="number")break;if(!e&&r.hasOwnProperty(l)){let c=r[l];for(let u of c)if(u===n){a??=[],a.push(l,i[s+1]);break}}else if(e&&o.hasOwnProperty(l)){let c=o[l];for(let u=0;u<c.length;u+=2)if(c[u]===n){a??=[],a.push(c[u+1],i[s+1]);break}}s+=2}t.initialInputs??=[],t.initialInputs.push(a)}function v1(t,n,e,i,r){t.data[i]=r;let o=r.factory||(r.factory=Ai(r.type,!0)),a=new Dr(o,zn(r),K,null);t.blueprint[i]=a,e[i]=a,_1(t,n,i,j_(t,e,r.hostVars,Pt),r)}function _1(t,n,e,i,r){let o=r.hostBindings;if(o){let a=t.hostBindingOpCodes;a===null&&(a=t.hostBindingOpCodes=[]);let s=~n.index;y1(a)!=s&&a.push(s),a.push(e,i,o)}}function y1(t){let n=t.length;for(;n>0;){let e=t[--n];if(typeof e=="number"&&e<0)return e}return 0}function S1(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;zn(n)&&(e[""]=t)}}function C1(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function xp(t,n,e,i,r,o,a,s){let l=n[ae],c=l.consts,u=Sr(c,a),d=zc(l,t,e,i,u);return o&&sy(l,n,d,Sr(c,s),r),d.mergedAttrs=Io(d.mergedAttrs,d.attrs),d.attrs!==null&&Mc(d,d.attrs,!1),d.mergedAttrs!==null&&Mc(d,d.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,d),d}function Rp(t,n){s_(t,n),Ff(n)&&t.queries.elementEnd(n)}function E1(t,n,e,i,r,o){let a=n.consts,s=Sr(a,r),l=zc(n,t,e,i,s);if(l.mergedAttrs=Io(l.mergedAttrs,l.attrs),o!=null){let c=Sr(a,o);l.localNames=[];for(let u=0;u<c.length;u+=2)l.localNames.push(c[u],-1)}return l.attrs!==null&&Mc(l,l.attrs,!1),l.mergedAttrs!==null&&Mc(l,l.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,l),l}function Ap(t){return qc(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function ly(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{let e=t[Symbol.iterator](),i;for(;!(i=e.next()).done;)n(i.value)}}function qc(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Pp(t,n,e){return t[n]=e}function w1(t,n){return t[n]}function bn(t,n,e){if(e===Pt)return!1;let i=t[n];return Object.is(i,e)?!1:(t[n]=e,!0)}function Np(t,n,e,i){let r=bn(t,n,e);return bn(t,n+1,i)||r}function D1(t,n,e,i,r){let o=Np(t,n,e,i);return bn(t,n+2,r)||o}function hh(t,n,e){return function i(r){let o=Li(t)?sn(t.index,n):n;Ip(o,5);let a=n[It],s=Hv(n,a,e,r),l=i.__ngNextListenerFn__;for(;l;)s=Hv(n,a,l,r)&&s,l=l.__ngNextListenerFn__;return s}}function Hv(t,n,e,i){let r=me(null);try{return Fe(6,n,e),e(i)!==!1}catch(o){return BI(t,o),!1}finally{Fe(7,n,e),me(r)}}function b1(t,n,e,i,r,o,a,s){let l=yo(t),c=!1,u=null;if(!i&&l&&(u=I1(n,e,o,t.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=a,u.__ngLastListenerFn__=a,c=!0}else{let d=En(t,e),_=i?i(d):d;Ib(e,_,o,s);let f=r.listen(_,o,s),v=i?T=>i(on(T[t.index])):t.index;cy(v,n,e,o,s,f,!1)}return c}function I1(t,n,e,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let a=r[o];if(a===e&&r[o+1]===i){let s=n[vo],l=r[o+2];return s&&s.length>l?s[l]:null}typeof a=="string"&&(o+=2)}return null}function cy(t,n,e,i,r,o,a){let s=n.firstCreatePass?zf(n):null,l=Gf(e),c=l.length;l.push(r,o),s&&s.push(i,t,c,(c+1)*(a?-1:1))}function Bv(t,n,e,i,r,o){let a=n[e],s=n[ae],c=s.data[e].outputs[i],d=a[c].subscribe(o);cy(t.index,s,n,r,o,d,!0)}var Bh=Symbol("BINDING");var xc=class extends sa{ngModule;constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let e=Bn(n);return new ji(e,this.ngModule)}};function T1(t){return Object.keys(t).map(n=>{let[e,i,r]=t[n],o={propName:e,templateName:n,isSignal:(i&Bc.SignalBased)!==0};return r&&(o.transform=r),o})}function M1(t){return Object.keys(t).map(n=>({propName:t[n],templateName:n}))}function x1(t,n,e){let i=n instanceof Ze?n:n?.injector;return i&&t.getStandaloneInjector!==null&&(i=t.getStandaloneInjector(i)||i),i?new Hh(e,i):e}function R1(t){let n=t.get(Zt,null);if(n===null)throw new j(407,!1);let e=t.get(oy,null),i=t.get(hi,null);return{rendererFactory:n,sanitizer:e,changeDetectionScheduler:i,ngReflect:!1}}function A1(t,n){let e=(t.selectors[0][0]||"div").toLowerCase();return k_(n,e,e==="svg"?K0:e==="math"?Z0:null)}var ji=class extends Wc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=T1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=M1(this.componentDef.outputs),this.cachedOutputs}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=oI(n.selectors),this.ngContentSelectors=n.ngContentSelectors??[],this.isBoundToModule=!!e}create(n,e,i,r,o,a){Fe(22);let s=me(null);try{let l=this.componentDef,c=P1(i,l,a,o),u=x1(l,r||this.ngModule,n),d=R1(u),_=d.rendererFactory.createRenderer(null,l),f=i?RI(_,i,l.encapsulation,u):A1(l,_),v=a?.some(Uv)||o?.some(M=>typeof M!="function"&&M.bindings.some(Uv)),T=pp(null,c,null,512|V_(l),null,null,d,_,u,null,D_(f,u,!0));T[ft]=f,ac(T);let b=null;try{let M=xp(ft,T,2,"#host",()=>c.directiveRegistry,!0,0);f&&(F_(_,f,M),To(f,T)),$c(c,T,M),sp(c,M,T),Rp(c,M),e!==void 0&&O1(M,this.ngContentSelectors,e),b=sn(M.index,T),T[It]=b[It],Dp(c,T,null)}catch(M){throw b!==null&&Dh(b),Dh(T),M}finally{Fe(23),lc()}return new Rc(this.componentType,T,!!v)}finally{me(s)}}};function P1(t,n,e,i){let r=t?["ng-version","20.1.7"]:sI(n.selectors[0]),o=null,a=null,s=0;if(e)for(let u of e)s+=u[Bh].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(a??=[]).push(u));if(i)for(let u=0;u<i.length;u++){let d=i[u];if(typeof d!="function")for(let _ of d.bindings){s+=_[Bh].requiredVars;let f=u+1;_.create&&(_.targetIdx=f,(o??=[]).push(_)),_.update&&(_.targetIdx=f,(a??=[]).push(_))}}let l=[n];if(i)for(let u of i){let d=typeof u=="function"?u:u.type,_=Rf(d);l.push(_)}return hp(0,null,N1(o,a),1,s,l,null,null,null,[r],null)}function N1(t,n){return!t&&!n?null:e=>{if(e&1&&t)for(let i of t)i.create();if(e&2&&n)for(let i of n)i.update()}}function Uv(t){let n=t[Bh].kind;return n==="input"||n==="twoWay"}var Rc=class extends ry{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(n,e,i){super(),this._rootLView=e,this._hasInputBindings=i,this._tNode=ec(e[ae],ft),this.location=Ro(this._tNode,e),this.instance=sn(this._tNode.index,e)[It],this.hostView=this.changeDetectorRef=new Vi(e,void 0),this.componentType=n}setInput(n,e){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;let r=this._rootLView,o=wp(i,r[ae],r,n,e);this.previousInputValues.set(n,e);let a=sn(i.index,r);Ip(a,1)}get injector(){return new wr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function O1(t,n,e){let i=t.projection=[];for(let r=0;r<n.length;r++){let o=e[r];i.push(o!=null&&o.length?Array.from(o):null)}}var un=(()=>{class t{static __NG_ELEMENT_ID__=k1}return t})();function k1(){let t=yt();return dy(t,he())}var L1=un,uy=class extends L1{_lContainer;_hostTNode;_hostLView;constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return Ro(this._hostTNode,this._hostLView)}get injector(){return new wr(this._hostTNode,this._hostLView)}get parentInjector(){let n=tp(this._hostTNode,this._hostLView);if(l_(n)){let e=wc(n,this._hostLView),i=Ec(n),r=e[ae].data[i+8];return new wr(r,e)}else return new wr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let e=$v(this._lContainer);return e!==null&&e[n]||null}get length(){return this._lContainer.length-At}createEmbeddedView(n,e,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let a=Lv(this._lContainer,n.ssrId),s=n.createEmbeddedViewImpl(e||{},o,a);return this.insertImpl(s,r,Ov(this._hostTNode,a)),s}createComponent(n,e,i,r,o,a,s){let l=n&&!QD(n),c;if(l)c=e;else{let b=e||{};c=b.index,i=b.injector,r=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef,a=b.directives,s=b.bindings}let u=l?n:new ji(Bn(n)),d=i||this.parentInjector;if(!o&&u.ngModule==null){let M=(l?d:this.parentInjector).get(Ze,null);M&&(o=M)}let _=Bn(u.componentType??{}),f=Lv(this._lContainer,_?.id??null),v=f?.firstChild??null,T=u.create(d,r,v,o,a,s);return this.insertImpl(T.hostView,c,Ov(this._hostTNode,f)),T}insert(n,e){return this.insertImpl(n,e,!0)}insertImpl(n,e,i){let r=n._lView;if(X0(r)){let s=this.indexOf(n);if(s!==-1)this.detach(s);else{let l=r[ut],c=new uy(l,l[nn],l[ut]);c.detach(c.indexOf(n))}}let o=this._adjustIndex(e),a=this._lContainer;return o1(a,r,o,i),n.attachToViewContainerRef(),If(ph(a),o,n),n}move(n,e){return this.insert(n,e)}indexOf(n){let e=$v(this._lContainer);return e!==null?e.indexOf(n):-1}remove(n){let e=this._adjustIndex(n,-1),i=Vh(this._lContainer,e);i&&(Ls(ph(this._lContainer),e),U_(i[ae],i))}detach(n){let e=this._adjustIndex(n,-1),i=Vh(this._lContainer,e);return i&&Ls(ph(this._lContainer),e)!=null?new Vi(i):null}_adjustIndex(n,e=0){return n??this.length+e}};function $v(t){return t[Bs]}function ph(t){return t[Bs]||(t[Bs]=[])}function dy(t,n){let e,i=n[t.index];return Cn(i)?e=i:(e=ny(i,n,null,t),n[t.index]=e,gp(n,e)),V1(e,n,t,i),new uy(e,t,n)}function F1(t,n){let e=t[Ke],i=e.createComment(""),r=En(n,t),o=e.parentNode(r);return Tc(e,o,i,e.nextSibling(r),!1),i}var V1=B1,j1=()=>!1;function H1(t,n,e){return j1(t,n,e)}function B1(t,n,e,i){if(t[ki])return;let r;e.type&8?r=on(i):r=F1(n,e),t[ki]=r}var Uh=class t{queryList;matches=null;constructor(n){this.queryList=n}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},$h=class t{queries;constructor(n=[]){this.queries=n}createEmbeddedView(n){let e=n.queries;if(e!==null){let i=n.contentQueries!==null?n.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){let a=e.getByIndex(o),s=this.queries[a.indexInDeclarationView];r.push(s.clone())}return new t(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)Op(n,e).matches!==null&&this.queries[e].setDirty()}},Gh=class{flags;read;predicate;constructor(n,e,i=null){this.flags=e,this.read=i,typeof n=="string"?this.predicate=K1(n):this.predicate=n}},zh=class t{queries;constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,o=this.getByIndex(i).embeddedTView(n,r);o&&(o.indexInDeclarationView=i,e!==null?e.push(o):e=[o])}return e!==null?new t(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},Wh=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(n,e=-1){this.metadata=n,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new t(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=n.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(n,e,U1(e,o)),this.matchTNodeWithReadOption(n,e,yc(e,n,o,!1,!1))}else i===Yn?e.type&4&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,yc(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Je||r===un||r===Yn&&e.type&4)this.addMatch(e.index,-2);else{let o=yc(e,n,r,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(n,e){this.matches===null?this.matches=[n,e]:this.matches.push(n,e)}};function U1(t,n){let e=t.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1]}return null}function $1(t,n){return t.type&11?Ro(t,n):t.type&4?Tp(t,n):null}function G1(t,n,e,i){return e===-1?$1(n,t):e===-2?z1(t,n,i):Qs(t,t[ae],e,n)}function z1(t,n,e){if(e===Je)return Ro(n,t);if(e===Yn)return Tp(n,t);if(e===un)return dy(n,t)}function fy(t,n,e,i){let r=n[$n].queries[i];if(r.matches===null){let o=t.data,a=e.matches,s=[];for(let l=0;a!==null&&l<a.length;l+=2){let c=a[l];if(c<0)s.push(null);else{let u=o[c];s.push(G1(n,u,a[l+1],e.metadata.read))}}r.matches=s}return r.matches}function qh(t,n,e,i){let r=t.queries.getByIndex(e),o=r.matches;if(o!==null){let a=fy(t,n,r,e);for(let s=0;s<o.length;s+=2){let l=o[s];if(l>0)i.push(a[s/2]);else{let c=o[s+1],u=n[-l];for(let d=At;d<u.length;d++){let _=u[d];_[Oi]===_[ut]&&qh(_[ae],_,c,i)}if(u[_r]!==null){let d=u[_r];for(let _=0;_<d.length;_++){let f=d[_];qh(f[ae],f,c,i)}}}}}return i}function W1(t,n){return t[$n].queries[n].queryList}function q1(t,n,e){let i=new Ic((e&4)===4);return tv(t,n,i,i.destroy),(n[$n]??=new $h).queries.push(new Uh(i))-1}function Y1(t,n,e){let i=ht();return i.firstCreatePass&&(Z1(i,new Gh(t,n,e),-1),(n&2)===2&&(i.staticViewQueries=!0)),q1(i,he(),n)}function K1(t){return t.split(",").map(n=>n.trim())}function Z1(t,n,e){t.queries===null&&(t.queries=new zh),t.queries.track(new Wh(n,e))}function Op(t,n){return t.queries.getByIndex(n)}function Q1(t,n){let e=t[ae],i=Op(e,n);return i.crossesNgTemplate?qh(e,t,n,[]):fy(e,t,i,n)}function hy(t){let n=[],e=new Map;function i(r){let o=e.get(r);if(!o){let a=t(r);e.set(r,o=a.then(s=>J1(r,s)))}return o}return Ac.forEach((r,o)=>{let a=[];r.templateUrl&&a.push(i(r.templateUrl).then(c=>{r.template=c}));let s=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=s,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let c=r.styles.length,u=r.styleUrls;r.styleUrls.forEach((d,_)=>{s.push(""),a.push(i(d).then(f=>{s[c+_]=f,u.splice(u.indexOf(d),1),u.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&a.push(i(r.styleUrl).then(c=>{s.push(c),r.styleUrl=void 0}));let l=Promise.all(a).then(()=>eT(o));n.push(l)}),py(),Promise.all(n).then(()=>{})}var Ac=new Map,X1=new Set;function py(){let t=Ac;return Ac=new Map,t}function gy(){return Ac.size===0}function J1(t,n){return typeof n=="string"?n:n.status!==void 0&&n.status!==200?Promise.reject(new j(918,!1)):n.text()}function eT(t){X1.delete(t)}var Gv=new Set;function Po(t){Gv.has(t)||(Gv.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var br=class{},Yc=class{};var Js=class extends br{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new xc(this);constructor(n,e,i,r=!0){super(),this.ngModuleType=n,this._parent=e;let o=xf(n);this._bootstrapComponents=N_(o.bootstrap),this._r3Injector=rh(n,e,[{provide:br,useValue:this},{provide:sa,useValue:this.componentFactoryResolver},...i],fi(n),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},ea=class extends Yc{moduleType;constructor(n){super(),this.moduleType=n}create(n){return new Js(this.moduleType,n,[])}};function my(t,n,e){return new Js(t,n,e,!1)}var Pc=class extends br{injector;componentFactoryResolver=new xc(this);instance=null;constructor(n){super();let e=new fr([...n.providers,{provide:br,useValue:this},{provide:sa,useValue:this.componentFactoryResolver}],n.parent||mo(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function No(t,n,e=null){return new Pc({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}var tT=(()=>{class t{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=Af(!1,e.type),r=i.length>0?No([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=k({token:t,providedIn:"environment",factory:()=>new t(B(Ze))})}return t})();function jt(t){return xo(()=>{let n=vy(t),e=ue(N({},n),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===np.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:n.standalone?r=>r.get(tT).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||vi.Emulated,styles:t.styles||Wt,_:null,schemas:t.schemas||null,tView:null,id:""});n.standalone&&Po("NgStandalone"),_y(e);let i=t.dependencies;return e.directiveDefs=zv(i,nT),e.pipeDefs=zv(i,$0),e.id=oT(e),e})}function nT(t){return Bn(t)||Rf(t)}function $e(t){return xo(()=>({type:t.type,bootstrap:t.bootstrap||Wt,declarations:t.declarations||Wt,imports:t.imports||Wt,exports:t.exports||Wt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function iT(t,n){if(t==null)return Ni;let e={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,a,s,l;Array.isArray(r)?(s=r[0],o=r[1],a=r[2]??o,l=r[3]||null):(o=r,a=r,s=Bc.None,l=null),e[o]=[i,s,l],n[o]=a}return e}function rT(t){if(t==null)return Ni;let n={};for(let e in t)t.hasOwnProperty(e)&&(n[t[e]]=e);return n}function Oe(t){return xo(()=>{let n=vy(t);return _y(n),n})}function Bi(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function vy(t){let n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputConfig:t.inputs||Ni,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Wt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:iT(t.inputs,n),outputs:rT(t.outputs),debugInfo:null}}function _y(t){t.features?.forEach(n=>n(t))}function zv(t,n){return t?()=>{let e=typeof t=="function"?t():t,i=[];for(let r of e){let o=n(r);o!==null&&i.push(o)}return i}:null}function oT(t){let n=0,e=typeof t.consts=="function"?"":t.consts,i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,e,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of i.join("|"))n=Math.imul(31,n)+o.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function sT(t){return Object.getPrototypeOf(t.prototype).constructor}function Ht(t){let n=sT(t.type),e=!0,i=[t];for(;n;){let r;if(zn(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new j(903,!1);r=n.\u0275dir}if(r){if(e){i.push(r);let a=t;a.inputs=gh(t.inputs),a.declaredInputs=gh(t.declaredInputs),a.outputs=gh(t.outputs);let s=r.hostBindings;s&&dT(t,s);let l=r.viewQuery,c=r.contentQueries;if(l&&cT(t,l),c&&uT(t,c),aT(t,r),O0(t.outputs,r.outputs),zn(r)&&r.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let a=0;a<o.length;a++){let s=o[a];s&&s.ngInherit&&s(t),s===Ht&&(e=!1)}}n=Object.getPrototypeOf(n)}lT(i)}function aT(t,n){for(let e in n.inputs){if(!n.inputs.hasOwnProperty(e)||t.inputs.hasOwnProperty(e))continue;let i=n.inputs[e];i!==void 0&&(t.inputs[e]=i,t.declaredInputs[e]=n.declaredInputs[e])}}function lT(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=Io(r.hostAttrs,e=Io(e,r.hostAttrs))}}function gh(t){return t===Ni?{}:t===Wt?[]:t}function cT(t,n){let e=t.viewQuery;e?t.viewQuery=(i,r)=>{n(i,r),e(i,r)}:t.viewQuery=n}function uT(t,n){let e=t.contentQueries;e?t.contentQueries=(i,r,o)=>{n(i,r,o),e(i,r,o)}:t.contentQueries=n}function dT(t,n){let e=t.hostBindings;e?t.hostBindings=(i,r)=>{n(i,r),e(i,r)}:t.hostBindings=n}function fT(t,n,e,i,r,o,a,s){if(e.firstCreatePass){t.mergedAttrs=Io(t.mergedAttrs,t.attrs);let u=t.tView=hp(2,t,r,o,a,e.directiveRegistry,e.pipeRegistry,null,e.schemas,e.consts,null);e.queries!==null&&(e.queries.template(e,t),u.queries=e.queries.embeddedTView(t))}s&&(t.flags|=s),Eo(t,!1);let l=pT(e,n,t,i);cc()&&_p(e,n,l,t),To(l,n);let c=ny(l,n,l,t);n[i+ft]=c,gp(n,c),H1(c,t,n)}function hT(t,n,e,i,r,o,a,s,l,c,u){let d=e+ft,_;return n.firstCreatePass?(_=zc(n,d,4,a||null,s||null),ic()&&sy(n,t,_,Sr(n.consts,c),Sp),s_(n,_)):_=n.data[d],fT(_,t,n,e,i,r,o,l),yo(_)&&$c(n,t,_),c!=null&&Gc(t,_,u),_}function L(t,n,e,i,r,o,a,s){let l=he(),c=ht(),u=Sr(c.consts,o);return hT(l,c,t,n,e,i,r,u,void 0,a,s),L}var pT=gT;function gT(t,n,e,i){return zs(!0),n[Ke].createComment("")}var Kc=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(Kc||{}),Tr=new z(""),yy=!1,Yh=class extends ne{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(n=!1){super(),this.__isAsync=n,Of()&&(this.destroyRef=D(an,{optional:!0})??void 0,this.pendingTasks=D(Wn,{optional:!0})??void 0)}emit(n){let e=me(null);try{super.next(n)}finally{me(e)}}subscribe(n,e,i){let r=n,o=e||(()=>null),a=i;if(n&&typeof n=="object"){let l=n;r=l.next?.bind(l),o=l.error?.bind(l),a=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),a&&(a=this.wrapInTimeout(a)));let s=super.subscribe({next:r,error:o,complete:a});return n instanceof Me&&n.add(s),s}wrapInTimeout(n){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{n(e)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Ee=Yh;function Sy(t){let n,e;function i(){t=Ys;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{t(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{t(),i()})),()=>i()}function Wv(t){return queueMicrotask(()=>t()),()=>{t=Ys}}var kp="isAngularZone",Nc=kp+"_ID",mT=0,we=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ee(!1);onMicrotaskEmpty=new Ee(!1);onStable=new Ee(!1);onError=new Ee(!1);constructor(n){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=yy}=n;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&i,a.shouldCoalesceRunChangeDetection=r,a.callbackScheduled=!1,a.scheduleInRootZone=o,yT(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(kp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,n,vT,Ys,Ys);try{return o.runTask(a,e,i)}finally{o.cancelTask(a)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}},vT={};function Lp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function _T(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function n(){Sy(()=>{t.callbackScheduled=!1,Kh(t),t.isCheckStableRunning=!0,Lp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{n()}):t._outer.run(()=>{n()}),Kh(t)}function yT(t){let n=()=>{_T(t)},e=mT++;t._inner=t._inner.fork({name:"angular",properties:{[kp]:!0,[Nc]:e,[Nc+e]:!0},onInvokeTask:(i,r,o,a,s,l)=>{if(ST(l))return i.invokeTask(o,a,s,l);try{return qv(t),i.invokeTask(o,a,s,l)}finally{(t.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&n(),Yv(t)}},onInvoke:(i,r,o,a,s,l,c)=>{try{return qv(t),i.invoke(o,a,s,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!CT(l)&&n(),Yv(t)}},onHasTask:(i,r,o,a)=>{i.hasTask(o,a),r===o&&(a.change=="microTask"?(t._hasPendingMicrotasks=a.microTask,Kh(t),Lp(t)):a.change=="macroTask"&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(i,r,o,a)=>(i.handleError(o,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}function Kh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function qv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Yv(t){t._nesting--,Lp(t)}var ta=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ee;onMicrotaskEmpty=new Ee;onStable=new Ee;onError=new Ee;run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}};function ST(t){return Cy(t,"__ignore_ng_zone__")}function CT(t){return Cy(t,"__scheduler_tick__")}function Cy(t,n){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[n]===!0}function Ey(t="zone.js",n){return t==="noop"?new ta:t==="zone.js"?new we(n):t}var Fp=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=k({token:t,providedIn:"root",factory:()=>new t})}return t})(),wy=[0,1,2,3],Dy=(()=>{class t{ngZone=D(we);scheduler=D(hi);errorHandler=D(_n,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){D(Tr,{optional:!0})}execute(){let e=this.sequences.size>0;e&&Fe(16),this.executing=!0;for(let i of wy)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&Fe(17)}register(e){let{view:i}=e;i!==void 0?((i[vr]??=[]).push(e),Co(i),i[de]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,i){return i?i.run(Kc.AFTER_NEXT_RENDER,e):e()}static \u0275prov=k({token:t,providedIn:"root",factory:()=>new t})}return t})(),Oc=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(n,e,i,r,o,a=null){this.impl=n,this.hooks=e,this.view=i,this.once=r,this.snapshot=a,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let n=this.view?.[vr];n&&(this.view[vr]=n.filter(e=>e!==this))}};function Ui(t,n){let e=n?.injector??D(He);return Po("NgAfterNextRender"),wT(t,e,n,!0)}function ET(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function wT(t,n,e,i){let r=n.get(Fp);r.impl??=n.get(Dy);let o=n.get(Tr,null,{optional:!0}),a=e?.manualCleanup!==!0?n.get(an):null,s=n.get(uc,null,{optional:!0}),l=new Oc(r.impl,ET(t),s?.view,i,a,o?.snapshot(null));return r.impl.register(l),l}var Zc=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Qc=new z(""),Oo=new z(""),aa=(()=>{class t{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(e,i,r){this._ngZone=e,this.registry=i,Of()&&(this._destroyRef=D(an,{optional:!0})??void 0),Vp||(by(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let e=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),i=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{e.unsubscribe(),i.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(e)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),e()},i)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:r})}whenStable(e,i,r){if(r&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static \u0275fac=function(i){return new(i||t)(B(we),B(la),B(Oo))};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})(),la=(()=>{class t{_applications=new Map;registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Vp?.findTestabilityInTree(this,e,i)??null}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function by(t){Vp=t}var Vp;function $i(t){return!!t&&typeof t.then=="function"}function jp(t){return!!t&&typeof t.subscribe=="function"}var Hp=new z("");function ko(t){return gi([{provide:Hp,multi:!0,useValue:t}])}var Bp=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i});appInits=D(Hp,{optional:!0})??[];injector=D(He);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let o=dt(this.injector,r);if($i(o))e.push(o);else if(jp(o)){let a=new Promise((s,l)=>{o.subscribe({complete:s,error:l})});e.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Xc=new z("");function Iy(){Fd(()=>{let t="";throw new j(600,t)})}function Ty(t){return t.isBoundToModule}var DT=10;function Up(t,n){return Array.isArray(n)?n.reduce(Up,t):N(N({},t),n)}var pt=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=D(Kt);afterRenderManager=D(Fp);zonelessEnabled=D(Ws);rootEffectScheduler=D(ch);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ne;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=D(Wn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ie(e=>!e))}constructor(){D(Tr,{optional:!0})}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}_injector=D(Ze);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,i){return this.bootstrapImpl(e,i)}bootstrapImpl(e,i,r=He.NULL){return this._injector.get(we).run(()=>{Fe(10);let a=e instanceof Wc;if(!this._injector.get(Bp).done){let v="";throw new j(405,v)}let l;a?l=e:l=this._injector.get(sa).resolveComponentFactory(e),this.componentTypes.push(l.componentType);let c=Ty(l)?void 0:this._injector.get(br),u=i||l.selector,d=l.create(r,[],u,c),_=d.location.nativeElement,f=d.injector.get(Qc,null);return f?.registerApplication(_),d.onDestroy(()=>{this.detachView(d.hostView),Zs(this.components,d),f?.unregisterApplication(_)}),this._loadComponent(d),Fe(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Fe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Kc.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let e=me(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,me(e),this.afterTick.next(),Fe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Zt,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<DT;)Fe(14),this.synchronizeOnce(),Fe(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let e=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!Us(r))continue;let o=i&&!this.zonelessEnabled?0:1;bp(r,o),e=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}e||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Us(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;Zs(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(e),this._injector.get(Xc,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Zs(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new j(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Zs(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function Mn(t,n,e,i){let r=he(),o=Cr();if(bn(r,o,n)){let a=ht(),s=Gs();VI(s,r,t,n,e,i)}return Mn}function C(t,n,e){let i=he(),r=Cr();if(bn(i,r,n)){let o=ht(),a=Gs();z_(a,i,t,n,i[Ke],e)}return C}function Kv(t,n,e,i,r){wp(n,t,e,r?"class":"style",i)}function g(t,n,e,i){let r=he(),o=r[ae],a=t+ft,s=o.firstCreatePass?xp(a,r,2,n,Sp,ic(),e,i):o.data[a];if(Cp(s,r,t,n,My),yo(s)){let l=r[ae];$c(l,r,s),sp(l,s,r)}return i!=null&&Gc(r,s),g}function h(){let t=ht(),n=yt(),e=Ep(n);return t.firstCreatePass&&Rp(t,e),qf(e)&&Yf(),Wf(),e.classesWithoutHost!=null&&ib(e)&&Kv(t,e,he(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&rb(e)&&Kv(t,e,he(),e.stylesWithoutHost,!1),h}function Z(t,n,e,i){return g(t,n,e,i),h(),Z}function Lo(t,n,e,i){let r=he(),o=r[ae],a=t+ft,s=o.firstCreatePass?E1(a,o,2,n,e,i):o.data[a];return Cp(s,r,t,n,My),i!=null&&Gc(r,s),Lo}function Fo(){let t=yt(),n=Ep(t);return qf(n)&&Yf(),Wf(),Fo}function ca(t,n,e,i){return Lo(t,n,e,i),Fo(),ca}var My=(t,n,e,i,r)=>(zs(!0),k_(n[Ke],i,mv()));function Kn(t,n,e){let i=he(),r=i[ae],o=t+ft,a=r.firstCreatePass?xp(o,i,8,"ng-container",Sp,ic(),n,e):r.data[o];if(Cp(a,i,t,"ng-container",bT),yo(a)){let s=i[ae];$c(s,i,a),sp(s,a,i)}return e!=null&&Gc(i,a),Kn}function Zn(){let t=ht(),n=yt(),e=Ep(n);return t.firstCreatePass&&Rp(t,e),Zn}var bT=(t,n,e,i,r)=>(zs(!0),cI(n[Ke],""));function pe(){return he()}function Jc(t,n,e){let i=he(),r=Cr();if(bn(i,r,n)){let o=ht(),a=Gs();W_(a,i,t,n,i[Ke],e)}return Jc}var Er=void 0;function IT(t){let n=Math.floor(Math.abs(t)),e=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&e===0?1:5}var TT=["en",[["a","p"],["AM","PM"],Er],[["AM","PM"],Er,Er],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Er,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Er,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Er,"{1} 'at' {0}",Er],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",IT],mh={};function eu(t){let n=MT(t),e=Zv(n);if(e)return e;let i=n.split("-")[0];if(e=Zv(i),e)return e;if(i==="en")return TT;throw new j(701,!1)}function Zv(t){return t in mh||(mh[t]=it.ng&&it.ng.common&&it.ng.common.locales&&it.ng.common.locales[t]),mh[t]}var Mr=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Mr||{});function MT(t){return t.toLowerCase().replace(/_/g,"-")}var ua="en-US";var xT=ua;function xy(t){typeof t=="string"&&(xT=t.toLowerCase().replace(/_/g,"-"))}function q(t,n,e){let i=he(),r=ht(),o=yt();return Ry(r,i,i[Ke],o,t,n,e),q}function Ry(t,n,e,i,r,o,a){let s=!0,l=null;if((i.type&3||a)&&(l??=hh(i,n,o),b1(i,t,n,a,e,r,o,l)&&(s=!1)),s){let c=i.outputs?.[r],u=i.hostDirectiveOutputs?.[r];if(u&&u.length)for(let d=0;d<u.length;d+=2){let _=u[d],f=u[d+1];l??=hh(i,n,o),Bv(i,n,_,f,r,l)}if(c&&c.length)for(let d of c)l??=hh(i,n,o),Bv(i,n,d,r,r,l)}}function E(t=1){return gv(t)}function Vo(t,n,e){Y1(t,n,e)}function xr(t){let n=he(),e=ht(),i=th();sc(i+1);let r=Op(e,i);if(t.dirty&&Q0(n)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=Q1(n,i);t.reset(o,vb),t.notifyOnChanges()}return!0}return!1}function Rr(){return W1(he(),th())}function gc(t,n){return t<<17|n<<2}function Ir(t){return t>>17&32767}function RT(t){return(t&2)==2}function AT(t,n){return t&131071|n<<17}function Zh(t){return t|2}function Mo(t){return(t&131068)>>2}function vh(t,n){return t&-131069|n<<2}function PT(t){return(t&1)===1}function Qh(t){return t|1}function NT(t,n,e,i,r,o){let a=o?n.classBindings:n.styleBindings,s=Ir(a),l=Mo(a);t[i]=e;let c=!1,u;if(Array.isArray(e)){let d=e;u=d[1],(u===null||go(d,u)>0)&&(c=!0)}else u=e;if(r)if(l!==0){let _=Ir(t[s+1]);t[i+1]=gc(_,s),_!==0&&(t[_+1]=vh(t[_+1],i)),t[s+1]=AT(t[s+1],i)}else t[i+1]=gc(s,0),s!==0&&(t[s+1]=vh(t[s+1],i)),s=i;else t[i+1]=gc(l,0),s===0?s=i:t[l+1]=vh(t[l+1],i),l=i;c&&(t[i+1]=Zh(t[i+1])),Qv(t,u,i,!0),Qv(t,u,i,!1),OT(n,u,t,i,o),a=gc(s,l),o?n.classBindings=a:n.styleBindings=a}function OT(t,n,e,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof n=="string"&&go(o,n)>=0&&(e[i+1]=Qh(e[i+1]))}function Qv(t,n,e,i){let r=t[e+1],o=n===null,a=i?Ir(r):Mo(r),s=!1;for(;a!==0&&(s===!1||o);){let l=t[a],c=t[a+1];kT(l,n)&&(s=!0,t[a+1]=i?Qh(c):Zh(c)),a=i?Ir(c):Mo(c)}s&&(t[e+1]=i?Zh(r):Qh(r))}function kT(t,n){return t===null||n==null||(Array.isArray(t)?t[1]:t)===n?!0:Array.isArray(t)&&typeof n=="string"?go(t,n)>=0:!1}function jo(t,n,e){return Ay(t,n,e,!1),jo}function De(t,n){return Ay(t,n,null,!0),De}function Ay(t,n,e,i){let r=he(),o=ht(),a=rc(2);if(o.firstUpdatePass&&FT(o,t,a,i),n!==Pt&&bn(r,a,n)){let s=o.data[mi()];UT(o,s,r,r[Ke],t,r[a+1]=$T(n,e),i,a)}}function LT(t,n){return n>=t.expandoStartIndex}function FT(t,n,e,i){let r=t.data;if(r[e+1]===null){let o=r[mi()],a=LT(t,e);GT(o,i)&&n===null&&!a&&(n=!1),n=VT(r,o,n,i),NT(r,o,n,e,a,i)}}function VT(t,n,e,i){let r=dv(t),o=i?n.residualClasses:n.residualStyles;if(r===null)(i?n.classBindings:n.styleBindings)===0&&(e=_h(null,t,n,e,i),e=na(e,n.attrs,i),o=null);else{let a=n.directiveStylingLast;if(a===-1||t[a]!==r)if(e=_h(r,t,n,e,i),o===null){let l=jT(t,n,i);l!==void 0&&Array.isArray(l)&&(l=_h(null,t,n,l[1],i),l=na(l,n.attrs,i),HT(t,n,i,l))}else o=BT(t,n,i)}return o!==void 0&&(i?n.residualClasses=o:n.residualStyles=o),e}function jT(t,n,e){let i=e?n.classBindings:n.styleBindings;if(Mo(i)!==0)return t[Ir(i)]}function HT(t,n,e,i){let r=e?n.classBindings:n.styleBindings;t[Ir(r)]=i}function BT(t,n,e){let i,r=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<r;o++){let a=t[o].hostAttrs;i=na(i,a,e)}return na(i,n.attrs,e)}function _h(t,n,e,i,r){let o=null,a=e.directiveEnd,s=e.directiveStylingLast;for(s===-1?s=e.directiveStart:s++;s<a&&(o=n[s],i=na(i,o.hostAttrs,r),o!==t);)s++;return t!==null&&(e.directiveStylingLast=s),i}function na(t,n,e){let i=e?1:2,r=-1;if(n!==null)for(let o=0;o<n.length;o++){let a=n[o];typeof a=="number"?r=a:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),U0(t,a,e?!0:n[++o]))}return t===void 0?null:t}function UT(t,n,e,i,r,o,a,s){if(!(n.type&3))return;let l=t.data,c=l[s+1],u=PT(c)?Xv(l,n,e,r,Mo(c),a):void 0;if(!kc(u)){kc(o)||RT(c)&&(o=Xv(l,null,e,r,s,a));let d=Vf(mi(),e);xI(i,a,d,r,o)}}function Xv(t,n,e,i,r,o){let a=n===null,s;for(;r>0;){let l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,_=e[r+1];_===Pt&&(_=d?Wt:void 0);let f=d?Xl(_,i):u===i?_:void 0;if(c&&!kc(f)&&(f=Xl(l,i)),kc(f)&&(s=f,a))return s;let v=t[r+1];r=a?Ir(v):Mo(v)}if(n!==null){let l=o?n.residualClasses:n.residualStyles;l!=null&&(s=Xl(l,i))}return s}function kc(t){return t!==void 0}function $T(t,n){return t==null||t===""||(typeof n=="string"?t=t+n:typeof t=="object"&&(t=fi(In(t)))),t}function GT(t,n){return(t.flags&(n?8:16))!==0}function y(t,n=""){let e=he(),i=ht(),r=t+ft,o=i.firstCreatePass?zc(i,r,1,n,null):i.data[r],a=zT(i,e,o,n,t);e[r]=a,cc()&&_p(i,e,a,o),Eo(o,!1)}var zT=(t,n,e,i,r)=>(zs(!0),aI(n[Ke],i));function Py(t,n,e,i=""){return bn(t,Cr(),e)?n+en(e)+i:Pt}function WT(t,n,e,i,r,o=""){let a=eh(),s=Np(t,a,e,r);return rc(2),s?n+en(e)+i+en(r)+o:Pt}function qT(t,n,e,i,r,o,a,s=""){let l=eh(),c=D1(t,l,e,r,a);return rc(3),c?n+en(e)+i+en(r)+o+en(a)+s:Pt}function Q(t){return re("",t),Q}function re(t,n,e){let i=he(),r=Py(i,t,n,e);return r!==Pt&&$p(i,mi(),r),re}function Ei(t,n,e,i,r){let o=he(),a=WT(o,t,n,e,i,r);return a!==Pt&&$p(o,mi(),a),Ei}function Qn(t,n,e,i,r,o,a){let s=he(),l=qT(s,t,n,e,i,r,o,a);return l!==Pt&&$p(s,mi(),l),Qn}function $p(t,n,e){let i=Vf(n,t);lI(t[Ke],i,e)}function Mt(t,n,e){sh(n)&&(n=n());let i=he(),r=Cr();if(bn(i,r,n)){let o=ht(),a=Gs();z_(a,i,t,n,i[Ke],e)}return Mt}function Nt(t,n){let e=sh(t);return e&&t.set(n),e}function xt(t,n){let e=he(),i=ht(),r=yt();return Ry(i,e,e[Ke],r,t,n),xt}function da(t){return bn(he(),Cr(),t)?en(t):Pt}function Gp(t,n,e=""){return Py(he(),t,n,e)}function YT(t,n,e){let i=ht();if(i.firstCreatePass){let r=zn(t);Xh(e,i.data,i.blueprint,r,!0),Xh(n,i.data,i.blueprint,r,!1)}}function Xh(t,n,e,i,r){if(t=_t(t),Array.isArray(t))for(let o=0;o<t.length;o++)Xh(t[o],n,e,i,r);else{let o=ht(),a=he(),s=yt(),l=dr(t)?t:_t(t.provide),c=Nf(t),u=s.providerIndexes&1048575,d=s.directiveStart,_=s.providerIndexes>>20;if(dr(t)||!t.multi){let f=new Dr(c,r,K,null),v=Sh(l,n,r?u:u+_,d);v===-1?(Eh(bc(s,a),o,l),yh(o,t,n.length),n.push(l),s.directiveStart++,s.directiveEnd++,r&&(s.providerIndexes+=1048576),e.push(f),a.push(f)):(e[v]=f,a[v]=f)}else{let f=Sh(l,n,u+_,d),v=Sh(l,n,u,u+_),T=f>=0&&e[f],b=v>=0&&e[v];if(r&&!b||!r&&!T){Eh(bc(s,a),o,l);let M=QT(r?ZT:KT,e.length,r,i,c,t);!r&&b&&(e[v].providerFactory=M),yh(o,t,n.length,0),n.push(l),s.directiveStart++,s.directiveEnd++,r&&(s.providerIndexes+=1048576),e.push(M),a.push(M)}else{let M=Ny(e[r?v:f],c,!r&&i);yh(o,t,f>-1?f:v,M)}!r&&i&&b&&e[v].componentProviders++}}}function yh(t,n,e,i){let r=dr(n),o=q0(n);if(r||o){let l=(o?_t(n.useClass):n).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){let u=c.indexOf(e);u===-1?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function Ny(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function Sh(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function KT(t,n,e,i,r){return Jh(this.multi,[])}function ZT(t,n,e,i,r){let o=this.multi,a;if(this.providerFactory){let s=this.providerFactory.componentProviders,l=Qs(i,i[ae],this.providerFactory.index,r);a=l.slice(0,s),Jh(o,a);for(let c=s;c<l.length;c++)a.push(l[c])}else a=[],Jh(o,a);return a}function Jh(t,n){for(let e=0;e<t.length;e++){let i=t[e];n.push(i())}return n}function QT(t,n,e,i,r,o){let a=new Dr(t,e,K,null);return a.multi=[],a.index=n,a.componentProviders=0,Ny(a,r,i&&!e),a}function Bt(t,n=[]){return e=>{e.providersResolver=(i,r)=>YT(i,r?r(t):t,n)}}function Xn(t,n,e){let i=wo()+t,r=he();return r[i]===Pt?Pp(r,i,e?n.call(e):n()):w1(r,i)}function St(t,n,e,i){return ky(he(),wo(),t,n,e,i)}function Ho(t,n,e,i,r){return Ly(he(),wo(),t,n,e,i,r)}function Oy(t,n){let e=t[n];return e===Pt?void 0:e}function ky(t,n,e,i,r,o){let a=n+e;return bn(t,a,r)?Pp(t,a+1,o?i.call(o,r):i(r)):Oy(t,a+1)}function Ly(t,n,e,i,r,o,a){let s=n+e;return Np(t,s,r,o)?Pp(t,s+2,a?i.call(a,r,o):i(r,o)):Oy(t,s+2)}function Ve(t,n){let e=ht(),i,r=t+ft;e.firstCreatePass?(i=XT(n,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let o=i.factory||(i.factory=Ai(i.type,!0)),a,s=Rt(K);try{let l=Dc(!1),c=o();return Dc(l),Hf(e,he(),r,c),c}finally{Rt(s)}}function XT(t,n){if(n)for(let e=n.length-1;e>=0;e--){let i=n[e];if(t===i.name)return i}}function Gi(t,n,e){let i=t+ft,r=he(),o=jf(r,i);return Fy(r,i)?ky(r,wo(),n,o.transform,e,o):o.transform(e)}function nt(t,n,e,i){let r=t+ft,o=he(),a=jf(o,r);return Fy(o,r)?Ly(o,wo(),n,a.transform,e,i,a):a.transform(e,i)}function Fy(t,n){return t[ae].data[n].pure}var mc=null;function Vy(t){mc!==null&&(t.defaultEncapsulation!==mc.defaultEncapsulation||t.preserveWhitespaces!==mc.preserveWhitespaces)||(mc=t)}var Lc=class{ngModuleFactory;componentFactories;constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}},zp=(()=>{class t{compileModuleSync(e){return new ea(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=xf(e),o=N_(r.declarations).reduce((a,s)=>{let l=Bn(s);return l&&a.push(new ji(l)),a},[]);return new Lc(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jy=new z("");var JT=(()=>{class t{zone=D(we);changeDetectionScheduler=D(hi);applicationRef=D(pt);applicationErrorHandler=D(Kt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(e){this.applicationErrorHandler(e)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Hy({ngZoneFactory:t,ignoreChangesOutsideZone:n,scheduleInRootZone:e}){return t??=()=>new we(ue(N({},Wp()),{scheduleInRootZone:e})),[{provide:we,useFactory:t},{provide:pi,multi:!0,useFactory:()=>{let i=D(JT,{optional:!0});return()=>i.initialize()}},{provide:pi,multi:!0,useFactory:()=>{let i=D(eM);return()=>{i.initialize()}}},n===!0?{provide:ah,useValue:!0}:[],{provide:lh,useValue:e??yy},{provide:Kt,useFactory:()=>{let i=D(we),r=D(Ze),o;return a=>{i.runOutsideAngular(()=>{r.destroyed&&!o?setTimeout(()=>{throw a}):(o??=r.get(_n),o.handleError(a))})}}}]}function Wp(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var eM=(()=>{class t{subscription=new Me;initialized=!1;zone=D(we);pendingTasks=D(Wn);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{we.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var By=(()=>{class t{applicationErrorHandler=D(Kt);appRef=D(pt);taskService=D(Wn);ngZone=D(we);zonelessEnabled=D(Ws);tracing=D(Tr,{optional:!0});disableScheduling=D(ah,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Me;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(D(lh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ta||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let i=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?Wv:Sy;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(e),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Wv(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tM(){return typeof $localize<"u"&&$localize.locale||ua}var fa=new z("",{providedIn:"root",factory:()=>D(fa,{optional:!0,skipSelf:!0})||tM()});function dn(t){return A0(t)}function Bo(t,n){return fl(t,n?.equal)}var Uy=class{[Dt];constructor(n){this[Dt]=n}destroy(){this[Dt].destroy()}};var Qy=Symbol("InputSignalNode#UNSET"),mM=ue(N({},hl),{transformFn:void 0,applyValueToInputSignal(t,n){Xr(t,n)}});function Xy(t,n){let e=Object.create(mM);e.value=t,e.transformFn=n?.transform;function i(){if(Kr(e),e.value===Qy){let r=null;throw new j(-950,r)}return e.value}return i[Dt]=e,i}var vM=new z("");vM.__NG_ELEMENT_ID__=t=>{let n=yt();if(n===null)throw new j(204,!1);if(n.type&2)return n.value;if(t&8)return null;throw new j(204,!1)};function $y(t,n){return Xy(t,n)}function _M(t){return Xy(Qy,t)}var Jy=($y.required=_M,$y);function yM(t,n,e){let i=new ea(e);return Promise.resolve(i)}function Gy(t){for(let n=t.length-1;n>=0;n--)if(t[n]!==void 0)return t[n]}var tu=new z(""),SM=new z("");function ha(t){return!t.moduleRef}function CM(t){let n=ha(t)?t.r3Injector:t.moduleRef.injector,e=n.get(we);return e.run(()=>{ha(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let i=n.get(Kt),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:i})}),ha(t)){let o=()=>n.destroy(),a=t.platformInjector.get(tu);a.add(o),n.onDestroy(()=>{r.unsubscribe(),a.delete(o)})}else{let o=()=>t.moduleRef.destroy(),a=t.platformInjector.get(tu);a.add(o),t.moduleRef.onDestroy(()=>{Zs(t.allPlatformModules,t.moduleRef),r.unsubscribe(),a.delete(o)})}return wM(i,e,()=>{let o=n.get(Wn),a=o.add(),s=n.get(Bp);return s.runInitializers(),s.donePromise.then(()=>{let l=n.get(fa,ua);if(xy(l||ua),!n.get(SM,!0))return ha(t)?n.get(pt):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(ha(t)){let u=n.get(pt);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return eS?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(a))})})}var eS;function zy(){eS=EM}function EM(t,n){let e=t.injector.get(pt);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(e);else throw new j(-403,!1);n.push(t)}function wM(t,n,e){try{let i=e();return $i(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t(i)),i}}var tS=(()=>{class t{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(e){this._injector=e}bootstrapModuleFactory(e,i){let r=i?.scheduleInRootZone,o=()=>Ey(i?.ngZone,ue(N({},Wp({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:r})),a=i?.ignoreChangesOutsideZone,s=[Hy({ngZoneFactory:o,ignoreChangesOutsideZone:a}),{provide:hi,useExisting:By},_v],l=my(e.moduleType,this.injector,s);return zy(),CM({moduleRef:l,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(e,i=[]){let r=Up({},i);return zy(),yM(this.injector,r,e).then(o=>this.bootstrapModuleFactory(o,r))}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new j(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let e=this._injector.get(tu,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(i){return new(i||t)(B(He))};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),pa=null,nS=new z("");function DM(t){if(pa&&!pa.get(nS,!1))throw new j(400,!1);Iy(),pa=t;let n=t.get(tS);return TM(t),n}function eg(t,n,e=[]){let i=`Platform: ${n}`,r=new z(i);return(o=[])=>{let a=iS();if(!a||a.injector.get(nS,!1)){let s=[...e,...o,{provide:r,useValue:!0}];t?t(s):DM(bM(s,i))}return IM(r)}}function bM(t=[],n){return He.create({name:n,providers:[{provide:Fs,useValue:"platform"},{provide:tu,useValue:new Set([()=>pa=null])},...t]})}function IM(t){let n=iS();if(!n)throw new j(401,!1);return n}function iS(){return pa?.get(tS)??null}function TM(t){let n=t.get(Fc,null);dt(t,()=>{n?.forEach(e=>e())})}function rS(){return!1}var Ut=(()=>{class t{static __NG_ELEMENT_ID__=MM}return t})();function MM(t){return xM(yt(),he(),(t&16)===16)}function xM(t,n,e){if(Li(t)&&!e){let i=sn(t.index,n);return new Vi(i,i)}else if(t.type&175){let i=n[rn];return new Vi(i,n)}return null}var qp=class{constructor(){}supports(n){return Ap(n)}create(n){return new Yp(n)}},RM=(t,n)=>n,Yp=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(n){this._trackByFn=n||RM}forEachItem(n){let e;for(e=this._itHead;e!==null;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){let a=!i||e&&e.currentIndex<Wy(i,r,o)?e:i,s=Wy(a,r,o),l=a.currentIndex;if(a===i)r--,i=i._nextRemoved;else if(e=e._next,a.previousIndex==null)r++;else{o||(o=[]);let c=s-r,u=l-r;if(c!=u){for(let _=0;_<c;_++){let f=_<o.length?o[_]:o[_]=0,v=f+_;u<=v&&v<c&&(o[_]=f+1)}let d=a.previousIndex;o[d]=u-c}}s!==l&&n(a,s,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)n(e)}diff(n){if(n==null&&(n=[]),!Ap(n))throw new j(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._itHead,i=!1,r,o,a;if(Array.isArray(n)){this.length=n.length;for(let s=0;s<this.length;s++)o=n[s],a=this._trackByFn(s,o),e===null||!Object.is(e.trackById,a)?(e=this._mismatch(e,o,a,s),i=!0):(i&&(e=this._verifyReinsertion(e,o,a,s)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else r=0,ly(n,s=>{a=this._trackByFn(r,s),e===null||!Object.is(e.trackById,a)?(e=this._mismatch(e,s,a,r),i=!0):(i&&(e=this._verifyReinsertion(e,s,a,r)),Object.is(e.item,s)||this._addIdentityChange(e,s)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let o;return n===null?o=this._itTail:(o=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,o,r)):(n=this._linkedRecords===null?null:this._linkedRecords.get(i,r),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,o,r)):n=this._addAfter(new Kp(e,i),o,r)),n}_verifyReinsertion(n,e,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?n=this._reinsertAfter(o,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;n!==null;){let e=n._next;this._addToRemovals(this._unlink(n)),n=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);let r=n._prevRemoved,o=n._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){let r=e===null?this._itHead:e._next;return n._next=r,n._prev=e,r===null?this._itTail=n:r._prev=n,e===null?this._itHead=n:e._next=n,this._linkedRecords===null&&(this._linkedRecords=new nu),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);let e=n._prev,i=n._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new nu),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}},Kp=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(n,e){this.item=n,this.trackById=e}},Zp=class{_head=null;_tail=null;add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){let e=n._prevDup,i=n._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},nu=class{map=new Map;put(n){let e=n.trackById,i=this.map.get(e);i||(i=new Zp,this.map.set(e,i)),i.add(n)}get(n,e){let i=n,r=this.map.get(i);return r?r.get(n,e):null}remove(n){let e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Wy(t,n,e){let i=t.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}var Qp=class{constructor(){}supports(n){return n instanceof Map||qc(n)}create(){return new Xp}},Xp=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(n){let e;for(e=this._mapHead;e!==null;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)n(e)}diff(n){if(!n)n=new Map;else if(!(n instanceof Map||qc(n)))throw new j(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){let i=n._prev;return e._next=n,e._prev=i,n._prev=e,i&&(i._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){let r=this._records.get(n);this._maybeAddToChanges(r,e);let o=r._prev,a=r._next;return o&&(o._next=a),a&&(a._prev=o),r._next=null,r._prev=null,r}let i=new Jp(n);return this._records.set(n,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;n!==null;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;n!=null;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){this._additionsHead===null?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){this._changesHead===null?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(i=>e(n[i],i))}},Jp=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(n){this.key=n}};function qy(){return new iu([new qp])}var iu=(()=>{class t{factories;static \u0275prov=k({token:t,providedIn:"root",factory:qy});constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||qy()),deps:[[t,new ep,new ia]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new j(901,!1)}}return t})();function Yy(){return new tg([new Qp])}var tg=(()=>{class t{static \u0275prov=k({token:t,providedIn:"root",factory:Yy});factories;constructor(e){this.factories=e}static create(e,i){if(i){let r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||Yy()),deps:[[t,new ep,new ia]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i)return i;throw new j(901,!1)}}return t})();var oS=eg(null,"core",[]),sS=(()=>{class t{constructor(e){}static \u0275fac=function(i){return new(i||t)(B(pt))};static \u0275mod=$e({type:t});static \u0275inj=Be({})}return t})();function fn(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function ng(t,n=NaN){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):n}function aS(t,n){let e=Bn(t),i=n.elementInjector||mo();return new ji(e).create(i,n.projectableNodes,n.hostElement,n.environmentInjector,n.directives,n.bindings)}function lS(t){let n=Bn(t);if(!n)return null;let e=new ji(n);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}var dS=null;function Qt(){return dS}function ig(t){dS??=t}var ga=class{},ma=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:()=>D(fS),providedIn:"platform"})}return t})(),rg=new z(""),fS=(()=>{class t extends ma{_location;_history;_doc=D(Pe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qt().getBaseHref(this._doc)}onPopState(e){let i=Qt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=Qt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function ru(t,n){return t?n?t.endsWith("/")?n.startsWith("/")?t+n.slice(1):t+n:n.startsWith("/")?t+n:`${t}/${n}`:t:n}function cS(t){let n=t.search(/#|\?|$/);return t[n-1]==="/"?t.slice(0,n-1)+t.slice(n):t}function xn(t){return t&&t[0]!=="?"?`?${t}`:t}var wi=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:()=>D(su),providedIn:"root"})}return t})(),ou=new z(""),su=(()=>{class t extends wi{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??D(Pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return ru(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+xn(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){let a=this.prepareExternalUrl(r+xn(o));this._platformLocation.pushState(e,i,a)}replaceState(e,i,r,o){let a=this.prepareExternalUrl(r+xn(o));this._platformLocation.replaceState(e,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||t)(B(ma),B(ou,8))};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),zi=(()=>{class t{_subject=new ne;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=NM(cS(uS(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+xn(i))}normalize(e){return t.stripTrailingSlash(PM(this._basePath,uS(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+xn(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+xn(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=xn;static joinWithSlash=ru;static stripTrailingSlash=cS;static \u0275fac=function(i){return new(i||t)(B(wi))};static \u0275prov=k({token:t,factory:()=>AM(),providedIn:"root"})}return t})();function AM(){return new zi(B(wi))}function PM(t,n){if(!t||!n.startsWith(t))return n;let e=n.substring(t.length);return e===""||["/",";","?","#"].includes(e[0])?e:n}function uS(t){return t.replace(/\/index.html$/,"")}function NM(t){if(new RegExp("^(https?:)?//").test(t)){let[,e]=t.split(/\/\/[^\/]+/);return e}return t}var lg=(()=>{class t extends wi{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=ru(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let a=this.prepareExternalUrl(r+xn(o))||this._platformLocation.pathname;this._platformLocation.pushState(e,i,a)}replaceState(e,i,r,o){let a=this.prepareExternalUrl(r+xn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(e,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||t)(B(ma),B(ou,8))};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})();var cg=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(cg||{});var Jn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Uo(t,n){let e=eu(t),i=e[Mr.NumberSymbols][n];if(typeof i>"u"){if(n===Jn.CurrencyDecimal)return e[Mr.NumberSymbols][Jn.Decimal];if(n===Jn.CurrencyGroup)return e[Mr.NumberSymbols][Jn.Group]}return i}function vS(t,n){return eu(t)[Mr.NumberFormats][n]}var OM=/^(\d+)?\.((\d+)(-(\d+))?)?$/,hS=22,au=".",va="0",kM=";",LM=",",og="#";function FM(t,n,e,i,r,o,a=!1){let s="",l=!1;if(!isFinite(t))s=Uo(e,Jn.Infinity);else{let c=HM(t);a&&(c=jM(c));let u=n.minInt,d=n.minFrac,_=n.maxFrac;if(o){let W=o.match(OM);if(W===null)throw new j(2306,!1);let H=W[1],O=W[3],V=W[5];H!=null&&(u=sg(H)),O!=null&&(d=sg(O)),V!=null?_=sg(V):O!=null&&d>_&&(_=d)}BM(c,d,_);let f=c.digits,v=c.integerLen,T=c.exponent,b=[];for(l=f.every(W=>!W);v<u;v++)f.unshift(0);for(;v<0;v++)f.unshift(0);v>0?b=f.splice(v,f.length):(b=f,f=[0]);let M=[];for(f.length>=n.lgSize&&M.unshift(f.splice(-n.lgSize,f.length).join(""));f.length>n.gSize;)M.unshift(f.splice(-n.gSize,f.length).join(""));f.length&&M.unshift(f.join("")),s=M.join(Uo(e,i)),b.length&&(s+=Uo(e,r)+b.join("")),T&&(s+=Uo(e,Jn.Exponential)+"+"+T)}return t<0&&!l?s=n.negPre+s+n.negSuf:s=n.posPre+s+n.posSuf,s}function _S(t,n,e){let i=vS(n,cg.Decimal),r=VM(i,Uo(n,Jn.MinusSign));return FM(t,r,n,Jn.Group,Jn.Decimal,e)}function VM(t,n="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(kM),r=i[0],o=i[1],a=r.indexOf(au)!==-1?r.split(au):[r.substring(0,r.lastIndexOf(va)+1),r.substring(r.lastIndexOf(va)+1)],s=a[0],l=a[1]||"";e.posPre=s.substring(0,s.indexOf(og));for(let u=0;u<l.length;u++){let d=l.charAt(u);d===va?e.minFrac=e.maxFrac=u+1:d===og?e.maxFrac=u+1:e.posSuf+=d}let c=s.split(LM);if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){let u=r.length-e.posPre.length-e.posSuf.length,d=o.indexOf(og);e.negPre=o.substring(0,d).replace(/'/g,""),e.negSuf=o.slice(d+u).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}function jM(t){if(t.digits[0]===0)return t;let n=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(n===0?t.digits.push(0,0):n===1&&t.digits.push(0),t.integerLen+=2),t}function HM(t){let n=Math.abs(t)+"",e=0,i,r,o,a,s;for((r=n.indexOf(au))>-1&&(n=n.replace(au,"")),(o=n.search(/e/i))>0?(r<0&&(r=o),r+=+n.slice(o+1),n=n.substring(0,o)):r<0&&(r=n.length),o=0;n.charAt(o)===va;o++);if(o===(s=n.length))i=[0],r=1;else{for(s--;n.charAt(s)===va;)s--;for(r-=o,i=[],a=0;o<=s;o++,a++)i[a]=Number(n.charAt(o))}return r>hS&&(i=i.splice(0,hS-1),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}function BM(t,n,e){if(n>e)throw new j(2307,!1);let i=t.digits,r=i.length-t.integerLen,o=Math.min(Math.max(n,r),e),a=o+t.integerLen,s=i[a];if(a>0){i.splice(Math.max(t.integerLen,a));for(let d=a;d<i.length;d++)i[d]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,a=o+1),i[0]=0;for(let d=1;d<a;d++)i[d]=0}if(s>=5)if(a-1<0){for(let d=0;d>a;d--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[a-1]++;for(;r<Math.max(0,o);r++)i.push(0);let l=o!==0,c=n+t.integerLen,u=i.reduceRight(function(d,_,f,v){return _=_+d,v[f]=_<10?_:_-10,l&&(v[f]===0&&f>=c?v.pop():l=!1),_>=10?1:0},0);u&&(i.unshift(u),t.integerLen++)}function sg(t){let n=parseInt(t);if(isNaN(n))throw new j(2305,!1);return n}var ag=/\s+/,pS=[],Ar=(()=>{class t{_ngEl;_renderer;initialClasses=pS;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(ag):pS}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(ag):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(ag).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||t)(K(Je),K(cn))};static \u0275dir=Oe({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var lu=class{$implicit;ngForOf;index;count;constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Wi=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,o,a)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new lu(r.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let s=i.get(o);i.move(s,a),gS(s,r)}});for(let r=0,o=i.length;r<o;r++){let s=i.get(r).context;s.index=r,s.count=o,s.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);gS(o,r)})}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||t)(K(un),K(Yn),K(iu))};static \u0275dir=Oe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function gS(t,n){t.context.$implicit=n.item}var Pr=(()=>{class t{_viewContainer;_context=new cu;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){mS(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){mS(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||t)(K(un),K(Yn))};static \u0275dir=Oe({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),cu=class{$implicit=null;ngIf=null};function mS(t,n){if(t&&!t.createEmbeddedView)throw new j(2020,!1)}var Nr=(()=>{class t{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){let[r,o]=e.split("."),a=r.indexOf("-")===-1?void 0:Dn.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,r,a)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static \u0275fac=function(i){return new(i||t)(K(Je),K(tg),K(cn))};static \u0275dir=Oe({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return t})();function yS(t,n){return new j(2100,!1)}var UM=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,ug=(()=>{class t{transform(e){if(e==null)return null;if(typeof e!="string")throw yS(t,e);return e.replace(UM,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=Bi({name:"titlecase",type:t,pure:!0})}return t})();var dg=(()=>{class t{_locale;constructor(e){this._locale=e}transform(e,i,r){if(!$M(e))return null;r||=this._locale;try{let o=GM(e);return _S(o,r,i)}catch(o){throw yS(t,o.message)}}static \u0275fac=function(i){return new(i||t)(K(fa,16))};static \u0275pipe=Bi({name:"number",type:t,pure:!0})}return t})();function $M(t){return!(t==null||t===""||t!==t)}function GM(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new j(2309,!1);return t}var Di=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Be({})}return t})();function _a(t,n){n=encodeURIComponent(n);for(let e of t.split(";")){let i=e.indexOf("="),[r,o]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(o)}return null}var Or=class{};var hg="browser";function CS(t){return t===hg}var ES=(()=>{class t{static \u0275prov=k({token:t,providedIn:"root",factory:()=>new fg(D(Pe),window)})}return t})(),fg=class{document;window;offset=()=>[0,0];constructor(n,e){this.document=n,this.window=e}setOffset(n){Array.isArray(n)?this.offset=()=>n:this.offset=n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n,e){this.window.scrollTo(ue(N({},e),{left:n[0],top:n[1]}))}scrollToAnchor(n,e){let i=zM(this.document,n);i&&(this.scrollToElement(i,e),i.focus())}setHistoryScrollRestoration(n){try{this.window.history.scrollRestoration=n}catch{console.warn(yn(2400,!1))}}scrollToElement(n,e){let i=n.getBoundingClientRect(),r=i.left+this.window.pageXOffset,o=i.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(ue(N({},e),{left:r-a[0],top:o-a[1]}))}};function zM(t,n){let e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let a=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(a)return a}r=i.nextNode()}}return null}var du=new z(""),yg=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r,o){return this._findPluginFor(i).addEventListener(e,i,r,o)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new j(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||t)(B(du),B(we))};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})(),ya=class{_doc;constructor(n){this._doc=n}manager},gg="ng-app-id";function wS(t){for(let n of t)n.remove()}function DS(t,n){let e=n.createElement("style");return e.textContent=t,e}function WM(t,n,e,i){let r=t.head?.querySelectorAll(`style[${gg}="${n}"],link[${gg}="${n}"]`);if(r)for(let o of r)o.removeAttribute(gg),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function vg(t,n){let e=n.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),e}var Sg=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,WM(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,DS);i?.forEach(r=>this.addUsage(r,this.external,vg))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let o=i.get(e);o?o.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(wS(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])wS(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,DS(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,vg(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),e.appendChild(i)}static \u0275fac=function(i){return new(i||t)(B(Pe),B(Ao),B(Vc,8),B(Hi))};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})(),mg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Cg=/%COMP%/g;var IS="%COMP%",qM=`_nghost-${IS}`,YM=`_ngcontent-${IS}`,KM=!0,ZM=new z("",{providedIn:"root",factory:()=>KM});function QM(t){return YM.replace(Cg,t)}function XM(t){return qM.replace(Cg,t)}function TS(t,n){return n.map(e=>e.replace(Cg,t))}var Eg=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,o,a,s,l,c=null,u=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=s,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Sa(e,a,l,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(e,i);return r instanceof uu?r.applyToHost(e):r instanceof Ca&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let a=this.doc,s=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,_=this.tracingService;switch(i.encapsulation){case vi.Emulated:o=new uu(l,c,i,this.appId,u,a,s,d,_);break;case vi.ShadowDom:return new _g(l,c,e,i,a,s,this.nonce,d,_);default:o=new Ca(l,c,i,u,a,s,d,_);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||t)(B(yg),B(Sg),B(Ao),B(ZM),B(Pe),B(Hi),B(we),B(Vc),B(Tr,8))};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})(),Sa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,e,i,r,o){this.eventManager=n,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(n,e){return e?this.doc.createElementNS(mg[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(bS(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(bS(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){e.remove()}selectRootElement(n,e){let i=typeof n=="string"?this.doc.querySelector(n):n;if(!i)throw new j(-5104,!1);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;let o=mg[r];o?n.setAttributeNS(o,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){let r=mg[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(Dn.DashCase|Dn.Important)?n.style.setProperty(e,i,r&Dn.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&Dn.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n!=null&&(n[e]=i)}setValue(n,e){n.nodeValue=e}listen(n,e,i,r){if(typeof n=="string"&&(n=Qt().getGlobalEventTarget(this.doc,n),!n))throw new j(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(n,e,o)),this.eventManager.addEventListener(n,e,o,r)}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;n(e)===!1&&e.preventDefault()}}};function bS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var _g=class extends Sa{sharedStylesHost;hostEl;shadowRoot;constructor(n,e,i,r,o,a,s,l,c){super(n,o,a,l,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=TS(r.id,u);for(let _ of u){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=_,this.shadowRoot.appendChild(f)}let d=r.getExternalStyles?.();if(d)for(let _ of d){let f=vg(_,o);s&&f.setAttribute("nonce",s),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ca=class extends Sa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,e,i,r,o,a,s,l,c){super(n,o,a,s,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=c?TS(c,u):u,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},uu=class extends Ca{contentAttr;hostAttr;constructor(n,e,i,r,o,a,s,l,c){let u=r+"-"+i.id;super(n,e,i,o,a,s,l,c,u),this.contentAttr=QM(u),this.hostAttr=XM(u)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}};var fu=class t extends ga{supportsDOMEvents=!0;static makeCurrent(){ig(new t)}onAndCancel(n,e,i,r){return n.addEventListener(e,i,r),()=>{n.removeEventListener(e,i,r)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=JM();return e==null?null:ex(e)}resetBaseElement(){Ea=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return _a(document.cookie,n)}},Ea=null;function JM(){return Ea=Ea||document.head.querySelector("base"),Ea?Ea.getAttribute("href"):null}function ex(t){return new URL(t,document.baseURI).pathname}var hu=class{addToWindow(n){it.getAngularTestability=(i,r=!0)=>{let o=n.findTestabilityInTree(i,r);if(o==null)throw new j(5103,!1);return o},it.getAllAngularTestabilities=()=>n.getAllTestabilities(),it.getAllAngularRootElements=()=>n.getAllRootElements();let e=i=>{let r=it.getAllAngularTestabilities(),o=r.length,a=function(){o--,o==0&&i()};r.forEach(s=>{s.whenStable(a)})};it.frameworkStabilizers||(it.frameworkStabilizers=[]),it.frameworkStabilizers.push(e)}findTestabilityInTree(n,e,i){if(e==null)return null;let r=n.getTestability(e);return r??(i?Qt().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},tx=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})(),xS=(()=>{class t extends ya{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,o){return e.addEventListener(i,r,o),()=>this.removeEventListener(e,i,r,o)}removeEventListener(e,i,r,o){return e.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||t)(B(Pe))};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})(),MS=["alt","control","meta","shift"],nx={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ix={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},RS=(()=>{class t extends ya{constructor(e){super(e)}supports(e){return t.parseEventName(e)!=null}addEventListener(e,i,r,o){let a=t.parseEventName(i),s=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qt().onAndCancel(e,a.domEventName,s,o))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=t._normalizeKey(i.pop()),a="",s=i.indexOf("code");if(s>-1&&(i.splice(s,1),a="code."),MS.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),a+=c+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=a,l}static matchEventFullKeyCode(e,i){let r=nx[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),MS.forEach(a=>{if(a!==r){let s=ix[a];s(e)&&(o+=a+".")}}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{t.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||t)(B(Pe))};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})();function rx(){fu.makeCurrent()}function ox(){return new _n}function sx(){return ip(document),document}var ax=[{provide:Hi,useValue:hg},{provide:Fc,useValue:rx,multi:!0},{provide:Pe,useFactory:sx}],wg=eg(oS,"browser",ax);var lx=[{provide:Oo,useClass:hu},{provide:Qc,useClass:aa,deps:[we,la,Oo]},{provide:aa,useClass:aa,deps:[we,la,Oo]}],cx=[{provide:Fs,useValue:"root"},{provide:_n,useFactory:ox},{provide:du,useClass:xS,multi:!0,deps:[Pe]},{provide:du,useClass:RS,multi:!0,deps:[Pe]},Eg,Sg,yg,{provide:Zt,useExisting:Eg},{provide:Or,useClass:tx},[]],Dg=(()=>{class t{constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Be({providers:[...cx,...lx],imports:[Di,sS]})}return t})();var zo=class{},wa=class{},qi=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),o=e.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new t;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(n.name,e);let r=(n.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let o=n.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let a=this.headers.get(e);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}break}}addHeaderEntry(n,e){let i=n.toLowerCase();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(n,e){let i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=n.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(n,r)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var gu=class{encodeKey(n){return AS(n)}encodeValue(n){return AS(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function ux(t,n){let e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[a,s]=o==-1?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,o)),n.decodeValue(r.slice(o+1))],l=e.get(a)||[];l.push(s),e.set(a,l)}),e}var dx=/%(\d[a-f0-9])/gi,fx={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function AS(t){return encodeURIComponent(t).replace(dx,(n,e)=>fx[e]??n)}function pu(t){return`${t}`}var bi=class t{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new gu,n.fromString){if(n.fromObject)throw new j(2805,!1);this.map=ux(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let i=n.fromObject[e],r=Array.isArray(i)?i.map(pu):[pu(i)];this.map.set(e,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(i=>{let r=n[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new t({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(pu(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let i=this.map.get(n.param)||[],r=i.indexOf(pu(n.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var mu=class{map=new Map;set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function hx(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function PS(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function NS(t){return typeof Blob<"u"&&t instanceof Blob}function OS(t){return typeof FormData<"u"&&t instanceof FormData}function px(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var kS="Content-Type",LS="Accept",VS="X-Request-URL",jS="text/plain",HS="application/json",gx=`${HS}, ${jS}, */*`,$o=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(n,e,i,r){this.url=e,this.method=n.toUpperCase();let o;if(hx(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new Error("");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),this.transferCache=o.transferCache}if(this.headers??=new qi,this.context??=new mu,!this.params)this.params=new bi,this.urlWithParams=e;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=e;else{let s=e.indexOf("?"),l=s===-1?"?":s<e.length-1?"&":"";this.urlWithParams=e+l+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||PS(this.body)||NS(this.body)||OS(this.body)||px(this.body)?this.body:this.body instanceof bi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||OS(this.body)?null:NS(this.body)?this.body.type||null:PS(this.body)?null:typeof this.body=="string"?jS:this.body instanceof bi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?HS:null}clone(n={}){let e=n.method||this.method,i=n.url||this.url,r=n.responseType||this.responseType,o=n.keepalive??this.keepalive,a=n.priority||this.priority,s=n.cache||this.cache,l=n.mode||this.mode,c=n.redirect||this.redirect,u=n.credentials||this.credentials,d=n.transferCache??this.transferCache,_=n.timeout??this.timeout,f=n.body!==void 0?n.body:this.body,v=n.withCredentials??this.withCredentials,T=n.reportProgress??this.reportProgress,b=n.headers||this.headers,M=n.params||this.params,W=n.context??this.context;return n.setHeaders!==void 0&&(b=Object.keys(n.setHeaders).reduce((H,O)=>H.set(O,n.setHeaders[O]),b)),n.setParams&&(M=Object.keys(n.setParams).reduce((H,O)=>H.set(O,n.setParams[O]),M)),new t(e,i,f,{params:M,headers:b,context:W,reportProgress:T,responseType:r,withCredentials:v,transferCache:d,keepalive:o,cache:s,priority:a,timeout:_,mode:l,redirect:c,credentials:u})}},kr=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(kr||{}),Wo=class{headers;status;statusText;url;ok;type;constructor(n,e=200,i="OK"){this.headers=n.headers||new qi,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},vu=class t extends Wo{constructor(n={}){super(n)}type=kr.ResponseHeader;clone(n={}){return new t({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Da=class t extends Wo{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=kr.Response;clone(n={}){return new t({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Go=class extends Wo{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},mx=200,vx=204;function bg(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect}}var Yi=(()=>{class t{handler;constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof $o)o=e;else{let l;r.headers instanceof qi?l=r.headers:l=new qi(r.headers);let c;r.params&&(r.params instanceof bi?c=r.params:c=new bi({fromObject:r.params})),o=new $o(e,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials})}let a=te(o).pipe(jn(l=>this.handler.handle(l)));if(e instanceof $o||r.observe==="events")return a;let s=a.pipe(tt(l=>l instanceof Da));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return s.pipe(ie(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new j(2806,!1);return l.body}));case"blob":return s.pipe(ie(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new j(2807,!1);return l.body}));case"text":return s.pipe(ie(l=>{if(l.body!==null&&typeof l.body!="string")throw new j(2808,!1);return l.body}));case"json":default:return s.pipe(ie(l=>l.body))}case"response":return s;default:throw new j(2809,!1)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new bi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,bg(r,i))}post(e,i,r={}){return this.request("POST",e,bg(r,i))}put(e,i,r={}){return this.request("PUT",e,bg(r,i))}static \u0275fac=function(i){return new(i||t)(B(zo))};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})();var _x=new z("");function BS(t,n){return n(t)}function yx(t,n){return(e,i)=>n.intercept(e,{handle:r=>t(r,i)})}function Sx(t,n,e){return(i,r)=>dt(e,()=>n(i,o=>t(o,r)))}var US=new z(""),Tg=new z(""),$S=new z(""),Mg=new z("",{providedIn:"root",factory:()=>!0});function Cx(){let t=null;return(n,e)=>{t===null&&(t=(D(US,{optional:!0})??[]).reduceRight(yx,BS));let i=D(qs);if(D(Mg)){let o=i.add();return t(n,e).pipe(Ri(o))}else return t(n,e)}}var _u=(()=>{class t extends zo{backend;injector;chain=null;pendingTasks=D(qs);contributeToStability=D(Mg);constructor(e,i){super(),this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Tg),...this.injector.get($S,[])]));this.chain=i.reduceRight((r,o)=>Sx(r,o,this.injector),BS)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(Ri(i))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||t)(B(wa),B(Ze))};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})();var Ex=/^\)\]\}',?\n/,wx=RegExp(`^${VS}:`,"m");function Dx(t){return"responseURL"in t&&t.responseURL?t.responseURL:wx.test(t.getAllResponseHeaders())?t.getResponseHeader(VS):null}var Ig=(()=>{class t{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new j(-2800,!1);let i=this.xhrFactory;return te(null).pipe(Ue(()=>new oe(o=>{let a=i.build();if(a.open(e.method,e.urlWithParams),e.withCredentials&&(a.withCredentials=!0),e.headers.forEach((b,M)=>a.setRequestHeader(b,M.join(","))),e.headers.has(LS)||a.setRequestHeader(LS,gx),!e.headers.has(kS)){let b=e.detectContentTypeHeader();b!==null&&a.setRequestHeader(kS,b)}if(e.timeout&&(a.timeout=e.timeout),e.responseType){let b=e.responseType.toLowerCase();a.responseType=b!=="json"?b:"text"}let s=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let b=a.statusText||"OK",M=new qi(a.getAllResponseHeaders()),W=Dx(a)||e.url;return l=new vu({headers:M,status:a.status,statusText:b,url:W}),l},u=()=>{let{headers:b,status:M,statusText:W,url:H}=c(),O=null;M!==vx&&(O=typeof a.response>"u"?a.responseText:a.response),M===0&&(M=O?mx:0);let V=M>=200&&M<300;if(e.responseType==="json"&&typeof O=="string"){let S=O;O=O.replace(Ex,"");try{O=O!==""?JSON.parse(O):null}catch(m){O=S,V&&(V=!1,O={error:m,text:O})}}V?(o.next(new Da({body:O,headers:b,status:M,statusText:W,url:H||void 0})),o.complete()):o.error(new Go({error:O,headers:b,status:M,statusText:W,url:H||void 0}))},d=b=>{let{url:M}=c(),W=new Go({error:b,status:a.status||0,statusText:a.statusText||"Unknown Error",url:M||void 0});o.error(W)},_=d;e.timeout&&(_=b=>{let{url:M}=c(),W=new Go({error:new DOMException("Request timed out","TimeoutError"),status:a.status||0,statusText:a.statusText||"Request timeout",url:M||void 0});o.error(W)});let f=!1,v=b=>{f||(o.next(c()),f=!0);let M={type:kr.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(M.total=b.total),e.responseType==="text"&&a.responseText&&(M.partialText=a.responseText),o.next(M)},T=b=>{let M={type:kr.UploadProgress,loaded:b.loaded};b.lengthComputable&&(M.total=b.total),o.next(M)};return a.addEventListener("load",u),a.addEventListener("error",d),a.addEventListener("timeout",_),a.addEventListener("abort",d),e.reportProgress&&(a.addEventListener("progress",v),s!==null&&a.upload&&a.upload.addEventListener("progress",T)),a.send(s),o.next({type:kr.Sent}),()=>{a.removeEventListener("error",d),a.removeEventListener("abort",d),a.removeEventListener("load",u),a.removeEventListener("timeout",_),e.reportProgress&&(a.removeEventListener("progress",v),s!==null&&a.upload&&a.upload.removeEventListener("progress",T)),a.readyState!==a.DONE&&a.abort()}})))}static \u0275fac=function(i){return new(i||t)(B(Or))};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})(),GS=new z(""),bx="XSRF-TOKEN",Ix=new z("",{providedIn:"root",factory:()=>bx}),Tx="X-XSRF-TOKEN",Mx=new z("",{providedIn:"root",factory:()=>Tx}),ba=class{},xx=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,i){this.doc=e,this.cookieName=i}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=_a(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||t)(B(Pe),B(Ix))};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})();function Rx(t,n){let e=t.url.toLowerCase();if(!D(GS)||t.method==="GET"||t.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(t);let i=D(ba).getToken(),r=D(Mx);return i!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),n(t)}var xg=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(xg||{});function Ax(t,n){return{\u0275kind:t,\u0275providers:n}}function zS(...t){let n=[Yi,Ig,_u,{provide:zo,useExisting:_u},{provide:wa,useFactory:()=>D(_x,{optional:!0})??D(Ig)},{provide:Tg,useValue:Rx,multi:!0},{provide:GS,useValue:!0},{provide:ba,useClass:xx}];for(let e of t)n.push(...e.\u0275providers);return gi(n)}var FS=new z("");function WS(){return Ax(xg.LegacyInterceptors,[{provide:FS,useFactory:Cx},{provide:Tg,useExisting:FS,multi:!0}])}var Rg=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Be({providers:[zS(WS())]})}return t})();var qS=(()=>{class t{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||t)(B(Pe))};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Pg=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:function(i){let r=null;return i?r=new(i||t):r=B(Px),r},providedIn:"root"})}return t})(),Px=(()=>{class t extends Pg{_doc;constructor(e){super(),this._doc=e}sanitize(e,i){if(i==null)return null;switch(e){case Tn.NONE:return i;case Tn.HTML:return Si(i,"HTML")?In(i):Hc(this._doc,String(i)).toString();case Tn.STYLE:return Si(i,"Style")?In(i):i;case Tn.SCRIPT:if(Si(i,"Script"))return In(i);throw new j(5200,!1);case Tn.URL:return Si(i,"URL")?In(i):ra(String(i));case Tn.RESOURCE_URL:if(Si(i,"ResourceURL"))return In(i);throw new j(5201,!1);default:throw new j(5202,!1)}}bypassSecurityTrustHtml(e){return ap(e)}bypassSecurityTrustStyle(e){return lp(e)}bypassSecurityTrustScript(e){return cp(e)}bypassSecurityTrustUrl(e){return up(e)}bypassSecurityTrustResourceUrl(e){return dp(e)}static \u0275fac=function(i){return new(i||t)(B(Pe))};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var iC=(()=>{class t{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||t)(K(cn),K(Je))};static \u0275dir=Oe({type:t})}return t})(),Tu=(()=>{class t extends iC{static \u0275fac=(()=>{let e;return function(r){return(e||(e=yi(t)))(r||t)}})();static \u0275dir=Oe({type:t,features:[Ht]})}return t})(),Zo=new z(""),Nx={provide:Zo,useExisting:qt(()=>Hg),multi:!0},Hg=(()=>{class t extends Tu{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=yi(t)))(r||t)}})();static \u0275dir=Oe({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&q("change",function(a){return r.onChange(a.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Bt([Nx]),Ht]})}return t})(),Ox={provide:Zo,useExisting:qt(()=>Mu),multi:!0};function kx(){let t=Qt()?Qt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Lx=new z(""),Mu=(()=>{class t extends iC{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!kx())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||t)(K(cn),K(Je),K(Lx,8))};static \u0275dir=Oe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&q("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[Bt([Ox]),Ht]})}return t})();var Bg=new z(""),Ug=new z("");function rC(t){return t!=null}function oC(t){return $i(t)?je(t):t}function sC(t){let n={};return t.forEach(e=>{n=e!=null?N(N({},n),e):n}),Object.keys(n).length===0?null:n}function aC(t,n){return n.map(e=>e(t))}function Fx(t){return!t.validate}function lC(t){return t.map(n=>Fx(n)?n:e=>n.validate(e))}function Vx(t){if(!t)return null;let n=t.filter(rC);return n.length==0?null:function(e){return sC(aC(e,n))}}function cC(t){return t!=null?Vx(lC(t)):null}function jx(t){if(!t)return null;let n=t.filter(rC);return n.length==0?null:function(e){let i=aC(e,n).map(oC);return xs(i).pipe(ie(sC))}}function uC(t){return t!=null?jx(lC(t)):null}function YS(t,n){return t===null?[n]:Array.isArray(t)?[...t,n]:[t,n]}function dC(t){return t._rawValidators}function fC(t){return t._rawAsyncValidators}function Og(t){return t?Array.isArray(t)?t:[t]:[]}function Su(t,n){return Array.isArray(t)?t.includes(n):t===n}function KS(t,n){let e=Og(n);return Og(t).forEach(r=>{Su(e,r)||e.push(r)}),e}function ZS(t,n){return Og(n).filter(e=>!Su(t,e))}var Cu=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=cC(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=uC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return this.control?this.control.hasError(n,e):!1}getError(n,e){return this.control?this.control.getError(n,e):null}},Lr=class extends Cu{name;get formDirective(){return null}get path(){return null}},Fr=class extends Cu{_parent=null;name=null;valueAccessor=null},Eu=class{_cd;constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Hx={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},w7=ue(N({},Hx),{"[class.ng-submitted]":"isSubmitted"}),xu=(()=>{class t extends Eu{constructor(e){super(e)}static \u0275fac=function(i){return new(i||t)(K(Fr,2))};static \u0275dir=Oe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&De("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Ht]})}return t})(),hC=(()=>{class t extends Eu{constructor(e){super(e)}static \u0275fac=function(i){return new(i||t)(K(Lr,10))};static \u0275dir=Oe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&De("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Ht]})}return t})();var Ia="VALID",yu="INVALID",qo="PENDING",Ta="DISABLED",Ki=class{},wu=class extends Ki{value;source;constructor(n,e){super(),this.value=n,this.source=e}},Ma=class extends Ki{pristine;source;constructor(n,e){super(),this.pristine=n,this.source=e}},xa=class extends Ki{touched;source;constructor(n,e){super(),this.touched=n,this.source=e}},Yo=class extends Ki{status;source;constructor(n,e){super(),this.status=n,this.source=e}},kg=class extends Ki{source;constructor(n){super(),this.source=n}},Lg=class extends Ki{source;constructor(n){super(),this.source=n}};function $g(t){return(Ru(t)?t.validators:t)||null}function Bx(t){return Array.isArray(t)?cC(t):t||null}function Gg(t,n){return(Ru(n)?n.asyncValidators:t)||null}function Ux(t){return Array.isArray(t)?uC(t):t||null}function Ru(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function pC(t,n,e){let i=t.controls;if(!(n?Object.keys(i):i).length)throw new j(1e3,"");if(!i[e])throw new j(1001,"")}function gC(t,n,e){t._forEachChild((i,r)=>{if(e[r]===void 0)throw new j(1002,"")})}var Ko=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(n,e){this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return dn(this.statusReactive)}set status(n){dn(()=>this.statusReactive.set(n))}_status=Bo(()=>this.statusReactive());statusReactive=Vt(void 0);get valid(){return this.status===Ia}get invalid(){return this.status===yu}get pending(){return this.status==qo}get disabled(){return this.status===Ta}get enabled(){return this.status!==Ta}errors;get pristine(){return dn(this.pristineReactive)}set pristine(n){dn(()=>this.pristineReactive.set(n))}_pristine=Bo(()=>this.pristineReactive());pristineReactive=Vt(!0);get dirty(){return!this.pristine}get touched(){return dn(this.touchedReactive)}set touched(n){dn(()=>this.touchedReactive.set(n))}_touched=Bo(()=>this.touchedReactive());touchedReactive=Vt(!1);get untouched(){return!this.touched}_events=new ne;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(KS(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(KS(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(ZS(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(ZS(n,this._rawAsyncValidators))}hasValidator(n){return Su(this._rawValidators,n)}hasAsyncValidator(n){return Su(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let e=this.touched===!1;this.touched=!0;let i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(ue(N({},n),{sourceControl:i})),e&&n.emitEvent!==!1&&this._events.next(new xa(!0,i))}markAllAsDirty(n={}){this.markAsDirty({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(n))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(n))}markAsUntouched(n={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=n.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:i})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,i),e&&n.emitEvent!==!1&&this._events.next(new xa(!1,i))}markAsDirty(n={}){let e=this.pristine===!0;this.pristine=!1;let i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(ue(N({},n),{sourceControl:i})),e&&n.emitEvent!==!1&&this._events.next(new Ma(!1,i))}markAsPristine(n={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=n.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,i),e&&n.emitEvent!==!1&&this._events.next(new Ma(!0,i))}markAsPending(n={}){this.status=qo;let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Yo(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(ue(N({},n),{sourceControl:e}))}disable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=Ta,this.errors=null,this._forEachChild(r=>{r.disable(ue(N({},n),{onlySelf:!0}))}),this._updateValue();let i=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new wu(this.value,i)),this._events.next(new Yo(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ue(N({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=Ia,this._forEachChild(i=>{i.enable(ue(N({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(ue(N({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n,e){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ia||this.status===qo)&&this._runAsyncValidator(i,n.emitEvent)}let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new wu(this.value,e)),this._events.next(new Yo(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(ue(N({},n),{sourceControl:e}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ta:Ia}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,e){if(this.asyncValidator){this.status=qo,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:n!==!1};let i=oC(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(n){let e=n;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(n,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,e,i){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||i)&&this._events.next(new Yo(this.status,e)),this._parent&&this._parent._updateControlsErrors(n,e,i)}_initObservables(){this.valueChanges=new Ee,this.statusChanges=new Ee}_calculateStatus(){return this._allControlsDisabled()?Ta:this.errors?yu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qo)?qo:this._anyControlsHaveStatus(yu)?yu:Ia}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,e),r&&this._events.next(new Ma(this.pristine,e))}_updateTouched(n={},e){this.touched=this._anyControlsTouched(),this._events.next(new xa(this.touched,e)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,e)}_onDisabledChange=[];_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Ru(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let e=this._parent&&this._parent.dirty;return!n&&!!e&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=Bx(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=Ux(this._rawAsyncValidators)}},Du=class extends Ko{constructor(n,e,i){super($g(e),Gg(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){gC(this,!0,n),Object.keys(n).forEach(i=>{pC(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(Object.keys(n).forEach(i=>{let r=this.controls[i];r&&r.patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,r)=>{i.reset(n?n[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&n(i))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(n,e){let i=n;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var Fg=class extends Du{};var Au=new z("",{providedIn:"root",factory:()=>Pu}),Pu="always";function mC(t,n){return[...n.path,t]}function Vg(t,n,e=Pu){zg(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||e==="always")&&n.valueAccessor.setDisabledState?.(t.disabled),Gx(t,n),Wx(t,n),zx(t,n),$x(t,n)}function QS(t,n,e=!0){let i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),Iu(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function bu(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function $x(t,n){if(n.valueAccessor.setDisabledState){let e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}function zg(t,n){let e=dC(t);n.validator!==null?t.setValidators(YS(e,n.validator)):typeof e=="function"&&t.setValidators([e]);let i=fC(t);n.asyncValidator!==null?t.setAsyncValidators(YS(i,n.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();bu(n._rawValidators,r),bu(n._rawAsyncValidators,r)}function Iu(t,n){let e=!1;if(t!==null){if(n.validator!==null){let r=dC(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==n.validator);o.length!==r.length&&(e=!0,t.setValidators(o))}}if(n.asyncValidator!==null){let r=fC(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==n.asyncValidator);o.length!==r.length&&(e=!0,t.setAsyncValidators(o))}}}let i=()=>{};return bu(n._rawValidators,i),bu(n._rawAsyncValidators,i),e}function Gx(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&vC(t,n)})}function zx(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&vC(t,n),t.updateOn!=="submit"&&t.markAsTouched()})}function vC(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Wx(t,n){let e=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}function qx(t,n){t==null,zg(t,n)}function Yx(t,n){return Iu(t,n)}function _C(t,n){if(!t.hasOwnProperty("model"))return!1;let e=t.model;return e.isFirstChange()?!0:!Object.is(n,e.currentValue)}function Kx(t){return Object.getPrototypeOf(t.constructor)===Tu}function Zx(t,n){t._syncPendingControls(),n.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function yC(t,n){if(!n)return null;Array.isArray(n);let e,i,r;return n.forEach(o=>{o.constructor===Mu?e=o:Kx(o)?i=o:r=o}),r||i||e||null}function Qx(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function XS(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function JS(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Ra=class extends Ko{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(n=null,e,i){super($g(e),Gg(i,e)),this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ru(e)&&(e.nonNullable||e.initialValueIsDefault)&&(JS(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){XS(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){XS(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){JS(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var Xx=t=>t instanceof Ra;var Jx={provide:Fr,useExisting:qt(()=>Aa)},eC=Promise.resolve(),Aa=(()=>{class t extends Fr{_changeDetectorRef;callSetDisabledState;control=new Ra;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ee;constructor(e,i,r,o,a,s){super(),this._changeDetectorRef=a,this.callSetDisabledState=s,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=yC(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),_C(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Vg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){eC.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&fn(i);eC.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?mC(e,this._parent):[e]}static \u0275fac=function(i){return new(i||t)(K(Lr,9),K(Bg,10),K(Ug,10),K(Zo,10),K(Ut,8),K(Au,8))};static \u0275dir=Oe({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Bt([Jx]),Ht,ln]})}return t})();var SC=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=Oe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var CC=new z("");var eR={provide:Lr,useExisting:qt(()=>Wg)},Wg=(()=>{class t extends Lr{callSetDisabledState;get submitted(){return dn(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=Bo(()=>this._submittedReactive());_submittedReactive=Vt(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ee;constructor(e,i,r){super(),this.callSetDisabledState=r,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Iu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return Vg(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){QS(e.control||null,e,!1),Qx(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),Zx(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new kg(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0,i={}){this.form.reset(e,i),this._submittedReactive.set(!1),i?.emitEvent!==!1&&this.form._events.next(new Lg(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(QS(i||null,e),Xx(r)&&(Vg(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);qx(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&Yx(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zg(this.form,this),this._oldForm&&Iu(this._oldForm,this)}static \u0275fac=function(i){return new(i||t)(K(Bg,10),K(Ug,10),K(Au,8))};static \u0275dir=Oe({type:t,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&q("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Bt([eR]),Ht,ln]})}return t})();var tR={provide:Fr,useExisting:qt(()=>qg)},qg=(()=>{class t extends Fr{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new Ee;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,i,r,o,a){super(),this._ngModelWarningConfig=a,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=yC(this,o)}ngOnChanges(e){this._added||this._setUpControl(),_C(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return mC(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||t)(K(Lr,13),K(Bg,10),K(Ug,10),K(Zo,10),K(CC,8))};static \u0275dir=Oe({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Bt([tR]),Ht,ln]})}return t})();var nR={provide:Zo,useExisting:qt(()=>Qo),multi:!0};function EC(t,n){return t==null?`${n}`:(n&&typeof n=="object"&&(n="Object"),`${t}: ${n}`.slice(0,50))}function iR(t){return t.split(":")[0]}var Qo=(()=>{class t extends Tu{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;appRefInjector=D(pt).injector;destroyRef=D(an);cdr=D(Ut);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Ui({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(e){this.cdr.markForCheck(),this.value=e;let i=this._getOptionId(e),r=EC(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=iR(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=yi(t)))(r||t)}})();static \u0275dir=Oe({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&q("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Bt([nR]),Ht]})}return t})(),Nu=(()=>{class t{_element;_renderer;_select;id;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(EC(this.id,e)),this._select._writeValueAfterRender())}set value(e){this._setElementValue(e),this._select&&this._select._writeValueAfterRender()}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||t)(K(Je),K(cn),K(Qo,9))};static \u0275dir=Oe({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),rR={provide:Zo,useExisting:qt(()=>wC),multi:!0};function tC(t,n){return t==null?`${n}`:(typeof n=="string"&&(n=`'${n}'`),n&&typeof n=="object"&&(n="Object"),`${t}: ${n}`.slice(0,50))}function oR(t){return t.split(":")[0]}var wC=(()=>{class t extends Tu{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(r.indexOf(a.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let s=0;s<a.length;s++){let l=a[s],c=this._getOptionValue(l.value);r.push(c)}}else{let a=i.options;for(let s=0;s<a.length;s++){let l=a[s];if(l.selected){let c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=oR(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=yi(t)))(r||t)}})();static \u0275dir=Oe({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&q("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Bt([rR]),Ht]})}return t})(),Ou=(()=>{class t{_element;_renderer;_select;id;_value;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(tC(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(tC(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||t)(K(Je),K(cn),K(wC,9))};static \u0275dir=Oe({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();var DC=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Be({})}return t})(),jg=class extends Ko{constructor(n,e,i){super($g(e),Gg(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(n){return this.controls[this._adjustIndex(n)]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,i={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,e={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,i={}){let r=this._adjustIndex(n);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){gC(this,!1,n),n.forEach((i,r)=>{pC(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(n.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((e,i)=>i._syncPendingControls()?!0:e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,i)=>{n(e,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(let n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}};function nC(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var bC=(()=>{class t{useNonNullable=!1;get nonNullable(){let e=new t;return e.useNonNullable=!0,e}group(e,i=null){let r=this._reduceControls(e),o={};return nC(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Du(r,o)}record(e,i=null){let r=this._reduceControls(e);return new Fg(r,i)}control(e,i,r){let o={};return this.useNonNullable?(nC(i)?o=i:(o.validators=i,o.asyncValidators=r),new Ra(e,ue(N({},o),{nonNullable:!0}))):new Ra(e,i,r)}array(e,i,r){let o=e.map(a=>this._createControl(a));return new jg(o,i,r)}_reduceControls(e){let i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){if(e instanceof Ra)return e;if(e instanceof Ko)return e;if(Array.isArray(e)){let i=e[0],r=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(i,r,o)}else return this.control(e)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Xo=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Au,useValue:e.callSetDisabledState??Pu}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Be({imports:[DC]})}return t})(),IC=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:CC,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Au,useValue:e.callSetDisabledState??Pu}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Be({imports:[DC]})}return t})();var ge="primary",Ga=Symbol("RouteTitle"),Xg=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Hr(t){return new Xg(t)}function kC(t,n,e){let i=e.path.split("/");if(i.length>t.length||e.pathMatch==="full"&&(n.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],s=t[o];if(a[0]===":")r[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function sR(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!ei(t[e],n[e]))return!1;return!0}function ei(t,n){let e=t?Jg(t):void 0,i=n?Jg(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!LC(t[r],n[r]))return!1;return!0}function Jg(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function LC(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;let e=[...t].sort(),i=[...n].sort();return e.every((r,o)=>i[o]===r)}else return t===n}function FC(t){return t.length>0?t[t.length-1]:null}function Ii(t){return Fl(t)?t:$i(t)?je(Promise.resolve(t)):te(t)}var aR={exact:jC,subset:HC},VC={exact:lR,subset:cR,ignored:()=>!0};function MC(t,n,e){return aR[e.paths](t.root,n.root,e.matrixParams)&&VC[e.queryParams](t.queryParams,n.queryParams)&&!(e.fragment==="exact"&&t.fragment!==n.fragment)}function lR(t,n){return ei(t,n)}function jC(t,n,e){if(!Vr(t.segments,n.segments)||!Fu(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(let i in n.children)if(!t.children[i]||!jC(t.children[i],n.children[i],e))return!1;return!0}function cR(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>LC(t[e],n[e]))}function HC(t,n,e){return BC(t,n,n.segments,e)}function BC(t,n,e,i){if(t.segments.length>e.length){let r=t.segments.slice(0,e.length);return!(!Vr(r,e)||n.hasChildren()||!Fu(r,e,i))}else if(t.segments.length===e.length){if(!Vr(t.segments,e)||!Fu(t.segments,e,i))return!1;for(let r in n.children)if(!t.children[r]||!HC(t.children[r],n.children[r],i))return!1;return!0}else{let r=e.slice(0,t.segments.length),o=e.slice(t.segments.length);return!Vr(t.segments,r)||!Fu(t.segments,r,i)||!t.children[ge]?!1:BC(t.children[ge],n,o,i)}}function Fu(t,n,e){return n.every((i,r)=>VC[e](t[r].parameters,i.parameters))}var ni=class{root;queryParams;fragment;_queryParamMap;constructor(n=new xe([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Hr(this.queryParams),this._queryParamMap}toString(){return fR.serialize(this)}},xe=class{segments;children;parent=null;constructor(n,e){this.segments=n,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vu(this)}},Zi=class{path;parameters;_parameterMap;constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=Hr(this.parameters),this._parameterMap}toString(){return $C(this)}};function uR(t,n){return Vr(t,n)&&t.every((e,i)=>ei(e.parameters,n[i].parameters))}function Vr(t,n){return t.length!==n.length?!1:t.every((e,i)=>e.path===n[i].path)}function dR(t,n){let e=[];return Object.entries(t.children).forEach(([i,r])=>{i===ge&&(e=e.concat(n(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==ge&&(e=e.concat(n(r,i)))}),e}var Br=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:()=>new Qi,providedIn:"root"})}return t})(),Qi=class{parse(n){let e=new tm(n);return new ni(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${Pa(n.root,!0)}`,i=gR(n.queryParams),r=typeof n.fragment=="string"?`#${hR(n.fragment)}`:"";return`${e}${i}${r}`}},fR=new Qi;function Vu(t){return t.segments.map(n=>$C(n)).join("/")}function Pa(t,n){if(!t.hasChildren())return Vu(t);if(n){let e=t.children[ge]?Pa(t.children[ge],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==ge&&i.push(`${r}:${Pa(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=dR(t,(i,r)=>r===ge?[Pa(t.children[ge],!1)]:[`${r}:${Pa(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[ge]!=null?`${Vu(t)}/${e[0]}`:`${Vu(t)}/(${e.join("//")})`}}function UC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ku(t){return UC(t).replace(/%3B/gi,";")}function hR(t){return encodeURI(t)}function em(t){return UC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ju(t){return decodeURIComponent(t)}function xC(t){return ju(t.replace(/\+/g,"%20"))}function $C(t){return`${em(t.path)}${pR(t.parameters)}`}function pR(t){return Object.entries(t).map(([n,e])=>`;${em(n)}=${em(e)}`).join("")}function gR(t){let n=Object.entries(t).map(([e,i])=>Array.isArray(i)?i.map(r=>`${ku(e)}=${ku(r)}`).join("&"):`${ku(e)}=${ku(i)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var mR=/^[^\/()?;#]+/;function Yg(t){let n=t.match(mR);return n?n[0]:""}var vR=/^[^\/()?;=#]+/;function _R(t){let n=t.match(vR);return n?n[0]:""}var yR=/^[^=?&#]+/;function SR(t){let n=t.match(yR);return n?n[0]:""}var CR=/^[^&#]+/;function ER(t){let n=t.match(CR);return n?n[0]:""}var tm=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[ge]=new xe(n,e)),i}parseSegment(){let n=Yg(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(n),new Zi(ju(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=_R(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=Yg(this.remaining);r&&(i=r,this.capture(i))}n[ju(e)]=ju(i)}parseQueryParam(n){let e=SR(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let a=ER(this.remaining);a&&(i=a,this.capture(i))}let r=xC(e),o=xC(i);if(n.hasOwnProperty(r)){let a=n[r];Array.isArray(a)||(a=[a],n[r]=a),a.push(o)}else n[r]=o}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Yg(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new j(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=ge);let a=this.parseChildren();e[o]=Object.keys(a).length===1?a[ge]:new xe([],a),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new j(4011,!1)}};function GC(t){return t.segments.length>0?new xe([],{[ge]:t}):t}function zC(t){let n={};for(let[i,r]of Object.entries(t.children)){let o=zC(r);if(i===ge&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))n[a]=s;else(o.segments.length>0||o.hasChildren())&&(n[i]=o)}let e=new xe(t.segments,n);return wR(e)}function wR(t){if(t.numberOfChildren===1&&t.children[ge]){let n=t.children[ge];return new xe(t.segments.concat(n.segments),n.children)}return t}function rs(t){return t instanceof ni}function WC(t,n,e=null,i=null){let r=qC(t);return YC(r,n,e,i)}function qC(t){let n;function e(o){let a={};for(let l of o.children){let c=e(l);a[l.outlet]=c}let s=new xe(o.url,a);return o===t&&(n=s),s}let i=e(t.root),r=GC(i);return n??r}function YC(t,n,e,i){let r=t;for(;r.parent;)r=r.parent;if(n.length===0)return Kg(r,r,r,e,i);let o=DR(n);if(o.toRoot())return Kg(r,r,new xe([],{}),e,i);let a=bR(o,r,t),s=a.processChildren?Oa(a.segmentGroup,a.index,o.commands):ZC(a.segmentGroup,a.index,o.commands);return Kg(r,a.segmentGroup,s,e,i)}function Hu(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function La(t){return typeof t=="object"&&t!=null&&t.outlets}function Kg(t,n,e,i,r){let o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let a;t===n?a=e:a=KC(t,n,e);let s=GC(zC(a));return new ni(s,o,r)}function KC(t,n,e){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===n?i[r]=e:i[r]=KC(o,n,e)}),new xe(t.segments,i)}var Bu=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&Hu(i[0]))throw new j(4003,!1);let r=i.find(La);if(r&&r!==FC(i))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function DR(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Bu(!0,0,t);let n=0,e=!1,i=t.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([l,c])=>{s[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:s}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((s,l)=>{l==0&&s==="."||(l==0&&s===""?e=!0:s===".."?n++:s!=""&&r.push(s))}),r):[...r,o]},[]);return new Bu(e,n,i)}var ts=class{segmentGroup;processChildren;index;constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}};function bR(t,n,e){if(t.isAbsolute)return new ts(n,!0,0);if(!e)return new ts(n,!1,NaN);if(e.parent===null)return new ts(e,!0,0);let i=Hu(t.commands[0])?0:1,r=e.segments.length-1+i;return IR(e,r,t.numberOfDoubleDots)}function IR(t,n,e){let i=t,r=n,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new j(4005,!1);r=i.segments.length}return new ts(i,!1,r-o)}function TR(t){return La(t[0])?t[0].outlets:{[ge]:t}}function ZC(t,n,e){if(t??=new xe([],{}),t.segments.length===0&&t.hasChildren())return Oa(t,n,e);let i=MR(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new xe(t.segments.slice(0,i.pathIndex),{});return o.children[ge]=new xe(t.segments.slice(i.pathIndex),t.children),Oa(o,0,r)}else return i.match&&r.length===0?new xe(t.segments,{}):i.match&&!t.hasChildren()?nm(t,n,e):i.match?Oa(t,0,r):nm(t,n,e)}function Oa(t,n,e){if(e.length===0)return new xe(t.segments,{});{let i=TR(e),r={};if(Object.keys(i).some(o=>o!==ge)&&t.children[ge]&&t.numberOfChildren===1&&t.children[ge].segments.length===0){let o=Oa(t.children[ge],n,e);return new xe(t.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=ZC(t.children[o],n,a))}),Object.entries(t.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new xe(t.segments,r)}}function MR(t,n,e){let i=0,r=n,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return o;let a=t.segments[r],s=e[i];if(La(s))break;let l=`${s}`,c=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!AC(l,c,a))return o;i+=2}else{if(!AC(l,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function nm(t,n,e){let i=t.segments.slice(0,n),r=0;for(;r<e.length;){let o=e[r];if(La(o)){let l=xR(o.outlets);return new xe(i,l)}if(r===0&&Hu(e[0])){let l=t.segments[n];i.push(new Zi(l.path,RC(e[0]))),r++;continue}let a=La(o)?o.outlets[ge]:`${o}`,s=r<e.length-1?e[r+1]:null;a&&s&&Hu(s)?(i.push(new Zi(a,RC(s))),r+=2):(i.push(new Zi(a,{})),r++)}return new xe(i,{})}function xR(t){let n={};return Object.entries(t).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(n[e]=nm(new xe([],{}),0,i))}),n}function RC(t){let n={};return Object.entries(t).forEach(([e,i])=>n[e]=`${i}`),n}function AC(t,n,e){return t==e.path&&ei(n,e.parameters)}var ns="imperative",st=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(st||{}),Jt=class{id;url;constructor(n,e){this.id=n,this.url=e}},Xi=class extends Jt{type=st.NavigationStart;navigationTrigger;restoredState;constructor(n,e,i="imperative",r=null){super(n,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},An=class extends Jt{urlAfterRedirects;type=st.NavigationEnd;constructor(n,e,i){super(n,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ot=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(Ot||{}),os=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(os||{}),ti=class extends Jt{reason;code;type=st.NavigationCancel;constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ii=class extends Jt{reason;code;type=st.NavigationSkipped;constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r}},ss=class extends Jt{error;target;type=st.NavigationError;constructor(n,e,i,r){super(n,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Fa=class extends Jt{urlAfterRedirects;state;type=st.RoutesRecognized;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uu=class extends Jt{urlAfterRedirects;state;type=st.GuardsCheckStart;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$u=class extends Jt{urlAfterRedirects;state;shouldActivate;type=st.GuardsCheckEnd;constructor(n,e,i,r,o){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gu=class extends Jt{urlAfterRedirects;state;type=st.ResolveStart;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zu=class extends Jt{urlAfterRedirects;state;type=st.ResolveEnd;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wu=class{route;type=st.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},qu=class{route;type=st.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Yu=class{snapshot;type=st.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ku=class{snapshot;type=st.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zu=class{snapshot;type=st.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qu=class{snapshot;type=st.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},as=class{routerEvent;position;anchor;type=st.Scroll;constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},Va=class{},ls=class{url;navigationBehaviorOptions;constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}};function RR(t){return!(t instanceof Va)&&!(t instanceof ls)}function AR(t,n){return t.providers&&!t._injector&&(t._injector=No(t.providers,n,`Route: ${t.path}`)),t._injector??n}function Rn(t){return t.outlet||ge}function PR(t,n){let e=t.filter(i=>Rn(i)===n);return e.push(...t.filter(i=>Rn(i)!==n)),e}function ds(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Xu=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ds(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new Ur(this.rootInjector)}},Ur=(()=>{class t{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Xu(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||t)(B(Ze))};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ju=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=im(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){let e=im(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=rm(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return rm(n,this._root).map(e=>e.value)}};function im(t,n){if(t===n.value)return n;for(let e of n.children){let i=im(t,e);if(i)return i}return null}function rm(t,n){if(t===n.value)return[n];for(let e of n.children){let i=rm(t,e);if(i.length)return i.unshift(n),i}return[]}var Xt=class{value;children;constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function es(t){let n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}var ja=class extends Ju{snapshot;constructor(n,e){super(n),this.snapshot=e,fm(this,n)}toString(){return this.snapshot.toString()}};function QC(t){let n=NR(t),e=new Le([new Zi("",{})]),i=new Le({}),r=new Le({}),o=new Le({}),a=new Le(""),s=new Ji(e,i,o,a,r,ge,t,n.root);return s.snapshot=n.root,new ja(new Xt(s,[]),n)}function NR(t){let n={},e={},i={},r="",o=new jr([],n,i,r,e,ge,t,null,{});return new Ha("",new Xt(o,[]))}var Ji=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,e,i,r,o,a,s,l){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ie(c=>c[Ga]))??te(void 0),this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(n=>Hr(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(n=>Hr(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ed(t,n,e="emptyOnly"){let i,{routeConfig:r}=t;return n!==null&&(e==="always"||r?.path===""||!n.component&&!n.routeConfig?.loadComponent)?i={params:N(N({},n.params),t.params),data:N(N({},n.data),t.data),resolve:N(N(N(N({},t.data),n.data),r?.data),t._resolvedData)}:i={params:N({},t.params),data:N({},t.data),resolve:N(N({},t.data),t._resolvedData??{})},r&&JC(r)&&(i.resolve[Ga]=r.title),i}var jr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ga]}constructor(n,e,i,r,o,a,s,l,c){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=s,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Hr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Hr(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},Ha=class extends Ju{url;constructor(n,e){super(e),this.url=n,fm(this,e)}toString(){return XC(this._root)}};function fm(t,n){n.value._routerState=t,n.children.forEach(e=>fm(t,e))}function XC(t){let n=t.children.length>0?` { ${t.children.map(XC).join(", ")} } `:"";return`${t.value}${n}`}function Zg(t){if(t.snapshot){let n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,ei(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),ei(n.params,e.params)||t.paramsSubject.next(e.params),sR(n.url,e.url)||t.urlSubject.next(e.url),ei(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function om(t,n){let e=ei(t.params,n.params)&&uR(t.url,n.url),i=!t.parent!=!n.parent;return e&&!i&&(!t.parent||om(t.parent,n.parent))}function JC(t){return typeof t.title=="string"||t.title===null}var eE=new z(""),za=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ge;activateEvents=new Ee;deactivateEvents=new Ee;attachEvents=new Ee;detachEvents=new Ee;routerOutletData=Jy(void 0);parentContexts=D(Ur);location=D(un);changeDetector=D(Ut);inputBinder=D(Wa,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=e;let r=this.location,a=e.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,l=new sm(e,s,r.injector,this.routerOutletData);this.activated=r.createComponent(a,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=Oe({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ln]})}return t})(),sm=class{route;childContexts;parent;outletData;constructor(n,e,i,r){this.route=n,this.childContexts=e,this.parent=i,this.outletData=r}get(n,e){return n===Ji?this.route:n===Ur?this.childContexts:n===eE?this.outletData:this.parent.get(n,e)}},Wa=new z(""),hm=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=Ts([i.queryParams,i.params,i.data]).pipe(Ue(([o,a,s],l)=>(s=N(N(N({},o),a),s),l===0?te(s):Promise.resolve(s)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let a=lS(i.component);if(!a){this.unsubscribeFromRouteData(e);return}for(let{templateName:s}of a.inputs)e.activatedComponentRef.setInput(s,o[s])});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})(),pm=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=jt({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&Z(0,"router-outlet")},dependencies:[za],encapsulation:2})}return t})();function gm(t){let n=t.children&&t.children.map(gm),e=n?ue(N({},t),{children:n}):N({},t);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==ge&&(e.component=pm),e}function OR(t,n,e){let i=Ba(t,n._root,e?e._root:void 0);return new ja(i,n)}function Ba(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=n.value;let r=kR(t,n,e);return new Xt(i,r)}else{if(t.shouldAttach(n.value)){let o=t.retrieve(n.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=n.value,a.children=n.children.map(s=>Ba(t,s)),a}}let i=LR(n.value),r=n.children.map(o=>Ba(t,o));return new Xt(i,r)}}function kR(t,n,e){return n.children.map(i=>{for(let r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Ba(t,i,r);return Ba(t,i)})}function LR(t){return new Ji(new Le(t.url),new Le(t.params),new Le(t.queryParams),new Le(t.fragment),new Le(t.data),t.outlet,t.component,t)}var cs=class{redirectTo;navigationBehaviorOptions;constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}},tE="ngNavigationCancelingError";function td(t,n){let{redirectTo:e,navigationBehaviorOptions:i}=rs(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=nE(!1,Ot.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function nE(t,n){let e=new Error(`NavigationCancelingError: ${t||""}`);return e[tE]=!0,e.cancellationCode=n,e}function FR(t){return iE(t)&&rs(t.url)}function iE(t){return!!t&&t[tE]}var VR=(t,n,e,i)=>ie(r=>(new am(n,r.targetRouterState,r.currentRouterState,e,i).activate(t),r)),am=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,e,i,r,o){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(n){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),Zg(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){let r=es(e);n.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(n,e,i){let r=n.value,o=e?e.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(n,e,a.children)}else this.deactivateChildRoutes(n,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,o=es(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),s=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:a,route:n,contexts:s})}}deactivateRouteAndOutlet(n,e){let i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,o=es(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,e,i){let r=es(e);n.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Qu(o.value.snapshot))}),n.children.length&&this.forwardEvent(new Ku(n.value.snapshot))}activateRoutes(n,e,i){let r=n.value,o=e?e.value:null;if(Zg(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,a.children)}else this.activateChildRoutes(n,e,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Zg(s.route.value),this.activateChildRoutes(n,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(n,null,a.children)}else this.activateChildRoutes(n,null,i)}},nd=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},is=class{component;route;constructor(n,e){this.component=n,this.route=e}};function jR(t,n,e){let i=t._root,r=n?n._root:null;return Na(i,r,e,[i.value])}function HR(t){let n=t.routeConfig?t.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:t,guards:n}}function fs(t,n){let e=Symbol(),i=n.get(t,e);return i===e?typeof t=="function"&&!mf(t)?t:n.get(t):i}function Na(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=es(n);return t.children.forEach(a=>{BR(a,o[a.value.outlet],e,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>ka(s,e.getContext(a),r)),r}function BR(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,a=n?n.value:null,s=e?e.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let l=UR(a,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new nd(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Na(t,n,s?s.children:null,i,r):Na(t,n,e,i,r),l&&s&&s.outlet&&s.outlet.isActivated&&r.canDeactivateChecks.push(new is(s.outlet.component,a))}else a&&ka(n,s,r),r.canActivateChecks.push(new nd(i)),o.component?Na(t,null,s?s.children:null,i,r):Na(t,null,e,i,r);return r}function UR(t,n,e){if(typeof e=="function")return e(t,n);switch(e){case"pathParamsChange":return!Vr(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Vr(t.url,n.url)||!ei(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!om(t,n)||!ei(t.queryParams,n.queryParams);case"paramsChange":default:return!om(t,n)}}function ka(t,n,e){let i=es(t),r=t.value;Object.entries(i).forEach(([o,a])=>{r.component?n?ka(a,n.children.getContext(o),e):ka(a,null,e):ka(a,n,e)}),r.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new is(n.outlet.component,r)):e.canDeactivateChecks.push(new is(null,r)):e.canDeactivateChecks.push(new is(null,r))}function qa(t){return typeof t=="function"}function $R(t){return typeof t=="boolean"}function GR(t){return t&&qa(t.canLoad)}function zR(t){return t&&qa(t.canActivate)}function WR(t){return t&&qa(t.canActivateChild)}function qR(t){return t&&qa(t.canDeactivate)}function YR(t){return t&&qa(t.canMatch)}function rE(t){return t instanceof ai||t?.name==="EmptyError"}var Lu=Symbol("INITIAL_VALUE");function us(){return Ue(t=>Ts(t.map(n=>n.pipe(vt(1),lr(Lu)))).pipe(ie(n=>{for(let e of n)if(e!==!0){if(e===Lu)return Lu;if(e===!1||KR(e))return e}return!0}),tt(n=>n!==Lu),vt(1)))}function KR(t){return rs(t)||t instanceof cs}function ZR(t,n){return et(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=e;return a.length===0&&o.length===0?te(ue(N({},e),{guardsResult:!0})):QR(a,i,r,t).pipe(et(s=>s&&$R(s)?XR(i,o,t,n):te(s)),ie(s=>ue(N({},e),{guardsResult:s})))})}function QR(t,n,e,i){return je(t).pipe(et(r=>iA(r.component,r.route,e,n,i)),ui(r=>r!==!0,!0))}function XR(t,n,e,i){return je(n).pipe(jn(r=>fo(eA(r.route.parent,i),JR(r.route,i),nA(t,r.path,e),tA(t,r.route,e))),ui(r=>r!==!0,!0))}function JR(t,n){return t!==null&&n&&n(new Zu(t)),te(!0)}function eA(t,n){return t!==null&&n&&n(new Yu(t)),te(!0)}function tA(t,n,e){let i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||i.length===0)return te(!0);let r=i.map(o=>Ms(()=>{let a=ds(n)??e,s=fs(o,a),l=zR(s)?s.canActivate(n,t):dt(a,()=>s(n,t));return Ii(l).pipe(ui())}));return te(r).pipe(us())}function nA(t,n,e){let i=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(a=>HR(a)).filter(a=>a!==null).map(a=>Ms(()=>{let s=a.guards.map(l=>{let c=ds(a.node)??e,u=fs(l,c),d=WR(u)?u.canActivateChild(i,t):dt(c,()=>u(i,t));return Ii(d).pipe(ui())});return te(s).pipe(us())}));return te(o).pipe(us())}function iA(t,n,e,i,r){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return te(!0);let a=o.map(s=>{let l=ds(n)??r,c=fs(s,l),u=qR(c)?c.canDeactivate(t,n,e,i):dt(l,()=>c(t,n,e,i));return Ii(u).pipe(ui())});return te(a).pipe(us())}function rA(t,n,e,i){let r=n.canLoad;if(r===void 0||r.length===0)return te(!0);let o=r.map(a=>{let s=fs(a,t),l=GR(s)?s.canLoad(n,e):dt(t,()=>s(n,e));return Ii(l)});return te(o).pipe(us(),oE(i))}function oE(t){return zd(Xe(n=>{if(typeof n!="boolean")throw td(t,n)}),ie(n=>n===!0))}function oA(t,n,e,i){let r=n.canMatch;if(!r||r.length===0)return te(!0);let o=r.map(a=>{let s=fs(a,t),l=YR(s)?s.canMatch(n,e):dt(t,()=>s(n,e));return Ii(l)});return te(o).pipe(us(),oE(i))}var Ua=class{segmentGroup;constructor(n){this.segmentGroup=n||null}},$a=class extends Error{urlTree;constructor(n){super(),this.urlTree=n}};function Jo(t){return uo(new Ua(t))}function sA(t){return uo(new j(4e3,!1))}function aA(t){return uo(nE(!1,Ot.GuardRejected))}var lm=class{urlSerializer;urlTree;constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return te(i);if(r.numberOfChildren>1||!r.children[ge])return sA(`${n.redirectTo}`);r=r.children[ge]}}applyRedirectCommands(n,e,i,r,o){return lA(e,r,o).pipe(ie(a=>{if(a instanceof ni)throw new $a(a);let s=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),n,i);if(a[0]==="/")throw new $a(s);return s}))}applyRedirectCreateUrlTree(n,e,i,r){let o=this.createSegmentGroup(n,e.root,i,r);return new ni(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let i={};return Object.entries(n).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let s=o.substring(1);i[r]=e[s]}else i[r]=o}),i}createSegmentGroup(n,e,i,r){let o=this.createSegments(n,e.segments,i,r),a={};return Object.entries(e.children).forEach(([s,l])=>{a[s]=this.createSegmentGroup(n,l,i,r)}),new xe(o,a)}createSegments(n,e,i,r){return e.map(o=>o.path[0]===":"?this.findPosParam(n,o,r):this.findOrReturn(o,i))}findPosParam(n,e,i){let r=i[e.path.substring(1)];if(!r)throw new j(4001,!1);return r}findOrReturn(n,e){let i=0;for(let r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}};function lA(t,n,e){if(typeof t=="string")return te(t);let i=t,{queryParams:r,fragment:o,routeConfig:a,url:s,outlet:l,params:c,data:u,title:d}=n;return Ii(dt(e,()=>i({params:c,data:u,queryParams:r,fragment:o,routeConfig:a,url:s,outlet:l,title:d})))}var cm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cA(t,n,e,i,r){let o=sE(t,n,e);return o.matched?(i=AR(n,i),oA(i,n,e,r).pipe(ie(a=>a===!0?o:N({},cm)))):te(o)}function sE(t,n,e){if(n.path==="**")return uA(e);if(n.path==="")return n.pathMatch==="full"&&(t.hasChildren()||e.length>0)?N({},cm):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(n.matcher||kC)(e,t,n);if(!r)return N({},cm);let o={};Object.entries(r.posParams??{}).forEach(([s,l])=>{o[s]=l.path});let a=r.consumed.length>0?N(N({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function uA(t){return{matched:!0,parameters:t.length>0?FC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function PC(t,n,e,i){return e.length>0&&hA(t,e,i)?{segmentGroup:new xe(n,fA(i,new xe(e,t.children))),slicedSegments:[]}:e.length===0&&pA(t,e,i)?{segmentGroup:new xe(t.segments,dA(t,e,i,t.children)),slicedSegments:e}:{segmentGroup:new xe(t.segments,t.children),slicedSegments:e}}function dA(t,n,e,i){let r={};for(let o of e)if(rd(t,n,o)&&!i[Rn(o)]){let a=new xe([],{});r[Rn(o)]=a}return N(N({},i),r)}function fA(t,n){let e={};e[ge]=n;for(let i of t)if(i.path===""&&Rn(i)!==ge){let r=new xe([],{});e[Rn(i)]=r}return e}function hA(t,n,e){return e.some(i=>rd(t,n,i)&&Rn(i)!==ge)}function pA(t,n,e){return e.some(i=>rd(t,n,i))}function rd(t,n,e){return(t.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function gA(t,n,e){return n.length===0&&!t.children[e]}var um=class{};function mA(t,n,e,i,r,o,a="emptyOnly"){return new dm(t,n,e,i,r,a,o).recognize()}var vA=31,dm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,e,i,r,o,a,s){this.injector=n,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new lm(this.urlSerializer,this.urlTree)}noMatchError(n){return new j(4002,`'${n.segmentGroup}'`)}recognize(){let n=PC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(ie(({children:e,rootSnapshot:i})=>{let r=new Xt(i,e),o=new Ha("",r),a=WC(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(n){let e=new jr([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ge,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,ge,e).pipe(ie(i=>({children:i,rootSnapshot:e})),ci(i=>{if(i instanceof $a)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ua?this.noMatchError(i):i}))}processSegmentGroup(n,e,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(n,e,i,o):this.processSegment(n,e,i,i.segments,r,!0,o).pipe(ie(a=>a instanceof Xt?[a]:[]))}processChildren(n,e,i,r){let o=[];for(let a of Object.keys(i.children))a==="primary"?o.unshift(a):o.push(a);return je(o).pipe(jn(a=>{let s=i.children[a],l=PR(e,a);return this.processSegmentGroup(n,l,s,a,r)}),Jd((a,s)=>(a.push(...s),a)),xi(null),Xd(),et(a=>{if(a===null)return Jo(i);let s=aE(a);return _A(s),te(s)}))}processSegment(n,e,i,r,o,a,s){return je(e).pipe(jn(l=>this.processSegmentAgainstRoute(l._injector??n,e,l,i,r,o,a,s).pipe(ci(c=>{if(c instanceof Ua)return te(null);throw c}))),ui(l=>!!l),ci(l=>{if(rE(l))return gA(i,r,o)?te(new um):Jo(i);throw l}))}processSegmentAgainstRoute(n,e,i,r,o,a,s,l){return Rn(i)!==a&&(a===ge||!rd(r,o,i))?Jo(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(n,r,i,o,a,l):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(n,r,e,i,o,a,l):Jo(r)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,o,a,s){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:_}=sE(e,r,o);if(!l)return Jo(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>vA&&(this.allowRedirects=!1));let f=new jr(o,c,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,NC(r),Rn(r),r.component??r._loadedComponent??null,r,OC(r)),v=ed(f,s,this.paramsInheritanceStrategy);return f.params=Object.freeze(v.params),f.data=Object.freeze(v.data),this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,f,n).pipe(Ue(b=>this.applyRedirects.lineralizeSegments(r,b)),et(b=>this.processSegment(n,i,e,b.concat(_),a,!1,s)))}matchSegmentAgainstRoute(n,e,i,r,o,a){let s=cA(e,i,r,n,this.urlSerializer);return i.path==="**"&&(e.children={}),s.pipe(Ue(l=>l.matched?(n=i._injector??n,this.getChildConfig(n,i,r).pipe(Ue(({routes:c})=>{let u=i._loadedInjector??n,{parameters:d,consumedSegments:_,remainingSegments:f}=l,v=new jr(_,d,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,NC(i),Rn(i),i.component??i._loadedComponent??null,i,OC(i)),T=ed(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(T.params),v.data=Object.freeze(T.data);let{segmentGroup:b,slicedSegments:M}=PC(e,_,f,c);if(M.length===0&&b.hasChildren())return this.processChildren(u,c,b,v).pipe(ie(H=>new Xt(v,H)));if(c.length===0&&M.length===0)return te(new Xt(v,[]));let W=Rn(i)===o;return this.processSegment(u,c,b,M,W?ge:o,!0,v).pipe(ie(H=>new Xt(v,H instanceof Xt?[H]:[])))}))):Jo(e)))}getChildConfig(n,e,i){return e.children?te({routes:e.children,injector:n}):e.loadChildren?e._loadedRoutes!==void 0?te({routes:e._loadedRoutes,injector:e._loadedInjector}):rA(n,e,i,this.urlSerializer).pipe(et(r=>r?this.configLoader.loadChildren(n,e).pipe(Xe(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):aA(e))):te({routes:[],injector:n})}};function _A(t){t.sort((n,e)=>n.value.outlet===ge?-1:e.value.outlet===ge?1:n.value.outlet.localeCompare(e.value.outlet))}function yA(t){let n=t.value.routeConfig;return n&&n.path===""}function aE(t){let n=[],e=new Set;for(let i of t){if(!yA(i)){n.push(i);continue}let r=n.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):n.push(i)}for(let i of e){let r=aE(i.children);n.push(new Xt(i.value,r))}return n.filter(i=>!e.has(i))}function NC(t){return t.data||{}}function OC(t){return t.resolve||{}}function SA(t,n,e,i,r,o){return et(a=>mA(t,n,e,i,a.extractedUrl,r,o).pipe(ie(({state:s,tree:l})=>ue(N({},a),{targetSnapshot:s,urlAfterRedirects:l}))))}function CA(t,n){return et(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return te(e);let o=new Set(r.map(l=>l.route)),a=new Set;for(let l of o)if(!a.has(l))for(let c of lE(l))a.add(c);let s=0;return je(a).pipe(jn(l=>o.has(l)?EA(l,i,t,n):(l.data=ed(l,l.parent,t).resolve,te(void 0))),Xe(()=>s++),ho(1),et(l=>s===a.size?te(e):bt))})}function lE(t){let n=t.children.map(e=>lE(e)).flat();return[t,...n]}function EA(t,n,e,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!JC(r)&&(o[Ga]=r.title),Ms(()=>(t.data=ed(t,t.parent,e).resolve,wA(o,t,n,i).pipe(ie(a=>(t._resolvedData=a,t.data=N(N({},t.data),a),null)))))}function wA(t,n,e,i){let r=Jg(t);if(r.length===0)return te({});let o={};return je(r).pipe(et(a=>DA(t[a],n,e,i).pipe(ui(),Xe(s=>{if(s instanceof cs)throw td(new Qi,s);o[a]=s}))),ho(1),ie(()=>o),ci(a=>rE(a)?bt:uo(a)))}function DA(t,n,e,i){let r=ds(n)??i,o=fs(t,r),a=o.resolve?o.resolve(n,e):dt(r,()=>o(n,e));return Ii(a)}function Qg(t){return Ue(n=>{let e=t(n);return e?je(e).pipe(ie(()=>n)):te(n)})}var mm=(()=>{class t{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===ge);return i}getResolvedTitleForRoute(e){return e.data[Ga]}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:()=>D(cE),providedIn:"root"})}return t})(),cE=(()=>{class t extends mm{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||t)(B(qS))};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$r=new z("",{providedIn:"root",factory:()=>({})}),hs=new z(""),od=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=D(zp);loadComponent(e,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return te(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Ii(dt(e,()=>i.loadComponent())).pipe(ie(dE),Ue(fE),Xe(a=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=a}),Ri(()=>{this.componentLoaders.delete(i)})),o=new oo(r,()=>new ne).pipe(ro());return this.componentLoaders.set(i,o),o}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return te({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=uE(i,this.compiler,e,this.onLoadEndListener).pipe(Ri(()=>{this.childrenLoaders.delete(i)})),a=new oo(o,()=>new ne).pipe(ro());return this.childrenLoaders.set(i,a),a}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function uE(t,n,e,i){return Ii(dt(e,()=>t.loadChildren())).pipe(ie(dE),Ue(fE),et(r=>r instanceof Yc||Array.isArray(r)?te(r):je(n.compileModuleAsync(r))),ie(r=>{i&&i(t);let o,a,s=!1;return Array.isArray(r)?(a=r,s=!0):(o=r.create(e).injector,a=o.get(hs,[],{optional:!0,self:!0}).flat()),{routes:a.map(gm),injector:o}}))}function bA(t){return t&&typeof t=="object"&&"default"in t}function dE(t){return bA(t)?t.default:t}function fE(t){return te(t)}var sd=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:()=>D(IA),providedIn:"root"})}return t})(),IA=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),vm=new z(""),_m=new z("");function hE(t,n,e){let i=t.get(_m),r=t.get(Pe);if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o,a=new Promise(c=>{o=c}),s=r.startViewTransition(()=>(o(),TA(t)));s.ready.catch(c=>{});let{onViewTransitionCreated:l}=i;return l&&dt(t,()=>l({transition:s,from:n,to:e})),a}function TA(t){return new Promise(n=>{Ui({read:()=>setTimeout(n)},{injector:t})})}var ym=new z(""),ad=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ne;transitionAbortWithErrorSubject=new ne;configLoader=D(od);environmentInjector=D(Ze);destroyRef=D(an);urlSerializer=D(Br);rootContexts=D(Ur);location=D(zi);inputBindingEnabled=D(Wa,{optional:!0})!==null;titleStrategy=D(mm);options=D($r,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=D(sd);createViewTransition=D(vm,{optional:!0});navigationErrorHandler=D(ym,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>te(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new Wu(r)),i=r=>this.events.next(new qu(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(ue(N({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))}setupNavigations(e){return this.transitions=new Le(null),this.transitions.pipe(tt(i=>i!==null),Ue(i=>{let r=!1;return te(i).pipe(Ue(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Ot.SupersededByNewNavigation),bt;this.currentTransition=i,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ue(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),s=o.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&s!=="reload"){let l="";return this.events.next(new ii(o.id,this.urlSerializer.serialize(o.rawUrl),l,os.IgnoredSameUrlNavigation)),o.resolve(!1),bt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return te(o).pipe(Ue(l=>(this.events.next(new Xi(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?bt:Promise.resolve(l))),SA(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Xe(l=>{i.targetSnapshot=l.targetSnapshot,i.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=ue(N({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let c=new Fa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:c,source:u,restoredState:d,extras:_}=o,f=new Xi(l,this.urlSerializer.serialize(c),u,d);this.events.next(f);let v=QC(this.rootComponentType).snapshot;return this.currentTransition=i=ue(N({},o),{targetSnapshot:v,urlAfterRedirects:c,extras:ue(N({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=c,te(i)}else{let l="";return this.events.next(new ii(o.id,this.urlSerializer.serialize(o.extractedUrl),l,os.IgnoredByUrlHandlingStrategy)),o.resolve(!1),bt}}),Xe(o=>{let a=new Uu(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),ie(o=>(this.currentTransition=i=ue(N({},o),{guards:jR(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),ZR(this.environmentInjector,o=>this.events.next(o)),Xe(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw td(this.urlSerializer,o.guardsResult);let a=new $u(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),tt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Ot.GuardRejected),!1)),Qg(o=>{if(o.guards.canActivateChecks.length!==0)return te(o).pipe(Xe(a=>{let s=new Gu(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(s)}),Ue(a=>{let s=!1;return te(a).pipe(CA(this.paramsInheritanceStrategy,this.environmentInjector),Xe({next:()=>s=!0,complete:()=>{s||this.cancelNavigationTransition(a,"",Ot.NoDataFromResolver)}}))}),Xe(a=>{let s=new zu(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(s)}))}),Qg(o=>{let a=s=>{let l=[];if(s.routeConfig?.loadComponent&&!s.routeConfig._loadedComponent){let c=ds(s)??this.environmentInjector;l.push(this.configLoader.loadComponent(c,s.routeConfig).pipe(Xe(u=>{s.component=u}),ie(()=>{})))}for(let c of s.children)l.push(...a(c));return l};return Ts(a(o.targetSnapshot.root)).pipe(xi(null),vt(1))}),Qg(()=>this.afterPreactivation()),Ue(()=>{let{currentSnapshot:o,targetSnapshot:a}=i,s=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return s?je(s).pipe(ie(()=>i)):te(i)}),ie(o=>{let a=OR(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=ue(N({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),Xe(()=>{this.events.next(new Va)}),VR(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),vt(1),Hn(new oe(o=>{let a=i.abortController.signal,s=()=>o.next();return a.addEventListener("abort",s),()=>a.removeEventListener("abort",s)}).pipe(tt(()=>!r&&!i.targetRouterState),Xe(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",Ot.Aborted)}))),Xe({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new An(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Hn(this.transitionAbortWithErrorSubject.pipe(Xe(o=>{throw o}))),Ri(()=>{r||this.cancelNavigationTransition(i,"",Ot.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),ci(o=>{if(this.destroyed)return i.resolve(!1),bt;if(r=!0,iE(o))this.events.next(new ti(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),FR(o)?this.events.next(new ls(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let a=new ss(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let s=dt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(s instanceof cs){let{message:l,cancellationCode:c}=td(this.urlSerializer,s);this.events.next(new ti(i.id,this.urlSerializer.serialize(i.extractedUrl),l,c)),this.events.next(new ls(s.redirectTo,s.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(s){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(s)}}return bt}))}))}cancelNavigationTransition(e,i,r){let o=new ti(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function MA(t){return t!==ns}var pE=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:()=>D(xA),providedIn:"root"})}return t})(),id=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},xA=(()=>{class t extends id{static \u0275fac=(()=>{let e;return function(r){return(e||(e=yi(t)))(r||t)}})();static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),gE=(()=>{class t{urlSerializer=D(Br);options=D($r,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=D(zi);urlHandlingStrategy=D(sd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ni;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,a=r??o;return a instanceof ni?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=QC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:()=>D(RA),providedIn:"root"})}return t})(),RA=(()=>{class t extends gE{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof Xi?this.updateStateMemento():e instanceof ii?this.commitTransition(i):e instanceof Fa?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Va?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof ti&&e.code!==Ot.SupersededByNewNavigation&&e.code!==Ot.Redirect?this.restoreHistory(i):e instanceof ss?this.restoreHistory(i,!0):e instanceof An&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:o,state:a}=i;if(this.location.isCurrentPathEqualTo(e)||o){let s=this.browserPageId,l=N(N({},a),this.generateNgRouterState(r,s));this.location.replaceState(e,"",l)}else{let s=N(N({},a),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",s)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=yi(t)))(r||t)}})();static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ld(t,n){t.events.pipe(tt(e=>e instanceof An||e instanceof ti||e instanceof ss||e instanceof ii),ie(e=>e instanceof An||e instanceof ii?0:(e instanceof ti?e.code===Ot.Redirect||e.code===Ot.SupersededByNewNavigation:!1)?2:1),tt(e=>e!==2),vt(1)).subscribe(()=>{n()})}var AA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},PA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},er=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=D(Zc);stateManager=D(gE);options=D($r,{optional:!0})||{};pendingTasks=D(Wn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=D(ad);urlSerializer=D(Br);location=D(zi);urlHandlingStrategy=D(sd);injector=D(Ze);_events=new ne;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=D(pE);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=D(hs,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!D(Wa,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Me;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof ti&&i.code!==Ot.Redirect&&i.code!==Ot.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof An)this.navigated=!0;else if(i instanceof ls){let a=i.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=N({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||MA(r.source)},a);this.scheduleNavigation(s,ns,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}RR(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ns,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let l=N({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let s=this.parseUrl(e);this.scheduleNavigation(s,i,a,o).catch(l=>{this.disposed||this.injector.get(Kt)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(gm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:a,u=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":u=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let _=r?r.snapshot:this.routerState.snapshot.root;d=qC(_)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return YC(d,e,u,c??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=rs(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,ns,null,i)}navigate(e,i={skipLocationChange:!1}){return NA(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=N({},AA):i===!1?r=N({},PA):r=i,rs(e))return MC(this.currentUrlTree,e,r);let o=this.parseUrl(e);return MC(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(e,i,r,o,a){if(this.disposed)return Promise.resolve(!1);let s,l,c;a?(s=a.resolve,l=a.reject,c=a.promise):c=new Promise((d,_)=>{s=d,l=_});let u=this.pendingTasks.add();return ld(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:s,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function NA(t){for(let n=0;n<t.length;n++)if(t[n]==null)throw new j(4008,!1)}var Ya=class{};var mE=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(e,i,r,o){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(tt(e=>e instanceof An),jn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=No(o.providers,e,`Route: ${o.path}`));let a=o._injector??e,s=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(s,o.children??o._loadedRoutes))}return je(r).pipe(Mi())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=te(null);let o=r.pipe(et(a=>a===null?te(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??e,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(e,i);return je([o,a]).pipe(Mi())}else return o})}static \u0275fac=function(i){return new(i||t)(B(er),B(Ze),B(Ya),B(od))};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),vE=new z(""),OA=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=ns;restoredId=0;store={};constructor(e,i,r,o,a={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Xi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof An?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof ii&&e.code===os.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof as&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>mt(this,null,function*(){yield new Promise(r=>{setTimeout(r),typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}),this.zone.run(()=>{this.transitions.events.next(new as(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){Mp()};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})();function kA(t){return t.routerState.root}function Ka(t,n){return{\u0275kind:t,\u0275providers:n}}function LA(){let t=D(He);return n=>{let e=t.get(pt);if(n!==e.components[0])return;let i=t.get(er),r=t.get(_E);t.get(Cm)===1&&i.initialNavigation(),t.get(CE,null,{optional:!0})?.setUpPreloading(),t.get(vE,null,{optional:!0})?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var _E=new z("",{factory:()=>new ne}),Cm=new z("",{providedIn:"root",factory:()=>1});function yE(){let t=[{provide:Cm,useValue:0},ko(()=>{let n=D(He);return n.get(rg,Promise.resolve()).then(()=>new Promise(i=>{let r=n.get(er),o=n.get(_E);ld(r,()=>{i(!0)}),n.get(ad).afterPreactivation=()=>(i(!0),o.closed?te(void 0):o),r.initialNavigation()}))})];return Ka(2,t)}function SE(){let t=[ko(()=>{D(er).setUpLocationChangeListener()}),{provide:Cm,useValue:2}];return Ka(3,t)}var CE=new z("");function EE(t){return Ka(0,[{provide:CE,useExisting:mE},{provide:Ya,useExisting:t}])}function wE(){return Ka(8,[hm,{provide:Wa,useExisting:hm}])}function DE(t){Po("NgRouterViewTransitions");let n=[{provide:vm,useValue:hE},{provide:_m,useValue:N({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ka(9,n)}var bE=[zi,{provide:Br,useClass:Qi},er,Ur,{provide:Ji,useFactory:kA,deps:[er]},od,[]],cd=(()=>{class t{constructor(){}static forRoot(e,i){return{ngModule:t,providers:[bE,[],{provide:hs,multi:!0,useValue:e},[],i?.errorHandler?{provide:ym,useValue:i.errorHandler}:[],{provide:$r,useValue:i||{}},i?.useHash?VA():jA(),FA(),i?.preloadingStrategy?EE(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?HA(i):[],i?.bindToComponentInputs?wE().\u0275providers:[],i?.enableViewTransitions?DE().\u0275providers:[],BA()]}}static forChild(e){return{ngModule:t,providers:[{provide:hs,multi:!0,useValue:e}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Be({})}return t})();function FA(){return{provide:vE,useFactory:()=>{let t=D(ES),n=D(we),e=D($r),i=D(ad),r=D(Br);return e.scrollOffset&&t.setOffset(e.scrollOffset),new OA(r,i,t,n,e)}}}function VA(){return{provide:wi,useClass:lg}}function jA(){return{provide:wi,useClass:su}}function HA(t){return[t.initialNavigation==="disabled"?SE().\u0275providers:[],t.initialNavigation==="enabledBlocking"?yE().\u0275providers:[]]}var Sm=new z("");function BA(){return[{provide:Sm,useFactory:LA},{provide:Xc,multi:!0,useExisting:Sm}]}var GA=[],IE=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=$e({type:n}),n.\u0275inj=Be({imports:[cd.forRoot(GA),cd]});let t=n;return t})();var Gr=[{slot:1,name:"Head",side:"left"},{slot:2,name:"Neck",side:"left"},{slot:3,name:"Shoulders",side:"left"},{slot:5,name:"Chest",side:"left"},{slot:6,name:"Waist",side:"left"},{slot:7,name:"Legs",side:"left"},{slot:8,name:"Feet",side:"left"},{slot:9,name:"Wrists",side:"left"},{slot:10,name:"Hands",side:"right"},{slot:11,name:"Finger 1",side:"right"},{slot:12,name:"Finger 2",side:"right"},{slot:13,name:"Trinket 1",side:"right"},{slot:14,name:"Trinket 2",side:"right"},{slot:16,name:"Back",side:"right"},{slot:21,name:"Main Hand",side:"right"},{slot:22,name:"Off Hand",side:"right"},{slot:26,name:"Ranged",side:"right"}],TE={0:[4],1:[1,3,4],2:[1,3],3:[1,7],4:[1,7],5:[3,4],6:[1,3,4,7],7:[1,3,4,7]},ud={Scholomance:[["tank:Warrior","tank:Druid"],["heal:Priest"],"damage:Mage",["damage:Hunter","damage:Warlock"],"damage:Rogue"],"Live Stratholme":["tank:Warrior",["heal:Priest","heal:Paladin"],"damage:Mage",["damage:Hunter","damage:Warlock"],"damage:Rogue"],"Undead Stratholme":[["tank:Warrior","tank:Druid"],["heal:Priest"],"damage:Mage",["damage:Hunter","damage:Warlock"],"damage:Rogue"],"Lower Blackrock Spire":[["tank:Warrior","tank:Druid"],["heal:Priest","heal:Paladin"],"damage:Mage",["damage:Hunter","damage:Rogue"],"damage:Warlock"],"Upper Blackrock Spire":["tank:Warrior",["tank:Warrior","tank:Druid"],"heal:Priest",["heal:Priest","heal:Paladin","heal:Druid"],"heal:Paladin","damage:Mage",["damage:Mage","damage:Warlock","damage:Rogue"],"damage:Hunter","damage:Rogue","damage:Warlock"],"Blackrock Depths":["tank:Warrior",["heal:Priest","heal:Paladin"],"damage:Mage",["damage:Hunter","damage:Rogue"],"damage:Warlock"],"Dire Maul East":[["tank:Warrior","tank:Druid"],["heal:Paladin","heal:Priest"],"damage:Mage",["damage:Hunter","damage:Rogue"],"damage:Warlock"],"Dire Maul West":[["tank:Warrior","tank:Druid"],"heal:Priest","damage:Mage",["damage:Hunter","damage:Rogue"],"damage:Warlock"],"Dire Maul North":["tank:Warrior",["heal:Priest","heal:Paladin"],"damage:Mage",["damage:Hunter","damage:Warlock"],"damage:Rogue"],"Dire Maul Tribute":[["tank:Warrior","tank:Druid"],["heal:Priest","heal:Paladin"],"damage:Mage","damage:Rogue",["damage:Hunter","damage:Warlock"]]},$t={0:{0:{name:"Moonglow - Healer",icon:"spell_nature_starfall",role:"heal",spellList:[5188,25297,9858,25299]},1:{name:"Feral - Tank",icon:"ability_racial_bearform",role:"tank",spellList:[9881,9908,9850,9830,9896,31018]},2:{name:"Swiftmend - Healer",icon:"spell_nature_healingtouch",role:"heal",spellList:[5188,25297,9858,25299,18562]}},1:{0:{name:"Discipline - Healer",icon:"spell_holy_wordfortitude",role:"heal",spellList:[10901,25315,25314,6064]},1:{name:"Holy - Healer",icon:"spell_holy_guardianspirit",role:"heal",spellList:[10901,25315,25314,6064,27871]},2:{name:"Shadow - Ranged",icon:"spell_shadow_shadowwordpain",role:"damage",spellList:[10901,18807,10894,10947]}},2:{0:{name:"Holy - Healer",icon:"spell_holy_holybolt",role:"heal",spellList:[20930,19943,25292]},1:{name:"Protection - Tank",icon:"spell_holy_devotionaura",role:"tank",spellList:[20293,20924,20271]},2:{name:"Retribution - Melee",icon:"spell_holy_auraoflight",role:"damage",spellList:[20920,20924,20271]}},3:{0:{name:"Arcane - Ranged",icon:"spell_holy_magicalsentry",role:"damage",spellList:[25304]},1:{name:"Fire - Ranged",icon:"spell_fire_firebolt02",role:"damage",spellList:[25306,10207]},2:{name:"Frost - Ranged",icon:"spell_frost_frostbolt02",role:"damage",spellList:[25304]}},4:{0:{name:"Shadow Mastery - Ranged",icon:"spell_shadow_deathcoil",role:"damage",spellList:[25311,25307,25309,11713,18871,18881]},1:{name:"Demonologist - Ranged",icon:"spell_shadow_metamorphosis",role:"damage",spellList:[25311,25307,25309,11713,18871]},2:{name:"Demonic Sacrifice - Ranged",icon:"spell_shadow_rainoffire",role:"damage",spellList:[25311,25307,25309,11713,18871]}},5:{0:{name:"Beast Mastery - Ranged",icon:"ability_hunter_beasttaming",role:"damage",spellList:[20904,25294,25295]},1:{name:"Marksmanship - Ranged",icon:"ability_marksmanship",role:"damage",spellList:[20904,25294,25295]},2:{name:"Survival - Ranged",icon:"ability_hunter_swiftstrike",role:"damage",spellList:[20904,25294,25295]}},6:{0:{name:"Seal Fate - Daggers",icon:"ability_rogue_eviscerate",role:"damage",spellList:[11294,31016,25300,11275]},1:{name:"Combat - Swords",icon:"ability_backstab",role:"damage",spellList:[11294,31016,25300,11275]},2:{name:"Combat - Daggers",icon:"ability_stealth",role:"damage",spellList:[11294,31016,25300,11275]}},7:{0:{name:"Fury - Two-Hand",icon:"ability_rogue_eviscerate",role:"damage",spellList:[23894,20662,1680,25286,11605]},1:{name:"Fury - Dual-Wield",icon:"ability_warrior_innerrage",role:"damage",spellList:[23894,20662,1680,25286]},2:{name:"Protection - Tank",icon:"inv_shield_06",role:"tank",spellList:[23925,25288,25286]}}},ri=[{RACEID:1,RACE:"Human",GENDER:0,options:{SKIN:10,FACE:12,HAIRSTYLE:12,HAIRCOLOR:10,FACIALSTYLE:9}},{RACEID:1,RACE:"Human",GENDER:1,options:{SKIN:10,FACE:12,HAIRSTYLE:20,HAIRCOLOR:10,FACIALSTYLE:1}},{RACEID:3,RACE:"Dwarf",GENDER:0,options:{SKIN:9,FACE:10,HAIRSTYLE:11,HAIRCOLOR:10,FACIALSTYLE:11}},{RACEID:3,RACE:"Dwarf",GENDER:1,options:{SKIN:9,FACE:10,HAIRSTYLE:14,HAIRCOLOR:10,FACIALSTYLE:1}},{RACEID:4,RACE:"Night Elf",GENDER:0,options:{SKIN:9,FACE:9,HAIRSTYLE:7,HAIRCOLOR:7,FACIALSTYLE:5}},{RACEID:4,RACE:"Night Elf",GENDER:1,options:{SKIN:9,FACE:9,HAIRSTYLE:7,HAIRCOLOR:8,FACIALSTYLE:1}},{RACEID:7,RACE:"Gnome",GENDER:0,options:{SKIN:5,FACE:8,HAIRSTYLE:8,HAIRCOLOR:9,FACIALSTYLE:8}},{RACEID:7,RACE:"Gnome",GENDER:1,options:{SKIN:5,FACE:8,HAIRSTYLE:8,HAIRCOLOR:9,FACIALSTYLE:1}}],dd=[{key:"strength",label:"Strength"},{key:"agility",label:"Agility"},{key:"stamina",label:"Stamina"},{key:"intellect",label:"Intellect"},{key:"spirit",label:"Spirit"},{key:"health",label:"Health"}],fd=[{key:"damage",label:"Spell Damage"},{key:"healing",label:"Spell Healing"},{key:"shadow",label:"Spell Shadow"},{key:"fire",label:"Spell Fire"},{key:"frost",label:"Spell Frost"}],hd=[{key:"fire",label:"Fire Resistance"},{key:"shadow",label:"Shadow Resistance"},{key:"nature",label:"Nature Resistance"},{key:"frost",label:"Frost Resistance"},{key:"arcane",label:"Arcane Resistance"}],Em=[{CLASSID:"7",RACEID:"4",HP:2599,MP:0,STR:117,AGI:85,STA:109,INT:30,SPI:45,ARM:170},{CLASSID:"7",RACEID:"1",HP:2609,MP:0,STR:120,AGI:80,STA:110,INT:30,SPI:49,ARM:160},{CLASSID:"7",RACEID:"3",HP:2639,MP:0,STR:122,AGI:76,STA:113,INT:29,SPI:44,ARM:152},{CLASSID:"7",RACEID:"7",HP:2599,MP:0,STR:115,AGI:83,STA:109,INT:36,SPI:45,ARM:166},{CLASSID:"2",RACEID:"1",HP:2201,MP:2282,STR:105,AGI:65,STA:100,INT:70,SPI:81,ARM:130},{CLASSID:"2",RACEID:"3",HP:2231,MP:2267,STR:107,AGI:61,STA:103,INT:69,SPI:74,ARM:122},{CLASSID:"1",RACEID:"1",HP:1707,MP:2956,STR:35,AGI:40,STA:50,INT:120,SPI:137,ARM:80},{CLASSID:"1",RACEID:"3",HP:1737,MP:2941,STR:37,AGI:36,STA:53,INT:119,SPI:124,ARM:72},{CLASSID:"1",RACEID:"4",HP:1697,MP:2956,STR:32,AGI:45,STA:49,INT:120,SPI:125,ARM:90},{CLASSID:"0",RACEID:"4",HP:1993,MP:2464,STR:62,AGI:65,STA:69,INT:100,SPI:110,ARM:130},{CLASSID:"3",RACEID:"1",HP:1630,MP:2868,STR:30,AGI:35,STA:45,INT:125,SPI:132,ARM:70},{CLASSID:"3",RACEID:"7",HP:1620,MP:3078,STR:25,AGI:38,STA:44,INT:139,SPI:120,ARM:76},{CLASSID:"4",RACEID:"1",HP:1884,MP:2743,STR:45,AGI:50,STA:65,INT:110,SPI:125,ARM:100},{CLASSID:"4",RACEID:"7",HP:1874,MP:2953,STR:40,AGI:53,STA:64,INT:124,SPI:115,ARM:106},{CLASSID:"5",RACEID:"3",HP:2217,MP:2400,STR:57,AGI:121,STA:93,INT:64,SPI:69,ARM:242},{CLASSID:"5",RACEID:"4",HP:2177,MP:2415,STR:52,AGI:130,STA:89,INT:65,SPI:70,ARM:260},{CLASSID:"6",RACEID:"1",HP:2093,MP:0,STR:80,AGI:130,STA:75,INT:35,SPI:54,ARM:260},{CLASSID:"6",RACEID:"3",HP:2123,MP:0,STR:82,AGI:126,STA:78,INT:34,SPI:49,ARM:252},{CLASSID:"6",RACEID:"4",HP:2083,MP:0,STR:77,AGI:135,STA:74,INT:35,SPI:50,ARM:270},{CLASSID:"6",RACEID:"7",HP:2083,MP:0,STR:75,AGI:133,STA:74,INT:42,SPI:50,ARM:266}],Pn={0:"physical",1:"holy",2:"fire",3:"nature",4:"frost",5:"shadow",6:"arcane",7:"magic",8:"all"};var ME={1:{description:"Self",minRange:0,maxRange:0},2:{description:"Melee",minRange:0,maxRange:5},3:{description:"20 yards",minRange:0,maxRange:20},4:{description:"30 yards",minRange:0,maxRange:30},5:{description:"40 yards",minRange:0,maxRange:40},6:{description:"100 yards",minRange:0,maxRange:100},7:{description:"10 yards",minRange:0,maxRange:10},11:{description:"15 yards",minRange:0,maxRange:15},12:{description:"5 yards",minRange:0,maxRange:5},13:{description:"50000 yards",minRange:0,maxRange:5e4},35:{description:"36 yards",minRange:0,maxRange:36},95:{description:"8-25 yards",minRange:8,maxRange:25},114:{description:"8-35 yards",minRange:8,maxRange:35}},xE={1:0,3:.5,4:1,5:2,7:10,14:3,16:1.5,18:0,19:2.5,20:2.5,22:3.5,171:6},Za={1:10,3:60,4:120,5:300,6:600,8:15,9:30,18:20,21:86400,25:180,27:3,28:5,29:12,30:1800,31:8,32:6,35:4,40:1200,41:360,42:3600,64:40,85:18,86:21,105:9,106:24,165:7,185:21,205:27,245:50,347:900,553:16},pd={1:"Tgt HP",2:"HP",3:"MP",4:"Tank HP",5:"Ally HP",6:"Energy",7:"Rage",8:"Combo",9:"Tanking",10:"Duration",11:"Stacks",12:"Focus"},hn={1:"< 100%",2:"< 90%",3:"< 80%",4:"< 70%",5:"< 60%",6:"< 50%",7:"< 40%",8:"< 30%",9:"< 20%",10:"< 10%",11:"=100%",12:"> 90%",13:"> 80%",14:"> 70%",15:"> 60%",16:"> 50%",17:"> 40%",18:"> 30%",19:"> 20%",20:"> 10%",21:"1",22:"2",23:"3",24:"4",25:"5",26:"true",27:"false",31:"= 0sec",32:"<= 3sec",33:"<= 6sec",34:"<= 9sec",41:"< 1",42:"< 2",43:"< 3",44:"< 4",45:"< 5"},RE={0:"Stance/Aura",1:"Dispel",2:"Heal",3:"Taunt/Threat",4:"Buff",5:"Damage",6:"Crowd Control",7:"Debuff",8:"Resurrection",9:"Movement",10:"Damage with Debuff",11:"Damage and Heal",12:"Create Object",13:"Create Item",14:"Utility",15:"Summon",16:"Interrupt",17:"Mana",18:"Energy",19:"Rage",20:"Combinaton"},AE=[[100,54,20,7,1,1],[0,33,49,26,14,3],[0,11,24,48,40,16],[0,2,6,18,34,55],[0,0,1,1,11,25]];var pn={Maraudon:`<h4>The Legacy of Maraudon<h4>

    <p>Long before mortals walked Kalimdor, the Elemental Lords roamed Azeroth. When the Titans imprisoned them, their influence lingered in deep places of the world. Among those bound to Azeroth\u2019s stone and soil was Theradras, Princess of Earth.</p>

    <p>When the demigod Zaetar, son of Cenarius, wandered into her cavernous domain, Theradras ensnared him. From their union was born the centaur, a race cursed with savagery and bloodlust. When Zaetar\u2019s children murdered him, Theradras claimed his corpse and his spirit, keeping them within her cavern as both trophy and anchor of her power.</p>

    <p>The centaur tribes that spread across Desolace all trace their lineage back to this union. Despite their wars and rivalries, they revere Maraudon\u2014Theradras\u2019s cavernous temple\u2014as a holy site, a place of both worship and fear. They pilgrimage here to honor their \u201Cmother,\u201D even as her corruption poisons the land.</p>

    <p>Now Maraudon stands as both a natural wonder and a cursed shrine: waterfalls and crystalline caverns tainted by Theradras\u2019s elemental decay, where centaur zealots, twisted elementals, and the princess herself guard the remains of Zaetar.</p>

    <h4>Maraudon \u2013 The Elemental Caverns</h4>

    <p>Maraudon is unique in that it feels alive: part underground wilderness, part temple, part elemental lair. Its wings reflect the dual nature of the earth\u2014life-giving and destructive.</p>

    <h4>1. The Purple Wing (Shadow and Corruption)</h4>

    <p>Dark caverns where Theradras\u2019s corruption spreads unchecked. Oozes, slimes, and shadowy elementals lurk in the depths, feeding on the dungeon\u2019s tainted energy.<br>
    Theme: Decay and corruption.<br>
    Foes: Vile slimes, corrupted elementals, centaur warlocks.</p>

    <h4>2. The Orange Wing (Earth and Stone)</h4>

    <p>Rocky halls where earth elementals and centaur guardians dwell, representing Theradras\u2019s raw, destructive power. The very stone seems hostile, as golems and guardians rise to crush intruders.<br>
    Theme: Elemental fury and centaur guardianship.<br>
    Foes: Earth elementals, stalagmites brought to life, centaur shamans.</p>

    <h4>3. The Inner Falls (The Living Grove)</h4>

    <p>Past the two wings lies a breathtaking cavern of waterfalls, crystalline lakes, and strange flora \u2014 a reminder of the wild beauty Zaetar once cherished. But even here, Theradras\u2019s corruption bleeds through, twisting plants and beasts into monstrous forms.<br>
    Theme: Natural beauty tainted by corruption.<br>
    Foes: Wildkin, lashers, corrupted dryads, crystal beasts.</p>

    <h4>4. The Inner Sanctum (Theradras\u2019s Lair)</h4>

    <p>At the very heart lies Theradras, the Earth Princess herself. Colossal and terrible, she clutches the spirit of Zaetar, her unwilling consort, whose sorrow lingers in the air. The final confrontation is both tragic and apocalyptic\u2014defeating her releases Zaetar\u2019s spirit, but also shakes the caverns with elemental fury.<br>
    Theme: A corrupted shrine to forbidden union.<br>
    Foes: Princess Theradras, avatar of decay and grief.</p>

    <h4>Why Maraudon Matters</h4>

    <p>Maraudon is not just a dungeon; it\u2019s the cradle of the centaur race and the prison of a demigod\u2019s spirit. It explains the endless wars in Desolace, the corruption seeping into the land, and the origin of one of Azeroth\u2019s most brutal peoples. To delve here is to confront the tragedy of Zaetar, the corruption of Theradras, and the savage legacy left to their children.</p>`,"Sunken Temple":`<h4>The Legacy of the Temple of Atal\u2019Hakkar</h4>

    <p>Deep within the <strong>Swamp of Sorrows</strong>, half-submerged beneath choking vines and stagnant waters, lies the <strong>Temple of Atal\u2019Hakkar</strong>\u2014a ruin steeped in both troll superstition and dark prophecy.</p>

    <p>Ages ago, the <strong>Gurubashi trolls</strong>\u2014once rulers of a vast jungle empire\u2014fell into the worship of the blood god <strong>Hakkar the Soulflayer</strong>, a being of gluttony and sacrifice who demanded the hearts of the living. The Atal\u2019ai, Hakkar\u2019s most fervent priests, were driven from Zul\u2019Gurub after the empire\u2019s collapse and built this temple in exile, vowing to summon their god into the world once more.</p>

    <p>But Hakkar\u2019s power could not be contained. His corruption seeped into the land, twisting the swamp, driving beasts mad, and summoning serpents in his image. The dragonflights themselves took notice: the <strong>Green Dragon Aspect, Ysera,</strong> dispatched her brood to contain the threat. The battle between Atal\u2019ai zealots and green dragon guardians left the temple shattered, partially sunken, and haunted by both troll priests and enraged dragon spirits.</p>

    <p>What remains today is a labyrinthine ruin\u2014part troll shrine, part dragon graveyard, and part prison for Hakkar\u2019s lingering essence. To enter is to tread on cursed ground, where ancient troll magic and dragon wrath still collide.</p>

    <h4>Temple of Atal\u2019Hakkar \u2013 The Sunken Depths</h4>

    <p>The dungeon is a blend of troll ritualism and dragon corruption:</p>
    <ul>
    <li><strong>Outer Halls</strong>: Murky corridors overrun with Atal\u2019ai priests, shadow hunters, and their serpent totems, where the walls are carved with images of Hakkar\u2019s blood rites.</li>

    <li><strong>The Pools of Vision</strong>: Stagnant waters inhabited by cursed spirits and swamp beasts, corrupted by the temple\u2019s lingering magic.</li>

    <li><strong>The Dragonkin Chambers</strong>: Tombs where the green dragonflight fell in battle\u2014now restless shades and dragonkin stalk the halls, lashing out at intruders.</li>

    <li><strong>The Inner Sanctum</strong>: The seat of the Atal\u2019ai high priests, where they conduct rituals to prepare the world for Hakkar\u2019s return.</li>

    <li><strong>The Avatar of Hakkar (Optional Encounter)</strong>: Adventurers may attempt to summon and confront a fragment of the Soulflayer himself, a vision of the blood god\u2019s hunger given form.</li>
    </ul>

    <p><strong>Theme</strong>: Forbidden blood rituals, dragon corruption, ancient ruin swallowed by swamp.
    <strong>Key foes</strong>: Atal\u2019ai priests and zealots, green dragon spirits, the Avatar of Hakkar.</p>

    <h4>Why the Temple Matters</h4>

    <p>The Temple of Atal\u2019Hakkar is not just a dungeon\u2014it is the <strong>prologue to Zul\u2019Gurub</strong>. The Atal\u2019ai cultists here are the remnants of an empire obsessed with Hakkar, and their temple is both a shrine and a laboratory for his return. By striking them down, adventurers delay the rise of the Soulflayer\u2014but the whispers of Hakkar cannot be silenced forever.</p>`,"Blackrock Depths":`<h4>The Legacy of Blackrock Depths (BRD)</h4>

    <p>At the heart of <strong>Blackrock Mountain</strong>, beyond molten rivers and endless caverns, lies <strong>Blackrock Depths</strong>, the sprawling subterranean city of the <strong>Dark Iron dwarves.</strong></p>

    <p>Centuries ago, when the Dark Iron clan warred with their Bronzebeard and Wildhammer kin, they sought to claim dominion through sorcery and greed. In desperation, their thane, <strong>Thaurissan</strong>, invoked a terrible ritual that shattered the land and summoned forth the <strong>Firelord Ragnaros</strong>. The cataclysm birthed Blackrock Mountain as a volcano and bound the Dark Irons in eternal slavery to their fiery master.</p>

    <p>From that day, the Dark Irons dwelled within the mountain\u2019s depths, carving an empire beneath molten stone. Their king, <strong>Emperor Dagran Thaurissan</strong>, rules in Ragnaros\u2019s name, served by generals, high priests, and a court steeped in cruelty. BRD is not just a dungeon \u2014 it is a city, complete with a king\u2019s throne, a temple to fire, a slave market, forges, breweries, and barracks. It is the Dark Irons\u2019 capital and the heart of Ragnaros\u2019s growing dominion.</p>

    <h4>Blackrock Depths \u2013 The Dark Iron Capital</h4>

    <p>BRD is unique among dungeons: it feels alive, a true underground kingdom of oppression, industry, and flame. Its major sections highlight the power of the Dark Irons and their fiery master:</p>

    <h4>1. The Outer Wards \u2013 The City Gates</h4>

    <p>The entry halls are patrolled by elite Dark Iron guards and constructs. Here, the scale of the city is revealed: massive gates, barracks, and armories demonstrate this is no mere outpost, but a capital.<br>
    <strong>Theme</strong>: Militarized stronghold.<br>
    <strong>Foes</strong>: Dark Iron soldiers, golems, warhounds.</p>

    <h4>2. The Detention Block and Shadowforge City</h4>

    <p>The sprawling prison of the Dark Irons, where political prisoners, criminals, and enslaved adventurers rot in chains. Beyond lies Shadowforge City itself, a bustling subterranean metropolis complete with taverns, markets, and forges.<br>
    <strong>Theme</strong>: Slavery and oppression.<br>
    <strong>Foes</strong>: Jailors, overseers, slaves driven to madness, and powerful named lieutenants.</p>

    <h4>3. The Grim Guzzler</h4>

    <p>A tavern hidden deep inside the city, where Dark Iron dwarves drink, brawl, and boast. Here, adventurers may interact with NPCs, trigger bar fights, or slip deeper into the dungeon\u2019s heart. It\u2019s one of the rare moments of levity inside the Depths, though still dangerous.<br>
    <strong>Theme</strong>: Dark Iron culture and drunken chaos.<br>
    <strong>Foes</strong>: Rowdy patrons, mercenaries, and brawlers.</p>

    <h4>4. The Black Anvil and the Forge District</h4>

    <p>The industrial heart of the Dark Irons. Here, their blacksmiths forge weapons for their armies and even construct fiery elementals. The legendary Black Anvil lies here, a forge of immense power.<br>
    <strong>Theme</strong>: Industry and elemental fire.<br>
    <strong>Foes</strong>: Master smiths, fire elementals, molten war machines.</p>

    <h4>5. The Temple of Ragnaros</h4>

    <p>A holy place for the Dark Irons, dedicated to the Firelord. Priests and summoners chant his praises, channeling his molten might. From here, the line between dwarf and elemental blurs.<br>
    <strong>Theme</strong>: Cultic devotion to Ragnaros.<br>
    <strong>Foes</strong>: Fire priests, elemental guardians, High Priestess of Thaurissan.</p>

    <h4>6. The Emperor\u2019s Throne</h4>

    <p>At the deepest heart of the Depths lies the throne of <strong>Emperor Dagran Thaurissan</strong>, seated beside <strong>Princess Moira Bronzebeard</strong>\u2014the daughter of Ironforge\u2019s king, abducted and bound to the Emperor. This final chamber is both political and personal: to slay the Emperor is to weaken the Dark Irons, but the presence of Moira complicates matters.<br>
    <strong>Theme</strong>: Tyranny and politics.<br>
    <strong>Foes</strong>: Emperor Dagran Thaurissan and his royal guard.</p>

    <h4>Why Blackrock Depths Matters</h4>

    <p>BRD is not just a dungeon; it\u2019s a <strong>capital city, a prison, a forge, a temple, and a throne room</strong>. It represents the culmination of the Dark Irons\u2019 history: their greed, their servitude to Ragnaros, and their defiance of their Bronzebeard kin. To strike here is to wound the Firelord\u2019s influence directly.</p>

    <p>For adventurers, BRD is the crucible of endgame Classic WoW \u2014 a sprawling, living dungeon where every corner tells a story, and every chamber deepens the tragedy of a people who sold their souls to flame.</p>`,"Lower Blackrock Spire":`<h4>Lower Blackrock Spire (LBRS) \u2013 The Shadow of Rend</h4>

    <p>The <strong>Lower Spire</strong> serves as the staging ground for the <strong>Blackrock clan</strong> and their allies. It is a fortress of orc warbands, trolls who revel in blood sacrifice, and ogres drawn by promises of power. Here, Rend Blackhand\u2019s forces prepare for war, seeking to claim dominance over the fractured orc clans and reestablish the Blackrock name in glory.</p>

    <p>Yet LBRS is more than a war camp\u2014it is also home to vile sorcery. Dark shamanistic rites, shadowcasters, and the machinations of the Dark Irons fuel the orc army. The halls resound with the snarls of <strong>worgs</strong>, the chants of <strong>shadow hunters</strong>, and the clash of steel as Rend\u2019s champions prove themselves in endless combat.</p>

    <p><strong>Theme</strong>: Brutal orcish war camp in the ruins of dwarven halls, strengthened by dark magic and beast allies.<br>
    <strong>Key foes</strong>: Blackrock orcs, trolls, ogres, worgs, shadowcasters.<br>
    <strong>Final confrontation:</strong> Warchief Rend Blackhand\u2019s lieutenants, preparing the way for their master above.</p>`,"Blackrock Spire Conclusion":`<h4>The Split of Blackrock Spire</h4>
    <ul>
    <li><strong>LBRS (Lower)</strong>: Orcish savagery, trolls and ogres, dark rites and beastmasters\u2014a war camp forged from dwarven ruins.</li>

    <li><strong>UBRS (Upper)</strong>: The black dragonflight\u2019s fortress, Rend Blackhand\u2019s throne, and the staging ground for Nefarian\u2019s corruption.</li>
    </ul>

    <p>Together, the two wings represent the <strong>Dark Horde\u2013Black Dragon pact</strong>, a dangerous coalition that threatens both factions of Azeroth.</p>`,"Dire Maul":`<h4>The Legacy of Dire Maul</h4>

    <p>Deep in the heart of northern Feralas lie the ancient ruins of <strong>Eldre\u2019Thalas</strong>, once the shining jewel of night elven civilization. Raised more than 10,000 years ago by the Highborne, it stood as a vast city dedicated to arcane mastery and preservation of elven lore. At its heart was an immense library and a powerful energy nexus, built to harness and safeguard magical knowledge for generations.</p>

    <p>When the <strong>War of the Ancients</strong> shattered the Well of Eternity, the Highborne of Eldre\u2019Thalas cut themselves off from the rest of their kin. Under Prince <strong>Tortheldrin</strong>, they sought to survive the Long Vigil by siphoning magic from a captured demon. This act ensured their survival but twisted their fate. Over millennia, the city fell to ruin, its noble guardians fading into corruption, its wards failing, and its sprawling districts becoming overrun by ogres, satyrs, demons, and magical anomalies.</p>

    <p>Adventurers who brave Dire Maul do not merely enter another dungeon; they step into the fractured remains of a once-glorious empire, where faded grandeur and lingering arrogance echo in every crumbling hall.</p>`,"Dire Maul West":`<h4>Dire Maul West \u2013 The Ruined Court</h4>

    <p>The western wing is the most direct remnant of Highborne hubris. Here the halls are haunted by warped guardians and bound demons. Ancient constructs patrol shattered courtyards, and the corrupted treants of Feralas have claimed sections of the once-pristine gardens. The imprisoned demon <strong>Immol\u2019thar</strong> lies at the heart of this wing, contained by magical pylons for millennia. Prince Tortheldrin himself, bitter and prideful, oversees the prison, siphoning energy from the demon to sustain himself and his followers. To free the city from its cursed heart, heroes must dismantle the pylons and confront both the demon and the mad prince.</p>

    <p><strong>Theme</strong>: Faded arcane splendor, hubris of the Highborne, demonic corruption.<br>
    <strong>Key foes</strong>: Arcane aberrations, ancient constructs, Prince Tortheldrin.</p>`,"Dire Maul North":`<h4>Dire Maul North \u2013 Gordok Commons</h4>

    <p>The northern quarter has been overrun by the brutish <strong>Gordok ogres</strong>, who seized the ruins as their stronghold. Here, massive banquet halls, courtyards, and crumbling barracks echo with the roars of ogre lords and their enslaved minions. The ogres jealously guard their new seat of power, and their king\u2014<strong>King Gordok</strong>\u2014rules with brute strength.</p>

    <p><strong>Theme</strong>: Savage strength in the halls of ancient ruins, ogre dominance.<br>
    <strong>Key foes</strong>: Gordok ogres, shamans, warlocks, beastmasters.</p>`,"Dire Maul East":`<h4>Dire Maul East \u2013 Warpwood Quarter</h4>

    <p>The eastern wing has become overgrown and wild, reclaimed by nature but twisted by unchecked magic. Massive treants, lashers, and corrupted dryads stalk the halls, led astray by satyrs who spread the taint of demonic influence. At its heart, a powerful satyr named <strong>Alzzin the Wildshaper</strong> channels the energies of the ruins to spread chaos through Feralas. The once-cultivated gardens have become a jungle of corruption, where ancient wards collapse under creeping vines and demonic whispers.</p>

    <p><strong>Theme</strong>: Arcane gardens overtaken by corrupted nature, satyr mischief.<br>
    <strong>Key foes</strong>: Lashers, satyrs, warped dryads, Alzzin the Wildshaper.</p>`,"Dire Maul Tribute":`<h4>The Gordok Tribute Run</h4>

    <p>Among adventurers, the Dire Maul North wing is infamous for the so-called <strong>\u201CTribute Run.\u201D</strong> Rather than cutting down every ogre in their path, cunning groups spare most of the chieftains and instead slay only <strong>King Gordok</strong> himself. By leaving his lieutenants alive, the victors claim the throne not as conquerors, but as successors. The ogres, bound by their crude sense of honor, shower the \u201Cnew king\u201D and his allies with riches, feasts, and rare treasures. The Tribute Run is less a test of brute strength than of restraint, planning, and guile\u2014an alternate path through Dire Maul\u2019s dangers that rewards wit as much as steel.</p>

    <p><strong>Theme</strong>: Political cunning, manipulation of ogre hierarchy.
    <strong>Key foes</strong>: King Gordok (only), with tribute rewards from spared bosses.</p>`,"Dire Maul Conclusion":"<p>Together, the three wings of Dire Maul and the alternate Tribute challenge paint a picture of one of World of Warcraft\u2019s richest dungeons: a place of <strong>ancient pride, magical corruption, and opportunistic invaders</strong>, where history itself weighs heavy on every broken column.</p>",Scholomance:`<h4>The Legacy of Scholomance</h4>

    <p>High in the wintry crags of <strong>Western Plaguelands</strong>, overlooking the ruins of Caer Darrow, stands a darkened keep that once belonged to the noble <strong>Barov family</strong>. Generations ago, the Barovs were a wealthy bloodline, owning vast tracts of land across Lordaeron. But their ambition was their undoing. When <strong>Kel\u2019Thuzad</strong> and the Cult of the Damned rose to power, the Barovs pledged themselves\u2014and their ancestral home\u2014to the service of the Lich King in exchange for the promise of eternal life.</p>

    <p>Thus, the once-proud halls of the Barovs became the necromantic academy of the Scourge, known thereafter as <strong>Scholomance</strong>. Here, Kel\u2019Thuzad\u2019s followers train new necromancers, warlocks, and deathknights, perfecting the arts of undeath. The laboratories run red with experiments in reanimation, while classrooms echo with the twisted lessons of dark magisters. Adventurers who enter Scholomance confront not just undead horrors, but the heart of the Cult of the Damned itself.</p>

    <h4>Scholomance \u2013 The Necromantic Academy</h4>

    <p>Scholomance is not a fortress of brute strength\u2014it is a school of damnation. Every chamber reveals another facet of Scourge depravity:</p>
    <ul>
    <li><strong>The Reliquary</strong>: Arcane laboratories filled with necrotic experiments, where alchemists brew plagues and dark mages twist souls.</li>

    <li><strong>The Summoning Chambers</strong>: Circles of binding and sacrifice, where warlocks summon demonic allies to bolster the Scourge.</li>

    <li><strong>The Hall of the Barovs</strong>: The corrupted remains of the Barov family themselves, turned into deathless servants of their own bargain.</li>

    <li><strong>The Headmaster\u2019s Study</strong>: Seat of <strong>Darkmaster Gandling</strong>, Kel\u2019Thuzad\u2019s favored servant in Lordaeron, who oversees the training of necromancers with cruel mastery.</li>
    </ul>
    <p><strong>Theme</strong>: Corruption of noble blood, forbidden knowledge, the cold hand of undeath.
    <strong>Key foes</strong>: Necromancers, bone golems, ghasts, death knights, Darkmaster Gandling.</p>

    <h4>Why Scholomance Matters</h4>

    <p>Scholomance is more than another Scourge dungeon\u2014it is the <strong>nerve center of their necromantic war machine in Lordaeron</strong>. From here, the Cult of the Damned disseminates its teachings, creating new generations of necromancers to fuel the Scourge\u2019s endless armies. To cut down Gandling and his pupils is not only vengeance for the Barovs\u2019 betrayal, but also a crippling blow against the Scourge\u2019s presence in the Plaguelands.</p>`,Stratholme:`<h4>The Legacy of Stratholme</h4>

    <p>Once a shining jewel of Lordaeron, <strong>Stratholme</strong> was a bustling trade hub and one of the largest human cities in the north. Its spires and marketplaces echoed with prosperity\u2014until the <strong>Scourge</strong> came.</p>

    <p>During the <strong>Third War</strong>, Prince <strong>Arthas Menethil</strong> discovered that the citizens of Stratholme had been fed grain tainted with the plague of undeath. In a moment that forever scarred his soul, Arthas ordered the <strong>Culling of Stratholme</strong>, personally leading the slaughter of its infected populace before they could rise as undead. This act, though intended to save his kingdom, marked his descent into ruthlessness and ultimately paved the way for his fall to Frostmourne.</p>

    <p>Now, Stratholme is a city divided. The western quarter, known as the <strong>Scarlet Bastion</strong>, is held by the fanatical <strong>Scarlet Crusade</strong>, who seek to purge undead at all costs\u2014but whose zeal has made them nearly as dangerous as the Scourge they fight. The eastern quarter is a ruined nightmare, crawling with <strong>undead horrors</strong> under the command of <strong>Baron Rivendare</strong>, who has turned the plague-stricken streets into his domain. To enter Stratholme is to walk into a living scar of Lordaeron\u2019s tragedy.</p>`,"Live Stratholme":`<h4>Stratholme \u2013 Scarlet Bastion (Live Side)</h4>

    <p>The so-called \u201Clive side\u201D is far from safe\u2014it is held by the zealous warriors and priests of the <strong>Scarlet Crusade</strong>. From the moment adventurers pass through the gates, they face patrols of Scarlet soldiers, crusaders, and spellcasters, all bent on purging anyone they consider heretical or infected.</p>

    <p>The <strong>Crusade\u2019s leadership in Stratholme</strong>\u2014commanders such as <strong>Cannon Master Willey</strong> and <strong>Balnazzar</strong> in disguise\u2014have turned the Bastion into a fortress of fanaticism. Though they once sought to hold back the undead tide, their madness and corruption have led them into dark pacts, leaving them blind to the true evil within their own ranks.</p>

    <p><strong>Theme</strong>: Fanatic zeal, human-on-human conflict, corrupted holy order.
    <strong>Key foes</strong>: Scarlet Crusade zealots, spellcasters, Balnazzar (a dreadlord in disguise).</p>`,"Undead Stratholme":`<h4>Stratholme \u2013 Plague Quarter (Undead Side)</h4>

    <p>The eastern half of Stratholme is a necropolis in all but name. Cobblestone streets are littered with corpses, plagued vermin scurry through the alleys, and skeletal horrors patrol under the shadow of burning towers. This wing is ruled by <strong>Baron Rivendare</strong>, the Scourge\u2019s horseman, who rides his dread steed Deathcharger through the city\u2019s blackened avenues.</p>

    <p>The undead side is crawling with abominations, banshees, gargoyles, and necromancers\u2014all remnants of Arthas\u2019 purge and later waves of Scourge corruption. Here, the tragedy of Stratholme is most vivid: homes turned into crypts, holy places into unholy shrines, the cries of the innocent replaced with the wails of the damned.</p>

    <p><strong>Theme</strong>: Undeath and despair, Scourge dominion.
    <strong>Key foes</strong>: Plague abominations, banshees, Baron Rivendare (and his Deathcharger).</p>`,"Stratholme Conclusion":`<h4>The Split of Stratholme \u2013 Live vs. Undead</h4>

    <p>Unlike many dungeons, Stratholme represents <strong>two conflicting but equally dangerous forces:</strong></p>
    <ul>
    <li>On the <strong>Scarlet Bastion side</strong>, mortals consumed by zeal and paranoia kill with fire and scripture, but are themselves manipulated by a dreadlord\u2019s shadow.</li>

    <li>On the <strong>Plague Quarter side</strong>, the Scourge marches unopposed, feeding on the corpses left behind by Arthas\u2019 infamous purge.</li>
    </ul>

    <p>Adventurers often explore both sides in separate forays, each a chapter of Lordaeron\u2019s tragic fall.</p>`,"Blackrock Spire":`<h4>The Legacy of Blackrock Spire</h4>

    <p>Carved into the fiery heart of <strong>Blackrock Mountain</strong>, Blackrock Spire was once a stronghold of the <strong>Dark Iron dwarves</strong>, who sought dominion over their kin. But the mountain\u2019s molten depths became a battlefield of greater powers. When the black dragonflight, led by <strong>Nefarian</strong>, son of Deathwing, sought a base of operations, they found willing allies among the Dark Irons and the remnants of the Blackrock orcs who had once served under <strong>Warchief Rend Blackhand.</strong></p>

    <p>Thus, the vast spire was split into layers of dominion: the <strong>Lower Spire</strong>, where orcs, trolls, ogres, and worgs marshaled their strength, and the <strong>Upper Spire</strong>, where Nefarian\u2019s black dragons and Rend\u2019s warband plotted to challenge both Horde and Alliance alike. To enter Blackrock Spire is to enter a cauldron of treachery, where fire, steel, and dragonflame rule.</p>`,"Upper Blackrock Spire":`<h4>Upper Blackrock Spire (UBRS) \u2013 Nefarian\u2019s Fortress</h4>

    <p>Atop the Spire lies the lair of <strong>General Drakkisath</strong> and the black dragonflight. Here, the alliance between <strong>Nefarian</strong> and <strong>Warchief Rend Blackhand</strong> is sealed in blood and fire. The Upper Spire is a crucible of draconic power: black dragonkin stalk the halls, flame wreathed corridors test intruders, and the banners of Rend\u2019s Dark Horde hang from the vaulted ceilings.</p>

    <p>This is no mere fortress\u2014it is <strong>Nefarian\u2019s war machine</strong>, a staging ground for his twisted experiments in draconic corruption and a seat of power for the black dragonflight. Adventurers who dare UBRS must overcome Rend\u2019s warlords, face legions of orcs and dragonkin, and ultimately confront <strong>General Drakkisath</strong>, whose mastery of flame and steel guards the way into Nefarian\u2019s true domain: Blackwing Lair.</p>

    <p><strong>Theme</strong>: Black dragonflight dominion, dark orcish power, looming threat of Nefarian.
    <strong>Key foes</strong>: Black dragonkin, Dark Horde champions, General Drakkisath.
    <strong>Final confrontation</strong>: Paves the way directly into <strong>Blackwing Lair</strong>, the next tier of the black dragonflight\u2019s schemes.</p>`};var NE=$w(PE());var gt=(()=>{let n=class n{constructor(i){this.http=i,this.itemsMap=new Map,this.statWeights=[],this.itemSpell=[],this.itemSet=[],this.buff=[],this.debuff=[],this.consumable=[],this.spells=[],this.talents=[],this.dungeonBosses=[],this.dungeonUnlocks=[],this.dungeonDrops=[],this.dungeonQuests=[],this.raidAttacks=[],this.raidDrops=[],this.raidStats=[],this.raidSpawns=[],this.raidPaths=[],this.uniqueDungeons=[],this.defaultGambits=[],this.guildWeek=1,this.dungeonAssignments=[],this.dungeonProgress={week:0,attempts:0}}loadAllData(){return this.loadDungeonData(),xs({items:this.http.get("assets/items.csv",{responseType:"text"}),spells:this.http.get("assets/spells.csv",{responseType:"text"}),talents:this.http.get("assets/talents.csv",{responseType:"text"}),dungeonBosses:this.http.get("assets/dungeon_bosses.csv",{responseType:"text"}),dungeonUnlocks:this.http.get("assets/dungeon_unlock.csv",{responseType:"text"}),dungeonDrops:this.http.get("assets/dungeon_drops.csv",{responseType:"text"}),dungeonQuests:this.http.get("assets/dungeon_quests.csv",{responseType:"text"}),statWeights:this.http.get("assets/stat_weights.csv",{responseType:"text"}),itemSpell:this.http.get("assets/item_spells.csv",{responseType:"text"}),itemSet:this.http.get("assets/item_sets.csv",{responseType:"text"}),buff:this.http.get("assets/buffs.csv",{responseType:"text"}),debuff:this.http.get("assets/debuffs.csv",{responseType:"text"}),consumable:this.http.get("assets/consumables.csv",{responseType:"text"}),raidAttacks:this.http.get("assets/raid_attacks.csv",{responseType:"text"}),raidDrops:this.http.get("assets/raid_drops.csv",{responseType:"text"}),raidStats:this.http.get("assets/raid_stats.csv",{responseType:"text"}),raidSpawns:this.http.get("assets/raid_spawn.csv",{responseType:"text"}),raidPaths:this.http.get("assets/raid_path.csv",{responseType:"text"}),defaultGambits:this.http.get("assets/gambits.csv",{responseType:"text"})}).pipe(Xe(({items:i,spells:r,talents:o,dungeonBosses:a,dungeonUnlocks:s,dungeonDrops:l,dungeonQuests:c,statWeights:u,itemSpell:d,itemSet:_,buff:f,debuff:v,consumable:T,raidAttacks:b,raidDrops:M,raidStats:W,raidSpawns:H,raidPaths:O,defaultGambits:V})=>{this.parseItems(i,this.itemsMap),this.spells=this.parseCsv(r,["CLASSID","SPELLID","RACEID","SPELLTYPE","WeaponDmg","School","Dispel","Mechanic","Targets","TargetCreatureType","CastingTimeIndex","RecoveryTime","ProcCharges","MaxLevel","BaseLevel","DurationIndex","ManaCost","ManaPerSecond","PowerType","RangeIndex","Speed","EffectDieSides1","EffectRealPointsPerLevel1","EffectBasePoints1","EffectMechanic1","EffectDieSides2","EffectRealPointsPerLevel2","EffectBasePoints2","EffectMechanic2","ManaCostPercentage","StartRecoveryTime","EffectBonusCoefficient1","EffectAmplitude1","EffectApplyAuraName1","EffectBonusCoefficient2","EffectAmplitude2","EffectApplyAuraName2","EffectPointsPerComboPoint1","StackAmount"]),this.talents=this.parseCsv(o,["CLASSID","SPELLID","SPEC_0","SPEC_1","SPEC_2"]),this.dungeonBosses=this.parseCsv(a,["NPC_ID","LEVEL","ORDER","LOOT","SPAWN"]),this.uniqueDungeons=[...new Set(this.dungeonBosses.map(S=>S.DUNGEON))],this.dungeonUnlocks=this.parseCsv(s,["NPC_ID"]),this.dungeonDrops=this.parseCsv(l,["NPC_ID","DB_ID","LEVEL","DROP_PCT","VALUE"]),this.dungeonQuests=this.parseCsv(c,["NPC_ID","ITEM_0","ITEM_1","ITEM_2","ITEM_3","ITEM_4","ITEM_5"]),this.statWeights=this.parseCsv(u,["CLASSID","SPEC","2H_SPEED","R_DPS","MH_DPS","OH_DPS","SKILL","ARMOR","STAMINA","STRENGTH","AGILITY","INTELLIGENCE","SPIRIT","MP5","ATTACK_POWER","R_ATTACK_POWER","SPELL_DAMAGE","SPELL_HEAL","HIT_PCT","CRIT_PCT","SPELL_HIT","SPELL_CRIT","DEFENSE","DODGE_PCT","PARRY_PCT","BLOCK_PCT","BLOCK_VALUE","RESIST_FIRE","SPELL_FIRE","SPELL_SHADOW","SPELL_FROST"]),this.itemSpell=this.parseCsv(d,["entry","spellid_1","spelltrigger_1","spellcooldown_1","spellppmRate1","spellcategory_1","spellcategorycooldown_1","spellid_2","spelltrigger_2","spellcooldown_2","spellppmRate_2","spellid_3","spelltrigger_3","spellcooldown_3"]),this.itemSet=this.parseCsv(_,["SET_ID","NUM_ITEM","PROC_SPELLID","PROC_CHANCE","ARMOR","DEFENSE","ATTACK_POWER","HIT_PCT","CRIT_PCT","SPELL_CRIT","BLOCK_VALUE","PARRY_PCT","RESIST_FIRE","RESIST_SHADOW","RESIST_FROST","RESIST_NATURE","RESIST_ARCANE","SPELL_DAMAGE","SPELL_HEAL","MOVESPEED","STAMINA","STRENGTH","AGILITY","INTELLECT","SPIRIT","SPELL_PEN","THREAT_MOD_MULT","THREAT_MOD_SCHOOL"]),this.buff=this.parseCsv(f,["DB_ID","AUTO","PROC_SPELLID","PROC_CHANCE","PROC_PPM","MIN_DAMAGE","MAX_DAMAGE","DAMAGE_SCHOOL","ARMOR","HEALTH","HEALTH_MULT","MANA","MIN_SHIELD","MAX_SHIELD","SHIELD_SCHOOL","SPELL_DAMAGE","SPELL_HEAL","SPELL_FROST","SPELL_SHADOW","SPELL_FIRE","RESIST_FIRE","RESIST_SHADOW","RESIST_NATURE","RESIST_FROST","RESIST_ARCANE","STRENGTH","AGILITY","INTELLECT","SPIRIT","STAMINA","MOVESPEED","DODGE_PCT","PARRY_PCT","BLOCK_PCT","CRIT_PCT","MP5","HP5","THREAT_MULT","THREAT_SCHOOL","ATTACK_POWER","R_ATTACK_POWER","SPELL_CRIT","SPELL_CRIT_FIRE","ATTACK_SPEED","NUM_OPP_MOD","THORNS","BLOCK_THORNS","DMG_TAKEN_MOD","DMG_TAKEN_MULT","DMG_MULT","DMG_MULT_SCHOOL","ARMOR_MULT","RAGE_PER_SEC","MANA_PER_SEC","CAST_TIME_MOD","HEALTH_PER_SEC","SPIRIT_CAST_PCT","SPIRIT_TICK_MULT","ENERGY_REGEN_MULT","IMMUNE_FEAR","MANA_COST_MOD","MANA_COST_MULT","IMMUNE_CC","IMMUNE_DMG","PUSHBACK_RESIST","STACK_MULT"]),this.debuff=this.parseCsv(v,["DB_ID","STACK","PER_PLAYER","PROC_SPELLID","PROC_CHANCE","ATTACK_POWER_MOD","ARMOR_MOD","MIN_DAMAGE","MAX_DAMAGE","CAST_SPEED_MULT","RESIST_FIRE","RESIST_SHADOW","RESIST_FROST","RESIST_NATURE","RESIST_ARCANE","ATTACK_SPEED","DMG_TAKEN_MOD","DMG_TAKEN_MOD_SCHOOL","DMG_TAKEN_MULT","DMG_TAKEN_MULT_SCHOOL","MOVESPEED","R_ATTACK_POWER_TAKEN","STAMINA","STRENGTH","AGILITY","INTELLECT","SPIRIT","SILENCE","SPELL_HEAL","SPELL_CRIT_TAKEN","SPELL_CRIT_TAKEN_SCHOOL","HIT_PCT","HEAL_MOD_MULT","STACK_MULT"]),this.consumable=this.parseCsv(T,["DB_ID","SPELLID","GOLD","DUR","STACK","CD","CD_SHARE","MIN_HEALTH","MAX_HEALTH","MIN_MANA","MAX_MANA","MIN_RAGE","MAX_RAGE","MIN_DAMAGE","MAX_DAMAGE","ARMOR","HEALTH","MANA","SPELL_DAMAGE","SPELL_HEAL","SPELL_FROST","SPELL_SHADOW","SPELL_FIRE,","RESIST_FIRE","RESIST_SHADOW","RESIST_NATURE","RESIST_FROST","RESIST_ARCANCE","STRENGTH","AGILITY","INTELLECT","SPIRIT","STAMINA","MOVESPEED","CRIT_PCT","MP5","ATTACK_POWER","SPELL_CRIT"]),this.raidAttacks=this.parseCsv(b,["entry","id","event_type","event_inverse_phase_mask","event_chance","event_flags","event_param1","event_param2","event_param3","event_param4","event_param5","event_param6","action1_type","action1_param1","action1_param2","action1_param3","action2_type","action2_param1","action2_param2","action2_param3","action3_type","action3_param1","action3_param2","action3_param3"]),this.raidDrops=this.parseCsv(M,["NPC_ID","DROP_PCT","DB_ID","REF_ID"]),this.raidStats=this.parseCsv(W,["id","scale","spawntimesecsmin","spawndist","movementtype","maxlevel","max_health","max_mana","armor","dmg_multiplier","min_dmg","max_dmg","melee_attack_power","melee_attack_speed","speedwalk","speedrun","lootid","damageschool","schoolimmunemask","resistancefire","resistancearcane","resistanceshadow","resistancefrost","resistancenature"]),this.raidSpawns=this.parseCsv(H,["guid","id","map","spawn_x","spawn_y","spawn_z","orientation","auto_spawn"]),this.raidPaths=this.parseCsv(O,["guid","movement_point","path_x","path_y","path_z","path_waittime"]),this.defaultGambits=this.parseCsv(V,["class","spec","actionId"])}),ie(()=>{}))}loadDungeonData(){this.guildWeek=parseInt(localStorage.getItem("guildWeek")||"1",10),console.log("Loaded guild week from storage:",this.guildWeek),this.guildWeek=this.guildWeek;let i=localStorage.getItem("dungeonAssignment");i?(this.dungeonAssignments=JSON.parse(i),console.log("Loaded dungeon assignments from storage:",this.dungeonAssignments)):this.dungeonAssignments=[{dungeon:"Blackrock Depths",players:[Array(5).fill(null)],bosses:[],progress:null,penalty:0}];let r=localStorage.getItem("dungeonProgress");r?(this.dungeonProgress=JSON.parse(r),console.log("Loaded dungeon progress from storage:",this.dungeonProgress)):this.dungeonProgress={week:this.guildWeek,attempts:0}}getGuildWeek(){return this.guildWeek}setGuildWeek(i){this.guildWeek=i}getDungeonAssignments(){return this.dungeonAssignments}getDefaultGambits(){return this.defaultGambits}setDungeonAssignments(i){this.dungeonAssignments=i,localStorage.setItem("dungeonAssignment",JSON.stringify(this.dungeonAssignments))}getDungeonProgress(){return this.dungeonProgress}setDungeonProgress(i){this.dungeonProgress=i,localStorage.setItem("dungeonProgress",JSON.stringify(this.dungeonProgress))}getRaidStats(){return this.raidStats}getRaidSpawns(){return this.raidSpawns}setItemsMap(i){this.itemsMap.clear(),this.itemsMap=i}getItemsMap(){return this.itemsMap}setStatWeights(i){this.statWeights=[],this.statWeights=i}getStatWeights(){return this.statWeights}getBuffs(){return this.buff}getDebuffs(){return this.debuff}getConsumables(){return this.consumable}getItemSetBonus(){return this.itemSet}getItemSpells(){return this.itemSpell}getSpells(){return this.spells}getTalents(){return this.talents}getDungeonBosses(){return this.dungeonBosses}getDungeonUnlocks(){return this.dungeonUnlocks}getDungeonDrops(){return this.dungeonDrops}getDungeonQuests(){return this.dungeonQuests}getUniqueDungeons(){return this.uniqueDungeons}parseCsv(i,r){try{return(0,NE.parse)(i,{header:!0,skipEmptyLines:!0,transformHeader:a=>a.trim().replace(/^"|"$/g,""),transform:a=>a.trim()}).data.map(a=>(r.forEach(s=>{(!a[s]||isNaN(+a[s]))&&(a[s]="0")}),a.TOOLTIP&&(a.TOOLTIP=this.cleanTooltip(a.TOOLTIP)),a))}catch(o){return console.error("Error parsing CSV:",o),[]}}parseItems(i,r){try{this.parseCsv(i,["DB_ID","DISP_ID","EQ_TYPE","CLASS_MASK","FIERY_CORE","LAVA_CORE"]).forEach(a=>{!a.DB_ID||isNaN(+a.DB_ID)||!a.DISP_ID||isNaN(+a.DISP_ID)||!a.EQ_TYPE||isNaN(+a.EQ_TYPE)||r.set(+a.DB_ID,{disp_id:+a.DISP_ID,eq_type:+a.EQ_TYPE,sub_type:a.TYPE||`Item ${a.DB_ID}`,icon_name:a.ICON_NAME||`Item ${a.DB_ID}`,name:a.NAME||`Item ${a.DB_ID}`,tooltip:a.TOOLTIP,class_mask:a.CLASS_MASK,source:a.SOURCE,item_quality:a.ITEM_QUALITY,item_level:a.ITEM_LEVEL,bis:a.BIS,role:a.ROLE,fiery_core:a.FIERY_CORE,lava_core:a.LAVA_CORE,set_id:a.SET,min_damage:a.MIN_DAMAGE,max_damage:a.MAX_DAMAGE,speed:a.SPEED,armor:a.ARMOR,block_value:a.BLOCK_VALUE,stamina:a.STAMINA,strength:a.STRENGTH,agility:a.AGILITY,intelligence:a.INTELLIGENCE,spirit:a.SPIRIT,mp5:a.MP5,hp5:a.HP5,attack_power:a.ATTACK_POWER,attack_power_ranged:a.R_ATTACK_POWER,spell_damage:a.SPELL_DAMAGE,spell_heal:a.SPELL_HEAL,spell_frost:a.SPELL_FROST,spell_shadow:a.SPELL_SHADOW,spell_fire:a.SPELL_FIRE,spell_nature:a.SPELL_NATURE,hit_pct:a.HIT_PCT,crit_pct:a.CRIT_PCT,hit_pct_spell:a.SPELL_HIT,crit_pct_spell:a.SPELL_CRIT,parry_pct:a.PARRY_PCT,dodge_pct:a.DODGE_PCT,block_rate:a.BLOCK_PCT,defense:a.DEFENSE,resist_fire:a.RESIST_FIRE,resist_shadow:a.RESIST_SHADOW,resist_nature:a.RESIST_NATURE,resist_frost:a.RESIST_FROST,resist_arcane:a.RESIST_ARCANE,skill_dagger:a.SKILL_DAGGER,skill_sword:a.SKILL_SWORD,thorns:a.THORNS})})}catch(o){console.error("Error parsing items.csv:",o)}}cleanTooltip(i){if(!i)return"";let r=i;return r=r.replace(/<!--.*?-->/gs,""),r=r.replace(/<a[^>]*>(.*?)<\/a>/gi,"$1"),r=r.replace(/Durability \d+ \/ \d+/gi,""),r=r.replace(/Requires Level \d+/gi,""),r=r.replace(/Binds when picked up/gi,""),r=r.replace(/\(0\/\d+\)/gi,""),r=r.replace(/<(div|span)[^>]*class="[^"]*(whtt-sellprice|wowhead-tooltip-requirements)[^"]*"[^>]*>.*?<\/\1>/gi,""),r=r.replace(/<div[^>]*class="[^"]*indent[^"]*"[^>]*>[\s\S]*?(?=<\/div>)/gi,""),r=r.replace(/<span class="q0">([\s\S]*?)<\/span>/gi,"$1"),r=r.replace(/<span>(\(\d+\)\s*Set\s*:[\s\S]*?)(?=\(\d+\)\s*Set\s*:|$)/gi,"$1"),r=r.replace(/<b[^>]*class="[^"]*"[^>]*>/gi,"<b>"),r=r.replace(/<\/a>/gi,""),r=r.replace(/\s+/g," ").trim(),r=r.replace(/(?:<br\s*\/?>\s*){2,}/gi,"<br>"),r}saveVariableToStorage(i,r){try{localStorage.setItem(i,JSON.stringify(r))}catch(o){console.error(`Error saving ${i} to localStorage:`,o)}}};n.\u0275fac=function(r){return new(r||n)(B(Yi))},n.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var gn=(()=>{let n=class n{constructor(i){this.dataService=i,this.spellSchool=Pn,this.durIndex=Za}calculateStats(i,r,o,a){let s={general:{health:0,mana:0,strength:0,agility:0,stamina:0,intellect:0,spirit:0},armor:0,armorDR:0,attackPower:0,rangedAttackPower:0,attackSpeed:0,damage:{MHbase1:0,MHbase2:0,OHbase1:0,OHbase2:0,Rbase1:0,Rbase2:0,MHmin:0,MHmax:0,MHspeed:2,MHskill:300,MHtype:"",OHmin:0,OHmax:0,OHspeed:2,OHskill:300,OHtype:"",Rmin:0,Rmax:0,Rspeed:2,Rskill:300,Rtype:""},thorns:0,hitChance:0,critChance:5,dodgeChance:0,parryChance:5,blockChance:0,blockValue:0,defense:300,spellHitChance:0,spellCritChance:0,healthPer5:0,manaPer5:0,spiritTick:0,spiritCastPct:0,spellPower:{damage:0,healing:0,fire:0,shadow:0,nature:0,frost:0,arcane:0},resistances:{fire:0,shadow:0,nature:0,frost:0,arcane:0},healthMult:0,moveSpeed:0,spellPen:0,blockThorns:0,castSpeedMult:0,dmgMult:{physical:0,holy:0,fire:0,nature:0,frost:0,shadow:0,arcane:0,magic:0,all:0},dmgTakenMod:{physical:0,holy:0,fire:0,nature:0,frost:0,shadow:0,arcane:0,magic:0,all:0},dmgTakenMult:{physical:0,holy:0,fire:0,nature:0,frost:0,shadow:0,arcane:0,magic:0,all:0},rangedAttackPowerTaken:0,healModMult:0,threatMult:0,armorMult:0,castTimeMod:0,spiritTickMult:0,energyRegenMult:0,immuneFear:0,immuneCC:0,immuneDmg:0,pushbackResist:0,manaCostMod:0,manaCostMult:0,spellCritTaken:{physical:0,holy:0,fire:0,nature:0,frost:0,shadow:0,arcane:0,magic:0,all:0},pets:{},gearscore:0};if(!r)return s;let l=+r.CLASSID,c=+r.RACE,u=+r.SPEC,d=Em.find(m=>m.CLASSID===l.toString()&&m.RACEID===c.toString())||{HP:0,MP:0,STR:0,AGI:0,STA:0,INT:0,SPI:0,ARM:0};s.general={health:+d.HP,mana:+d.MP,strength:+d.STR,agility:+d.AGI,stamina:+d.STA,intellect:+d.INT,spirit:+d.SPI},s.armor=+d.ARM;let _={},f=!1,v={};o.forEach(m=>{if(m.dbId!==-1){let w=this.dataService.getItemsMap().get(m.dbId);w&&(w.set_id&&w.set_id>0&&(v[w.set_id]=(v[w.set_id]||0)+1),s.general.stamina+=parseInt((w.stamina||0).toString()),s.general.strength+=parseInt((w.strength||0).toString()),s.general.agility+=parseInt((w.agility||0).toString()),s.general.intellect+=parseInt((w.intelligence||0).toString()),s.general.spirit+=parseInt((w.spirit||0).toString()),s.armor+=parseInt((w.armor||0).toString()),s.attackPower+=parseInt((w.attack_power||0).toString()),s.rangedAttackPower+=parseInt((w.attack_power_ranged||0).toString()),m.slot===21?(s.damage.MHmin=parseInt((w.min_damage||0).toString()),s.damage.MHmax=parseInt((w.max_damage||0).toString()),s.damage.MHbase1=s.damage.MHmin,s.damage.MHbase2=s.damage.MHmax,s.damage.MHspeed=parseFloat((w.speed||0).toString()),s.damage.MHtype=w.sub_type||""):m.slot===22?(s.damage.OHmin=parseInt((w.min_damage||0).toString()),s.damage.OHmax=parseInt((w.max_damage||0).toString()),s.damage.OHbase1=s.damage.OHmin,s.damage.OHbase2=s.damage.OHmax,s.damage.OHspeed=parseFloat((w.speed||0).toString()),s.damage.OHtype=w.sub_type||"",f=!0):m.slot===26&&(s.damage.Rmin=parseInt((w.min_damage||0).toString()),s.damage.Rmax=parseInt((w.max_damage||0).toString()),s.damage.Rbase1=s.damage.Rmin,s.damage.Rbase2=s.damage.Rmax,s.damage.Rspeed=parseFloat((w.speed||0).toString()),s.damage.Rtype=w.sub_type||""),s.hitChance+=parseInt((w.hit_pct||0).toString()),s.critChance+=parseInt((w.crit_pct||0).toString()),s.spellHitChance+=parseInt((w.hit_pct_spell||0).toString()),s.spellCritChance+=parseInt((w.crit_pct_spell||0).toString()),s.dodgeChance+=parseInt((w.dodge_pct||0).toString()),s.parryChance+=parseInt((w.parry_pct||0).toString()),s.blockChance+=parseInt((w.block_rate||0).toString()),s.blockValue+=parseInt((w.block_value||0).toString()),s.defense+=parseInt((w.defense||0).toString()),s.spellPower.damage+=parseInt((w.spell_damage||0).toString()),s.spellPower.healing+=parseInt((w.spell_heal||0).toString()),s.spellPower.fire+=parseInt((w.spell_fire||0).toString()),s.spellPower.frost+=parseInt((w.spell_frost||0).toString()),s.spellPower.shadow+=parseInt((w.spell_shadow||0).toString()),s.spellPower.nature+=parseInt((w.spell_nature||0).toString()),s.resistances.fire+=parseInt((w.resist_fire||0).toString()),s.resistances.shadow+=parseInt((w.resist_shadow||0).toString()),s.resistances.nature+=parseInt((w.resist_nature||0).toString()),s.resistances.frost+=parseInt((w.resist_frost||0).toString()),s.resistances.arcane+=parseInt((w.resist_arcane||0).toString()),s.healthPer5+=parseInt((w.hp5||0).toString()),s.manaPer5+=parseInt((w.mp5||0).toString()))}}),+r.CLASSID==0&&(r.activeBuffs?.find(P=>+P.spellId==768)&&(s.damage.MHbase1=38,s.damage.MHbase2=46,s.damage.MHspeed=1),r.activeBuffs?.find(P=>+P.spellId==9634)&&(s.damage.MHbase1=128,s.damage.MHbase2=142,s.damage.MHspeed=2.5));let T=a.findIndex(m=>m.NAME===r.NAME),b=this.computeEqTypeScores(a,T);s.gearscore=this.computeGearscore(b,o);let M=s.armor-d.ARM;(l===7&&u===2||l===2&&u===1)&&(s.armor+=.1*M),l===0&&u===1&&(s.armor+=.04*M);for(let m in v){let w=v[m];this.dataService.getItemSetBonus().filter(x=>x.SET_ID===parseInt(m)&&w>=x.NUM_ITEM).forEach(x=>{s.armor+=parseInt((x.ARMOR||0).toString()),s.defense+=parseInt((x.DEFENSE||0).toString()),s.attackPower+=parseInt((x.ATTACK_POWER||0).toString()),s.hitChance+=parseInt((x.HIT_PCT||0).toString()),s.critChance+=parseInt((x.CRIT_PCT||0).toString()),s.spellCritChance+=parseInt((x.SPELL_CRIT||0).toString()),s.blockValue+=parseInt((x.BLOCK_VALUE||0).toString()),s.parryChance+=parseInt((x.PARRY_PCT||0).toString()),s.resistances.fire+=parseInt((x.RESIST_FIRE||0).toString()),s.resistances.shadow+=parseInt((x.RESIST_SHADOW||0).toString()),s.resistances.frost+=parseInt((x.RESIST_FROST||0).toString()),s.resistances.nature+=parseInt((x.RESIST_NATURE||0).toString()),s.resistances.arcane+=parseInt((x.RESIST_ARCANE||0).toString()),s.spellPower.damage+=parseInt((x.SPELL_DAMAGE||0).toString()),s.spellPower.healing+=parseInt((x.SPELL_HEAL||0).toString()),s.moveSpeed+=parseInt((x.MOVESPEED||0).toString()),s.general.stamina+=parseInt((x.STAMINA||0).toString()),s.general.strength+=parseInt((x.STRENGTH||0).toString()),s.general.agility+=parseInt((x.AGILITY||0).toString()),s.general.intellect+=parseInt((x.INTELLECT||0).toString()),s.general.spirit+=parseInt((x.SPIRIT||0).toString()),s.spellPen+=parseInt((x.SPELL_PEN||0).toString()),s.threatMult+=parseInt((x.THREAT_MOD_MULT||0).toString())})}if(s.pets={},l===5?s.pets.cat={general:{health:3390,mana:100,strength:136,agility:100,stamina:296,intellect:50,spirit:80},armor:4014,armorDR:0,attackPower:252,damage:{min:55,max:72,speed:1},resistances:{fire:120,shadow:0,nature:0,frost:0,arcane:0},manaPer5:0,spiritTick:0,critChance:5,abilities:["Claw: 43-59 damage per 25 focus"]}:l===4&&(s.pets.imp={general:{health:1009,mana:1898,strength:122,agility:35,stamina:86,intellect:264,spirit:260},armor:1233,armorDR:0,attackPower:112,damage:{min:85,max:96,speed:2},resistances:{fire:0,shadow:0,nature:0,frost:0,arcane:0},manaPer5:0,spiritTick:0,critChance:5,abilities:["Firebolt: 85-96 damage, 2 sec cast, 115 mana"]},s.pets.voidwalker={general:{health:3149,mana:1874,strength:129,agility:85,stamina:234,intellect:70,spirit:150},armor:4915,armorDR:0,attackPower:238,damage:{min:65,max:82,speed:2},resistances:{fire:0,shadow:0,nature:0,frost:0,arcane:0},manaPer5:0,spiritTick:0,critChance:5,abilities:["Sacrifice: 1930 shield for 30 sec"]},s.pets.succubus={general:{health:1709,mana:1874,strength:129,agility:85,stamina:234,intellect:70,spirit:150},armor:2431,armorDR:0,attackPower:238,damage:{min:67,max:84,speed:2},resistances:{fire:0,shadow:0,nature:0,frost:0,arcane:0},manaPer5:0,spiritTick:0,critChance:5,abilities:["Lash of Pain: 87 damage, 145 mana, 12 sec cd"]},s.pets.felhunter={general:{health:2320,mana:1874,strength:129,agility:85,stamina:234,intellect:70,spirit:150},armor:2487,armorDR:0,attackPower:238,damage:{min:59,max:72,speed:2},resistances:{fire:0,shadow:0,nature:0,frost:0,arcane:0},manaPer5:0,spiritTick:0,critChance:5,abilities:[]}),i){r.activeBuffs&&r.activeBuffs.forEach(A=>{let I=this.dataService.getBuffs().find(R=>+R.DB_ID==+A.spellId);if(I){let R=1;+A.stack>1&&+I.STACK_MULT==1&&(R=+A.stack),s.damage.MHmin+=parseInt((I.MIN_DAMAGE||0).toString())*R,s.damage.MHmax+=parseInt((I.MAX_DAMAGE||0).toString())*R,s.damage.MHbase1+=parseInt((I.MIN_DAMAGE||0).toString())*R,s.damage.MHbase2+=parseInt((I.MAX_DAMAGE||0).toString())*R,s.damage.OHbase1>0&&(s.damage.OHmin+=parseInt((I.MIN_DAMAGE||0).toString())*R,s.damage.OHmax+=parseInt((I.MAX_DAMAGE||0).toString())*R,s.damage.OHbase1+=parseInt((I.MIN_DAMAGE||0).toString())*R,s.damage.OHbase2+=parseInt((I.MAX_DAMAGE||0).toString())*R),s.armor+=parseInt((I.ARMOR||0).toString())*R,s.armorMult+=parseInt((I.ARMOR_MULT||0).toString())*R,s.general.health+=parseInt((I.HEALTH||0).toString())*R,s.healthMult+=parseInt((I.HEALTH_MULT||0).toString())*R,s.general.mana+=parseInt((I.MANA||0).toString())*R,s.spellPower.damage+=parseInt((I.SPELL_DAMAGE||0).toString())*R,s.spellPower.healing+=parseInt((I.SPELL_HEAL||0).toString())*R,s.spellPower.fire+=parseInt((I.SPELL_FIRE||0).toString())*R,s.spellPower.shadow+=parseInt((I.SPELL_SHADOW||0).toString())*R,s.spellPower.frost+=parseInt((I.SPELL_FROST||0).toString())*R,s.resistances.fire+=parseInt((I.RESIST_FIRE||0).toString())*R,s.resistances.shadow+=parseInt((I.RESIST_SHADOW||0).toString())*R,s.resistances.nature+=parseInt((I.RESIST_NATURE||0).toString())*R,s.resistances.frost+=parseInt((I.RESIST_FROST||0).toString())*R,s.resistances.arcane+=parseInt((I.RESIST_ARCANE||0).toString())*R,s.general.strength+=parseInt((I.STRENGTH||0).toString())*R,s.general.agility+=parseInt((I.AGILITY||0).toString())*R,s.general.intellect+=parseInt((I.INTELLECT||0).toString())*R,s.general.spirit+=parseInt((I.SPIRIT||0).toString())*R,s.general.stamina+=parseInt((I.STAMINA||0).toString())*R,s.moveSpeed+=parseInt((I.MOVESPEED||0).toString())*R,s.dodgeChance+=parseInt((I.DODGE_PCT||0).toString())*R,s.parryChance+=parseInt((I.PARRY_PCT||0).toString())*R,s.blockChance+=parseInt((I.BLOCK_PCT||0).toString())*R,s.critChance+=parseInt((I.CRIT_PCT||0).toString())*R,s.manaPer5+=parseInt((I.MP5||0).toString())*R,s.healthPer5+=parseInt((I.HP5||0).toString())*R,s.threatMult+=parseInt((I.THREAT_MULT||0).toString())*R,s.attackPower+=parseInt((I.ATTACK_POWER||0).toString())*R,s.rangedAttackPower+=parseInt((I.R_ATTACK_POWER||0).toString())*R,s.spellCritChance+=parseInt((I.SPELL_CRIT||0).toString())*R,s.spellCritChance+=parseInt((I.SPELL_CRIT_FIRE||0).toString())*R,s.attackSpeed+=parseInt((I.ATTACK_SPEED||0).toString())*R,s.thorns+=parseInt((I.THORNS||0).toString())*R,s.blockThorns+=parseInt((I.BLOCK_THORNS||0).toString())*R,s.dmgTakenMod.all+=parseInt((I.DMG_TAKEN_MOD||0).toString())*R;let F=parseInt((I.DMG_TAKEN_MULT||0).toString())*R;s.dmgTakenMult.all=((s.dmgTakenMult.all/100+1)*(1+F/100)-1)*100,s.armorMult+=parseInt((I.ARMOR_MULT||0).toString())*R,s.spiritTick+=parseInt((I.MANA_PER_SEC||0).toString())*R,s.castTimeMod+=parseInt((I.CAST_TIME_MOD||0).toString())*R,s.spiritCastPct+=parseInt((I.SPIRIT_CAST_PCT||0).toString())*R,s.spiritTickMult+=parseInt((I.SPIRIT_TICK_MULT||0).toString())*R,s.energyRegenMult+=parseInt((I.ENERGY_REGEN_MULT||0).toString())*R,s.immuneFear+=parseInt((I.IMMUNE_FEAR||0).toString()),s.immuneCC+=parseInt((I.IMMUNE_CC||0).toString()),s.immuneDmg+=parseInt((I.IMMUNE_DMG||0).toString()),s.pushbackResist+=parseInt((I.PUSHBACK_RESIST||0).toString())*R,s.manaCostMod+=parseInt((I.MANA_COST_MOD||0).toString())*R,s.manaCostMult+=parseInt((I.MANA_COST_MULT||0).toString())*R;let J=parseInt((I.DMG_MULT||0).toString())*R,Y=parseInt((I.DAMAGE_SCHOOL||0).toString());J!==0&&(Y===0?s.dmgMult.physical=((s.dmgMult.physical/100+1)*(1+J/100)-1)*100:Y===1?s.dmgMult.holy=((s.dmgMult.holy/100+1)*(1+J/100)-1)*100:Y===2?s.dmgMult.fire=((s.dmgMult.fire/100+1)*(1+J/100)-1)*100:Y===3?s.dmgMult.nature=((s.dmgMult.nature/100+1)*(1+J/100)-1)*100:Y===4?s.dmgMult.frost=((s.dmgMult.frost/100+1)*(1+J/100)-1)*100:Y===5?s.dmgMult.shadow=((s.dmgMult.shadow/100+1)*(1+J/100)-1)*100:Y===6?s.dmgMult.arcane=((s.dmgMult.arcane/100+1)*(1+J/100)-1)*100:Y===7?s.dmgMult.magic=((s.dmgMult.magic/100+1)*(1+J/100)-1)*100:Y===8&&(s.dmgMult.all=((s.dmgMult.all/100+1)*(1+J/100)-1)*100))}});let m=1;for(let A=0;A<a.length;A++){let I=a[A];if(+I.CLASSID==0&&(+I.SPEC==0||+I.SPEC==2)){m=1.35;break}}let w=12*m,P=20*m,x=285*m;if(s.general.stamina+=w,s.general.strength+=w,s.general.agility+=w,s.general.intellect+=w,s.general.spirit+=w,s.resistances.fire+=P,s.resistances.shadow+=P,s.resistances.nature+=P,s.resistances.frost+=P,s.resistances.arcane+=P,s.armor+=x,l===5||l===4)for(let A in s.pets)Object.prototype.hasOwnProperty.call(s.pets,A)&&(s.pets[A].general.stamina+=w,s.pets[A].general.strength+=w,s.pets[A].general.agility+=w,s.pets[A].general.intellect+=w,s.pets[A].general.spirit+=w,s.pets[A].resistances.fire+=P,s.pets[A].resistances.shadow+=P,s.pets[A].resistances.nature+=P,s.pets[A].resistances.frost+=P,s.pets[A].resistances.arcane+=P,s.pets[A].armor+=x,s.pets[A].general.health+=10*w,s.pets[A].armor+=2*w,l===4&&(s.pets[A].general.mana+=15*w),A==="imp"?s.attackPower+=w:s.attackPower+=2*w);let G=1;for(let A=0;A<a.length;A++){let I=a[A];if(+I.CLASSID==2&&(+I.SPEC==0||+I.SPEC==2)){G=1.2;break}}if(s.attackPower+=185*G,s.manaPer5+=33*G,l===5||l===4)for(let A in s.pets)Object.prototype.hasOwnProperty.call(s.pets,A)&&(s.pets[A].attackPower+=185*G,s.pets[A].general.stamina+=54*1.3,s.pets[A].general.health+=54*1.3*10,s.pets[A].general.intellect+=31,s.pets[A].resistances.shadow+=60,A!=="cat"&&(s.pets[A].manaPer5+=33*G,s.pets[A].general.mana+=15*31));s.general.stamina+=54*1.3;for(let A=0;A<a.length;A++){let I=a[A];if(+I.CLASSID==1&&+I.SPEC==0){if(s.general.spirit+=40,l===5||l===4)for(let R in s.pets)Object.prototype.hasOwnProperty.call(s.pets,R)&&(s.pets[R].general.spirit+=40);break}}s.resistances.shadow+=60,s.general.intellect+=31;for(let A=0;A<a.length;A++){let I=a[A];if(+I.CLASSID==2&&+I.GROUP==+r.GROUP){if(s.resistances.fire+=60,l===5||l===4)for(let R in s.pets)Object.prototype.hasOwnProperty.call(s.pets,R)&&(s.pets[R].resistances.fire+=60);break}}for(let A=0;A<a.length;A++){let I=a[A];if(+I.CLASSID==0&&+I.SPEC==1&&+I.GROUP==+r.GROUP){if(s.critChance+=3,l===5||l===4)for(let R in s.pets)Object.prototype.hasOwnProperty.call(s.pets,R)&&(s.pets[R].critChance+=3);break}}for(let A=0;A<a.length;A++){let I=a[A];if(+I.CLASSID==5&&+I.SPEC==1&&+I.GROUP==+r.GROUP){if(s.attackPower+=100,s.rangedAttackPower+=100,l===5||l===4)for(let R in s.pets)Object.prototype.hasOwnProperty.call(s.pets,R)&&(s.pets[R].attackPower+=100);break}}let ee=0;for(let A=0;A<a.length;A++){let I=a[A];+I.CLASSID==4&&+I.GROUP==+r.GROUP&&+I.SPEC!=2&&(+I.SPEC==0&&ee==0?ee=42:ee=42*1.3)}if(ee>0&&(s.general.stamina+=ee,l===5||l===4))for(let A in s.pets)Object.prototype.hasOwnProperty.call(s.pets,A)&&(s.pets[A].general.stamina+=ee,s.pets[A].general.health+=10*ee);for(let A=0;A<a.length;A++){let I=a[A];if(+I.CLASSID==2&&+I.SPEC==0){if(s.general.stamina*=1.1,s.general.strength*=1.1,s.general.agility*=1.1,s.general.intellect*=1.1,s.general.spirit*=1.1,l===5||l===4)for(let R in s.pets)Object.prototype.hasOwnProperty.call(s.pets,R)&&(s.pets[R].general.health+=10*.1*s.pets[R].general.stamina,s.pets[R].general.mana+=15*.1*s.pets[R].general.intellect,s.pets[R].armor+=2*.1*s.pets[R].general.agility,R==="imp"?s.pets[R].attackPower+=.1*s.pets[R].general.strength:s.pets[R].attackPower+=2*.1*s.pets[R].general.strength,s.pets[R].general.stamina*=1.1,s.pets[R].general.strength*=1.1,s.pets[R].general.agility*=1.1,s.pets[R].general.intellect*=1.1,s.pets[R].general.spirit*=1.1);break}}let le=0;for(let A=0;A<a.length;A++){let I=a[A];+I.CLASSID==7&&+I.GROUP==+r.GROUP&&(+I.SPEC==1?s.attackPower+=232*1.25:+I.SPEC==0&&le<232*1.2?le=232*1.05:le===0&&(le=232))}if(le>0&&(s.attackPower+=le,l===5||l===4))for(let A in s.pets)Object.prototype.hasOwnProperty.call(s.pets,A)&&(s.pets[A].attackPower+=le)}c===1?(s.general.spirit*=1.05,(s.damage.MHtype==="Sword"||s.damage.MHtype==="Mace")&&(s.damage.MHskill+=5),(s.damage.OHtype==="Sword"||s.damage.OHtype==="Mace")&&(s.damage.OHskill+=5)):c===7?(s.general.intellect*=1.05,s.resistances.arcane+=10):c===3?(s.resistances.frost+=10,s.damage.Rtype==="Gun"&&(s.damage.Rskill+=5)):c===4&&(s.dodgeChance+=1,s.resistances.nature+=10),s.general.health+=(s.general.stamina-d.STA)*10,s.general.mana+=(s.general.intellect-d.INT)*15,s.armor+=(s.general.agility-d.AGI)*2,l===0&&u===1&&(s.critChance+=6,s.attackPower+=90,s.general.mana+=.2*s.general.intellect*15,s.general.intellect*=1.2,s.armor+=3.6*(M*1.04),s.attackPower+=180,s.general.health+=.2*s.general.stamina*10,s.general.stamina*=1.2,s.general.health+=1240),l===1&&(s.armor+=1395,u!==2&&(s.spellCritChance+=5),u===0?s.general.mana*=1.1:u===1?(s.spellPower.damage+=.25*s.general.spirit,s.spellPower.healing+=.25*s.general.spirit):(s.damage.Rmin>0&&(s.damage.Rmin*=1.25,s.damage.Rmax*=1.25),s.spellHitChance+=10)),l===2&&(s.hitChance+=3,u!==1&&(s.general.mana+=.1*s.general.intellect*15,s.general.intellect*=1.1),u!=0&&(s.general.strength*=1.1),u===0?s.spellCritChance+=5:u===1?(s.parryChance+=4,s.defense+=10):s.critChance+=5),l===3&&(s.spellHitChance+=6,u===0?(s.general.mana*=1.1,s.armor+=.5*s.general.intellect,s.resistances.arcane+=8,s.resistances.nature+=8,s.resistances.fire+=8,s.resistances.frost+=8,s.resistances.shadow+=8,s.spellCritChance+=3):u===1?(s.resistances.arcane+=10,s.resistances.nature+=10,s.resistances.fire+=10,s.resistances.frost+=10,s.resistances.shadow+=10,s.spellCritChance+=6):(s.armor+=.5*s.general.intellect,s.resistances.arcane+=2,s.resistances.nature+=2,s.resistances.fire+=2,s.resistances.frost+=2,s.resistances.shadow+=2)),l===4&&(s.spellCritChance+=5,s.armor+=570,s.resistances.shadow+=15,s.healthPer5+=15,u===1&&(s.general.health+=.15*s.general.stamina*10,s.general.stamina*=1.15,s.general.spirit*=.95)),l===5&&(s.critChance+=5,s.rangedAttackPower+=120,s.rangedAttackPower+=14*17.5,s.attackSpeed=13,u===2&&(s.general.health*=1.1,s.armor+=.15*s.general.agility*2,s.general.agility*=1.15,s.hitChance+=3,s.critChance+=3)),l===6&&(s.hitChance+=5,s.critChance+=5,u===2&&s.damage.MHtype==="Dagger"&&(s.critChance+=5),u===1&&(s.dodgeChance+=1),u!==0&&((s.damage.MHtype==="Sword"||s.damage.MHtype==="Fist"||s.damage.MHtype==="Dagger")&&(s.damage.MHskill+=5),(s.damage.OHtype==="Sword"||s.damage.OHtype==="Fist"||s.damage.OHtype==="Dagger")&&(s.damage.OHskill+=5))),[0,2,7].includes(l)?s.attackPower+=s.general.strength*2:s.attackPower+=s.general.strength,(l===0&&u===1||l===5||l===6)&&(s.attackPower+=s.general.agility),l===5?s.rangedAttackPower+=s.general.agility*2:(l===6||l===7)&&(s.rangedAttackPower+=s.general.agility),o.some(m=>m.dbId!==-1&&this.dataService.getItemsMap().get(m.dbId)?.eq_type===14)&&[2,7].includes(l)&&(s.blockChance+=5,s.blockValue+=Math.floor(s.general.strength/20)),[0,2,7].includes(l)?s.critChance+=s.general.agility/20:l===6?s.critChance+=s.general.agility/29:l===5&&(s.critChance+=s.general.agility/53);let H={0:.9,5:0,3:3.2,2:.7,1:3,6:0,4:2,7:0},O={0:20,5:26.5,3:19.444,2:19.767,1:20,6:14.5,4:20,7:20};s.dodgeChance+=H[l]||0,s.dodgeChance+=s.general.agility/(O[l]||20);let V={0:3.33,3:3.7,1:2.97,4:3.18,2:3.7},S={0:59.81,3:53.77,1:59.23,4:60.5,2:53.77};if(V[l]&&(s.spellCritChance+=V[l]+s.general.intellect/S[l]),l===0&&u!==1)s.spiritCastPct+=15,s.spiritTick+=s.general.spirit/4.5+15;else if([0,5,2,4].includes(l))s.spiritTick+=s.general.spirit/5+15;else if([3,1].includes(l)){let m=15;l===3&&(u==1?m=40:u==2?m=35:m=45),s.spiritCastPct+=m,s.spiritTick+=s.general.spirit/4+12.5}if(s.damage.MHmin>0){let m=s.attackPower/14*s.damage.MHspeed;s.damage.MHmin+=m,s.damage.MHmax+=m}if(s.damage.OHmin>0){let m=s.attackPower/14*s.damage.OHspeed;s.damage.OHmin+=m,s.damage.OHmax+=m,s.damage.OHmin*=.5,s.damage.OHmax*=.5}if(s.damage.Rmin>0&&s.damage.Rtype!=="Wand"){let m=s.rangedAttackPower/14*s.damage.Rspeed;s.damage.Rmin+=m,s.damage.Rmax+=m}if(l===2&&(u===1&&f?s.damage.MHmin*=1.1:u===2&&!f&&(s.damage.MHmin*=1.06,s.damage.MHmax*=1.06)),l===4)for(let m in s.pets)Object.prototype.hasOwnProperty.call(s.pets,m)&&(s.pets[m].spiritTick+=s.pets[m].general.spirit/5+15,u===1?(s.pets[m].general.health*=1.06,s.pets[m].general.mana*=1.15,m=="succubus"?(s.pets[m].damage.min*=1.1,s.pets[m].damage.max*=1.1):m==="felhunter"&&(s.pets[m].resistances.arcane+=60,s.pets[m].resistances.fire+=60,s.pets[m].resistances.frost+=60,s.pets[m].resistances.nature+=60,s.pets[m].resistances.shadow+=60)):u===2&&(s.pets[m].general.health*=1.15),m==="imp"?u!==2&&(s.pets[m].damage.speed=1,u===1&&(s.pets[m].damage.min*=1.3,s.pets[m].damage.max*=1.3)):u===1?(s.pets[m].damage.min*=1.2,s.pets[m].damage.max*=1.2):u===2&&(s.pets[m].damage.min*=1.08,s.pets[m].damage.max*=1.08));if(l===5){u==1&&s.damage.Rmin>0&&(s.damage.Rmin*=1.05,s.damage.Rmax*=1.05);let m=(s.pets.cat.attackPower-252)/14*1.1*1.25;s.pets.cat.damage.min+=m,s.pets.cat.damage.max+=m,u!==2&&(s.pets.cat.damage.min*=1.2,s.pets.cat.damage.max*=1.2,s.pets.cat.critChance+=15,u===0?s.pets.cat.general.health*=1.12:s.pets.cat.general.health*=1.09)}if(l===6){let m=1.5;u===0&&(m=1.1),s.damage.OHmin>0&&(s.damage.OHmin*=m,s.damage.OHmax*=m)}if(l===7&&(s.critChance+=5,u===2?(s.defense+=10,s.blockChance+=5,s.parryChance+=5,s.damage.OHmin===0&&f&&(s.damage.MHmin*=1.1,s.damage.MHmax*=1.1)):u===1?s.damage.OHmin>0&&(s.damage.OHmin*=1.25,s.damage.OHmax*=1.25):f||(s.damage.MHmin*=1.03,s.damage.MHmax*=1.03)),+s.healthMult!=0&&(s.general.health*=1+Number(s.healthMult)/100),s.armorMult!==0&&(s.armor*=1+s.armorMult/100),s.general.health=Math.round(s.general.health),s.general.mana=Math.round(s.general.mana),s.general.stamina=Math.round(s.general.stamina),s.general.strength=Math.round(s.general.strength),s.general.agility=Math.round(s.general.agility),s.general.intellect=Math.round(s.general.intellect),s.general.spirit=Math.round(s.general.spirit),s.armor=Math.round(s.armor),s.armorDR=Number((100*(s.armor/(s.armor+400+85*63))).toFixed(2)),s.attackPower=Math.round(s.attackPower),s.rangedAttackPower=Math.round(s.rangedAttackPower),s.damage.MHmin=Math.round(s.damage.MHmin),s.damage.MHmax=Math.round(s.damage.MHmax),s.damage.MHspeed=Number(s.damage.MHspeed.toFixed(2)),s.damage.OHmin=Math.round(s.damage.OHmin),s.damage.OHmax=Math.round(s.damage.OHmax),s.damage.OHspeed=Number(s.damage.OHspeed.toFixed(2)),s.damage.Rmin=Math.round(s.damage.Rmin),s.damage.Rmax=Math.round(s.damage.Rmax),s.damage.Rspeed=Number(s.damage.Rspeed.toFixed(2)),s.critChance=Number(s.critChance.toFixed(2)),s.dodgeChance=Number(s.dodgeChance.toFixed(2)),s.spellCritChance=Number(s.spellCritChance.toFixed(2)),s.manaPer5=Number(s.manaPer5.toFixed(1)),s.spiritTick=Number(s.spiritTick.toFixed(1)),l===4||l===5)for(let m in s.pets)Object.prototype.hasOwnProperty.call(s.pets,m)&&(s.pets[m].general.health=Math.round(s.pets[m].general.health),s.pets[m].general.mana=Math.round(s.pets[m].general.mana),s.pets[m].general.stamina=Math.round(s.pets[m].general.stamina),s.pets[m].general.strength=Math.round(s.pets[m].general.strength),s.pets[m].general.agility=Math.round(s.pets[m].general.agility),s.pets[m].general.intellect=Math.round(s.pets[m].general.intellect),s.pets[m].general.spirit=Math.round(s.pets[m].general.spirit),s.pets[m].armor=Math.round(s.pets[m].armor),s.pets[m].armorDR=Number((100*(s.pets[m].armor/(s.pets[m].armor+400+85*63))).toFixed(2)),s.pets[m].attackPower=Math.round(s.pets[m].attackPower),s.pets[m].critChance=Number(s.pets[m].critChance.toFixed(2)),s.pets[m].damage.min=Math.round(s.pets[m].damage.min),s.pets[m].damage.max=Math.round(s.pets[m].damage.max),s.pets[m].damage.speed=Number(s.pets[m].damage.speed.toFixed(2)),s.pets[m].manaPer5=Number(s.pets[m].manaPer5.toFixed(1)),s.pets[m].spiritTick=Number(s.pets[m].spiritTick.toFixed(1)));return s}calculateMobStats(i){let r=this.dataService.getRaidStats().find(a=>a.name===i.name);if(!r)return null;let o={health:+r.max_health,mana:+r.max_mana,armor:+r.armor,dmg_mult:+r.dmg_multiplier,melee_min_base:+r.min_dmg,melee_max_base:+r.max_dmg,attack_power:+r.melee_attack_power,attack_power_r:0,min_damage:+r.min_dmg,max_damage:+r.max_dmg,melee_speed:+r.melee_attack_speed,speedwalk:+r.speedwalk,speedrun:+r.speedrun,damageschool:+r.damageschool,castSpeedMult:0,healModMult:0,attack_speed:0,strength:0,spellCritTaken:{physical:0,holy:0,fire:0,nature:0,frost:0,shadow:0,arcane:0,magic:0,all:0},hitPct:0,dmgTakenMod:{physical:0,holy:0,fire:0,nature:0,frost:0,shadow:0,arcane:0,magic:0,all:0},dmgTakenMult:{physical:0,holy:0,fire:0,nature:0,frost:0,shadow:0,arcane:0,magic:0,all:0},shield:{physical:0,holy:0,fire:0,nature:0,frost:0,shadow:0,arcane:0,magic:0,all:0},movespeed:0,schoolimmunemask:+r.schoolimmunemask,resistances:{fire:+r.resistancefire,shadow:+r.resistanceshadow,nature:+r.resistancenature,frost:+r.resistancefrost,arcane:+r.resistancearcane}};return i.activeDebuffs&&i.activeDebuffs.forEach(a=>{let s=this.dataService.getDebuffs().find(l=>+l.DB_ID==+a.spellId);if(s){let l=1;+a.stack>1&&+s.STACK_MULT==1&&(l=+a.stack),o.min_damage+=parseInt((s.MIN_DAMAGE||0).toString())*l,o.max_damage+=parseInt((s.MAX_DAMAGE||0).toString())*l,o.armor+=parseInt((s.ARMOR_MOD||0).toString())*l,o.attack_power+=parseInt((s.ATTACK_POWER_MOD||0).toString())*l,o.castSpeedMult+=parseInt((s.CAST_SPEED_MULT||0).toString())*l,o.resistances.fire+=parseInt((s.RESIST_FIRE||0).toString())*l,o.resistances.shadow+=parseInt((s.RESIST_SHADOW||0).toString())*l,o.resistances.nature+=parseInt((s.RESIST_NATURE||0).toString())*l,o.resistances.frost+=parseInt((s.RESIST_FROST||0).toString())*l,o.resistances.arcane+=parseInt((s.RESIST_ARCANE||0).toString())*l,o.attack_speed+=parseInt((s.ATTACK_SPEED||0).toString())*l,o.movespeed+=parseInt((s.MOVESPEED||0).toString())*l,o.strength+=parseInt((s.STRENGTH||0).toString())*l,o.hitPct+=parseInt((s.HIT_PCT||0).toString())*l,o.healModMult+=parseInt((s.HEAL_MOD_MULT||0).toString())*l,o.attack_power_r+=parseInt((s.R_ATTACK_POWER_TAKEN||0).toString())*l;let c=parseInt((s.DMG_TAKEN_MOD||0).toString())*l,u=parseInt((s.DMG_TAKEN_MOD_SCHOOL||0).toString());c!==0&&(u===0?o.dmgTakenMod.physical+=c:u===1?o.dmgTakenMod.holy+=c:u===2?o.dmgTakenMod.fire+=c:u===3?o.dmgTakenMod.nature+=c:u===4?o.dmgTakenMod.frost+=c:u===5?o.dmgTakenMod.shadow+=c:u===6?o.dmgTakenMod.arcane+=c:u===7?o.dmgTakenMod.magic+=c:u===8&&(o.dmgTakenMod.all+=c));let d=parseInt((s.SPELL_CRIT_TAKEN||0).toString())*l,_=parseInt((s.SPELL_CRIT_TAKEN_SCHOOL||0).toString());d!==0&&(_===0?o.spellCritTaken.physical+=d:_===1?o.spellCritTaken.holy+=d:_===2?o.spellCritTaken.fire+=d:_===3?o.spellCritTaken.nature+=d:_===4?o.spellCritTaken.frost+=d:_===5?o.spellCritTaken.shadow+=d:_===6?o.spellCritTaken.arcane+=d:_===7?o.spellCritTaken.magic+=d:_===8&&(o.spellCritTaken.all+=d));let f=parseInt((s.DMG_TAKEN_MULT||0).toString())*l,v=parseInt((s.DMG_TAKEN_MULT_SCHOOL||0).toString());f!==0&&(v===0?o.dmgTakenMult.physical=((o.dmgTakenMult.physical/100+1)*(1+f/100)-1)*100:v===1?o.dmgTakenMult.holy=((o.dmgTakenMult.holy/100+1)*(1+f/100)-1)*100:v===2?o.dmgTakenMult.fire=((o.dmgTakenMult.fire/100+1)*(1+f/100)-1)*100:v===3?o.dmgTakenMult.nature=((o.dmgTakenMult.nature/100+1)*(1+f/100)-1)*100:v===4?o.dmgTakenMult.frost=((o.dmgTakenMult.frost/100+1)*(1+f/100)-1)*100:v===5?o.dmgTakenMult.shadow=((o.dmgTakenMult.shadow/100+1)*(1+f/100)-1)*100:v===6?o.dmgTakenMult.arcane=((o.dmgTakenMult.arcane/100+1)*(1+f/100)-1)*100:v===7?o.dmgTakenMult.magic=((o.dmgTakenMult.magic/100+1)*(1+f/100)-1)*100:v===8&&(o.dmgTakenMult.all=((o.dmgTakenMult.all/100+1)*(1+f/100)-1)*100))}}),o}computeEqTypeScores(i,r){let o={};return r!==-1&&(i[r].INVENTORY||"").split(";").map(l=>+l.trim()).filter(l=>!isNaN(l)).forEach(l=>{let c=this.dataService.getItemsMap().get(l);if(c){let u=Number(c.item_quality)??0,d=Number(c.item_level)??0,_=1;u===3?_=1.3:u===4?_=1.6:u===5&&(_=2);let f=d*_,v=c.eq_type;o[v]||(o[v]={top:0,second:0}),f>o[v].top?(o[v].second=o[v].top,o[v].top=f):f>o[v].second&&(o[v].second=f)}}),o}computeGearscore(i,r){let o={},a=!1;r&&r.forEach(f=>{if(f.dbId!==-1){let v=this.dataService.getItemsMap().get(f.dbId);if(v){let T=Number(v.item_quality)??0,b=Number(v.item_level)??0,M=1;T===3?M=1.3:T===4?M=1.6:T===5&&(M=2),o[f.slot]=b*M,f.slot===22&&(a=!0)}}else o[f.slot]=0}),[1,2,3,5,6,7,8,9,10,16,26].forEach(f=>{o[f]=Math.max(o[f]||0,i[f]?.top||0)}),i[20]&&(o[5]=Math.max(o[5]||0,i[20].top||0)),i[28]&&(o[26]=Math.max(o[26]||0,i[28].top||0)),o[11]&&o[11]>i[11].second&&o[11]!==i[11].top&&(o[11]>i[11].top?(i[11].second=i[11].top,i[11].top=o[11]):i[11].second=o[11]),o[12]&&o[12]>i[11].second&&o[12]!==i[11].top&&(o[12]>i[11].top?(i[11].second=i[11].top,i[11].top=o[12]):i[11].second=o[12]),o[11]=i[11].top,o[12]=i[11].second,o[13]&&o[13]>i[12].second&&o[13]!==i[12].top&&(o[13]>i[12].top?(i[12].second=i[12].top,i[12].top=o[13]):i[12].second=o[13]),o[14]&&o[14]>i[12].second&&o[14]!==i[12].top&&(o[14]>i[12].top?(i[12].second=i[12].top,i[12].top=o[14]):i[12].second=o[14]),o[13]=i[12].top,o[14]=i[12].second,i[13]&&(i[21]?(i[13].second>0&&(i[21].second===0||i[13].second>i[21].second)&&(i[13].second>i[21].top?i[21]={top:i[13].top,second:i[13].second}:i[21].second=i[13].second),i[13].top>i[21].second&&(i[13].top>i[21].top?(i[21].second=i[21].top,i[21].top=i[13].top):i[21].second=i[13].top)):i[21]={top:i[13].top,second:i[13].second}),[13,14,23].forEach(f=>{i[f]&&(i[22]?(i[f].second>0&&(i[22].second===0||i[f].second>i[22].second)&&(i[f].second>i[22].top?i[22]={top:i[f].top,second:i[f].second}:i[22].second=i[f].second),i[f].top>i[22].second&&(i[f].top>i[22].top?(i[22].second=i[22].top,i[22].top=i[f].top):i[22].second=i[f].top)):i[22]={top:i[f].top,second:i[f].second})}),a?[21,22].forEach(f=>{o[f]&&(i[f]?o[f]>i[f].second&&(o[f]>i[f].top?(i[f].second=i[f].top,i[f].top=o[f]):o[f]!==i[f].top&&(i[f].second=o[f])):i[f]={top:o[f],second:0})}):o[21]&&(i[17]?o[21]>i[17].second&&(o[21]>i[17].top?(i[17].second=i[17].top,i[17].top=o[21]):o[21]!==i[17].top&&(i[17].second=o[21])):i[17]={top:o[21],second:0}),i[17]?o[17]=i[17].top:o[17]=0,i[22]?(o[21]=i[21].top,i[21].top!==i[22].top?o[22]=i[22].top:i[21].second>i[22].second?o[22]=i[21].second:o[22]=i[22].second):(o[21]=i[21].top,o[22]=0),o[21]+o[22]>o[17]?o[17]=0:(o[21]=0,o[22]=0),o[26]||(o[26]=50),[3,8,10,6].forEach(f=>{o[f]&&(o[f]*=.752)}),[11,12,13,14,2,16,9,26].forEach(f=>{o[f]&&(o[f]*=.566)}),o[17]*=2;let c=Object.values(o).reduce((f,v)=>f+v,0)/13,u=Math.abs(c-55),d=Math.pow(u,2/3);u<1&&(d=u);let _=c>=55?55+d:55-d;return Math.round(_*100)/100}getPlayerGearScore(i,r){let o=this.computeEqTypeScores(i,r);return this.computeGearscore(o,null)}calculateItemWeight(i,r,o){let a=this.dataService.getStatWeights().find(l=>+l.CLASSID===r&&+l.SPEC===o);if(!a)return 0;let s=0;if(s+=(i.stamina||0)*(a.STAMINA||0),s+=(i.strength||0)*(a.STRENGTH||0),s+=(i.agility||0)*(a.AGILITY||0),s+=(i.intelligence||0)*(a.INTELLIGENCE||0),+i.dbId==13937&&(s+=20*2*(a.INTELLIGENCE||0)),s+=(i.spirit||0)*(a.SPIRIT||0),s+=(i.mp5||0)*(a.MP5||0),+i.dbId==13143&&(s+=22*.5*(a.MP5||0)),+i.dbId==14152&&(s+=16.67*(a.MP5||0)),s+=(i.attack_power||0)*(a.ATTACK_POWER||0),s+=(i.attack_power_ranged||0)*(a.R_ATTACK_POWER||0),s+=(i.spell_damage||0)*(a.SPELL_DAMAGE||0),+i.dbId==18820&&(s+=29.17*(a.SPELL_DAMAGE||0)),+i.dbId==22268&&(s+=20*(a.SPELL_DAMAGE||0),s+=18*(a.SPELL_HEAL||0)),s+=(i.spell_heal||0)*(a.SPELL_HEAL||0),s+=(i.spell_frost||0)*(a.SPELL_FROST||0),s+=(i.spell_shadow||0)*(a.SPELL_SHADOW||0),s+=(i.spell_fire||0)*(a.SPELL_FIRE||0),s+=(i.hit_pct||0)*(a.HIT_PCT||0),+i.dbId==11815&&[1,2,6,7].includes(r)&&(s+=2*(a.HIT_PCT||0)),s+=(i.crit_pct||0)*(a.CRIT_PCT||0),s+=(i.hit_pct_spell||0)*(a.SPELL_HIT||0),s+=(i.crit_pct_spell||0)*(a.SPELL_CRIT||0),s+=(i.parry_pct||0)*(a.PARRY_PCT||0),s+=(i.dodge_pct||0)*(a.DODGE_PCT||0),s+=(i.block_rate||0)*(a.BLOCK_PCT||0),s+=(i.defense||0)*(a.DEFENSE||0),s+=(i.resist_fire||0)*(a.RESIST_FIRE||0),s+=(i.skill_dagger||0)*(a.SKILL||0),s+=(i.skill_sword||0)*(a.SKILL||0),s+=(i.armor||0)*(a.ARMOR||0),s+=(i.block_value||0)*(a.BLOCK_VALUE||0),i.speed>0){let l=((i.min_damage||0)+(i.max_damage||0))/2/i.speed,c=0;[25,26].includes(i.eq_type)?c=a.R_DPS||0:[22,23].includes(i.eq_type)?c=a.OH_DPS||0:c=a.MH_DPS||0,s+=l*c,[6,8,9,10,17].includes(i.eq_type)&&(s+=i.speed*(a["2H_SPEED"]||0))}return i.eq_type===28&&(s+=1),s}getDoTTicks(i,r,o){let a=this.durIndex[i]||0;i===553?a=16-2*(5-r):i===185&&(a=21-3*(5-r));let s=o/1e3;return a>0&&s>0?Math.floor(a/s):0}calculateSpellDetails(i,r,o){let a=this.dataService.getSpells(),s=this.dataService.getTalents();if(!r||!o||!a||!s)return console.warn("Missing required data for tooltip calculation"),null;let l=+r.CLASSID,c=+r.RACE,u=+r.SPEC,d=Em.find(A=>A.CLASSID===l.toString()&&A.RACEID===c.toString())||{HP:0,MP:0,STR:0,AGI:0,STA:0,INT:0,SPI:0,ARM:0},_=s.filter(A=>+A[`SPEC_${u}`]==1&&+A.CLASSID===l),f=a.find(A=>+A.SPELLID==+i),v=this.getTalentModifications(i,_),T=f.TOOLTIP.toLowerCase().includes("channeled"),b=ME[f.RangeIndex],M=b.minRange,W=b.maxRange,H=b.description,O=xE[f.CastingTimeIndex],V=+f.ManaCost,S=+f.ManaPerSecond,m=+f.ManaCostPercentage,w=+f.PowerType;if(m>0)if(w===1)V=m/100*1e3;else if(w===3)V=m/100*100;else if(w===4){let A=d.HP;V=m/100*A}else{let A=d.MP;V=m/100*A}let P=f.RecoveryTime,x=Za[f.DurationIndex];+i==6774&&(x=6+3*r.resources.comboPoints);let G=f.StartRecoveryTime;v.rangeMod&&H!=="Melee"&&(v.rangeMod.type==="percent"?W*=1+v.rangeMod.value/100:W+=v.rangeMod.value),v.costMod&&(V>0&&(v.costMod.type==="percent"?V*=1-v.costMod.value/100:V-=v.costMod.value),S>0&&v.costMod.type==="percent"&&(S*=1-v.costMod.value/100)),v.castTimeMod&&(O=Math.max(0,O-v.castTimeMod.value)),v.cooldownMod&&(P=Math.max(0,P-v.cooldownMod.value*1e3)),v.durationMod&&(v.durationMod.type==="percent"?x*=1+v.durationMod.value/100:x+=v.durationMod.value);let ee=f;if(i===27871&&(ee=a.find(A=>+A.SPELLID==27874)),[2,5,10,11,17,18,19].includes(+f.SPELLTYPE)||+f.SPELLID==10901){let A=this.calculateDamageValues(f,_,o,r.resources.comboPoints),{minDmg1:I,maxDmg1:R,minDmg2:F,maxDmg2:J,ticks:Y}=A;return F>2&&+f.WeaponDmg==0?I>2?R-I<=1?(I=R,F=J):J-F<=1&&(F=J):(I=0,R=0,J-F<=1&&(F=J)):(F=0,J=0,R-I<=1&&(I=R)),f.EffectAmplitude1>0&&Y&&Y>0&&(I/=Y,R/=Y),f.EffectAmplitude2>0&&Y&&Y>0&&(F/=Y,J/=Y),{range1:M,range2:W,cost:V,cost2:S,costType:w,spellType:f.SPELLTYPE,time:O,channeled:T,cd:P,dur:x,global:G,school:f.School,min1:I,max1:R,amp1:f.EffectAmplitude1,min2:F,max2:J,amp2:f.EffectAmplitude2}}else return{range1:M,range2:W,cost:V,cost2:S,costType:w,spellType:f.SPELLTYPE,time:O,channeled:T,cd:P,dur:x,global:G,school:f.School,min1:0,max1:0,amp1:f.EffectAmplitude1,min2:0,max2:0,amp2:f.EffectAmplitude2}}getTalentModifications(i,r){let o=this.dataService.getSpells().find(S=>+S.SPELLID==+i),a={};o||console.log(`did not find spell: ${i}`);let s=o.TOOLTIP.toLowerCase().replace(/:/g,"")||"",l=this.spellSchool[+o.School||0],c=+o.RangeIndex==114||+o.RangeIndex==11,u=+o.School==0,d=+o.SPELLTYPE==2,f=[{id:19500,value:6,type:"flat",unit:"yd",appliesTo:()=>c},{id:12353,value:6,type:"flat",unit:"yd",appliesTo:()=>s.includes("fire")&&l==="fire"},{id:16757,value:10,type:"percent",appliesTo:()=>l==="frost"},{id:16758,value:20,type:"percent",appliesTo:()=>l==="frost"},{id:17918,value:20,type:"percent",appliesTo:()=>s.includes("destructive")||l==="fire"||l==="shadow"},{id:18219,value:20,type:"percent",appliesTo:()=>s.includes("affliction")||l==="shadow"},{id:16820,value:20,type:"percent",appliesTo:()=>["wrath","hurricane","roots","starfire","faerie fire"].some(S=>s.includes(S))},{id:17325,value:20,type:"percent",appliesTo:()=>l==="shadow"},{id:27789,value:10,type:"percent",appliesTo:()=>["smite","holy fire","poh","nova"].some(S=>s.includes(S))}].find(S=>r.some(m=>+m.SPELLID===S.id&&S.appliesTo()));f&&(a.rangeMod=N({type:f.type,value:f.value},f.unit&&{unit:f.unit}));let T=[{id:12519,value:15,type:"percent",power:"mana",appliesTo:()=>l==="frost"},{id:17779,value:2,type:"percent",power:"mana",appliesTo:()=>l==="fire"||l==="shadow"},{id:18710,value:40,type:"percent",power:"mana",appliesTo:()=>s.includes("summon")},{id:19420,value:10,type:"percent",power:"mana",appliesTo:()=>["shot","sting"].some(S=>s.includes(S))},{id:19575,value:40,type:"percent",power:"mana",appliesTo:()=>s.includes("revive pet")},{id:13863,value:5,type:"flat",power:"energy",appliesTo:()=>s.includes("sinister strike")},{id:12663,value:2,type:"flat",power:"rage",appliesTo:()=>s.includes("heroic strike")},{id:12664,value:3,type:"flat",power:"rage",appliesTo:()=>s.includes("heroic strike")},{id:12811,value:3,type:"flat",power:"rage",appliesTo:()=>s.includes("sunder armor")},{id:20503,value:5,type:"flat",power:"rage",appliesTo:()=>s.includes("execute")},{id:16834,value:20,type:"percent",power:"mana",appliesTo:()=>s.includes("form")},{id:16835,value:30,type:"percent",power:"mana",appliesTo:()=>s.includes("form")},{id:16847,value:18.1,type:"percent",power:"mana",appliesTo:()=>["healing touch"].some(S=>s.includes(S))},{id:16847,value:9,type:"percent",power:"mana",appliesTo:()=>["starfire","moonfire","wrath","regrowth","rejuvenation"].some(S=>s.includes(S))},{id:16938,value:5,type:"flat",power:"energy",appliesTo:()=>["rake","claw"].some(S=>s.includes(S))},{id:16938,value:5,type:"flat",power:"rage",appliesTo:()=>["maul","swipe"].some(S=>s.includes(S))},{id:16968,value:12,type:"flat",power:"energy",appliesTo:()=>s.includes("shred")},{id:24972,value:10,type:"percent",power:"mana",appliesTo:()=>["healing touch","tranquility"].some(S=>s.includes(S))},{id:14783,value:10,type:"percent",power:"mana",appliesTo:()=>s.includes("instant")},{id:15014,value:15,type:"percent",power:"mana",appliesTo:()=>[2053,6064,25314].includes(+i)},{id:20104,value:12,type:"percent",power:"mana",appliesTo:()=>["judgement","seal"].some(S=>s.includes(S))},{id:20105,value:15,type:"percent",power:"mana",appliesTo:()=>["judgement","seal"].some(S=>s.includes(S))}].find(S=>r.some(m=>+m.SPELLID===S.id&&S.appliesTo()));T&&(a.costMod={type:T.type,value:T.value});let M=[{id:18710,value:4,appliesTo:()=>s.includes("summon")},{id:19575,value:6,appliesTo:()=>s.includes("revive pet")},{id:20498,value:.4,appliesTo:()=>s.includes("slam")},{id:16818,value:.5,appliesTo:()=>s.includes("wrath")},{id:17073,value:.5,appliesTo:()=>s.includes("healing touch")},{id:18535,value:.5,appliesTo:()=>[25314,6064,10934,15261].includes(+i)},{id:12341,value:.5,appliesTo:()=>s.includes("fireball")},{id:16766,value:.5,appliesTo:()=>s.includes("frostbolt")},{id:17792,value:.5,appliesTo:()=>["shadow bolt","immolate"].some(S=>s.includes(S))},{id:17792,value:2,appliesTo:()=>["soul fire"].some(S=>s.includes(S))},{id:17814,value:2,appliesTo:()=>s.includes("corruption")},{id:18127,value:1,appliesTo:()=>s.includes("firebolt")}].find(S=>r.some(m=>+m.SPELLID===S.id&&S.appliesTo()));M&&(a.castTimeMod={value:M.value});let H=[{id:25957,value:2,appliesTo:()=>s.includes("judgement")},{id:12302,value:1,appliesTo:()=>s.includes("taunt")},{id:20175,value:120,appliesTo:()=>s.includes("blessing of protection")},{id:20235,value:1200,appliesTo:()=>s.includes("lay on hands")},{id:13872,value:90,appliesTo:()=>["sprint","evasion"].some(S=>s.includes(S))}].find(S=>r.some(m=>+m.SPELLID===S.id&&S.appliesTo()));H&&(a.cooldownMod={value:H.value});let V=[{id:14167,value:45,type:"percent",appliesTo:()=>s.includes("slice and dice")},{id:12945,value:.5,type:"flat",unit:"sec",appliesTo:()=>s.includes("shield block")},{id:15317,value:6,type:"flat",unit:"sec",appliesTo:()=>s.includes("shadow word pain")},{id:20175,value:6,type:"flat",unit:"sec",appliesTo:()=>s.includes("blessing of freedom")}].find(S=>r.some(m=>+m.SPELLID===S.id&&S.appliesTo()));return V&&(a.durationMod=N({type:V.type,value:V.value},V.unit&&{unit:V.unit})),a}calculateDamageValues(i,r,o,a){let s=+i.SPELLID,l=+i.School==0,c=+i.SPELLTYPE==2,u=[2,5,10,11,17,18,19].includes(+i.SPELLTYPE),d=i.EffectAmplitude1>0,_=i.EffectAmplitude2>0,f=(+i.EffectBasePoints1||0)+1,v=+i.EffectDieSides1||0,T=+i.EffectBonusCoefficient1||0,b=(+i.EffectBasePoints2||0)+1,M=+i.EffectDieSides2||0,W=+i.EffectBonusCoefficient2||0,H=this.spellSchool[+i.School||0],O=+i.EffectPointsPerComboPoint1||0,V=l&&+i.WeaponDmg||0,S=+i.EffectRealPointsPerLevel1||0,m=+i.EffectRealPointsPerLevel2||0,w=+i.BaseLevel||0,P=0,x=f;v===1&&(x+=1);let G=v>0?f+v:f,ee=b;M===1&&(ee+=1);let le=M>0?b+M:b;w<60&&S!==0&&(x+=S*(60-w),G+=S*(60-w)),w<60&&m!==0&&(ee+=m*(60-w),le+=m*(60-w)),+i.SPELLID==20569&&r.some(F=>+F.SPELLID==20496)&&(x*=2.2,G*=2.2);let A=0,I=0;if(l){let F=3.3;s===9850||s===9908?(F=1,o.damage.MHbase1=38,o.damage.MHbase2=46):s===9881?(F=2.5,o.damage.MHbase1=128,o.damage.MHbase2=142):+i.RangeIndex==114||+i.RangeIndex==11?F=2.8:o.damage.MHtype==="dagger"?F=1.7:o.damage.OHbase1>0&&(F=2.4),P=o.attackPower*F/14;let J=0,Y=1;switch(s){case 9896:J=x+O*a,A=this.getDoTTicks(i.DurationIndex||0,5,i.EffectAmplitude1),I=J+o.attackPower*.2/A,x=I,G=x+(G-f);break;case 31018:J=O*a;let se=35*2.7;x=J+se+o.attackPower*.06*5,G=x+(G-f);break;case 11275:J=x+O*a,A=this.getDoTTicks(i.DurationIndex||0,5,i.EffectAmplitude1),I=J+o.attackPower*.2/A,x=I,G=x+(G-f);break;case 31016:J=(+i.EffectPointsPerComboPoint1||0)*5,x=J+o.attackPower*.03*5,G=x+(G-f);break;case 20662:x+=21*35,G=x+(G-f);break;case 23925:ee+=o.blockValue,le+=o.blockValue;break;case 23894:x=o.attackPower*.45,G=x;break;default:V>0&&(Y=V/100,b>1?(x=ee,G=le,ee=0,le=0):f<=1&&v<=1&&(x=0,G=0),x=(o.damage.MHbase1+P+x)*Y,G=(o.damage.MHbase2+P+G)*Y)}}else{if(T>0){let F=0;c?F=T*(o.spellPower.healing||0):F=T*((o.spellPower[H]||0)+(o.spellPower.damage||0)),x+=F,G+=F}if(W>0){let F=0;c?F=W*(o.spellPower.healing||0):F=W*((o.spellPower[H]||0)+(o.spellPower.damage||0)),ee+=F,le+=F}}d?(A=this.getDoTTicks(i.DurationIndex||0,5,i.EffectAmplitude1),x*=A,G*=A):_&&(A=this.getDoTTicks(i.DurationIndex||0,5,i.EffectAmplitude2),ee*=A,le*=A);let R=this.getTalentMultiplier(s,r,!1);return+i.PowerType==2&&(R*=1.1*1.25),x*=R,G*=R,ee*=R,le*=R,{minDmg1:x,maxDmg1:G,minDmg2:ee,maxDmg2:le,ticks:A}}getTalentMultiplier(i,r,o=!0){let a=1,s=this.dataService.getSpells().find(l=>+l.SPELLID===i);return r.forEach(l=>{let c=l.TOOLTIP.toLowerCase().replace(/:/g,""),u=l.SPELLNAME,d=this.dataService.getSpells().find(_=>+_.SPELLID==+l.SPELLID);if(!d||+d.RecoveryTime<=5e3){let _=c.match(/increas(?:es|ing) (?:the |your )?(?:effect of |duration |damage |healing |critical effect chance of |damage you deal with [a-z\s-]+ )?(?:by |of )?(?:your )?(?:[a-z\s,]+?by )?(\d+)\s?(%|sec|seconds)/i),f=/\brange\b/i.test(c),v=/\bcritical (strike|effect)? chance\b/i.test(c),T=/\bcritical strike damage bonus\b/i.test(c),b=+l.SPELLID==19552||+l.SPELLID==20496||+l.SPELLID==12571||+l.SPELLID==19556,M=!o&&(+l.SPELLID==15334||+l.SPELLID==12873||+l.SPELLID==28595),W=(u.startsWith("One-Handed")||u.startsWith("Two-Handed"))&&this.spellSchool[+s.School]==="physical";if(_&&s&&!f&&!v&&!T&&!b&&!M){let H=parseInt(_[1])/100;(+l.SPELLID==15334||+l.SPELLID==12873)&&(H=.15),+l.SPELLID==28595&&(H=.1),+l.SPELLID==15317&&(H=1/3),(c.includes(s.SPELLNAME.toLowerCase().replace(/:/g,""))&&i!==6064||this.spellSchool[+s.School]==="nature"&&c.includes("nature")&&!c.includes("nature's grasp")&&+l.SPELLID!=24946||this.spellSchool[+s.School]==="shadow"&&c.includes("shadow")&&+l.SPELLID!=15317||this.spellSchool[+s.School]==="fire"&&c.includes("fire")||this.spellSchool[+s.School]==="frost"&&c.includes("frost")||this.spellSchool[+s.School]==="arcane"&&c.includes("arcane")&&+l.SPELLID!=12503||this.spellSchool[+s.School]==="holy"&&c.includes("holy")&&+l.SPELLID!=15473&&+l.SPELLID!=20239&&+l.SPELLID!=20337||RE[s.SPELLTYPE]==="Heal"&&c.includes("healing")&&!c.includes("mana cost")&&+l.SPELLID!=20239||this.spellSchool[+s.School]==="physical"&&c.includes("physical")||c.includes("all")&&+l.SPELLID!=16906&&+l.SPELLID!=24946&&+l.SPELLID!=28595||s.SPELLNAME.toLowerCase()==="regrowth"&&c.includes("critical effect chance")&&l.SPELLNAME.toLowerCase()==="improved regrowth"||W)&&(a*=1+H)}}}),a}getResistTable(i,r){let o=["fire","shadow","nature","frost","arcane"],a=["No Resist","Resist 25%","Resist 50%","Resist 75%","Full Resist","Binary Resist"],s=[],l=[];return o.forEach(c=>{let d=((i[c]||0)+r)/4;d=Math.max(0,Math.min(75,d)),l.push(d);let _=15,f=Math.floor(d/_),v=f<5?(d-f*_)/_:0,T=AE.map(M=>{let W=f<5?M[f]*(1-v)+M[f+1]*v:M[5];return Math.max(0,Math.round(W*100)/100)}),b=T.reduce((M,W)=>M+W,0);Math.abs(b-100)>.01&&(T[0]+=100-b),s.push(T)}),a.map((c,u)=>c==="Binary Resist"?{label:c,fire:l[0]===100?`${l[0].toFixed(0)}%`:`${l[0].toFixed(1)}%`,shadow:l[1]===100?`${l[1].toFixed(0)}%`:`${l[1].toFixed(1)}%`,nature:l[2]===100?`${l[2].toFixed(0)}%`:`${l[2].toFixed(1)}%`,frost:l[3]===100?`${l[3].toFixed(0)}%`:`${l[3].toFixed(1)}%`,arcane:l[4]===100?`${l[4].toFixed(0)}%`:`${l[4].toFixed(1)}%`}:{label:c,fire:s[0][u]===100?`${s[0][u].toFixed(0)}%`:`${s[0][u].toFixed(1)}%`,shadow:s[1][u]===100?`${s[1][u].toFixed(0)}%`:`${s[1][u].toFixed(1)}%`,nature:s[2][u]===100?`${s[2][u].toFixed(0)}%`:`${s[2][u].toFixed(1)}%`,frost:s[3][u]===100?`${s[3][u].toFixed(0)}%`:`${s[3][u].toFixed(1)}%`,arcane:s[4][u]===100?`${s[4][u].toFixed(0)}%`:`${s[4][u].toFixed(1)}%`})}getCombatTable(i,r,o,a=0){let l=r.critChance||0,c=200,u=5,d=$t[i.CLASSID]?.[i.SPEC]?.role==="tank"?14:0,_=0,f=5,v=r.damage.MHskill||300,T=0,b=100,M=0;if(o==="defense")u=r.dodgeChance,d=r.parryChance,_=r.blockChance,l=5,v=r.defense||300,f=5+Math.max(0,315-v)*.2,f=Math.max(0,f-a),M=15,T=0;else{o==="spell"&&(l=r.spellCritChance||0,c=150),u=5,d=$t[i.CLASSID]?.[i.SPEC]?.role==="tank"?14:0,f=5,v=r.damage.MHskill||300,o==="ranged"?(v=r.damage.Rskill||300,c=230):i&&(+i.CLASSID==4||+i.CLASSID==3&&+i.SPEC!=1)?c=200:i&&+i.CLASSID==7&&+i.SPEC!=2&&(c=220);let H=Math.max(0,315-v);switch(H>10?f+=H*.2:f+=H*.1,u+=H*.1,H>5&&(b-=(H-5)*3),o){case"dual-wield":f=f*.8+20-r.hitChance,T=40;break;case"melee":f=Math.max(0,f-r.hitChance),T=40;break;case"ranged":f=Math.max(0,f-r.hitChance),T=0,u=0;break;case"spell":f=Math.max(0,17-r.spellHitChance),$t[i.CLASSID]?.[i.SPEC]?.role==="heal"&&(f=0),l*=(100-f)/100,T=0,u=0;break;default:f=8,T=40}o!=="spell"&&(l=Math.max(l-4.8,0))}let W=100-f-u-d-T-l-M;return[{label:"Miss",value:`${f.toFixed(2)}%`,damage:"0%"},{label:"Dodge",value:`${u.toFixed(2)}%`,damage:"0%"},{label:"Parry",value:`${d.toFixed(2)}%`,damage:"0%"},{label:"Glancing",value:`${T.toFixed(2)}%`,damage:`${b.toFixed(0)}%`},{label:"Block",value:`${Math.max(_,0).toFixed(2)}%`,damage:"100%"},{label:"Crit",value:`${l.toFixed(2)}%`,damage:`${c.toFixed(0)}%`},{label:"Crushing",value:`${Math.max(M,0).toFixed(2)}%`,damage:"150%"},{label:"Hit",value:`${Math.max(W,0).toFixed(2)}%`,damage:"100%"}].filter(H=>parseFloat(H.value)>0)}};n.\u0275fac=function(r){return new(r||n)(B(gt))},n.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var Gt=(()=>{let n=class n{constructor(i){this.dataService=i}getClassName(i=7){return{0:"Druid",1:"Priest",2:"Paladin",3:"Mage",4:"Warlock",5:"Hunter",6:"Rogue",7:"Warrior"}[i]||"warrior"}getColor(i){return{0:"#FF7D0A",1:"#FFFFFF",2:"#F58CBA",3:"#69CCF0",4:"#9482C9",5:"#ABD473",6:"#FFF569",7:"#C79C6E"}[i]||"gray"}getRaceName(i){let r=ri.find(o=>o.RACEID===i);return r?r.RACE.replace(" ",""):"human"}getTalentName(i,r){return!i||!i.CLASSID||i.CLASSID==null||r==null?"":$t[i.CLASSID]?.[r].name??""}getTalentIcon(i,r){return!i||!i.CLASSID||i.CLASSID==null?"default":$t[i.CLASSID]?.[r].icon??""}getRoleIcon(i,r){return"assets/icons/role_"+this.getRole(i,r)+"2.png"}getRole(i,r){return $t[i][r].role}getSlotName(i){let r=Gr.find(o=>o.slot===i);return r?r.name:`Slot ${i}`}getSlotSide(i){let r=Gr.find(o=>o.slot===i);return r?r.side:"left"}getItemIcon(i){let r=this.dataService.getItemsMap().get(i);return r?`/assets/icons/${r.icon_name}.jpg`:"/assets/icons/default.jpg"}getItemTooltip(i,r){let o=this.dataService.getItemsMap().get(i);return o?o.tooltip?o.tooltip:r?`Name: ${o.name||"Unknown"}
Slot: ${this.getSlotName(r.find(a=>a.dbId===i)?.slot||0)}
DB_ID: ${i}
DISP_ID: ${o.disp_id}
EQ_TYPE: ${o.eq_type}`:`Name: ${o.name||"Unknown"}`:`Unknown Item (DB_ID: ${i})`}isPhysicalDps(i,r){return[5,6,7].includes(i)||i===2&&r===2||i===0&&r===1}};n.\u0275fac=function(r){return new(r||n)(B(gt))},n.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var gs=(()=>{let n=class n{constructor(i,r,o){this.dataService=i,this.statsService=r,this.utilityService=o}getFilteredInventoryItems(i,r,o,a){if(!r)return[];if(o==="equipment")return a.find(c=>c.slot===i)?.dbIds.filter(c=>{let u=this.dataService.getItemsMap().get(c);return u?u.eq_type===i&&![11,12,13,14,22].includes(i)||i===5&&u.eq_type===20||i===21&&[13,17,21].includes(u.eq_type)||i===22&&([14,23].includes(u.eq_type)||[13,22].includes(u.eq_type)&&[5,6,7].includes(+r.CLASSID))||i===26&&u.eq_type===28||[11,12].includes(i)&&u.eq_type===11||[13,14].includes(i)&&u.eq_type===12:!1})||[];let s=1<<+r.CLASSID,l=Array.from(this.dataService.getItemsMap().keys()).filter(c=>{let u=this.dataService.getItemsMap().get(c);if(!u||!u.class_mask||!u.source||isNaN(+u.class_mask))return!1;let d=(+u.class_mask&s)!==0,_=u.eq_type===i&&![11,12,13,14,22].includes(i)||i===5&&u.eq_type===20||i===21&&[13,17,21].includes(u.eq_type)||i===22&&([14,23].includes(u.eq_type)||[13,22].includes(u.eq_type)&&[5,6,7].includes(+r.CLASSID))||i===26&&u.eq_type===28||[11,12].includes(i)&&u.eq_type===11||[13,14].includes(i)&&u.eq_type===12;return o==="crafted"?d&&u.source==="Crafted"&&_:o==="mcquest"?d&&["MC","QUEST"].includes(u.source)&&_:o==="dungeon"?d&&["Dungeon"].includes(u.source)&&_:!1});return l=l.sort((c,u)=>{let d=this.dataService.getItemsMap().get(c),_=this.dataService.getItemsMap().get(u);return _.bis!==d.bis?(_.bis??0)-(d.bis??0):(_.item_level??0)-(d.item_level??0)}).slice(0,18),l}isItemOwned(i,r,o){return r.some(a=>a.dbIds.includes(i))||o.some(a=>a.dbId===i)}canAffordItem(i,r){let o=this.dataService.getItemsMap().get(i);if(!o)return!1;let a=parseInt(o.fiery_core)||0,s=parseInt(o.lava_core)||0;return r.fieryCores>=a&&r.lavaCores>=s}buyItem(i,r,o,a,s,l){let c=this.dataService.getItemsMap().get(i);if(!c||this.isItemOwned(i,s,[])||!this.canAffordItem(i,a))return;let u=parseInt(c.fiery_core)||0,d=parseInt(c.lava_core)||0;a.fieryCores-=u,a.lavaCores-=d;let f={17:21,21:21,14:22,23:22,13:23,12:13,20:5}[c.eq_type]??c.eq_type;if(({23:[21,22],13:[13,14],11:[11,12]}[f]||[f]).forEach(b=>{let M=s.find(W=>W.slot===b);M||(M={slot:b,dbIds:[]},s.push(M)),M.dbIds.push(i)}),o!==-1){let b=l[o].INVENTORY?l[o].INVENTORY.split(";").map(M=>+M.trim()):[];b.push(i),l[o].INVENTORY=b.join(";")}}swapItem(i,r,o,a,s,l,c){if(!o)return;let u=s.findIndex(f=>f.slot===i);if(u===-1)return;let d=i,_=r?this.dataService.getItemsMap().get(r):null;try{if(r===null)s[u].dbId=-1,c&&(l[a][`SLOT_${i}`]="");else{if(s[u].dbId=r,c&&(l[a][`SLOT_${i}`]=r.toString()),_&&_.eq_type===17){let f=s.findIndex(v=>v.slot===22);f!==-1&&s[f].dbId!==-1&&(s[f].dbId=-1,c&&(l[a].SLOT_22=""))}if(d===22){let f=s.findIndex(v=>v.slot===21);if(f!==-1){let v=this.dataService.getItemsMap().get(s[f].dbId);v&&v.eq_type===17&&(s[f].dbId=-1,c&&(l[a].SLOT_21=""))}}}}catch(f){console.error(`Error updating model viewer for slot ${i}:`,f)}}optimizeGear(i){i.forEach((r,o)=>{let a=Number(r.CLASSID),s=Number(r.SPEC),l=r.INVENTORY||"",c=this.utilityService.getRole(a,s),u=l?l.split(";").map(Number).filter(w=>this.dataService.getItemsMap().get(w)):[],d=new Map;u.forEach(w=>{let P=this.dataService.getItemsMap().get(w);if(P?.eq_type){let x=this.statsService.calculateItemWeight(P,a,s);c==="tank"&&P.eq_type===14&&(x*=1e4),d.has(P.eq_type)||d.set(P.eq_type,[]),d.get(P.eq_type).push({id:w,weight:x})}}),d.forEach(w=>w.sort((P,x)=>x.weight-P.weight));let _=w=>{let P=null;return w.forEach(x=>{let G=d.get(x)?.[0];G&&(!P||G.weight>P.weight)&&(P=G)}),P},f=w=>w.flatMap(x=>d.get(x)||[]).sort((x,G)=>G.weight-x.weight).slice(0,2);[1,2,3,6,7,8,9,10,16,26].forEach(w=>{let P=d.get(w)?.[0];P&&(r[`SLOT_${w}`]=P.id.toString())});let T=_([5,20]);if(T&&(r.SLOT_5=T.id.toString()),(d.get(11)?.slice(0,2)||[]).forEach((w,P)=>{r[`SLOT_${11+P}`]=w.id.toString()}),(d.get(12)?.slice(0,2)||[]).forEach((w,P)=>{r[`SLOT_${13+P}`]=w.id.toString()}),a===0||a===2){let w=d.get(28)?.[0];w&&(r.SLOT_26=w.id.toString())}else{let w=d.get(26)?.[0];w&&(r.SLOT_26=w.id.toString())}let W=f([13,21]),O=f(a===5||a===6||a===7?[13,14,22]:[14,23]),V=W[0]||null,S=O[0]||null;if(V&&S&&V.id===S.id&&O.length>1&&(S=O[1]),V&&(r.SLOT_21=V.id.toString()),S&&(r.SLOT_22=S.id.toString()),!(a===2&&s===1||a===7&&(s===1||s===2)||a===6)){let w=d.get(17)?.[0];if(w&&V&&S){let P=V.weight+S.weight;w.weight>P&&(r.SLOT_21=w.id.toString(),r.SLOT_22="")}}})}getEquippedItemsForPlayer(i,r){let o=r[i];return Gr.map(a=>({slot:a.slot,dbId:Number(o[`SLOT_${a.slot}`])||-1}))}};n.\u0275fac=function(r){return new(r||n)(B(gt),B(gn),B(Gt))},n.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var gd=(()=>{let n=class n{constructor(i,r,o,a){this.statsService=i,this.dataService=r,this.utilityService=o,this.gearService=a,this.statWeights=[],this.tankClasses=new Set([0,2,7]),this.healerClasses=new Set([0,1,2]),this.guildWeek=1,this.dungeonAssignments=[],this.dungeonProgress={week:0,attempts:0}}getGuildWeek(){return this.dataService.getGuildWeek()}setGuildWeek(i){this.dataService.setGuildWeek(i)}getDungeonAssignments(){return this.dataService.getDungeonAssignments()}setDungeonAssignments(i){this.dataService.setDungeonAssignments(i)}getDungeonProgress(){return this.dataService.getDungeonProgress()}setDungeonProgress(i){this.dataService.setDungeonProgress(i)}getDungeonSummary(i){return i.startsWith("Dire")?pn["Dire Maul"]+(pn[i]||"")+pn["Dire Maul Conclusion"]:i.endsWith("Stratholme")?pn.Stratholme+(pn[i]||"")+pn["Stratholme Conclusion"]:i.endsWith("Spire")?pn["Blackrock Spire"]+(pn[i]||"")+pn["Blackrock Spire Conclusion"]:pn[i]?pn[i]:"No summary available"}getDungeonImage(i){return i==="Blackrock Depths"?"/assets/images/Blackrock_Depths_loading_screen.jpg":["Upper Blackrock Spire","Lower Blackrock Spire"].includes(i)?"/assets/images/Blackrock_Spire_loading_screen.jpg":["Dire Maul East","Dire Maul West","Dire Maul North","Dire Maul Tribute"].includes(i)?"/assets/images/Dire_Maul_loading_screen.jpg":i==="Scholomance"?"/assets/images/Scholomance_old_loading_screen.jpg":["Live Stratholme","Undead Stratholme"].includes(i)?"/assets/images/Stratholme_loading_screen.jpg":i==="Sunken Temple"?"/assets/images/Temple_of_Atal'Hakkar_loading_screen.jpg":i==="Maraudon"?"/assets/images/Maraudon_loading_screen.jpg":"/assets/images/Molten_Core_loading_screen.jpg"}getDungeonLevel(i){let r=this.dataService.getDungeonBosses().filter(l=>l.DUNGEON===i);if(!r.length)return"(?)";let o=r.map(l=>Number(l.LEVEL)),a=Math.min(...o),s=Math.max(...o);return a===s?`(${a})`:`(${a} - ${s})`}isDungeonAvailable(i,r){if(!r)return!0;let o=this.dataService.getDungeonUnlocks().find(s=>s.UNLOCK===r),a=o?o.NPC_ID:null;return a?this.getBossKills(i,+a)>=1:!0}isDungeonAvailableForGroup(i,r){if(i.length===0)return!1;let o=this.dataService.getDungeonUnlocks().find(s=>s.UNLOCK===r),a=o?o.NPC_ID:null;return i.every(s=>a?this.getBossKills(s,+a)>=1:!0)}getBossKills(i,r){if(!i.DUNGEON_EXP)return 0;let o=new Map;return i.DUNGEON_EXP.split(";").forEach(a=>{if(a){let[s,l]=a.split(":"),c=parseInt(s,10),u=parseInt(l,10);!isNaN(c)&&!isNaN(u)&&o.set(c,u)}}),o.get(r)||0}getCompositionPenalty(i,r){let d=ud[i];if(!d)return 0;let _=H=>{let[O,V]=H.split(":");return{role:O,className:V}},f=d.map(H=>{let O=(Array.isArray(H)?H:[H]).map(_),V=O[0].role,S=Array.from(new Set(O.map(m=>m.className)));return{alts:O,role:V,classes:S}}),v=r.map(H=>({role:this.utilityService.getRole(+H.CLASSID,+H.SPEC),classId:+H.CLASSID,className:this.utilityService.getClassName(H.CLASSID)})),T=0,b=new Set;f.forEach(H=>{let O=v.findIndex((V,S)=>!b.has(S)&&H.alts.some(m=>m.role===V.role&&m.className===V.className));O>=0&&(b.add(O),H.matched=!0)}),f.forEach(H=>{if(!H.matched){if(H.role==="heal"){let O=v.findIndex((S,m)=>!b.has(m)&&this.healerClasses.has(S.classId)),V=v.findIndex((S,m)=>!b.has(m)&&this.healerClasses.has(S.classId)&&S.role==="heal");V>=0?(b.add(V),H.matched=!0):O>=0?(T+=2,b.add(O),H.matched=!0):T+=5}else if(H.role==="tank"){let O=v.findIndex((S,m)=>!b.has(m)&&this.tankClasses.has(S.classId)),V=v.findIndex((S,m)=>!b.has(m)&&this.tankClasses.has(S.classId)&&S.role==="tank");V>=0?(b.add(V),H.matched=!0):O>=0?(T+=3,b.add(O),H.matched=!0):T+=7}}});let M=f.filter(H=>!H.matched&&H.role==="damage").length;M>0&&(T+=M*0);let W=new Map;return v.forEach(H=>W.set(H.className,1+(W.get(H.className)??0))),f.forEach(H=>{H.classes.some(V=>W.has(V))||(T+=2)}),T}simulateDungeonRun(i,r,o,a,s){let l=[];o[i].bosses=[];let c=o[i].players.flat().filter(O=>O),u=c.map(O=>a.findIndex(V=>V.NAME===O.NAME)),d=u.map(O=>this.statsService.getPlayerGearScore(a,O)),_=o[i].penalty,f=this.dataService.getDungeonBosses().filter(O=>O.DUNGEON===r).sort((O,V)=>O.ORDER-V.ORDER),v=!1,T=0,b=s.gold,M=Math.floor(Math.random()*6)+9027;for(let O of f){if([9027,9028,9029,9030,9031,9032].includes(+O.NPC_ID)){if(+O.NPC_ID!==M)continue}else if(+O.SPAWN<1&&Math.random()>+O.SPAWN)continue;let V=0,S="";for(;!v;){let m=u.map(G=>Math.min(this.getBossKills(a[G],+O.NPC_ID),5)),w=u.map((G,ee)=>d[ee]+m[ee]),P=w.reduce((G,ee)=>G+ee,0)/w.length,x=this.successRate(P-_,+O.LEVEL);if(Math.random()<x){if(u.forEach((G,ee)=>{let le=a[G],A=new Map;le.DUNGEON_EXP&&le.DUNGEON_EXP.split(";").forEach(I=>{if(I){let[R,F]=I.split(":");A.set(parseInt(R,10),parseInt(F,10))}}),m[ee]===0&&this.dataService.getDungeonQuests().forEach(I=>{if(+I.NPC_ID==+O.NPC_ID&&Number(I.CLASS_MASK)&1<<Number(le.CLASSID)){let F=(le.INVENTORY||"").split(";").filter(Y=>Y),J=!1;for(let Y=0;Y<=5;Y++){let se=`ITEM_${Y}`,X=I[se];if(X){let Ie=this.dataService.getItemsMap().get(+X);Ie&&Number(Ie.class_mask)&1<<Number(le.CLASSID)&&(J=!0,F.push(X.toString()),l.push({itemId:Number(X),playerName:le.NAME,playerClass:le.CLASSID}))}}J&&(a[G].INVENTORY=F.join(";"))}}),A.set(O.NPC_ID,m[ee]+1),le.DUNGEON_EXP=Array.from(A.entries()).map(([I,R])=>`${I}:${R}`).join(";")}),S+="\u2713",o[i].bosses.push({bossName:O.NAME,results:S}),+O.LOOT==1){let G=this.dataService.getDungeonDrops().filter(ee=>ee.NPC_ID===O.NPC_ID);for(let ee of G)if(Math.random()<+ee.DROP_PCT){let le=this.dataService.getItemsMap().get(+ee.DB_ID);if(!le)continue;+ee.DB_ID==22397&&console.log("idol of ferocity dropped");let A=c.filter(F=>(Number(le.class_mask)&1<<Number(F.CLASSID))!==0?!new Set((F.INVENTORY||"").split(";").filter(se=>se)).has(ee.DB_ID.toString()):!1);if(A.length===0){s.gold+=Number(ee.VALUE);continue}let I=[],R=new Map;for(let F of A){let J=u.find(ce=>a[ce].NAME===F.NAME),Y=this.statsService.calculateItemWeight(le,Number(F.CLASSID),Number(F.SPEC)),X=this.gearService.getEquippedItemsForPlayer(J,a).filter(ce=>ce.dbId!==-1&&this.dataService.getItemsMap().get(ce.dbId)?.eq_type===le.eq_type).map(ce=>ce.dbId),Ie=a[J].INVENTORY||"",Qe=Ie?Ie.split(";").map(Number).filter(ce=>this.dataService.getItemsMap().get(ce)?.eq_type===le.eq_type):[],rt=[...new Set([...X,...Qe])],at=0;rt.forEach(ce=>{let be=this.dataService.getItemsMap().get(ce);if(be){let Ge=this.statsService.calculateItemWeight(be,Number(F.CLASSID),Number(F.SPEC));at=Math.max(at,Ge)}}),R.set(F.NAME,at),Y>at&&I.push({player:F,playerIndex:J,improvement:Y-at})}if(I.length>0){let F=I.filter(Ie=>this.matchRole(Number(Ie.player.CLASSID),Number(Ie.player.SPEC),le.role||"")),J=F.length>0?F:I,Y=J[Math.floor(Math.random()*J.length)],X=(a[Y.playerIndex].INVENTORY||"").split(";").filter(Ie=>Ie);X.includes(ee.DB_ID.toString())?s.gold+=Number(ee.VALUE):(X.push(ee.DB_ID.toString()),a[Y.playerIndex].INVENTORY=X.join(";"),l.push({itemId:ee.DB_ID,playerName:Y.player.NAME,playerClass:Number(Y.player.CLASSID)}))}else{let F=[];for(let J of A){let Y=u.find(Ie=>a[Ie].NAME===J.NAME),se=this.statsService.calculateItemWeight(le,Number(J.CLASSID),Number(J.SPEC)),X=R.get(J.NAME)??0;se>X*.9&&F.push({player:J,playerIndex:Y})}if(F.length>0){let J=F[Math.floor(Math.random()*F.length)],se=(a[J.playerIndex].INVENTORY||"").split(";").filter(X=>X);se.includes(ee.DB_ID.toString())?s.gold+=Number(ee.VALUE):(se.push(ee.DB_ID.toString()),a[J.playerIndex].INVENTORY=se.join(";"),l.push({itemId:ee.DB_ID,playerName:J.player.NAME,playerClass:Number(J.player.CLASSID)}))}else s.gold+=Number(ee.VALUE)}}}break}else if(S+="X",V++,T++,Math.random()<T*.05){v=!0,o[i].bosses.push({bossName:O.NAME,results:S});break}}}let W=o[i].bosses.filter(O=>O.results.endsWith("\u2713")).length,H=o[i].bosses.length;return o[i].progress=v?`Abandoned after ${H-1} boss(es)`:`Completed ${W} / ${H} bosses`,r==="Upper Blackrock Spire"?!v&&s.gold-b<50&&(s.gold=b+50):!v&&s.gold-b<25&&(s.gold=b+25),l}successRate(i,r){let o=i-r,a=Math.max(-8,Math.min(8,o)),s=Math.log(1e3)/8;return 1/(1+Math.exp(-s*a))}matchRole(i,r,o){let a=this.utilityService.getRole(i,r);return!!(a==="tank"&&o.toUpperCase()==="TANK"||a==="heal"&&o.toUpperCase()==="HEAL"||a==="damage"&&(o.toUpperCase()==="PHYS"&&this.utilityService.isPhysicalDps(i,r)||o.toUpperCase()==="MAGI"&&!this.utilityService.isPhysicalDps(i,r)))}};n.\u0275fac=function(r){return new(r||n)(B(gn),B(gt),B(Gt),B(gs))},n.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var zA=()=>({"margin-right.px":20}),WA=()=>({"margin-left.px":50}),qA=t=>({"active-slot":t});function YA(t,n){if(t&1){let e=pe();Kn(0),g(1,"button",9),q("click",function(){U(e);let r=E().$implicit,o=E(3);return $(o.handlePlayerClick(r))}),g(2,"div",17),y(3),h(),y(4),h(),Z(5,"img",18),Zn()}if(t&2){let e=E().$implicit,i=E(3);p(),C("ngStyle",i.getCellStyle(e)),p(2),re(" ",i.getGearScore(e.NAME).toFixed(1)," "),p(),re(" ",e.NAME," "),p(),C("src","assets/icons/role_"+i.utilityService.getRole(e.CLASSID,e.SPEC)+"2.png",Ne)}}function KA(t,n){if(t&1&&(g(0,"td",16),L(1,YA,6,4,"ng-container",4),h()),t&2){let e=n.$implicit;p(),C("ngIf",e)}}function ZA(t,n){if(t&1&&(g(0,"tr"),L(1,KA,2,1,"td",15),h()),t&2){let e=n.$implicit;p(),C("ngForOf",e)}}function QA(t,n){if(t&1&&(g(0,"div")(1,"table"),L(2,ZA,2,1,"tr",14),h()()),t&2){let e=E();p(2),C("ngForOf",e.grid)}}function XA(t,n){if(t&1&&(g(0,"option",27),y(1),h()),t&2){let e=n.$implicit;C("ngValue",e),p(),re(" ",e," ")}}function JA(t,n){if(t&1){let e=pe();g(0,"button",28),q("click",function(){U(e);let r=E(2);return $(r.addDungeonRowClicked())}),y(1," Add Dungeon "),h()}}function eP(t,n){if(t&1&&(g(0,"div",30),y(1),h()),t&2){let e=n.$implicit,i=E(3);p(),Qn(" ",e.bossName," (",i.getBossLevel(e.bossName),"): ",e.results," ")}}function tP(t,n){if(t&1&&(g(0,"details")(1,"summary"),y(2),h(),L(3,eP,2,3,"div",29),h()),t&2){let e=E().index,i=E();p(2),Q(i.dungeonAssignments[e].progress),p(),C("ngForOf",i.dungeonAssignments[e].bosses)}}function nP(t,n){if(t&1&&(g(0,"div",30),y(1),h()),t&2){let e=n.$implicit;p(),re(" ",e," ")}}function iP(t,n){if(t&1&&(g(0,"details")(1,"summary"),y(2),h(),L(3,nP,2,1,"div",29),h()),t&2){let e=E().index,i=E();p(2),re("Composition Penalty: -",i.dungeonAssignments[e].penalty),p(),C("ngForOf",i.dungeonCompositions[i.dungeonAssignments[e].dungeon||""])}}function rP(t,n){if(t&1&&Z(0,"img",18),t&2){let e=E().$implicit,i=E(3);C("src","assets/icons/role_"+i.utilityService.getRole(e.CLASSID,e.SPEC)+"2.png",Ne)}}function oP(t,n){if(t&1&&(g(0,"div",37)(1,"div",38),y(2),h(),g(3,"div",39),y(4),h()()),t&2){let e=E().$implicit,i=E(3);p(),jo("color",i.getColor(e.CLASSID)),p(),re(" ",e.NAME," "),p(2),Ei(" ",i.getClassName(e.CLASSID)," ",i.getGearScore(e.NAME).toFixed(1)," ")}}function sP(t,n){if(t&1&&(g(0,"span"),y(1),h()),t&2){let e=E().index;p(),re("Slot ",e+1)}}function aP(t,n){if(t&1){let e=pe();g(0,"div",33)(1,"button",34),q("click",function(){let r=U(e).index,o=E().index,a=E().index,s=E();return $(s.setActiveSlotClicked(a,o,r))}),L(2,rP,1,1,"img",35)(3,oP,5,5,"div",36)(4,sP,2,1,"span",4),h()()}if(t&2){let e=n.$implicit,i=n.index,r=E().index,o=E().index,a=E();p(),C("ngClass",St(4,qA,a.activeSlot&&a.activeSlot.group===o&&a.activeSlot.row===r&&a.activeSlot.slot===i)),p(),C("ngIf",e),p(),C("ngIf",e),p(),C("ngIf",!e)}}function lP(t,n){if(t&1&&(g(0,"div",31),L(1,aP,5,6,"div",32),h()),t&2){let e=n.$implicit;p(),C("ngForOf",e)}}function cP(t,n){if(t&1){let e=pe();g(0,"div",19)(1,"div",20)(2,"select",21),xt("ngModelChange",function(r){let o=U(e).index,a=E();return Nt(a.dungeonAssignments[o].dungeon,r)||(a.dungeonAssignments[o].dungeon=r),$(r)}),q("change",function(){let r=U(e).index,o=E();return $(o.onDungeonChange(r))}),g(3,"option",22),y(4,"Select Dungeon"),h(),L(5,XA,2,2,"option",23),h(),g(6,"span",24),y(7),h(),L(8,JA,2,0,"button",25),h(),L(9,tP,4,2,"details",4)(10,iP,4,2,"details",4)(11,lP,2,1,"div",26),h()}if(t&2){let e=n.$implicit,i=n.index,r=E();p(2),Mt("ngModel",r.dungeonAssignments[i].dungeon),p(),C("ngValue",null),p(2),C("ngForOf",r.dataService.getUniqueDungeons()),p(2),Q(r.getDungeonLevel(r.dungeonAssignments[i].dungeon||"")),p(),C("ngIf",i===r.dungeonAssignments.length-1&&e.dungeon),p(),C("ngIf",r.dungeonAssignments[i].progress),p(),C("ngIf",r.dungeonAssignments[i].penalty>0),p(),C("ngForOf",e.players)}}function uP(t,n){if(t&1&&(g(0,"tr")(1,"td",42),Z(2,"img",43),h(),g(3,"td",44)(4,"span"),y(5),h()(),g(6,"td",45),Z(7,"div",46),h()()),t&2){let e=n.$implicit,i=E(2);p(2),C("src",i.getItemIcon(+e.itemId),Ne),p(2),jo("color",i.getColor(e.playerClass)),p(),Q(e.playerName),p(),C("innerHTML",i.utilityService.getItemTooltip(+e.itemId,null),Tt),p(),C("innerHTML",i.utilityService.getItemTooltip(+e.itemId,null),Tt)}}function dP(t,n){if(t&1&&(g(0,"div",40)(1,"h2"),y(2,"Dungeon Loot"),h(),g(3,"table",41),L(4,uP,8,6,"tr",14),h()()),t&2){let e=E();p(4),C("ngForOf",e.dungeonUpgrades)}}function fP(t,n){if(t&1&&(g(0,"details",47)(1,"summary"),y(2),h(),g(3,"div",48),Z(4,"img",49),g(5,"div",50),Z(6,"p",51),h()()()),t&2){let e=n.$implicit,i=E();p(2),Q(e),p(2),C("alt",Gp("",e," background"))("src",i.getDungeonImage(e),Ne),p(2),C("innerHTML",i.getDungeonSummary(e),Tt)}}function hP(t,n){if(t&1&&(g(0,"li"),y(1),h()),t&2){let e=n.$implicit;p(),re(" ",e.NAME," ")}}function pP(t,n){if(t&1&&(g(0,"details")(1,"summary"),y(2),h(),g(3,"ul"),L(4,hP,2,1,"li",14),h()()),t&2){let e=E().$implicit,i=E();p(2),re("Missing Unlock (",i.getLockedPlayers(e).length,")"),p(2),C("ngForOf",i.getLockedPlayers(e))}}function gP(t,n){if(t&1&&(g(0,"div",47)(1,"strong"),y(2),h(),y(3),L(4,pP,5,2,"details",4),h()),t&2){let e=n.$implicit,i=E();p(2),Q(e.UNLOCK),p(),Qn(": ",i.getUnlockedPlayerCount(e),"/",i.players.length," - Kill: ",i.getBossName(+e.NPC_ID)||"NPC ID "+e.NPC_ID," "),p(),C("ngIf",i.getLockedPlayers(e).length>0)}}var ms=(()=>{let n=class n{constructor(i,r,o,a){this.dungeonService=i,this.utilityService=r,this.dataService=o,this.statsService=a,this.grid=[],this.players=[],this.guildBank={gold:0,fieryCores:0,lavaCores:0},this.playerGearScores=new Map,this.dungeonCompositions=ud,this.dungeonUpgrades=[],this.dungeonAssignments=[{dungeon:"Blackrock Depths",players:[Array(5).fill(null)],bosses:[],progress:null,penalty:0}],this.guildWeek=1,this.dungeonProgress={week:this.guildWeek,attempts:0},this.activeSlot=null}calcAllGearScores(){this.playerGearScores.clear(),this.players.forEach((i,r)=>{let o=this.statsService.getPlayerGearScore(this.players,r);this.playerGearScores.set(i.NAME,o)})}syncDataFromService(){this.dungeonAssignments=this.dungeonService.getDungeonAssignments(),this.dungeonProgress=this.dungeonService.getDungeonProgress(),this.guildWeek=this.dungeonService.getGuildWeek(),this.calcAllGearScores()}syncDataToService(){this.dungeonService.setDungeonAssignments(this.dungeonAssignments),this.dungeonService.setDungeonProgress(this.dungeonProgress||{week:this.guildWeek,attempts:0}),this.dungeonService.setGuildWeek(this.guildWeek)}getGearScore(i){return this.playerGearScores.get(i)??0}getDungeonImage(i){return this.dungeonService.getDungeonImage(i)}getDungeonSummary(i){return this.dungeonService.getDungeonSummary(i)}getDungeonLevel(i){return this.dungeonService.getDungeonLevel(i)}getCompositionPenalty(i,r){return this.dungeonService.getCompositionPenalty(i,r)}getBossName(i){let r=this.dataService.getDungeonBosses().find(o=>+o.NPC_ID===i);return r?r.NAME:null}getBossLevel(i){let r=this.dataService.getDungeonBosses().find(o=>o.NAME===i);return r?r.LEVEL:null}getDungeonUnlocks(){return this.dataService.getDungeonUnlocks()}getUnlockedPlayerCount(i){return i.NPC_ID?this.players.filter(r=>this.dungeonService.getBossKills(r,+i.NPC_ID)>=1).length:this.players.length}getLockedPlayers(i){return i.NPC_ID?this.players.filter(r=>this.dungeonService.getBossKills(r,+i.NPC_ID)<1):[]}getLockedPlayersNames(i){return this.getLockedPlayers(i).map(r=>r.NAME).join(", ")}isDungeonAvailableForGroup(i,r){let o=this.dungeonAssignments[i].players.flat().filter(a=>a);return this.dungeonService.isDungeonAvailableForGroup(o,r)}isRunDungeonDisabled(){return!!(!this.dungeonAssignments.some(i=>i.dungeon!==null)||this.dungeonProgress&&this.dungeonProgress.attempts>=10)}getCellStyle(i){if(!i)return{"background-color":"#d3d3d3",color:"black"};let r=this.dungeonAssignments.some(s=>s.players.some(l=>l.some(c=>c&&c.NAME===i.NAME))),o=this.activeSlot&&!this.dungeonService.isDungeonAvailable(i,this.activeSlot?this.dungeonAssignments[this.activeSlot.group]?.dungeon:null);return{"background-color":this.activeSlot&&(r||o)?"#d3d3d3":this.utilityService.getColor(i.CLASSID),color:"black",border:this.activeSlot&&this.activeSlot.group===i.GROUP&&this.activeSlot.slot===i.POSITION?"2px solid red":"1px solid black"}}getRoleIcon(i,r){return this.utilityService.getRoleIcon?.(i,r)||`/assets/icons/role-${i}.png`}getItemIcon(i){return this.utilityService.getItemIcon?.(i)||`/assets/icons/item-${i}.png`}getItemTooltip(i,r){return this.utilityService.getItemTooltip?.(i,r)||`Item ID: ${i}`}onDungeonChange(i){let r=this.dungeonAssignments[i].dungeon;r==="Upper Blackrock Spire"?this.dungeonAssignments[i].players=[Array(5).fill(null),Array(5).fill(null)]:this.isDungeonAvailableForGroup(i,r||"")||(this.dungeonAssignments[i].players=[Array(5).fill(null)]),this.dungeonAssignments[i].bosses=[],this.dungeonAssignments[i].progress="",this.dungeonAssignments[i].penalty=0,this.updateGroupPenalty(i)}addDungeonRowClicked(){this.addDungeonRow()}addDungeonRow(){this.dungeonAssignments.push({dungeon:null,players:[Array(5).fill(null)],bosses:[],progress:null,penalty:0})}runDungeonsClicked(){this.runDungeons()}runDungeons(){this.dungeonUpgrades=[];for(let i=0;i<this.dungeonAssignments.length;i++){let r=this.dungeonAssignments[i],o=r.players.flat().every(s=>s!==null),a=Number(this.dungeonProgress?.attempts||0);(a<10&&r.dungeon!=="Upper Blackrock Spire"||a<9)&&r.dungeon&&o&&this.isDungeonAvailableForGroup(i,r.dungeon)&&this.simulateDungeonRun(i,r.dungeon)}this.calcAllGearScores(),this.savePlayersToStorage(),this.saveBankToStorage(),this.saveAssignmentsToStorage(),this.syncDataToService()}simulateDungeonRun(i,r){let o=this.dungeonService.simulateDungeonRun(i,r,this.dungeonAssignments,this.players,this.guildBank);this.dungeonUpgrades.push(...o),this.updateDungeonProgress(!0),r==="Upper Blackrock Spire"&&this.updateDungeonProgress(!0)}updateDungeonProgress(i=!0){i?this.dungeonProgress&&this.dungeonProgress.attempts++:this.dungeonProgress={week:this.guildWeek,attempts:0};try{localStorage.setItem("dungeonProgress",JSON.stringify(this.dungeonProgress))}catch(r){console.error("Error saving dungeonProgress to localStorage:",r)}}clearAssignmentsClicked(){this.clearAssignments()}clearAssignments(){this.dungeonAssignments=[{dungeon:"Blackrock Depths",players:[Array(5).fill(null)],bosses:[],progress:null,penalty:0}],this.dungeonUpgrades=[]}setActiveSlotClicked(i,r,o){this.setActiveSlot(i,r,o)}setActiveSlot(i,r,o){this.activeSlot&&this.activeSlot.group===i&&this.activeSlot.row===r&&this.activeSlot.slot===o?this.activeSlot=null:this.activeSlot={group:i,row:r,slot:o}}handlePlayerClick(i){this.activeSlot&&this.assignPlayerToSlot(i,this.activeSlot.group,this.activeSlot.row,this.activeSlot.slot)}assignPlayerToSlot(i,r,o,a){!this.dungeonAssignments.some(l=>l.players.some(c=>c.some(u=>u&&u.NAME===i.NAME)))&&this.dungeonService.isDungeonAvailable(i,this.dungeonAssignments[r].dungeon)&&(this.dungeonAssignments[r].players[o][a]=i,this.activeSlot=null,this.updateGroupPenalty(r))}updateGroupPenalty(i){let o=this.dungeonAssignments[i].players.flat().every(a=>a!==null);if(console.log("dungeon filled:",o),o&&this.dungeonAssignments[i].dungeon){console.log("checking dungeon");let a=this.dungeonAssignments[i].players.flat().filter(s=>s);this.dungeonAssignments[i].penalty=this.getCompositionPenalty(this.dungeonAssignments[i].dungeon,a)}}nextWeekClicked(){this.nextWeek()}nextWeek(){this.guildWeek++,localStorage.setItem("guildWeek",this.guildWeek.toString()),this.updateDungeonProgress(!1)}getColor(i){return this.utilityService.getColor(i)}getClassName(i){return this.utilityService.getClassName(i)}saveAssignmentsToStorage(){this.dataService.saveVariableToStorage("dungeonAssignment",this.dungeonAssignments)}savePlayersToStorage(){this.dataService.saveVariableToStorage("players",this.players)}saveBankToStorage(){this.dataService.saveVariableToStorage("guildBank",this.guildBank)}};n.\u0275fac=function(r){return new(r||n)(K(gd),K(Gt),K(gt),K(gn))},n.\u0275cmp=jt({type:n,selectors:[["app-dungeon"]],inputs:{grid:"grid",players:"players",guildBank:"guildBank",playerGearScores:"playerGearScores"},decls:31,vars:14,consts:[[1,"maincontainer"],[1,"guild-bank-bar2"],[1,"guild-bank-item"],["src","/assets/icons/ui_plundercoins.jpg","alt","Gold",1,"bank-icon"],[4,"ngIf"],[1,"dungeon-assignment"],[3,"ngStyle"],[3,"click","disabled"],["class","dungeon-group",4,"ngFor","ngForOf"],[3,"click","ngStyle"],["class","upgrades-section",4,"ngIf"],[1,"dungeon-info"],[1,"dungeon-list"],["class","dungeon-detail",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","player-cell",4,"ngFor","ngForOf"],[1,"player-cell"],[1,"player-gearscore"],["alt","role icon",1,"role-icon",3,"src"],[1,"dungeon-group"],[1,"dungeon-selector"],[3,"ngModelChange","change","ngModel"],["disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"dungeon-level"],[3,"click",4,"ngIf"],["class","player-slots",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"click"],["class","boss-detail",4,"ngFor","ngForOf"],[1,"boss-detail"],[1,"player-slots"],["class","slot-button",4,"ngFor","ngForOf"],[1,"slot-button"],[3,"click","ngClass"],["class","role-icon","alt","role icon",3,"src",4,"ngIf"],["class","assigned-player-card",4,"ngIf"],[1,"assigned-player-card"],[1,"player-name"],[1,"player-details"],[1,"upgrades-section"],[1,"upgrades-table"],[1,"upgrade-icon"],["alt","item icon",3,"src"],[1,"upgrade-player"],[1,"upgrade-tooltip",3,"innerHTML"],[1,"tooltip-content",3,"innerHTML"],[1,"dungeon-detail"],[1,"dungeon-image-container"],[1,"dungeon-image",3,"src","alt"],[1,"dungeon-overlay"],[1,"dungeon-summary",3,"innerHTML"]],template:function(r,o){r&1&&(g(0,"div",0)(1,"div",1)(2,"div",2),Z(3,"img",3),g(4,"span"),y(5),h()()(),L(6,QA,3,1,"div",4),g(7,"div",5)(8,"h2"),y(9,"Dungeon Assignments"),h(),g(10,"div")(11,"span",6),y(12),h(),g(13,"button",7),q("click",function(){return o.nextWeekClicked()}),y(14,"Next Week"),h()(),L(15,cP,12,8,"div",8),g(16,"button",7),q("click",function(){return o.runDungeonsClicked()}),y(17,"Run Dungeons"),h(),g(18,"button",9),q("click",function(){return o.clearAssignmentsClicked()}),y(19,"Clear Players"),h()(),L(20,dP,5,1,"div",10),g(21,"details",11)(22,"summary"),y(23,"Dungeon Info"),h(),g(24,"div",12),L(25,fP,7,5,"details",13),h()(),g(26,"details",11)(27,"summary"),y(28,"Unlocks"),h(),g(29,"div",12),L(30,gP,5,5,"div",13),h()()()),r&2&&(p(5),re("x",o.guildBank.gold.toFixed(2)),p(),C("ngIf",o.activeSlot),p(5),C("ngStyle",Xn(12,zA)),p(),Ei("Current Week: ",o.guildWeek,"; Attempts: ",o.dungeonProgress==null?null:o.dungeonProgress.attempts,"/10"),p(),C("disabled",o.dungeonProgress&&o.dungeonProgress.attempts<10),p(2),C("ngForOf",o.dungeonAssignments),p(),C("disabled",o.isRunDungeonDisabled()),p(2),C("ngStyle",Xn(13,WA)),p(2),C("ngIf",o.dungeonUpgrades.length>0),p(5),C("ngForOf",o.dataService.getUniqueDungeons()),p(5),C("ngForOf",o.getDungeonUnlocks()))},dependencies:[Di,Ar,Wi,Pr,Nr,Xo,Nu,Ou,Qo,xu,Aa],styles:[".maincontainer[_ngcontent-%COMP%]{background-color:#000;color:#fff;display:flex;flex-direction:column;align-items:center;padding:20px;box-sizing:border-box;min-width:100vw;overflow-x:auto}.guild-bank-item[_ngcontent-%COMP%]{display:flex;width:100%;gap:5px}.bank-icon[_ngcontent-%COMP%]{width:100%;height:20px}table[_ngcontent-%COMP%]{border-collapse:collapse}td[_ngcontent-%COMP%]{width:100px;height:50px;padding:0;text-align:center;vertical-align:middle}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:100%;box-sizing:border-box}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,100px);gap:10px;margin-bottom:20px}.row[_ngcontent-%COMP%]{display:contents}.cell[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px;height:50px;cursor:pointer}.player-gearscore[_ngcontent-%COMP%]{font-size:.75em;color:#000;margin-top:0}.player-cell[_ngcontent-%COMP%]{position:relative}.role-icon[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:22px;height:22px;pointer-events:none;z-index:1000}details[_ngcontent-%COMP%]{margin-bottom:1rem}summary[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.dungeon-assignment[_ngcontent-%COMP%]{margin-top:0;padding-left:10px;padding-right:10px;box-sizing:border-box;width:100%;max-width:100vw;margin-bottom:20px}.dungeon-assignment[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px}.dungeon-assignment[_ngcontent-%COMP%]   .dungeon-group[_ngcontent-%COMP%]{margin-bottom:15px}.dungeon-assignment[_ngcontent-%COMP%]   .dungeon-group[_ngcontent-%COMP%]   .dungeon-selector[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px;padding-left:5px;box-sizing:border-box;width:100%;align-items:flex-end}.dungeon-assignment[_ngcontent-%COMP%]   .dungeon-group[_ngcontent-%COMP%]   .dungeon-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:36px;padding:5px;font-size:1em}.dungeon-assignment[_ngcontent-%COMP%]   .dungeon-group[_ngcontent-%COMP%]   .dungeon-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:36px;margin-top:20px;padding:10 10px;cursor:pointer;display:flex;align-items:center;justify-content:center}.dungeon-assignment[_ngcontent-%COMP%]   .dungeon-group[_ngcontent-%COMP%]   .dungeon-selector[_ngcontent-%COMP%]   .dungeon-level[_ngcontent-%COMP%]{margin-bottom:5px}.dungeon-assignment[_ngcontent-%COMP%]   .dungeon-group[_ngcontent-%COMP%]   .player-slots[_ngcontent-%COMP%]{display:flex;gap:5px}.dungeon-assignment[_ngcontent-%COMP%]   .dungeon-group[_ngcontent-%COMP%]   .player-slots[_ngcontent-%COMP%]   .slot-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;width:75px;height:50px;display:flex;align-items:center;justify-content:center;border:1px solid white;background:#363636;cursor:pointer;box-sizing:border-box}.dungeon-assignment[_ngcontent-%COMP%]   .dungeon-group[_ngcontent-%COMP%]   .player-slots[_ngcontent-%COMP%]   .slot-button[_ngcontent-%COMP%]   button.active-slot[_ngcontent-%COMP%]{border:2px solid red;background:#363636}.dungeon-assignment[_ngcontent-%COMP%]   .dungeon-group[_ngcontent-%COMP%]   .player-slots[_ngcontent-%COMP%]   .slot-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .assigned-player-card[_ngcontent-%COMP%]{text-align:center;padding:10px;transform:scale(.67);transform-origin:center;width:100%;box-sizing:border-box}.dungeon-assignment[_ngcontent-%COMP%]   .dungeon-group[_ngcontent-%COMP%]   .player-slots[_ngcontent-%COMP%]   .slot-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .assigned-player-card[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]{font-weight:700}.dungeon-assignment[_ngcontent-%COMP%]   .dungeon-group[_ngcontent-%COMP%]   .player-slots[_ngcontent-%COMP%]   .slot-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .assigned-player-card[_ngcontent-%COMP%]   .player-details[_ngcontent-%COMP%]{font-size:1em;color:#fff}.dungeon-assignment[_ngcontent-%COMP%]   .dungeon-group[_ngcontent-%COMP%]   .player-slots[_ngcontent-%COMP%]   .slot-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9em}.dungeon-assignment[_ngcontent-%COMP%]   .dungeon-group[_ngcontent-%COMP%]   .player-slots[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:14px;height:14px;pointer-events:none;z-index:10}.upgrades-section[_ngcontent-%COMP%]{margin-top:20px}.upgrades-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px}.upgrades-section[_ngcontent-%COMP%]   .upgrades-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;table-layout:fixed}.upgrades-section[_ngcontent-%COMP%]   .upgrades-table[_ngcontent-%COMP%]   td.upgrade-tooltip[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}.upgrades-section[_ngcontent-%COMP%]   .upgrades-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid gray}.upgrades-section[_ngcontent-%COMP%]   .upgrades-table[_ngcontent-%COMP%]   .upgrade-icon[_ngcontent-%COMP%]{width:20%;padding:5px}.upgrades-section[_ngcontent-%COMP%]   .upgrades-table[_ngcontent-%COMP%]   .upgrade-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:56px;height:56px;border:1px solid gray}.upgrades-section[_ngcontent-%COMP%]   .upgrades-table[_ngcontent-%COMP%]   .upgrade-player[_ngcontent-%COMP%]{width:30%;padding:5px;font-weight:700}.upgrades-section[_ngcontent-%COMP%]   .upgrades-table[_ngcontent-%COMP%]   .tooltip-content[_ngcontent-%COMP%]{display:inline-block;max-width:300px}.upgrades-section[_ngcontent-%COMP%]   .upgrades-table[_ngcontent-%COMP%]   .upgrade-tooltip[_ngcontent-%COMP%]{padding:5px}.upgrades-section[_ngcontent-%COMP%]   .upgrades-table[_ngcontent-%COMP%]   .upgrade-tooltip[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.upgrades-section[_ngcontent-%COMP%]   .upgrades-table[_ngcontent-%COMP%]   .upgrade-tooltip[_ngcontent-%COMP%]    {color:#fff;background:#1a1a1a;border:1px solid #444;padding:8px;font-size:.9em}.dungeon-info[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.dungeon-info[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700}.dungeon-list[_ngcontent-%COMP%]{padding:10px}.dungeon-list[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{font-size:1em;font-weight:700}.dungeon-detail[_ngcontent-%COMP%]{margin:10px 0}.dungeon-image-container[_ngcontent-%COMP%]{position:relative;width:100%}.dungeon-image[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.dungeon-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;max-height:100%;background-color:#000000b3;display:flex;align-items:flex-start;padding:20px;box-sizing:border-box;overflow-y:auto}.dungeon-summary[_ngcontent-%COMP%]{color:#fff;font-size:16px;margin:0;text-align:left}.dungeon-summary[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;padding-left:20px;margin:10px 0}.dungeon-summary[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.settings-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px;margin-top:20px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-touch-callout:none}.settings-buttons[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]{padding:14px 28px;font-size:1.1rem;font-weight:700;border-radius:10px;border:none;background:linear-gradient(135deg,#4e73df,#224abe);color:#fff;cursor:pointer;box-shadow:0 4px 10px #00000040;transition:transform .15s ease,box-shadow .15s ease;width:auto;min-width:200px;max-width:280px}.settings-buttons[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]:disabled{background:#666;cursor:not-allowed}.settings-buttons[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 14px #0000004d}.settings-buttons[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 3px 8px #0003}"]});let t=n;return t})();var Im="Service workers are disabled or not supported by this browser",vs=class{serviceWorker;worker;registration;events;constructor(n,e){if(this.serviceWorker=n,!n)this.worker=this.events=this.registration=new oe(i=>i.error(new j(5601,!1)));else{let i=null,r=new ne;this.worker=new oe(c=>(i!==null&&c.next(i),r.subscribe(u=>c.next(u))));let o=()=>{let{controller:c}=n;c!==null&&(i=c,r.next(i))};n.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Ue(()=>n.getRegistration().then(c=>{if(!c)throw new j(5601,!1);return c})));let a=new ne;this.events=a.asObservable();let s=c=>{let{data:u}=c;u?.type&&a.next(u)};n.addEventListener("message",s),e?.get(pt,null,{optional:!0})?.onDestroy(()=>{n.removeEventListener("controllerchange",o),n.removeEventListener("message",s)})}}postMessage(n,e){return new Promise(i=>{this.worker.pipe(vt(1)).subscribe(r=>{r.postMessage(N({action:n},e)),i()})})}postMessageWithOperation(n,e,i){let r=this.waitForOperationCompleted(i),o=this.postMessage(n,e);return Promise.all([o,r]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(n){let e;return typeof n=="string"?e=i=>i.type===n:e=i=>n.includes(i.type),this.events.pipe(tt(e))}nextEventOfType(n){return this.eventsOfType(n).pipe(vt(1))}waitForOperationCompleted(n){return new Promise((e,i)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(tt(r=>r.nonce===n),vt(1),ie(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error)})).subscribe({next:e,error:i})})}get isEnabled(){return!!this.serviceWorker}},LE=(()=>{class t{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new ne;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=li,this.notificationClicks=li,this.notificationCloses=li,this.pushSubscriptionChanges=li,this.subscription=li;return}this.messages=this.sw.eventsOfType("PUSH").pipe(ie(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ie(r=>r.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(ie(r=>r.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(ie(r=>r.data)),this.pushManager=this.sw.registration.pipe(ie(r=>r.pushManager));let i=this.pushManager.pipe(Ue(r=>r.getSubscription()));this.subscription=new oe(r=>{let o=i.subscribe(r),a=this.subscriptionChanges.subscribe(r);return()=>{o.unsubscribe(),a.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Im));let i={userVisibleOnly:!0},r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(r.length));for(let a=0;a<r.length;a++)o[a]=r.charCodeAt(a);return i.applicationServerKey=o,new Promise((a,s)=>{this.pushManager.pipe(Ue(l=>l.subscribe(i)),vt(1)).subscribe({next:l=>{this.subscriptionChanges.next(l),a(l)},error:s})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Im));let e=i=>{if(i===null)throw new j(5602,!1);return i.unsubscribe().then(r=>{if(!r)throw new j(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((i,r)=>{this.subscription.pipe(vt(1),Ue(e)).subscribe({next:i,error:r})})}decodeBase64(e){return atob(e)}static \u0275fac=function(i){return new(i||t)(B(vs))};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})(),md=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=li,this.unrecoverable=li;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Im));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let e=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new j(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(i){return new(i||t)(B(vs))};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})();var FE=new z("");function vP(){let t=D(Qa);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let n=D(FE),e=D(we),i=D(pt);e.runOutsideAngular(()=>{let r=navigator.serviceWorker,o=()=>r.controller?.postMessage({action:"INITIALIZE"});r.addEventListener("controllerchange",o),i.onDestroy(()=>{r.removeEventListener("controllerchange",o)})}),e.runOutsideAngular(()=>{let r,{registrationStrategy:o}=t;if(typeof o=="function")r=new Promise(a=>o().subscribe(()=>a()));else{let[a,...s]=(o||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":r=Promise.resolve();break;case"registerWithDelay":r=kE(+s[0]||0);break;case"registerWhenStable":r=Promise.race([i.whenStable(),kE(+s[0])]);break;default:throw new j(5600,!1)}}r.then(()=>{i.destroyed||navigator.serviceWorker.register(n,{scope:t.scope}).catch(a=>console.error(yn(5604,!1)))})})}function kE(t){return new Promise(n=>setTimeout(n,t))}function _P(t,n){return new vs(t.enabled!==!1?navigator.serviceWorker:void 0,n)}var Qa=class{enabled;scope;registrationStrategy};function yP(t,n={}){return gi([LE,md,{provide:FE,useValue:t},{provide:Qa,useValue:n},{provide:vs,useFactory:_P,deps:[Qa,He]},ko(vP)])}var VE=(()=>{class t{static register(e,i={}){return{ngModule:t,providers:[yP(e,i)]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Be({providers:[LE,md]})}return t})();var _s=(()=>{let n=class n{constructor(){this.lastAnimation=null,this.animationTimeout=null,this.animations=["Stand","Walk","Run","Stop","Death","StandWound","CombatWound","CombatCritical","ShuffleLeft","ShuffleRight","Walkbackwards","Stun","HandsClosed","AttackUnarmed","Attack1H","Attack2H","Attack2HL","ParryUnarmed","Parry1H","Parry2H","Parry2HL","ShieldBlock","ReadyUnarmed","Ready1H","Ready2H","Ready2HL","ReadyBow","Dodge","JumpStart","Jump","JumpEnd","Fall","SwimIdle","Swim","SwimLeft","SwimRight","SwimBackwards","AttackBow","ReadyRifle","AttackRifle","Loot","ReadySpellDirected","ReadySpellOmni","SpellCastDirected","SpellCastOmni","BattleRoar","Special1H","Special2H","ShieldBash","EmoteTalk","EmoteEat","EmoteWork","EmoteUseStanding","EmoteTalkExclamation","EmoteTalkQuestion","EmoteBow","EmoteWave","EmoteCheer","EmoteDance","EmoteLaugh","EmoteRude","EmoteRoar","EmoteKneel","EmoteKiss","EmoteCry","EmoteChicken","EmoteBeg","EmoteApplaud","EmoteShout","EmoteFlex","EmoteShy","EmotePoint","Attack1HPierce","AttackOff","AttackOffPierce","Sheath","HipSheath","Kick","SitGroundDown","SitGround","SleepDown","Sleep","SleepUp","LoadBow","LoadRifle","AttackThrown","ReadyThrown","HoldBow","HoldRifle","HoldThrown","LoadThrown","EmoteSalute","KneelStart","KneelLoop","KneelEnd","SpecialUnarmed","StealthWalk","StealthStand","Knockdown","UseStandingLoop","ChannelCastDirected","ChannelCastOmni","Whirlwind","UseStandingStart","UseStandingEnd","Drown","Drowned","FishingCast","FishingLoop","EmoteWorkNoSheathe","EmoteStunNoSheathe","EmoteUseStandingNoSheathe"],this.animationConfig={Stand:{duration:null,followup:"Stand"},Walk:{duration:null,followup:"Stand"},Run:{duration:null,followup:"Stand"},Stop:{duration:null,followup:"Stand"},Death:{duration:1600,followup:"Sleep"},StandWound:{duration:333,followup:"Stand"},CombatWound:{duration:400,followup:"StandWound"},CombatCritical:{duration:800,followup:"StandWound"},AttackUnarmed:{duration:1e3,followup:"ReadyUnarmed"},Attack1H:{duration:800,followup:"Ready1H"},Attack2H:{duration:800,followup:"Ready2H"},Attack2HL:{duration:800,followup:"Ready2HL"},ParryUnarmed:{duration:800,followup:"ReadyUnarmed"},Parry1H:{duration:800,followup:"Ready1H"},Parry2H:{duration:800,followup:"Ready2H"},Parry2HL:{duration:800,followup:"Ready2HL"},ShieldBlock:{duration:800,followup:"Stand"},AttackBow:{duration:400,followup:"ReadyBow"},AttackRifle:{duration:800,followup:"ReadyRifle"},Attack1HPierce:{duration:800,followup:"Ready1H"},AttackOff:{duration:800,followup:"Ready1H"},AttackOffPierce:{duration:800,followup:"Ready1H"},Special1H:{duration:800,followup:"Ready1H"},Special2H:{duration:1200,followup:"Ready2H"},ShieldBash:{duration:800,followup:"Stand"},SpecialUnarmed:{duration:800,followup:"ReadyUnarmed"},Kick:{duration:800,followup:"Stand"},Whirlwind:{duration:800,followup:"Stand"},ShuffleLeft:{duration:500,followup:"Stand"},ShuffleRight:{duration:500,followup:"Stand"},Walkbackwards:{duration:800,followup:"Stand"},Stun:{duration:800,followup:"Stand"},Dodge:{duration:800,followup:"Stand"},JumpStart:{duration:800,followup:"Jump"},Jump:{duration:1e3,followup:"JumpEnd"},JumpEnd:{duration:800,followup:"Stand"},Fall:{duration:2e3,followup:"Stand"},SwimIdle:{duration:null,followup:"Stand"},Swim:{duration:null,followup:"Stand"},SwimLeft:{duration:null,followup:"Stand"},SwimRight:{duration:null,followup:"Stand"},SwimBackwards:{duration:null,followup:"Stand"},HandsClosed:{duration:2e3,followup:"Stand"},ReadyUnarmed:{duration:2e3,followup:"Stand"},Ready1H:{duration:2e3,followup:"Stand"},Ready2H:{duration:2e3,followup:"Stand"},Ready2HL:{duration:2e3,followup:"Stand"},ReadyBow:{duration:2e3,followup:"Stand"},ReadyRifle:{duration:2e3,followup:"Stand"},ReadyThrown:{duration:2e3,followup:"Stand"},HoldBow:{duration:2e3,followup:"Stand"},HoldRifle:{duration:2e3,followup:"Stand"},HoldThrown:{duration:2e3,followup:"Stand"},ReadySpellDirected:{duration:800,followup:"Stand"},ReadySpellOmni:{duration:800,followup:"Stand"},SpellCastDirected:{duration:800,followup:"Stand"},SpellCastOmni:{duration:800,followup:"Stand"},ChannelCastDirected:{duration:3e3,followup:"Stand"},ChannelCastOmni:{duration:3e3,followup:"Stand"},EmoteTalk:{duration:3e3,followup:"Stand"},EmoteEat:{duration:2500,followup:"Stand"},EmoteWork:{duration:1500,followup:"Stand"},EmoteUseStanding:{duration:5e3,followup:"Stand"},EmoteTalkExclamation:{duration:5e3,followup:"Stand"},EmoteTalkQuestion:{duration:1500,followup:"Stand"},EmoteBow:{duration:2500,followup:"Stand"},EmoteWave:{duration:2500,followup:"Stand"},EmoteCheer:{duration:1800,followup:"Stand"},EmoteDance:{duration:3e4,followup:"Stand"},EmoteLaugh:{duration:3e3,followup:"Stand"},EmoteRude:{duration:2e3,followup:"Stand"},EmoteRoar:{duration:2500,followup:"Stand"},EmoteKneel:{duration:3e3,followup:"Stand"},EmoteKiss:{duration:2500,followup:"Stand"},EmoteCry:{duration:5e3,followup:"Stand"},EmoteChicken:{duration:3e3,followup:"Stand"},EmoteBeg:{duration:4e3,followup:"Stand"},EmoteApplaud:{duration:3e3,followup:"Stand"},EmoteShout:{duration:1800,followup:"Stand"},EmoteFlex:{duration:2500,followup:"Stand"},EmoteShy:{duration:1800,followup:"Stand"},EmotePoint:{duration:1800,followup:"Stand"},EmoteSalute:{duration:1800,followup:"Stand"},BattleRoar:{duration:900,followup:"Stand"},Sheath:{duration:2e3,followup:"Stand"},HipSheath:{duration:2e3,followup:"Stand"},SitGroundDown:{duration:2e3,followup:"SitGround"},SitGround:{duration:null,followup:"SitGround"},SleepDown:{duration:2e3,followup:"Sleep"},Sleep:{duration:null,followup:"Sleep"},SleepUp:{duration:2e3,followup:"Stand"},LoadBow:{duration:2e3,followup:"ReadyBow"},LoadRifle:{duration:2e3,followup:"ReadyRifle"},LoadThrown:{duration:2e3,followup:"ReadyThrown"},AttackThrown:{duration:2e3,followup:"ReadyThrown"},KneelStart:{duration:2e3,followup:"KneelLoop"},KneelLoop:{duration:null,followup:"KneelLoop"},KneelEnd:{duration:2e3,followup:"Stand"},StealthWalk:{duration:null,followup:"StealthStand"},StealthStand:{duration:null,followup:"StealthStand"},Loot:{duration:3e3,followup:"Stand"},Knockdown:{duration:3e3,followup:"Stand"},UseStandingLoop:{duration:null,followup:"UseStandingLoop"},UseStandingStart:{duration:2e3,followup:"UseStandingLoop"},UseStandingEnd:{duration:2e3,followup:"Stand"},Drown:{duration:3e3,followup:"Drowned"},Drowned:{duration:null,followup:"Drowned"},FishingCast:{duration:3e3,followup:"FishingLoop"},FishingLoop:{duration:null,followup:"FishingLoop"},EmoteWorkNoSheathe:{duration:5e3,followup:"Stand"},EmoteStunNoSheathe:{duration:3e3,followup:"Stand"},EmoteUseStandingNoSheathe:{duration:5e3,followup:"Stand"}}}updateAnimation(i,r){return mt(this,null,function*(){this.animationTimeout&&(clearTimeout(this.animationTimeout),this.animationTimeout=null);let o=r.target.value;if(o===this.lastAnimation)return;if(this.lastAnimation=o,!i){console.warn("modelViewer not initialized in updateAnimation");return}let a=(l,c=20,u=500)=>{if(c<=0){console.warn(`Failed to set animation ${l}: renderer not ready after retries`);return}try{typeof i.setAnimation=="function"&&i.renderer?.actors?.[0]?(i.setAnimation(l),typeof i.setAnimPaused=="function"&&i.setAnimPaused(!1)):(console.warn(`setAnimation not available or renderer.actors[0] undefined for ${l}, retrying...`),setTimeout(()=>a(l,c-1,u),u))}catch(d){console.warn(`Error setting animation ${l}, retrying (${c} attempts left):`,d),setTimeout(()=>a(l,c-1,u),u)}};a(o);let s=this.animationConfig[o];s&&s.duration!==null&&(this.animationTimeout=setTimeout(()=>{this.lastAnimation=s.followup,a(s.followup)},s.duration))})}updateAnimation2(i,r){return mt(this,null,function*(){if(this.animationTimeout&&(clearTimeout(this.animationTimeout),this.animationTimeout=null),r===this.lastAnimation)return;if(this.lastAnimation=r,!i){console.warn("modelViewer not initialized in updateAnimation");return}let o=(s,l=20,c=500)=>{if(l<=0){console.warn(`Failed to set animation ${s}: renderer not ready after retries`);return}try{typeof i.setAnimation=="function"&&i.renderer?.actors?.[0]?(i.setAnimation(s),typeof i.setAnimPaused=="function"&&i.setAnimPaused(!1)):(console.warn(`setAnimation not available or renderer.actors[0] undefined for ${s}, retrying...`),setTimeout(()=>o(s,l-1,c),c))}catch(u){console.warn(`Error setting animation ${s}, retrying (${l} attempts left):`,u),setTimeout(()=>o(s,l-1,c),c)}};o(r);let a=this.animationConfig[r];a&&a.duration!==null&&(this.animationTimeout=setTimeout(()=>{this.lastAnimation=a.followup,o(a.followup)},a.duration))})}getAnimations(){return this.animations}setAnimations(i){this.animations=i}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var vd=(()=>{let n=class n{constructor(i){this.utilityService=i}getHelpPlayer(i,r,o,a,s,l,c){if(!i)return"<p>No player selected. Click a player in the grid to view or edit their details.</p>";let u=`
      <h3>Main Tabs (Bottom Row)</h3>
      <ul>
        <li>
          <img src="/assets/icons/inv_chest_chain.jpg" alt="Gear Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
          <strong>Gear</strong>: View and equip items, customize appearance, or purchase crafted gear.
        </li>
        <li>
          <img src="/assets/icons/inv_misc_note_01.jpg" alt="Stats Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
          <strong>Stats</strong>: Check base or buffed stats, including combat and resistance details.
        </li>
        <li>
          <img src="/assets/icons/inv_misc_book_11.jpg" alt="Spells Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
          <strong>Spells</strong>: View class-specific spells or racial abilities.
        </li>
        <li>
          <img src="/assets/icons/inv_7xp_inscription_talenttome02.jpg" alt="Spec Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
          <strong>Spec</strong>: Explore talent builds and specializations.
        </li>
        <li>
          <img src="/assets/icons/trade_engineering.jpg" alt="Gambits Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
          <strong>Gambits</strong>: Configure custom strategies or abilities (details coming soon).
        </li>
        <li>
          <img src="/assets/icons/achievement_bg_returnxflags_def_wsg.jpg" alt="Back Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
          <strong>Back</strong>: Return to the raid group grid.
        </li>
      </ul>
    `,d="";return r==="spec"?d=`
        <h3>Spec Sub-Tabs (Row Above)</h3>
        <p>Current Spec Tab: ${this.utilityService.getTalentName(i,o)}</p>
        <ul>
          ${c.map(_=>`
            <li>
              <img src="/assets/icons/${this.utilityService.getTalentIcon(i,+_)}.jpg" alt="Talent Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
              <strong>${$t[i.CLASSID]?.[+_].name}</strong>: ${o===_?"View and edit talents for this specialization.":"Switch to this specialization to view talents."}
            </li>
          `).join("")}
        </ul>
      `:r==="gear"?d=`
        <p>Current Gear Sub-Tab: ${s}</p>
        <ul>
          <li>
            <img src="/assets/icons/inv_misc_bag_08.jpg" alt="Equipment Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
            <strong>Equipment</strong>: View and swap equipped items from inventory.
          </li>
          <li>
            <img src="/assets/icons/vas_racechange.jpg" alt="Customization Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
            <strong>Customization</strong>: Adjust race, gender, and appearance (skin, face, hair, etc.).
          </li>
          <li>
            <img src="/assets/icons/inv_misc_coin_02.jpg" alt="Crafted Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
            <strong>Crafted</strong>: Purchase crafted items using guild bank resources.
          </li>
          <li>
            <img src="/assets/icons/spell_nature_astralrecalgroup.jpg" alt="Dungeon Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
            <strong>Dungeon</strong>: View items obtained from dungeon runs.
          </li>
          <li>
            <img src="/assets/icons/achievement_boss_ragnaros.jpg" alt="MC Quest Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
            <strong>MC Quest</strong>: View items from Molten Core quests.
          </li>
        </ul>
      `:r==="spells"?d=`
        <h3>Spells Sub-Tabs (Row Above)</h3>
        <p>Current Spell Tab: ${a==="class"?this.utilityService.getClassName(i.CLASSID)+" Spells":this.utilityService.getRaceName(i.RACE)+" Skills"}</p>
        <ul>
          <li>
            <img src="/assets/icons/class_${this.utilityService.getClassName(i.CLASSID).toLowerCase()}.jpg" alt="Class Spells Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
            <strong>Class Spells</strong>: ${a==="class"?"View available class-specific spells.":"Switch to view class-specific spells."}
          </li>
          <li>
            <img src="/assets/icons/achievement_character_${this.utilityService.getRaceName(i.RACE).toLowerCase()}_${i.GENDER==0?"male":"female"}.jpg" alt="Racial Skills Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
            <strong>Racial Skills</strong>: ${a==="racial"?"View racial abilities.":"Switch to view racial abilities."}
          </li>
        </ul>
      `:r==="stats"?d=`
        <h3>Stats Sub-Tabs (Row Above)</h3>
        <p>Current Stats Sub-Tab: ${l==="base"?"Base Stats":"Buffed Stats"}</p>
        <ul>
          <li>
            <img src="/assets/icons/spell_holy_blessingofstrength.jpg" alt="Base Stats Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
            <strong>Base Stats</strong>: ${l==="base"?"View unbuffed character stats.":"Switch to view unbuffed character stats."}
          </li>
          <li>
            <img src="/assets/icons/spell_nature_strength.jpg" alt="Buffed Stats Icon" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 5px;">
            <strong>Buffed Stats</strong>: ${l==="buffed"?"View stats with active buffs applied.":"Switch to view stats with active buffs."}
          </li>
        </ul>
      `:r==="gambits"&&(d=`
        <h3>Gambits Sub-Tabs (Row Above)</h3>
        <p>No sub-tabs available for Gambits.</p>
        <p>Configure custom strategies or abilities for ${i.NAME}. (Details coming soon.)</p>
      `),`
      <h2>Player Configuration: ${i.NAME}</h2>
      <p>Customize and view details for the selected player.</p>
      ${u}
      ${d}
    `}getHelpContent(i){switch(i){case"home":return`
          <h2>Welcome to MC Raiders</h2>
          <p>This is the main menu. Select an option to get started:</p>
          <ul>
            <li><strong>MC Raiders</strong>: Watch the iconic video by MyndFlame.</li>
            <li><strong>TGIF</strong>: View guild achievements and quotes.</li>
            <li><strong>Molten Core</strong>: Access the Molten Core raid (coming soon).</li>
            <li><strong>Dungeons</strong>: Assign players to dungeons to earn loot, gold and unlock more content.</li>
            <li><strong>Raid Setup</strong>: Configure raid groups and optimize gear, spec, and rotations.</li>
            <li><strong>Settings</strong>: Adjust preferences or reset progress.</li>
          </ul>
        `;case"mcr":return`
          <h2>MCR Raiders</h2>
          <p>Enjoy the music video by MyndFlame from Illegal Danish.</p>
          <p>Goal: Help the TGIF guild gear up and progress through Molten Core. Stay tuned for the raid simulation feature!</p>
        `;case"tgif":return`
          <h2>TGIF Guild</h2>
          <p>Explore the guild's history with images and memorable quotes from members.</p>
          <p>Click the return button to go back to the main menu.</p>
        `;case"mc":return`
          <h2>Molten Core</h2>
          <p>This feature is coming soon! It will allow you to simulate raids in Molten Core.</p>
        `;case"dungeon":return`
          <h2>Dungeon Assignments</h2>
          <p>Assign players to dungeon groups:</p>
          <ul>
            <li>Select a dungeon from the dropdown.</li>
            <li>Click player slots to assign or swap players.</li>
            <li>Click Run Dungeons to earn loot, gold, and unlock more content.</li>
            <ul>
              <li>Dungeon progress depends on party gear, spec, and composition relative to boss levels in the dungeon.</li>
              <li>Up to 10 dungeons can be run per week (using any mix of players).</li>
              <li>Click on composition penalty for more details of what class/spec required for best odds of success.</li>
              <li>Click on completion/abandon message to view detailed results per boss.</li>
            </ul>
            <li>Clear Players will clear all dungeon assignments.
            <li>Click Next Week after consuming all dungeon attempts and after attempting Molten Core (once added).
            <li>Check the Dungeon Info for background lore on each dungeon.</li>
            <li>Unlocks shows progress per player at unlocking higher-level content.</li>
          </ul>
        `;case"raidConfig":return`
          <h2>Raid Setup</h2>
          <p>Manage your raid group:</p>
          <ul>
            <li>Click a player to view or edit their details (gear, stats, spells, talents).</li>
            <li>Use Swap Mode to rearrange players in the grid.</li>
            <li>Optimize Gear to automatically equip the best items for selected players.</li>
          </ul>
        `;case"settings":return`
          <h2>Settings</h2>
          <p>Customize your experience:</p>
          <ul>
            <li><strong>Profanity Filter</strong>: Toggle to filter explicit content in videos.</li>
            <li><strong>Reset Progress</strong>: Hold to reset gear, dungeon and raid progress.</li>
            <li><strong>Reset Storage</strong>: Hold to clear all saved data.</li>
            <li><strong>Show Help Button</strong>: Toggle the help button visibility.</li>
          </ul>
        `;default:return"<p>Help information is not available for this section.</p>"}}};n.\u0275fac=function(r){return new(r||n)(B(Gt))},n.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var HE=(()=>{let n=class n{constructor(i){this.dungeonService=i}};n.\u0275fac=function(r){return new(r||n)(K(gd))},n.\u0275cmp=jt({type:n,selectors:[["app-moltencore"]],decls:4,vars:1,consts:[["alt","Molten Core load screen",1,"dungeon-image",3,"src"]],template:function(r,o){r&1&&(ca(0,"img",0),y(1," Coming soon"),Lo(2,"sup"),y(3,"\u2122"),Fo()),r&2&&Jc("src",o.dungeonService.getDungeonImage("Molten Core"),Ne)},styles:[".dungeon-image-container[_ngcontent-%COMP%]{position:relative;width:100%}.dungeon-image[_ngcontent-%COMP%]{width:100%;height:auto;display:block}"]});let t=n;return t})();var BE=(()=>{let n=class n{transform(i,r){return i.filter(o=>Gr.find(a=>a.slot===o.slot)?.side===r)}};n.\u0275fac=function(r){return new(r||n)},n.\u0275pipe=Bi({name:"filterBySide",type:n,pure:!0});let t=n;return t})();var UE=(()=>{let n=class n{constructor(){this.linkedSlots={11:12,12:11,13:14,14:13,21:22,22:21}}transform(i,r){if(!i||!r?.equippedItems)return i;let o=r.equippedItems.find(l=>l.slot===r.slot)?.dbId,a=this.linkedSlots[r.slot],s=a?r.equippedItems.find(l=>l.slot===a)?.dbId:null;return i.filter(l=>l!==o&&l!==s)}};n.\u0275fac=function(r){return new(r||n)},n.\u0275pipe=Bi({name:"filterEquip",type:n,pure:!0});let t=n;return t})(),_d=(()=>{let n=class n{constructor(i){this.sanitizer=i}transform(i){return this.sanitizer.bypassSecurityTrustHtml(i||"")}};n.\u0275fac=function(r){return new(r||n)(K(Pg,16))},n.\u0275pipe=Bi({name:"safeHtml",type:n,pure:!0});let t=n;return t})();var Mm;function wP(){if(Mm==null){let t=typeof document<"u"?document.head:null;Mm=!!(t&&(t.createShadowRoot||t.attachShadow))}return Mm}function yd(t){if(wP()){let n=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function Xa(t){return t.composedPath?t.composedPath()[0]:t.target}function $E(t){return t.buttons===0||t.detail===0}function GE(t){let n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!n&&n.identifier===-1&&(n.radiusX==null||n.radiusX===1)&&(n.radiusY==null||n.radiusY===1)}function Sd(t,n=0){return DP(t)?Number(t):arguments.length===2?n:0}function DP(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function Nn(t){return t instanceof Je?t.nativeElement:t}var Cd=new WeakMap,zE=(()=>{class t{_appRef;_injector=D(He);_environmentInjector=D(Ze);load(e){let i=this._appRef=this._appRef||this._injector.get(pt),r=Cd.get(i);r||(r={loaders:new Set,refs:[]},Cd.set(i,r),i.onDestroy(()=>{Cd.get(i)?.refs.forEach(o=>o.destroy()),Cd.delete(i)})),r.loaders.has(e)||(r.loaders.add(e),r.refs.push(aS(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var xm;try{xm=typeof Intl<"u"&&Intl.v8BreakIterator}catch{xm=!1}var Rm=(()=>{class t{_platformId=D(Hi);isBrowser=this._platformId?CS(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||xm)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var bP=new z("cdk-dir-doc",{providedIn:"root",factory:IP});function IP(){return D(Pe)}var TP=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function MP(t){let n=t?.toLowerCase()||"";return n==="auto"&&typeof navigator<"u"&&navigator?.language?TP.test(navigator.language)?"rtl":"ltr":n==="rtl"?"rtl":"ltr"}var Am=(()=>{class t{get value(){return this.valueSignal()}valueSignal=Vt("ltr");change=new Ee;constructor(){let e=D(bP,{optional:!0});if(e){let i=e.body?e.body.dir:null,r=e.documentElement?e.documentElement.dir:null;this.valueSignal.set(MP(i||r||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var xP=20,WE=(()=>{class t{_ngZone=D(we);_platform=D(Rm);_renderer=D(Zt).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new ne;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=xP){return this._platform.isBrowser?new oe(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=e>0?this._scrolled.pipe(Ul(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):te()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(tt(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&i.push(o)}),i}_scrollableContainsElement(e,i){let r=Nn(i),o=e.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var RP=20,qE=(()=>{class t{_platform=D(Rm);_listeners;_viewportSize;_change=new ne;_document=D(Pe);constructor(){let e=D(we),i=D(Zt).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=o=>this._change.next(o);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect(),a=-o.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,s=-o.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:a,left:s}}change(e=RP){return e>0?this._change.pipe(Ul(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var YE=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Be({})}return t})();var Pm={},KE=(()=>{class t{_appId=D(Ao);getId(e){return this._appId!=="ng"&&(e+=this._appId),Pm.hasOwnProperty(e)||(Pm[e]=0),`${e}${Pm[e]++}`}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ZE(t){return Array.isArray(t)?t:[t]}function km(t){let n=t.cloneNode(!0),e=n.querySelectorAll("[id]"),i=t.nodeName.toLowerCase();n.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return i==="canvas"?JE(t,n):(i==="input"||i==="select"||i==="textarea")&&XE(t,n),QE("canvas",t,n,JE),QE("input, textarea, select",t,n,XE),n}function QE(t,n,e,i){let r=n.querySelectorAll(t);if(r.length){let o=e.querySelectorAll(t);for(let a=0;a<r.length;a++)i(r[a],o[a])}}var AP=0;function XE(t,n){n.type!=="file"&&(n.value=t.value),n.type==="radio"&&n.name&&(n.name=`mat-clone-${n.name}-${AP++}`)}function JE(t,n){let e=n.getContext("2d");if(e)try{e.drawImage(t,0,0)}catch{}}function Um(t){let n=t.getBoundingClientRect();return{top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height,x:n.x,y:n.y}}function Lm(t,n,e){let{top:i,bottom:r,left:o,right:a}=t;return e>=i&&e<=r&&n>=o&&n<=a}function PP(t,n){let e=n.left<t.left,i=n.left+n.width>t.right,r=n.top<t.top,o=n.top+n.height>t.bottom;return e||i||r||o}function tl(t,n,e){t.top+=n,t.bottom=t.top+t.height,t.left+=e,t.right=t.left+t.width}function ew(t,n,e,i){let{top:r,right:o,bottom:a,left:s,width:l,height:c}=t,u=l*n,d=c*n;return i>r-d&&i<a+d&&e>s-u&&e<o+u}var Ed=class{_document;positions=new Map;constructor(n){this._document=n}clear(){this.positions.clear()}cache(n){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),n.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:Um(e)})})}handleScroll(n){let e=Xa(n),i=this.positions.get(e);if(!i)return null;let r=i.scrollPosition,o,a;if(e===this._document){let c=this.getViewportScrollPosition();o=c.top,a=c.left}else o=e.scrollTop,a=e.scrollLeft;let s=r.top-o,l=r.left-a;return this.positions.forEach((c,u)=>{c.clientRect&&e!==u&&e.contains(u)&&tl(c.clientRect,s,l)}),r.top=o,r.left=a,{top:s,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function fw(t,n){let e=t.rootNodes;if(e.length===1&&e[0].nodeType===n.ELEMENT_NODE)return e[0];let i=n.createElement("div");return e.forEach(r=>i.appendChild(r)),i}function $m(t,n,e){for(let i in n)if(n.hasOwnProperty(i)){let r=n[i];r?t.setProperty(i,r,e?.has(i)?"important":""):t.removeProperty(i)}return t}function ys(t,n){let e=n?"":"none";$m(t.style,{"touch-action":n?"":"none","-webkit-user-drag":n?"":"none","-webkit-tap-highlight-color":n?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function tw(t,n,e){$m(t.style,{position:n?"":"fixed",top:n?"":"0",opacity:n?"":"0",left:n?"":"-999em"},e)}function wd(t,n){return n&&n!="none"?t+" "+n:t}function nw(t,n){t.style.width=`${n.width}px`,t.style.height=`${n.height}px`,t.style.transform=nl(n.left,n.top)}function nl(t,n){return`translate3d(${Math.round(t)}px, ${Math.round(n)}px, 0)`}function iw(t){let n=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*n}function NP(t){let n=getComputedStyle(t),e=Nm(n,"transition-property"),i=e.find(s=>s==="transform"||s==="all");if(!i)return 0;let r=e.indexOf(i),o=Nm(n,"transition-duration"),a=Nm(n,"transition-delay");return iw(o[r])+iw(a[r])}function Nm(t,n){return t.getPropertyValue(n).split(",").map(i=>i.trim())}var OP=new Set(["position"]),Fm=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(n,e,i,r,o,a,s,l,c,u){this._document=n,this._rootElement=e,this._direction=i,this._initialDomRect=r,this._previewTemplate=o,this._previewClass=a,this._pickupPositionOnPage=s,this._initialTransform=l,this._zIndex=c,this._renderer=u}attach(n){this._preview=this._createPreview(),n.appendChild(this._preview),rw(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(n){this._preview.style.transform=n}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(n){this._preview.classList.add(n)}getTransitionDuration(){return NP(this._preview)}addEventListener(n,e){return this._renderer.listen(this._preview,n,e)}_createPreview(){let n=this._previewTemplate,e=this._previewClass,i=n?n.template:null,r;if(i&&n){let o=n.matchSize?this._initialDomRect:null,a=n.viewContainer.createEmbeddedView(i,n.context);a.detectChanges(),r=fw(a,this._document),this._previewEmbeddedView=a,n.matchSize?nw(r,o):r.style.transform=nl(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=km(this._rootElement),nw(r,this._initialDomRect),this._initialTransform&&(r.style.transform=this._initialTransform);return $m(r.style,{"pointer-events":"none",margin:rw(r)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},OP),ys(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("popover","manual"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(o=>r.classList.add(o)):r.classList.add(e)),r}};function rw(t){return"showPopover"in t}var kP={passive:!0},ow={passive:!1},LP={passive:!1,capture:!0},FP=800,sw="cdk-drag-placeholder",aw=new Set(["position"]),Vm=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=Vt(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new ne;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=Me.EMPTY;_pointerUpSubscription=Me.EMPTY;_scrollSubscription=Me.EMPTY;_resizeSubscription=Me.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(n){n!==this._disabled&&(this._disabled=n,this._toggleNativeDragInteractions(),this._handles.forEach(e=>ys(e,n)))}_disabled=!1;beforeStarted=new ne;started=new ne;released=new ne;ended=new ne;entered=new ne;exited=new ne;dropped=new ne;moved=this._moveEvents;data;constrainPosition;constructor(n,e,i,r,o,a,s){this._config=e,this._document=i,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=a,this._renderer=s,this.withRootElement(n).withParent(e.parentDragRef||null),this._parentPositions=new Ed(i),a.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(n){this._handles=n.map(i=>Nn(i)),this._handles.forEach(i=>ys(i,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(n){return this._previewTemplate=n,this}withPlaceholderTemplate(n){return this._placeholderTemplate=n,this}withRootElement(n){let e=Nn(n);if(e!==this._rootElement){this._removeRootElementListeners();let i=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[i.listen(e,"mousedown",this._pointerDown,ow),i.listen(e,"touchstart",this._pointerDown,kP),i.listen(e,"dragstart",this._nativeDragStart,ow)]),this._initialTransform=void 0,this._rootElement=e}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(n){return this._boundaryElement=n?Nn(n):null,this._resizeSubscription.unsubscribe(),n&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(n){return this._parentDragRef=n,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&PP(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let n=this._boundaryElement.getBoundingClientRect(),e=this._rootElement.getBoundingClientRect(),i=0,r=0;e.left<n.left?i=n.left-e.left:e.right>n.right&&(i=n.right-e.right),e.top<n.top?r=n.top-e.top:e.bottom>n.bottom&&(r=n.bottom-e.bottom);let o=this._activeTransform.x,a=this._activeTransform.y,s=o+i,l=a+r;this._rootElement.style.transform=nl(s,l),this._activeTransform={x:s,y:l},this._passiveTransform={x:s,y:l}}}disableHandle(n){!this._disabledHandles.has(n)&&this._handles.indexOf(n)>-1&&(this._disabledHandles.add(n),ys(n,!0))}enableHandle(n){this._disabledHandles.has(n)&&(this._disabledHandles.delete(n),ys(n,this.disabled))}withDirection(n){return this._direction=n,this}_withDropContainer(n){this._dropContainer=n}getFreeDragPosition(){let n=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:n.x,y:n.y}}setFreeDragPosition(n){return this._activeTransform={x:0,y:0},this._passiveTransform.x=n.x,this._passiveTransform.y=n.y,this._dropContainer||this._applyRootElementTransform(n.x,n.y),this}withPreviewContainer(n){return this._previewContainer=n,this}_sortFromLastPointerPosition(){let n=this._lastKnownPointerPosition;n&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(n),n)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=n=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(n);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,n)}else this.disabled||this._initializeDragSequence(this._rootElement,n)};_pointerMove=n=>{let e=this._getPointerPositionOnPage(n);if(!this._hasStartedDragging()){let r=Math.abs(e.x-this._pickupPositionOnPage.x),o=Math.abs(e.y-this._pickupPositionOnPage.y);if(r+o>=this._config.dragStartThreshold){let s=Date.now()>=this._dragStartTime+this._getDragStartDelay(n),l=this._dropContainer;if(!s){this._endDragSequence(n);return}(!l||!l.isDragging()&&!l.isReceiving())&&(n.cancelable&&n.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(n)))}return}n.cancelable&&n.preventDefault();let i=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,e);else{let r=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=i.x-r.x+this._passiveTransform.x,o.y=i.y-r.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:n,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=n=>{this._endDragSequence(n)};_endDragSequence(n){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:n}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(n),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(n);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:n})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(n){Ja(n)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),i=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(e,"selectstart",VP,LP)}),i){let r=this._rootElement,o=r.parentNode,a=this._placeholder=this._createPlaceholderElement(),s=this._marker=this._marker||this._document.createComment("");o.insertBefore(s,r),this._initialTransform=r.style.transform||"",this._preview=new Fm(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,e)),tw(r,!1,aw),this._document.body.appendChild(o.replaceChild(a,r)),this.started.next({source:this,event:n}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:n}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(n,e){this._parentDragRef&&e.stopPropagation();let i=this.isDragging(),r=Ja(e),o=!r&&e.button!==0,a=this._rootElement,s=Xa(e),l=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+FP>Date.now(),c=r?GE(e):$E(e);if(s&&s.draggable&&e.type==="mousedown"&&e.preventDefault(),i||o||l||c)return;if(this._handles.length){let _=a.style;this._rootElementTapHighlight=_.webkitTapHighlightColor||"",_.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(_=>this._updateOnScroll(_)),this._boundaryElement&&(this._boundaryRect=Um(this._boundaryElement));let u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,n,e);let d=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:d.x,y:d.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(n){tw(this._rootElement,!0,aw),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,i=e.getItemIndex(this),r=this._getPointerPositionOnPage(n),o=this._getDragDistance(r),a=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r,event:n}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:o,dropPoint:r,event:n}),e.drop(this,i,this._initialIndex,this._initialContainer,a,o,r,n),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:n,y:e},{x:i,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,n,e);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(n,e)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{let a=this._dropContainer.getItemIndex(this),s=this._dropContainer.getItemAtIndex(a+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(o,this._dropContainer,s),this._dropContainer=o,this._dropContainer.enter(this,n,e,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,n,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(n,e):this._applyPreviewTransform(n-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let n=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(n.left,n.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let r=s=>{(!s||this._preview&&Xa(s)===this._preview.element&&s.propertyName==="transform")&&(a(),i(),clearTimeout(o))},o=setTimeout(r,e*1.5),a=this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){let n=this._placeholderTemplate,e=n?n.template:null,i;return e?(this._placeholderRef=n.viewContainer.createEmbeddedView(e,n.context),this._placeholderRef.detectChanges(),i=fw(this._placeholderRef,this._document)):i=km(this._rootElement),i.style.pointerEvents="none",i.classList.add(sw),i}_getPointerPositionInElement(n,e,i){let r=e===this._rootElement?null:e,o=r?r.getBoundingClientRect():n,a=Ja(i)?i.targetTouches[0]:i,s=this._getViewportScrollPosition(),l=a.pageX-o.left-s.left,c=a.pageY-o.top-s.top;return{x:o.left-n.left+l,y:o.top-n.top+c}}_getPointerPositionOnPage(n){let e=this._getViewportScrollPosition(),i=Ja(n)?n.touches[0]||n.changedTouches[0]||{pageX:0,pageY:0}:n,r=i.pageX-e.left,o=i.pageY-e.top;if(this._ownerSVGElement){let a=this._ownerSVGElement.getScreenCTM();if(a){let s=this._ownerSVGElement.createSVGPoint();return s.x=r,s.y=o,s.matrixTransform(a.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(n){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:r}=this.constrainPosition?this.constrainPosition(n,this,this._initialDomRect,this._pickupPositionInElement):n;if(this.lockAxis==="x"||e==="x"?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:a}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,s=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),u=s.top+a,d=s.bottom-(c-a),_=s.left+o,f=s.right-(l-o);i=lw(i,_,f),r=lw(r,u,d)}return{x:i,y:r}}_updatePointerDirectionDelta(n){let{x:e,y:i}=n,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,a=Math.abs(e-o.x),s=Math.abs(i-o.y);return a>this._config.pointerDirectionChangeThreshold&&(r.x=e>o.x?1:-1,o.x=e),s>this._config.pointerDirectionChangeThreshold&&(r.y=i>o.y?1:-1,o.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let n=this._handles.length>0||!this.isDragging();n!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=n,ys(this._rootElement,n))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(n=>n()),this._rootElementCleanups=void 0}_applyRootElementTransform(n,e){let i=1/this.scale,r=nl(n*i,e*i),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=wd(r,this._initialTransform)}_applyPreviewTransform(n,e){let i=this._previewTemplate?.template?void 0:this._initialTransform,r=nl(n,e);this._preview.setTransform(wd(r,i))}_getDragDistance(n){let e=this._pickupPositionOnPage;return e?{x:n.x-e.x,y:n.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:n,y:e}=this._passiveTransform;if(n===0&&e===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(r.width===0&&r.height===0||i.width===0&&i.height===0)return;let o=r.left-i.left,a=i.right-r.right,s=r.top-i.top,l=i.bottom-r.bottom;r.width>i.width?(o>0&&(n+=o),a>0&&(n-=a)):n=0,r.height>i.height?(s>0&&(e+=s),l>0&&(e-=l)):e=0,(n!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:n})}_getDragStartDelay(n){let e=this.dragStartDelay;return typeof e=="number"?e:Ja(n)?e.touch:e?e.mouse:0}_updateOnScroll(n){let e=this._parentPositions.handleScroll(n);if(e){let i=Xa(n);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&tl(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=yd(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(n,e){let i=this._previewContainer||"global";if(i==="parent")return n;if(i==="global"){let r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return Nn(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=n=>{if(this._handles.length){let e=this._getTargetHandle(n);e&&!this._disabledHandles.has(e)&&!this.disabled&&n.preventDefault()}else this.disabled||n.preventDefault()};_getTargetHandle(n){return this._handles.find(e=>n.target&&(n.target===e||e.contains(n.target)))}_conditionallyInsertAnchor(n,e,i){if(n===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(e===this._initialContainer&&e.hasAnchor){let r=this._anchor??=km(this._placeholder);r.classList.remove(sw),r.classList.add("cdk-drag-anchor"),r.style.transform="",i?i.before(r):Nn(e.element).appendChild(r)}}};function lw(t,n,e){return Math.max(n,Math.min(e,t))}function Ja(t){return t.type[0]==="t"}function VP(t){t.preventDefault()}function bd(t,n,e){let i=cw(n,t.length-1),r=cw(e,t.length-1);if(i===r)return;let o=t[i],a=r<i?-1:1;for(let s=i;s!==r;s+=a)t[s]=t[s+a];t[r]=o}function cw(t,n){return Math.max(0,Math.min(n,t))}var Dd=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(n){this._dragDropRegistry=n}_previousSwap={drag:null,delta:0,overlaps:!1};start(n){this.withItems(n)}sort(n,e,i,r){let o=this._itemPositions,a=this._getItemIndexFromPointerPosition(n,e,i,r);if(a===-1&&o.length>0)return null;let s=this.orientation==="horizontal",l=o.findIndex(b=>b.drag===n),c=o[a],u=o[l].clientRect,d=c.clientRect,_=l>a?1:-1,f=this._getItemOffsetPx(u,d,_),v=this._getSiblingOffsetPx(l,o,_),T=o.slice();return bd(o,l,a),o.forEach((b,M)=>{if(T[M]===b)return;let W=b.drag===n,H=W?f:v,O=W?n.getPlaceholderElement():b.drag.getRootElement();b.offset+=H;let V=Math.round(b.offset*(1/b.drag.scale));s?(O.style.transform=wd(`translate3d(${V}px, 0, 0)`,b.initialTransform),tl(b.clientRect,0,H)):(O.style.transform=wd(`translate3d(0, ${V}px, 0)`,b.initialTransform),tl(b.clientRect,H,0))}),this._previousSwap.overlaps=Lm(d,e,i),this._previousSwap.drag=c.drag,this._previousSwap.delta=s?r.x:r.y,{previousIndex:l,currentIndex:a}}enter(n,e,i,r){let o=r==null||r<0?this._getItemIndexFromPointerPosition(n,e,i):r,a=this._activeDraggables,s=a.indexOf(n),l=n.getPlaceholderElement(),c=a[o];if(c===n&&(c=a[o+1]),!c&&(o==null||o===-1||o<a.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(c=a[0]),s>-1&&a.splice(s,1),c&&!this._dragDropRegistry.isDragging(c)){let u=c.getRootElement();u.parentElement.insertBefore(l,u),a.splice(o,0,n)}else this._element.appendChild(l),a.push(n);l.style.transform="",this._cacheItemPositions()}withItems(n){this._activeDraggables=n.slice(),this._cacheItemPositions()}withSortPredicate(n){this._sortPredicate=n}reset(){this._activeDraggables?.forEach(n=>{let e=n.getRootElement();if(e){let i=this._itemPositions.find(r=>r.drag===n)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(n){return this._getVisualItemPositions().findIndex(e=>e.drag===n)}getItemAtIndex(n){return this._getVisualItemPositions()[n]?.drag||null}updateOnScroll(n,e){this._itemPositions.forEach(({clientRect:i})=>{tl(i,n,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(n){this._element=n}_cacheItemPositions(){let n=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:Um(i)}}).sort((e,i)=>n?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(n,e,i){let r=this.orientation==="horizontal",o=r?e.left-n.left:e.top-n.top;return i===-1&&(o+=r?e.width-n.width:e.height-n.height),o}_getSiblingOffsetPx(n,e,i){let r=this.orientation==="horizontal",o=e[n].clientRect,a=e[n+i*-1],s=o[r?"width":"height"]*i;if(a){let l=r?"left":"top",c=r?"right":"bottom";i===-1?s-=a.clientRect[l]-o[c]:s+=o[l]-a.clientRect[c]}return s}_shouldEnterAsFirstChild(n,e){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,r=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let a=i[i.length-1].clientRect;return r?n>=a.right:e>=a.bottom}else{let a=i[0].clientRect;return r?n<=a.left:e<=a.top}}_getItemIndexFromPointerPosition(n,e,i,r){let o=this.orientation==="horizontal",a=this._itemPositions.findIndex(({drag:s,clientRect:l})=>{if(s===n)return!1;if(r){let c=o?r.x:r.y;if(s===this._previousSwap.drag&&this._previousSwap.overlaps&&c===this._previousSwap.delta)return!1}return o?e>=Math.floor(l.left)&&e<Math.floor(l.right):i>=Math.floor(l.top)&&i<Math.floor(l.bottom)});return a===-1||!this._sortPredicate(a,n)?-1:a}},jm=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(n,e){this._document=n,this._dragDropRegistry=e}start(n){let e=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<e.length;i++){let r=e[i];this._relatedNodes.push([r,r.nextSibling])}this.withItems(n)}sort(n,e,i,r){let o=this._getItemIndexFromPointerPosition(n,e,i),a=this._previousSwap;if(o===-1||this._activeItems[o]===n)return null;let s=this._activeItems[o];if(a.drag===s&&a.overlaps&&a.deltaX===r.x&&a.deltaY===r.y)return null;let l=this.getItemIndex(n),c=n.getPlaceholderElement(),u=s.getRootElement();o>l?u.after(c):u.before(c),bd(this._activeItems,l,o);let d=this._getRootNode().elementFromPoint(e,i);return a.deltaX=r.x,a.deltaY=r.y,a.drag=s,a.overlaps=u===d||u.contains(d),{previousIndex:l,currentIndex:o}}enter(n,e,i,r){let o=this._activeItems.indexOf(n);o>-1&&this._activeItems.splice(o,1);let a=r==null||r<0?this._getItemIndexFromPointerPosition(n,e,i):r;a===-1&&(a=this._getClosestItemIndexToPointer(n,e,i));let s=this._activeItems[a];s&&!this._dragDropRegistry.isDragging(s)?(this._activeItems.splice(a,0,n),s.getRootElement().before(n.getPlaceholderElement())):(this._activeItems.push(n),this._element.appendChild(n.getPlaceholderElement()))}withItems(n){this._activeItems=n.slice()}withSortPredicate(n){this._sortPredicate=n}reset(){let n=this._element,e=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[r,o]=this._relatedNodes[i];r.parentNode===n&&r.nextSibling!==o&&(o===null?n.appendChild(r):o.parentNode===n&&n.insertBefore(r,o))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(n){return this._activeItems.indexOf(n)}getItemAtIndex(n){return this._activeItems[n]||null}updateOnScroll(){this._activeItems.forEach(n=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}withElementContainer(n){n!==this._element&&(this._element=n,this._rootNode=void 0)}_getItemIndexFromPointerPosition(n,e,i){let r=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(i)),o=r?this._activeItems.findIndex(a=>{let s=a.getRootElement();return r===s||s.contains(r)}):-1;return o===-1||!this._sortPredicate(o,n)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=yd(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(n,e,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let r=1/0,o=-1;for(let a=0;a<this._activeItems.length;a++){let s=this._activeItems[a];if(s!==n){let{x:l,y:c}=s.getRootElement().getBoundingClientRect(),u=Math.hypot(e-l,i-c);u<r&&(r=u,o=a)}}return o}},uw=.05,hw=.05,mn=function(t){return t[t.NONE=0]="NONE",t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t}(mn||{}),kt=function(t){return t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t}(kt||{}),Hm=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new ne;entered=new ne;exited=new ne;dropped=new ne;sorted=new ne;receivingStarted=new ne;receivingStopped=new ne;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Me.EMPTY;_verticalScrollDirection=mn.NONE;_horizontalScrollDirection=kt.NONE;_scrollNode;_stopScrollTimers=new ne;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(n,e,i,r,o){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=o;let a=this.element=Nn(n);this._document=i,this.withOrientation("vertical").withElementContainer(a),e.registerDropContainer(this),this._parentPositions=new Ed(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(n,e,i,r){this._draggingStarted(),r==null&&this.sortingDisabled&&(r=this._draggables.indexOf(n)),this._sortStrategy.enter(n,e,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:n,container:this,currentIndex:this.getItemIndex(n)})}exit(n){this._reset(),this.exited.next({item:n,container:this})}drop(n,e,i,r,o,a,s,l={}){this._reset(),this.dropped.next({item:n,currentIndex:e,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:o,distance:a,dropPoint:s,event:l})}withItems(n){let e=this._draggables;return this._draggables=n,n.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>n.indexOf(r)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(n){return this._direction=n,this._sortStrategy instanceof Dd&&(this._sortStrategy.direction=n),this}connectedTo(n){return this._siblings=n.slice(),this}withOrientation(n){if(n==="mixed")this._sortStrategy=new jm(this._document,this._dragDropRegistry);else{let e=new Dd(this._dragDropRegistry);e.direction=this._direction,e.orientation=n,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,i)=>this.sortPredicate(e,i,this)),this}withScrollableParents(n){let e=this._container;return this._scrollableElements=n.indexOf(e)===-1?[e,...n]:n.slice(),this}withElementContainer(n){if(n===this._container)return this;let e=Nn(this.element),i=this._scrollableElements.indexOf(this._container),r=this._scrollableElements.indexOf(n);return i>-1&&this._scrollableElements.splice(i,1),r>-1&&this._scrollableElements.splice(r,1),this._sortStrategy&&this._sortStrategy.withElementContainer(n),this._cachedShadowRoot=null,this._scrollableElements.unshift(n),this._container=n,this}getScrollableParents(){return this._scrollableElements}getItemIndex(n){return this._isDragging?this._sortStrategy.getItemIndex(n):this._draggables.indexOf(n)}getItemAtIndex(n){return this._isDragging?this._sortStrategy.getItemAtIndex(n):this._draggables[n]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(n,e,i,r){if(this.sortingDisabled||!this._domRect||!ew(this._domRect,uw,e,i))return;let o=this._sortStrategy.sort(n,e,i,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:n})}_startScrollingIfNecessary(n,e){if(this.autoScrollDisabled)return;let i,r=mn.NONE,o=kt.NONE;if(this._parentPositions.positions.forEach((a,s)=>{s===this._document||!a.clientRect||i||ew(a.clientRect,uw,n,e)&&([r,o]=jP(s,a.clientRect,this._direction,n,e),(r||o)&&(i=s))}),!r&&!o){let{width:a,height:s}=this._viewportRuler.getViewportSize(),l={width:a,height:s,top:0,right:a,bottom:s,left:0};r=pw(l,e),o=gw(l,n),i=window}i&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=i,(r||o)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let n=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=n.msScrollSnapType||n.scrollSnapType||"",n.scrollSnapType=n.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let n=this._container.style;n.scrollSnapType=n.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),Qd(0,El).pipe(Hn(this._stopScrollTimers)).subscribe(()=>{let n=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===mn.UP?n.scrollBy(0,-e):this._verticalScrollDirection===mn.DOWN&&n.scrollBy(0,e),this._horizontalScrollDirection===kt.LEFT?n.scrollBy(-e,0):this._horizontalScrollDirection===kt.RIGHT&&n.scrollBy(e,0)})};_isOverContainer(n,e){return this._domRect!=null&&Lm(this._domRect,n,e)}_getSiblingContainerFromPosition(n,e,i){return this._siblings.find(r=>r._canReceive(n,e,i))}_canReceive(n,e,i){if(!this._domRect||!Lm(this._domRect,e,i)||!this.enterPredicate(n,this))return!1;let r=this._getShadowRoot().elementFromPoint(e,i);return r?r===this._container||this._container.contains(r):!1}_startReceiving(n,e){let i=this._activeSiblings;!i.has(n)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(n),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:n,receiver:this,items:e}))}_stopReceiving(n){this._activeSiblings.delete(n),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:n,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(n=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(n);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let n=yd(this._container);this._cachedShadowRoot=n||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let n=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,n))}};function pw(t,n){let{top:e,bottom:i,height:r}=t,o=r*hw;return n>=e-o&&n<=e+o?mn.UP:n>=i-o&&n<=i+o?mn.DOWN:mn.NONE}function gw(t,n){let{left:e,right:i,width:r}=t,o=r*hw;return n>=e-o&&n<=e+o?kt.LEFT:n>=i-o&&n<=i+o?kt.RIGHT:kt.NONE}function jP(t,n,e,i,r){let o=pw(n,r),a=gw(n,i),s=mn.NONE,l=kt.NONE;if(o){let c=t.scrollTop;o===mn.UP?c>0&&(s=mn.UP):t.scrollHeight-c>t.clientHeight&&(s=mn.DOWN)}if(a){let c=t.scrollLeft;e==="rtl"?a===kt.RIGHT?c<0&&(l=kt.RIGHT):t.scrollWidth+c>t.clientWidth&&(l=kt.LEFT):a===kt.LEFT?c>0&&(l=kt.LEFT):t.scrollWidth-c>t.clientWidth&&(l=kt.RIGHT)}return[s,l]}var el={capture:!0},Om={passive:!1,capture:!0},HP=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=jt({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,r){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return t})(),Gm=(()=>{class t{_ngZone=D(we);_document=D(Pe);_styleLoader=D(zE);_renderer=D(Zt).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new ne;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=Vt([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new ne;pointerUp=new ne;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,Om)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,i){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(HP),this._activeDragInstances.update(r=>[...r,e]),this._activeDragInstances().length===1)){let r=i.type.startsWith("touch"),o=s=>this.pointerUp.next(s),a=[["scroll",s=>this._scroll.next(s),el],["selectstart",this._preventDefaultWhileDragging,Om]];r?a.push(["touchend",o,el],["touchcancel",o,el]):a.push(["mouseup",o,el]),r||a.push(["mousemove",s=>this.pointerMove.next(s),Om]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=a.map(([s,l,c])=>this._renderer.listen(this._document,s,l,c))})}}stopDragging(e){this._activeDragInstances.update(i=>{let r=i.indexOf(e);return r>-1?(i.splice(r,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let i=[this._scroll];return e&&e!==this._document&&i.push(new oe(r=>this._ngZone.runOutsideAngular(()=>{let o=this._renderer.listen(e,"scroll",a=>{this._activeDragInstances().length&&r.next(a)},el);return()=>{o()}}))),Rs(...i)}registerDirectiveNode(e,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,i)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),BP={dragStartThreshold:5,pointerDirectionChangeThreshold:5},zm=(()=>{class t{_document=D(Pe);_ngZone=D(we);_viewportRuler=D(qE);_dragDropRegistry=D(Gm);_renderer=D(Zt).createRenderer(null,null);constructor(){}createDrag(e,i=BP){return new Vm(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new Hm(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bm=new z("CDK_DRAG_PARENT");var mw=new z("CdkDragHandle"),vw=(()=>{class t{element=D(Je);_parentDrag=D(Bm,{optional:!0,skipSelf:!0});_dragDropRegistry=D(Gm);_stateChanges=new ne;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let e=this.element.nativeElement.parentElement;for(;e;){let i=this._dragDropRegistry.getDragDirectiveForNode(e);if(i){this._parentDrag=i,i._addHandle(this);break}e=e.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=Oe({type:t,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",fn]},features:[Bt([{provide:mw,useExisting:t}])]})}return t})(),_w=new z("CDK_DRAG_CONFIG"),yw=new z("CdkDropList"),Sw=(()=>{class t{element=D(Je);dropContainer=D(yw,{optional:!0,skipSelf:!0});_ngZone=D(we);_viewContainerRef=D(un);_dir=D(Am,{optional:!0});_changeDetectorRef=D(Ut);_selfHandle=D(mw,{optional:!0,self:!0});_parentDrag=D(Bm,{optional:!0,skipSelf:!0});_dragDropRegistry=D(Gm);_destroyed=new ne;_handles=new Le([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new Ee;released=new Ee;ended=new Ee;entered=new Ee;exited=new Ee;dropped=new Ee;moved=new oe(e=>{let i=this._dragRef.moved.pipe(ie(r=>({source:this,pointerPosition:r.pointerPosition,event:r.event,delta:r.delta,distance:r.distance}))).subscribe(e);return()=>{i.unsubscribe()}});_injector=D(He);constructor(){let e=this.dropContainer,i=D(_w,{optional:!0}),r=D(zm);this._dragRef=r.createDrag(this.element,{dragStartThreshold:i&&i.dragStartThreshold!=null?i.dragStartThreshold:5,pointerDirectionChangeThreshold:i&&i.pointerDirectionChangeThreshold!=null?i.pointerDirectionChangeThreshold:5,zIndex:i?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),i&&this._assignDefaults(i),e&&(e.addItem(this),e._dropListRef.beforeStarted.pipe(Hn(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){Ui(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let i=e.rootElementSelector,r=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let i=this._handles.getValue();i.push(e),this._handles.next(i)}_removeHandle(e){let i=this._handles.getValue(),r=i.indexOf(e);r>-1&&(i.splice(r,1),this._handles.next(i))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,i=e;this.rootElementSelector&&(i=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):Nn(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let i=this._dir,r=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof r=="object"&&r?r:Sd(r),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe(vt(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){let r=this._dragDropRegistry.getDragDirectiveForNode(i);if(r){e.withParent(r._dragRef);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){let{lockAxis:i,dragStartDelay:r,constrainPosition:o,previewClass:a,boundaryElement:s,draggingDisabled:l,rootElementSelector:c,previewContainer:u}=e;this.disabled=l??!1,this.dragStartDelay=r||0,i&&(this.lockAxis=i),o&&(this.constrainPosition=o),a&&(this.previewClass=a),s&&(this.boundaryElement=s),c&&(this.rootElementSelector=c),u&&(this.previewContainer=u)}_setupHandlesListener(){this._handles.pipe(Xe(e=>{let i=e.map(r=>r.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),Ue(e=>Rs(...e.map(i=>i._stateChanges.pipe(lr(i))))),Hn(this._destroyed)).subscribe(e=>{let i=this._dragRef,r=e.element.nativeElement;e.disabled?i.disableHandle(r):i.enableHandle(r)})}static \u0275fac=function(i){return new(i||t)};static \u0275dir=Oe({type:t,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,r){i&2&&De("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",fn],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",ng]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Bt([{provide:Bm,useExisting:t}]),ln]})}return t})(),dw=new z("CdkDropListGroup");var Cw=(()=>{class t{element=D(Je);_changeDetectorRef=D(Ut);_scrollDispatcher=D(WE);_dir=D(Am,{optional:!0});_group=D(dw,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new ne;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=D(KE).getId("cdk-drop-list-");lockAxis;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;hasAnchor;dropped=new Ee;entered=new Ee;exited=new Ee;sorted=new Ee;_unsortedItems=new Set;constructor(){let e=D(zm),i=D(_w,{optional:!0});this._dropListRef=e.createDropList(this.element),this._dropListRef.data=this,i&&this._assignDefaults(i),this._dropListRef.enterPredicate=(r,o)=>this.enterPredicate(r.data,o.data),this._dropListRef.sortPredicate=(r,o,a)=>this.sortPredicate(r,o.data,a.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),t._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(e){this._unsortedItems.add(e),e._dragRef._withDropContainer(this._dropListRef),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef))}removeItem(e){if(this._unsortedItems.delete(e),this._latestSortedRefs){let i=this._latestSortedRefs.indexOf(e._dragRef);i>-1&&(this._latestSortedRefs.splice(i,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((e,i)=>e._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=t._dropLists.indexOf(this);e>-1&&t._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(lr(this._dir.value),Hn(this._destroyed)).subscribe(i=>e.withDirection(i)),e.beforeStarted.subscribe(()=>{let i=ZE(this.connectedTo).map(r=>{if(typeof r=="string"){let o=t._dropLists.find(a=>a.id===r);return o}return r});if(this._group&&this._group._items.forEach(r=>{i.indexOf(r)===-1&&i.push(r)}),!this._scrollableParentsResolved){let r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let r=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(r)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=Sd(this.autoScrollStep,2),e.hasAnchor=this.hasAnchor,e.connectedTo(i.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef)),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),Rs(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:i,draggingDisabled:r,sortingDisabled:o,listAutoScrollDisabled:a,listOrientation:s}=e;this.disabled=r??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=a??!1,this.orientation=s||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(e){this._latestSortedRefs=e,this._dropListRef.withItems(e)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=Oe({type:t,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,r){i&2&&(Mn("id",r.id),De("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",fn],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",fn],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",fn],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"],hasAnchor:[2,"cdkDropListHasAnchor","hasAnchor",fn]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[Bt([{provide:dw,useValue:void 0},{provide:yw,useExisting:t}])]})}return t})();var Ew=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Be({providers:[zm],imports:[YE]})}return t})();window.CONTENT_PATH||(window.CONTENT_PATH="http://localhost:3001/modelviewer/live/");window.WOTLK_TO_RETAIL_DISPLAY_ID_API||(window.WOTLK_TO_RETAIL_DISPLAY_ID_API="https://wotlk.murlocvillage.com/api/items");var Wm=class{getImageExtension(){return".webp"}};window.WH||(window.WH={},window.WH.debug=function(...t){},window.WH.defaultAnimation="Stand",window.WH.WebP=new Wm,window.WH.Wow={Item:{INVENTORY_TYPE_HEAD:1,INVENTORY_TYPE_NECK:2,INVENTORY_TYPE_SHOULDERS:3,INVENTORY_TYPE_SHIRT:4,INVENTORY_TYPE_CHEST:5,INVENTORY_TYPE_WAIST:6,INVENTORY_TYPE_LEGS:7,INVENTORY_TYPE_FEET:8,INVENTORY_TYPE_WRISTS:9,INVENTORY_TYPE_HANDS:10,INVENTORY_TYPE_FINGER:11,INVENTORY_TYPE_TRINKET:12,INVENTORY_TYPE_ONE_HAND:13,INVENTORY_TYPE_SHIELD:14,INVENTORY_TYPE_RANGED:15,INVENTORY_TYPE_BACK:16,INVENTORY_TYPE_TWO_HAND:17,INVENTORY_TYPE_BAG:18,INVENTORY_TYPE_TABARD:19,INVENTORY_TYPE_ROBE:20,INVENTORY_TYPE_MAIN_HAND:21,INVENTORY_TYPE_OFF_HAND:22,INVENTORY_TYPE_HELD_IN_OFF_HAND:23,INVENTORY_TYPE_PROJECTILE:24,INVENTORY_TYPE_THROWN:25,INVENTORY_TYPE_RANGED_RIGHT:26,INVENTORY_TYPE_QUIVER:27,INVENTORY_TYPE_RELIC:28,INVENTORY_TYPE_PROFESSION_TOOL:29,INVENTORY_TYPE_PROFESSION_ACCESSORY:30}});var U9=window.WH;var $P=[2,11,12,13,14],ww={ARMOR:128,CHARACTER:16,COLLECTION:1024,HELM:2,HUMANOIDNPC:32,ITEM:1,ITEMVISUAL:512,NPC:8,OBJECT:64,PATH:256,SHOULDER:4},Id=()=>({Face:"face","Skin Color":"skin","Hair Style":"hairStyle","Hair Color":"hairColor","Facial Hair":"facialStyle",Mustache:"facialStyle",Beard:"facialStyle",Sideburns:"facialStyle","Face Shape":"facialStyle",Eyebrow:"facialStyle","Jaw Features":void 0,"Face Features":void 0,"Skin Type":void 0,Ears:window.WOTLK_TO_RETAIL_DISPLAY_ID_API?void 0:"ears","Fur Color":window.WOTLK_TO_RETAIL_DISPLAY_ID_API?void 0:"furColor",Snout:"snout",Blindfold:void 0,Tattoo:void 0,"Eye Color":void 0,"Tattoo Color":void 0,Armbands:void 0,"Jewelry Color":void 0,Bracelets:void 0,Necklace:void 0,Earring:void 0,"Primary Color":window.WOTLK_TO_RETAIL_DISPLAY_ID_API?void 0:"primaryColor","Secondary Color Strength":window.WOTLK_TO_RETAIL_DISPLAY_ID_API?void 0:"secondaryColorStrength","Secondary Color":window.WOTLK_TO_RETAIL_DISPLAY_ID_API?void 0:"secondaryColor","Horn Color":window.WOTLK_TO_RETAIL_DISPLAY_ID_API?void 0:"hornColor",Horns:window.WOTLK_TO_RETAIL_DISPLAY_ID_API?void 0:"horns","Body Size":window.WOTLK_TO_RETAIL_DISPLAY_ID_API?void 0:"bodySize"});function GP(t){return t?t.Id:void 0}function qm(t,n){let e=n.Options,i=[],r=[];for(let o in Id()){let a=e.find(l=>l.Name===o);if(!a)continue;let s={optionId:a.Id,choiceId:Id()[o]?GP(a.Choices[t[Id()[o]]]):a.Choices[0].Id};s.choiceId===void 0&&i.push(Id()[o]),r.push(s)}return console.warn("In character: ",t,"the following options are missing",i),r}function Dw(t,n){let{race:e,gender:i}=t,r=t.items?t.items.filter(l=>!$P.includes(l[0])):[],a={options:qm(t,n)},s={items:r,models:{id:e*2-1+i,type:ww.CHARACTER}};return t.noCharCustomization||(s.charCustomization=a),s}function bw(t,n){return mt(this,null,function*(){let e=t*2-1+n,i=yield fetch(`${window.CONTENT_PATH}meta/charactercustomization/${e}.json`).then(r=>r.json());return i.data?i.data:i})}var oi=class extends ZamModelViewer{getListAnimations(){return[...new Set(this.renderer.actors[0].d.c.y.map(n=>n.g))]}setDistance(n){this.renderer.distance=n}setSheath(n){this.renderer.actors[0].setSheath(n)}setAnimation(n){this.renderer.actors[0].setAnimation(n)}setAnimPaused(n){this.renderer.actors[0].setAnimPaused(n)}setAzimuth(n){this.renderer.azimuth=n}setZenith(n){this.renderer.zenith=n}getAzimuth(){return this.renderer.azimuth}getZenith(){return this.renderer.zenith}updateItemViewer(n,e,i){let r=window.WH.Wow.Item;r.INVENTORY_TYPE_SHOULDERS;let o=n===r.INVENTORY_TYPE_ROBE?r.INVENTORY_TYPE_CHEST:n;window.WH.debug("Clearing model viewer slot:",o.toString()),this.method("clearSlots",n.toString()),e&&(window.WH.debug("Attaching to model viewer slot:",n.toString(),"Display ID:",e,"Enchant Visual:",i),this.method("setItems",[[{slot:n,display:e,visual:i||0}]]))}setNewAppearance(n){if(!this.currentCharacterOptions)throw Error("Character options are not set");let e=qm(n,this.currentCharacterOptions),i=this.characterRace,r=this.characterGender;this.method("setAppearance",{race:i,gender:r,options:e})}};oi.prototype._currentCharacterOptions=0;oi.prototype._characterGender=null;oi.prototype._characterRace=null;Object.defineProperty(oi.prototype,"currentCharacterOptions",{get:function(){return this._currentCharacterOptions},set:function(t){this._currentCharacterOptions=t}});Object.defineProperty(oi.prototype,"characterGender",{get:function(){return this._characterGender},set:function(t){this._characterGender=t}});Object.defineProperty(oi.prototype,"characterRace",{get:function(){return this._characterRace},set:function(t){this._characterRace=t}});function Iw(t,n,e,i="live"){return mt(this,null,function*(){let r,o;if(e.id&&e.type){let{id:l,type:c}=e;r={models:{id:l,type:c}}}else{let{race:l,gender:c}=e;o=yield bw(l,c),r=Dw(e,o)}i==="classic"?r=N({dataEnv:"classic",env:"classic",gameDataEnv:"classic",hd:!1},r):r=N({hd:!0},r);let a=N({type:2,contentPath:window.CONTENT_PATH,container:jQuery(n),aspect:t},r),s=yield new oi(a);return o&&(s.currentCharacterOptions=o,s.characterGender=e.gender,s.characterRace=e.race),s})}var Tw=(()=>{let n=class n{constructor(i,r){this.animationService=i,this.dataService=r,this.modelViewer=null}loadModel(i,r,o="model-viewer"){return mt(this,null,function*(){let a=document.getElementById(o);if(!a){console.warn(`No #${o} element found`);return}let s={race:isNaN(+i.RACE)?1:+i.RACE,gender:isNaN(+i.GENDER)?0:+i.GENDER,skin:isNaN(+i.SKIN)?0:+i.SKIN,face:isNaN(+i.FACE)?0:+i.FACE,hairStyle:isNaN(+i.HAIRSTYLE)?0:+i.HAIRSTYLE,hairColor:isNaN(+i.HAIRCOLOR)?0:+i.HAIRCOLOR,facialStyle:isNaN(+i.FACIALSTYLE)?0:+i.FACIALSTYLE,items:[]};r.forEach(l=>{let c=l.dbId;if(c!==-1){let u=this.dataService.getItemsMap().get(c);if(u){let d=l.slot;l.slot===5&&u.eq_type===20&&(d=20),s.items.push([d,u.disp_id])}}}),+i.CLASSID!=5?s.items=s.items.filter(l=>l[0]!==26):r.find(c=>c.slot===26)?.dbId!==-1&&(s.items=s.items.filter(c=>c[0]!==21&&c[0]!==22));try{let l=yield Iw(1,`#${o}`,s);this.modelViewer=l,a.modelViewer=l}catch(l){console.error("Error generating model for player:",i.NAME,l)}})}destroyModelViewer(i="model-viewer"){let r=document.getElementById(i);if(r){if(this.modelViewer&&typeof this.modelViewer.destroy=="function")try{this.modelViewer.destroy()}catch(o){console.error("Error destroying model viewer:",o)}this.modelViewer=null,r.modelViewer=null,r.innerHTML=""}}updateAppearance(i){this.modelViewer&&this.modelViewer.setNewAppearance({skin:+i.SKIN,face:+i.FACE,hairStyle:+i.HAIRSTYLE,hairColor:+i.HAIRCOLOR,facialStyle:+i.FACIALSTYLE})}getModelViewer(){return this.modelViewer}};n.\u0275fac=function(r){return new(r||n)(B(_s),B(gt))},n.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var Mw=(()=>{let n=class n{constructor(i,r,o){this.statsService=i,this.dataService=r,this.utilityService=o,this.logsSubject=new ne,this.dpsHistorySubject=new Le([]),this.hpsHistorySubject=new Le([]),this.healthHistorySubject=new Le([]),this.manaHistorySubject=new Le([]),this.damageBySourceSubject=new Le({}),this.healingBySourceSubject=new Le({}),this.simulationRunningSubject=new Le(!1),this.chartUpdateSubject=new ne,this.logs$=this.logsSubject.asObservable(),this.dpsHistory$=this.dpsHistorySubject.asObservable(),this.hpsHistory$=this.hpsHistorySubject.asObservable(),this.healthHistory$=this.healthHistorySubject.asObservable(),this.manaHistory$=this.manaHistorySubject.asObservable(),this.damageBySource$=this.damageBySourceSubject.asObservable(),this.healingBySource$=this.healingBySourceSubject.asObservable(),this.simulationRunning$=this.simulationRunningSubject.asObservable(),this.chartUpdate$=this.chartUpdateSubject.asObservable(),this.simTime=0,this.regenTimer=0,this.totalDamage=0,this.totalHealing=0,this.damageBySource={},this.healingBySource={},this.dpsHistory=[],this.hpsHistory=[],this.healthHistory=[],this.manaHistory=[],this.players=[],this.player=null,this.stats=null,this.equippedItems=[],this.mob=null,this.mobStats=null,this.tankPlayer=null,this.tankStats=null,this.tankItems=[],this.isHealing=!1,this.isTanking=!1,this.gambits=[],this.hps=0,this.dps=0,this.shieldSpellIds={physical:[10193],fire:[10225,17543],frost:[28609,17544],nature:[17546],shadow:[28610,17548],arcane:[17549],all:[10901,13033,17252,27778]},this.oneCastIds=[16870,12536,16886,14751,12043,20216]}startSimulation(i,r,o,a,s,l,c=1,u="Molten Giant"){this.stopSimulation();let d=this.dataService.getRaidStats().find(f=>f.name===u);if(!d){console.warn("Mob not found:",u);return}if(this.player=i,this.players=r,this.equippedItems=o,this.isHealing=l,this.isTanking=s,this.mob=null,this.gambits=a,this.mobStats={health:+d.max_health,mana:+d.max_mana,armor:+d.armor,dmg_mult:+d.dmg_multiplier,melee_min_base:+d.min_dmg,melee_max_base:+d.max_dmg,attack_power:0,attack_power_r:0,min_damage:+d.min_dmg,max_damage:+d.max_dmg,melee_speed:+d.melee_attack_speed,speedwalk:+d.speedwalk,speedrun:+d.speedrun,damageschool:+d.damageschool,castSpeedMult:1,healModMult:1,attack_speed:0,strength:0,spellCritTaken:{physical:0,holy:0,fire:0,nature:0,frost:0,shadow:0,arcane:0,magic:0,all:0},hitPct:0,dmgTakenMod:{physical:0,holy:0,fire:0,nature:0,frost:0,shadow:0,arcane:0,magic:0,all:0},dmgTakenMult:{physical:0,holy:0,fire:0,nature:0,frost:0,shadow:0,arcane:0,magic:0,all:0},shield:{physical:0,holy:0,fire:0,nature:0,frost:0,shadow:0,arcane:0,magic:0,all:0},movespeed:+d.speedrun,schoolimmunemask:+d.schoolimmunemask,resistances:{fire:+d.resistancefire,shadow:+d.resistanceshadow,nature:+d.resistancenature,frost:+d.resistancefrost,arcane:+d.resistancearcane}},this.mob={guid:+d.id,npcID:+d.id,name:d.name,spawned:!0,respawnTimer:0,position:{map:0,posX:0,posY:0,posZ:0,orienation:0},scriptName:d.scriptname,activeBuffs:[],activeDebuffs:[],cooldowns:[],resources:{health:this.mobStats.health,mana:this.mobStats.mana,energy:0,rage:0,combat:!0,shield:{physical:0,holy:0,fire:0,nature:0,frost:0,shadow:0,arcane:0,magic:0,all:0},timeNotCasting:5e3,swingAuto:!0,nextSwingQueue:0,swingTimerM:this.mobStats.melee_speed,swingTimerO:0,swingTimerR:0,swingTimerP:0,castTimer:0,timeCasting:0,spellCasting:0,channeling:!1,recoveryTime:0,comboPoints:0,petHealth:0,petFocus:0}},!this.mob||(this.stats=this.statsService.calculateStats(!0,this.player,this.equippedItems,this.players),!this.stats))return;if(this.player.resources={health:this.stats.general.health,mana:this.stats.general.mana,energy:+this.player.CLASSID==6?100:0,rage:0,combat:!0,shield:{physical:0,holy:0,fire:0,nature:0,frost:0,shadow:0,arcane:0,magic:0,all:0},timeNotCasting:5e3,swingAuto:!1,nextSwingQueue:0,swingTimerM:this.stats.damage.MHspeed*1e3/(1+this.stats.attackSpeed/100),swingTimerO:this.stats.damage.OHmin>0?this.stats.damage.OHspeed*1e3/(1+this.stats.attackSpeed/100):0,swingTimerR:this.stats.damage.Rmin>0?this.stats.damage.Rspeed*1e3/(1+this.stats.attackSpeed/100):0,swingTimerP:0,castTimer:0,timeCasting:0,spellCasting:0,channeling:!1,recoveryTime:0,comboPoints:0,petHealth:+this.player.CLASSID==5?this.stats.pets[Object.keys(this.stats.pets)[0]].general.health:0,petFocus:+this.player.CLASSID==5?100:0},this.isHealing){let f=this.players.find(v=>this.utilityService.getRole(+v.CLASSID,+v.SPEC)==="tank");if(f){if(this.tankPlayer=N({},f),this.tankItems=[],[1,2,3,5,6,7,8,9,10,11,12,13,14,16,21,22,26].forEach(T=>{let b=this.tankPlayer[`SLOT_${T}`];b&&!isNaN(+b)?this.tankItems.push({slot:T,dbId:+b}):this.tankItems.push({slot:T,dbId:-1})}),this.tankStats=this.statsService.calculateStats(!0,this.tankPlayer,this.tankItems,this.players),!this.tankStats)return;this.tankPlayer.resources={health:this.tankStats.general.health,mana:this.tankStats.general.mana,energy:+this.tankPlayer.CLASSID==6?100:0,rage:0,combat:!0,shield:{physical:0,holy:0,fire:0,nature:0,frost:0,shadow:0,arcane:0,magic:0,all:0},timeNotCasting:5e3,swingAuto:!1,nextSwingQueue:0,swingTimerM:this.tankStats.damage.MHspeed*1e3/(1+this.tankStats.attackSpeed/100),swingTimerO:this.tankStats.damage.OHmin>0?this.tankStats.damage.OHspeed*1e3/(1+this.tankStats.attackSpeed/100):0,swingTimerR:this.tankStats.damage.Rmin>0?this.tankStats.damage.Rspeed*1e3/(1+this.tankStats.attackSpeed/100):0,swingTimerP:0,castTimer:0,timeCasting:0,spellCasting:0,channeling:!1,recoveryTime:0,comboPoints:0,petHealth:0,petFocus:0},this.tankPlayer.activeBuffs=[],this.tankPlayer.activeDebuffs=[],this.tankPlayer.cooldowns=[],this.tankPlayer.resources.swingAuto=this.isMeleeDefault(this.player)}}this.player.activeBuffs=[],this.player.activeDebuffs=[],this.player.cooldowns=[],this.player.resources.swingAuto=this.isMeleeDefault(this.player),+this.player.CLASSID==5&&this.stats.pets&&this.stats.pets.cat&&(this.player.resources.swingTimerP=this.stats.pets.cat.damage.speed),this.simTime=0,this.regenTimer=0,this.totalDamage=0,this.totalHealing=0,this.hps=0,this.dps=0,this.dpsHistory=[],this.hpsHistory=[],this.healthHistory=[],this.manaHistory=[],this.damageBySource={},this.healingBySource={},this.simulationRunningSubject.next(!0);let _=100;this.simTimer=setInterval(()=>{for(let f=0;f<c;f++){if(this.simTime+=_,this.regenTimer+=_,!this.player||!this.mob||!this.stats||!this.mobStats){this.stopSimulation();return}if(this.simTime%3e3===0&&+this.player.CLASSID==7&&(this.player.resources.rage+=1,this.logsSubject.next("Gained 1 rage from anger management")),this.player.resources.timeNotCasting+=_,this.mob.resources.timeNotCasting+=_,this.player.resources.recoveryTime>0&&(this.player.resources.recoveryTime-=_,this.player.resources.recoveryTime=Math.max(0,this.player.resources.recoveryTime)),this.regenTimer>=2e3&&(this.handleRegen(),this.regenTimer=0),this.updateActiveEffects(this.player),this.tankPlayer&&this.updateActiveEffects(this.tankPlayer),this.updateActiveEffects(this.mob),this.player.cooldowns.forEach(v=>v.TIME_LEFT_MS-=_),this.player.cooldowns=this.player.cooldowns.filter(v=>v.TIME_LEFT_MS>0),this.mob.cooldowns.forEach(v=>v.TIME_LEFT_MS-=_),this.mob.cooldowns=this.mob.cooldowns.filter(v=>v.TIME_LEFT_MS>0),this.player.resources.health<=0||this.mob.resources.health<=0||this.isHealing&&this.tankPlayer.resources.health<=0){this.stopSimulation();return}if(this.player.resources.castTimer>0&&(this.player.resources.castTimer-=_,this.player.resources.timeCasting+=_,this.player.resources.castTimer<=0))if(this.player.resources.channeling)this.player.resources.channeling=!1,this.player.resources.spellCasting=0,this.player.resources.castTimer=0,this.player.resources.timeCasting=0;else{let v=this.dataService.getSpells().find(T=>+T.SPELLID==+this.player.resources.spellCasting);this.logsSubject.next(`${this.simTime/1e3}s: Finish cast ${v.SPELLNAME}`),this.castSpell(this.player.resources.spellCasting)}this.player.resources.swingAuto&&(this.player.resources.swingTimerM-=_,this.player.resources.swingTimerM<=0&&(this.performAutoAttack("Main-Hand"),this.player.resources.swingTimerM=this.stats.damage.MHspeed*1e3,this.stats.attackSpeed>0?this.player.resources.swingTimerM/=1+this.stats.attackSpeed/100:this.stats.attackSpeed<0&&(this.player.resources.swingTimerM*=1-this.stats.attackSpeed/100)),this.player.resources.swingTimerO>0&&(this.player.resources.swingTimerO-=_,this.player.resources.swingTimerO<=0&&(this.performAutoAttack("Off-Hand"),this.player.resources.swingTimerO=this.stats.damage.OHspeed*1e3,this.stats.attackSpeed>0?this.player.resources.swingTimerO/=1+this.stats.attackSpeed/100:this.stats.attackSpeed<0&&(this.player.resources.swingTimerO*=1-this.stats.attackSpeed/100)))),+this.player.CLASSID==5&&(this.player.resources.swingTimerR-=_,this.player.resources.swingTimerR<=0&&this.player.resources.spellCasting===0&&(this.performAutoAttack("Ranged"),this.player.resources.swingTimerR=this.stats.damage.Rspeed*1e3,this.stats.attackSpeed>0?this.player.resources.swingTimerR/=1+this.stats.attackSpeed/100:this.stats.attackSpeed<0&&(this.player.resources.swingTimerR*=1-this.stats.attackSpeed/100)),this.player.resources.swingTimerP-=_,this.player.resources.swingTimerP<=0&&(this.performAutoAttack("Pet"),this.player.resources.swingTimerP=this.stats.pets[Object.keys(this.stats.pets)[0]].damage.speed*1e3)),this.mob.resources.swingTimerM-=_,this.mob.resources.swingTimerM<=0&&(this.isHealing?this.performMobAttack(this.tankPlayer,this.tankStats):this.performMobAttack(this.player,this.stats),this.mob.resources.swingTimerM=this.mobStats.melee_speed),this.dps=this.simTime>0?this.totalDamage/(this.simTime/1e3):0,this.hps=this.simTime>0?this.totalHealing/(this.simTime/1e3):0,this.player.resources.castTimer<=0&&this.player.resources.recoveryTime<=0&&this.evaluateGambits(),this.simTime%1e3===0&&(this.dpsHistory.push({time:this.simTime/1e3,value:this.dps}),this.hpsHistory.push({time:this.simTime/1e3,value:this.hps}),this.healthHistory.push({time:this.simTime/1e3,value:this.isHealing?this.tankPlayer.resources.health:this.player.resources.health}),this.manaHistory.push({time:this.simTime/1e3,value:this.player.resources.mana}),this.dpsHistorySubject.next(this.dpsHistory),this.hpsHistorySubject.next(this.hpsHistory),this.healthHistorySubject.next(this.healthHistory),this.manaHistorySubject.next(this.manaHistory),this.damageBySourceSubject.next(this.damageBySource),this.healingBySourceSubject.next(this.healingBySource),this.chartUpdateSubject.next())}},_)}stopSimulation(){this.simTimer&&(clearInterval(this.simTimer),this.simTimer=null,this.simulationRunningSubject.next(!1),this.logsSubject.next(`Simulation ended at ${this.simTime/1e3}s. Player health: ${this.player?.resources?.health.toFixed(0)||0}, Mob health: ${this.mob?.resources?.health.toFixed(0)||0}`))}handleRegen(){if(this.player&&this.stats){if(this.stats.general.mana>0){let i=this.stats.spiritTick,r=i*(Math.min(100,this.stats.spiritCastPct)/100),o=this.player.resources.timeNotCasting>=5e3?i:r;this.player.resources.mana+=o,this.player.resources.mana=Math.min(this.player.resources.mana,this.stats.general.mana),this.logsSubject.next(`${this.simTime/1e3}s: Regen ${o.toFixed(0)} mana; 5SR: ${this.player.resources.timeNotCasting/1e3}s`)}if(this.isEnergyUser(this.player)){let i=20;+this.stats.energyRegenMult>0&&(i*=1+this.stats.energyRegenMult/100),this.player.resources.energy+=i,this.player.resources.energy=Math.min(this.player.resources.energy,100)}+this.player.CLASSID==5&&(this.player.resources.petFocus+=10,this.player.resources.petFocus=Math.min(100,this.player.resources.petFocus))}}updateActiveEffects(i){let r=[...i.activeBuffs,...i.activeDebuffs],o=!("PLAYERID"in i),a=!1;for(let s=r.length-1;s>=0;s--){let l=r[s],c=this.dataService.getSpells().find(u=>+u.SPELLID==+l.spellId);if(l.amplitude>0&&(l.ampTimer-=100,l.ampTimer<=0)){let u=o?this.mobStats.health:this.stats.general.health,d=o?this.mobStats.mana:this.stats.general.mana;if(l.powerType===4||l.powerType===-1){if(o){let _=1,f=0,v=0,T=l.value;if(this.mobStats){_=this.getResistMultiplier(this.mobStats?.resistances,15,+l.school);let b=Pn[+l.school];f=parseFloat((this.mobStats.dmgTakenMod[b]||0).toString()),v=parseFloat((this.mobStats.dmgTakenMult[b]||0).toString()),b!=="physical"&&(f+=parseFloat((this.mobStats.dmgTakenMod.magic||0).toString()),v+=parseFloat((this.mobStats.dmgTakenMult.magic||0).toString())),f+=parseFloat((this.mobStats.dmgTakenMod.all||0).toString()),v+=parseFloat((this.mobStats.dmgTakenMult.all||0).toString()),T=(T+f)*_*(1+v/100)}i.resources.health+=T,this.totalDamage-=T,this.damageBySource[c.SPELLNAME]=(this.damageBySource[c.SPELLNAME]||0)-T,(c.SPELLNAME==="Siphon Life"||c.SPELLNAME==="Drain Life")&&(this.player.resources.health-=T,this.player.resources.health=Math.min(this.player.resources.health,this.stats.general.health),this.healingBySource[c.SPELLNAME]=(this.healingBySource[c.SPELLNAME]||0)-T)}else i.resources.health+=l.value,this.totalHealing+=l.value,this.healingBySource[c.SPELLNAME]=(this.healingBySource[c.SPELLNAME]||0)+l.value;i.resources.health=Math.max(0,i.resources.health),i.resources.health=Math.min(i.resources.health,u)}else l.powerType===0?(i.resources.mana+=l.value,i.resources.mana=Math.max(0,i.resources.mana),i.resources.mana=Math.min(i.resources.mana,d)):l.powerType===1&&(i.resources.rage+=l.value/10,this.logsSubject.next(`${this.simTime/1e3}s: Tick: gained ${l.value/10} rage from ${l.spellId}`),i.resources.rage=Math.max(0,Math.min(i.resources.rage,100)));l.ampTimer=l.amplitude}if(l.durTimer-=100,l.durTimer<=0){i.activeBuffs.includes(l)?(this.logsSubject.next(`${this.simTime/1e3}s: Buff: ${c.SPELLNAME} faded`),i.activeBuffs.splice(i.activeBuffs.indexOf(l),1),a=!0,o||this.resetShieldOnBuffExpire(l.spellId,i)):(this.logsSubject.next(`${this.simTime/1e3}s: Debuff: ${c.SPELLNAME} faded`),i.activeDebuffs.splice(i.activeDebuffs.indexOf(l),1),a=!0);continue}}a&&(o?this.mobStats=this.statsService.calculateMobStats(this.mob):(this.stats=this.statsService.calculateStats(!0,this.player,this.equippedItems,this.players),this.tankPlayer&&(this.tankStats=this.statsService.calculateStats(!0,this.tankPlayer,this.tankItems,this.players))))}hasEnoughPower(i,r){return this.player?+i==0?+this.player.resources.mana>=+r:+i==3?+this.player.resources.energy>=+r:+i==1?+this.player.resources.rage>=+r/10:+i==4?+this.player.resources.health>=+r:+i==2?+this.player.resources.petFocus>=+r:!0:!1}consumePower(i,r){this.player&&(+i==0?(this.player.resources.mana-=r,+r>0&&(this.player.resources.timeNotCasting=0)):+i==3?this.player.resources.energy-=r:+i==1?this.player.resources.rage-=r/10:+i==4?this.player.resources.health-=r:+i==2&&(this.player.resources.petFocus-=r))}castSpell(i){if(!this.player||!this.mob||!this.stats)return;let r=this.statsService.calculateSpellDetails(i,this.player,this.stats);if(!r)return;let o=this.dataService.getSpells().find(c=>+c.SPELLID==+i);if(+i==11689)this.consumePower(4,424),this.healingBySource[o.SPELLNAME]=(this.healingBySource[o.SPELLNAME]||0)-424;else{let c=r.cost;+r.costType==0&&+r.cost>0&&(c=(r.cost+Number(this.stats.manaCostMod))*(1+Number(this.stats.manaCostMult)/100),c=Math.max(0,Math.floor(c)),this.consumeOneCastBuffs()),this.consumePower(r.costType,c)}if(r.cd>0&&this.addCooldown(i,r.cd),+i==5019)this.player.resources.recoveryTime+=+this.stats.damage.Rspeed*1e3;else{let c=+r.global;this.player.resources.timeCasting>0&&(c-=this.player.resources.timeCasting,c=Math.max(0,c)),this.player.resources.recoveryTime+=c}let a=null,s=1,l="Hit";if([5,6,7,10,11].includes(+o.SPELLTYPE)){this.isMeleeDefault(this.player)?a="melee":+this.player.CLASSID==5?a="ranged":a="spell";let c=this.statsService.getCombatTable(this.player,this.stats,a);if(a==="spell"&&this.mobStats){let f=Pn[+o.School]||"all",v=this.mobStats.spellCritTaken[f]||0;if(v>0){let T=c.find(M=>M.label.includes("Crit")),b=c.find(M=>M.label==="Hit");if(T&&b){let M=parseFloat(T.value);M+=v,T.value=M.toFixed(2)+"%";let W=parseFloat(b.value);W-=v,b.value=Math.max(0,W).toFixed(2)+"%"}}}let u=Math.random()*100,d=0,_;for(let f of c){let v=parseFloat(f.value);if(d+=v,u<=d){_=f,l=f.label,s=parseFloat(f.damage)/100;break}}l!=="Miss"&&(+this.hasTalent(15334)&&[5,10,11].includes(+o.SPELLTYPE)&&+i!=5019&&Pn[+o.School]==="shadow"&&this.castSpell(15258),+i==25304&&+this.hasTalent(28595)&&this.castSpell(12579),+i==25307&&+this.hasTalent(17803)&&this.castSpell(17800))}else Math.random()*100<=this.stats.spellCritChance?(s=1.5,l="Crit"):(s=1,l="Hit");if(s>0){[6774,11275,31016,31018,9896,11198].includes(+i)&&(this.player.resources.comboPoints=0),[9904,9850,9830,11294,25300].includes(+i)&&(this.player.resources.comboPoints+=1),r.channeled&&(this.player.resources.castTimer=r.dur*1e3,this.player.resources.timeCasting=0,this.player.resources.spellCasting=i,this.player.resources.channeling=!0),+i==2687&&(this.player.resources.rage+=+this.player.SPEC==2?15:10);let c=0;if(+r.min1>0&&+r.amp1==0){let v=Math.random()*(r.max1-r.min1)+r.min1;c+=v}if(+r.min2>0&&+r.amp2==0){let v=Math.random()*(r.max2-r.min2)+r.min2;c+=v}c*=s,+i==5019&&(c=Math.random()*(this.stats.damage.Rmax-this.stats.damage.Rmin)+this.stats.damage.Rmin);let u=this.dataService.getBuffs().find(v=>+v.DB_ID==+i),d=this.dataService.getDebuffs().find(v=>+v.DB_ID==+i);if([5,10].includes(+r.spellType)){if(c!==0){let v=1;[5,10,11].includes(+o.SPELLTYPE)&&[2,3,4,5,6].includes(+o.School)&&this.mobStats&&(v=this.getResistMultiplier(this.mobStats.resistances,15,+o.School),v===0&&this.logsSubject.next(`${this.simTime/1e3}s: Full Resist on ${o.SPELLNAME}`));let T=Pn[+o.School],b=parseFloat((this.mobStats.dmgTakenMod[T]||0).toString()),M=parseFloat((this.mobStats.dmgTakenMult[T]||0).toString());T!=="physical"&&(b+=parseFloat((this.mobStats.dmgTakenMod.magic||0).toString()),M+=parseFloat((this.mobStats.dmgTakenMult.magic||0).toString())),b+=parseFloat((this.mobStats.dmgTakenMod.all||0).toString()),M+=parseFloat((this.mobStats.dmgTakenMult.all||0).toString()),c=(c+b)*v*(1+M/100),this.mob.resources.health-=c,this.totalDamage+=c,this.damageBySource[o.SPELLNAME]=(this.damageBySource[o.SPELLNAME]||0)+c,this.mob.resources.health=Math.max(0,this.mob.resources.health)}}else if(+r.spellType==17)this.player.resources.mana+=c;else if(+r.spellType==18)this.player.resources.mana+=c;else if(+r.spellType==19)this.player.resources.mana+=c;else if(+r.spellType==2)this.isHealing?(this.tankPlayer.resources.health+=c,this.tankPlayer.resources.health=Math.min(this.tankPlayer.resources.health,this.tankStats.general.health)):(this.player.resources.health+=c,this.player.resources.health=Math.min(this.player.resources.health,this.stats.general.health)),this.totalHealing+=c,this.healingBySource[o.SPELLNAME]=(this.healingBySource[o.SPELLNAME]||0)+c;else if(+r.spellType==4)if(+i==10901){let v=Math.random()*(r.max1-r.min1)+r.min1,T=this.statsService.calculateSpellDetails(6788,this.player,this.stats),b={sourceName:this.player.NAME,spellId:6788,school:T.school,durTimer:T.dur*1e3,amplitude:0,ampTimer:0,stack:1,value:0,powerType:0};this.isHealing?(this.tankPlayer.resources.shield.all=v,this.tankPlayer.activeDebuffs.push(b)):(this.player.resources.shield.all=v,this.player.activeDebuffs.push(b)),this.totalHealing+=v,this.healingBySource[o.SPELLNAME]=(this.healingBySource[o.SPELLNAME]||0)+v}else u&&(this.applyShield(u),+i==12975&&(this.player.resources.health+=this.stats.general.health*.3));let _=!1,f=!1;if(+r.amp1>0){let v=this.applyPeriodicEffect(i,o,r,1);f=!0}else if(r.amp2>0){let v=this.applyPeriodicEffect(i,o,r,2);f=!0}else if(u||d){let v={sourceName:this.player.NAME,spellId:i,school:r.school,durTimer:r.dur*1e3,amplitude:0,ampTimer:0,stack:1,value:0,powerType:0};this.applyBuffOrDebuff(v,o,!!d),u&&(_=!0),d&&(f=!0)}_&&(this.stats=this.statsService.calculateStats(!0,this.player,this.equippedItems,this.players),this.tankPlayer&&(this.tankStats=this.statsService.calculateStats(!0,this.tankPlayer,this.tankItems,this.players)),this.player.resources.health>this.stats.general.health&&(this.player.resources.health=this.stats.general.health),this.player.resources.mana>this.stats.general.mana&&(this.player.resources.mana=this.stats.general.mana)),f&&(this.mobStats=this.statsService.calculateMobStats(this.mob))}else this.logsSubject.next(`Spell ${i} missed`);this.player.resources.channeling||(this.player.resources.spellCasting=0,this.player.resources.castTimer=0,this.player.resources.timeCasting=0)}consumeOneCastBuffs(){if(this.player)for(let i of this.oneCastIds){let r=this.player.activeBuffs.findIndex(o=>+o.spellId==+i);if(r>-1){this.player.activeBuffs.splice(r,1);let o=this.dataService.getSpells().find(a=>+a.SPELLID==+i);this.logsSubject.next(`${o.SPELLNAME} consumed`)}}}addCooldown(i,r){this.player&&this.player.cooldowns.push({SPELLID:i,TIME_LEFT_MS:r})}applyShield(i){if(!this.player||!i||+i.MIN_SHIELD==0)return;let r=Math.random()*(Number(i.MAX_SHIELD)-Number(i.MIN_SHIELD))+Number(i.MIN_SHIELD),o=Pn[+i.SHIELD_SCHOOL]||"all";this.player.resources.shield[o]=r}hasTalent(i){if(!this.player)return!1;let r=this.player?.SPEC??0,o=["SPEC_0","SPEC_1","SPEC_2"][r];return this.dataService.getTalents().some(a=>Number(a.CLASSID)===Number(this.player?.CLASSID)&&+a.SPELLID==+i&&+a[o]==1)}applyBuffOrDebuff(i,r,o){if(o){let a=this.mob.activeDebuffs.find(l=>+l.spellId==+i.spellId&&l.sourceName===i.sourceName),s=this.dataService.getDebuffs().find(l=>+l.DB_ID==+i.spellId);s&&+s.PER_PLAYER==0&&(a=this.mob.activeDebuffs.find(l=>+l.spellId==+i.spellId)),a?(a.durTimer=i.durTimer,+r.StackAmount>1&&+a.stack<+r.StackAmount?(a.stack+=1,this.logsSubject.next(`${this.simTime/1e3}s: Debuff: ${r.SPELLNAME} stacked to ${a.stack}`)):this.logsSubject.next(`${this.simTime/1e3}s: Debuff: ${r.SPELLNAME} refreshed`)):(this.logsSubject.next(`${this.simTime/1e3}s: Debuff: ${r.SPELLNAME} applied`),this.mob.activeDebuffs.push(i))}else if((+r.SPELLTYPE==2||+r.SPELLID==10901)&&this.tankPlayer&&this.isHealing){let a=this.tankPlayer.activeBuffs.find(s=>+s.spellId==+i.spellId);a?(a.durTimer=i.durTimer,+r.StackAmount>1&&+a.stack<+r.StackAmount?(a.stack+=1,this.logsSubject.next(`${this.simTime/1e3}s: Buff: ${r.SPELLNAME} stacked to ${a.stack}`)):this.logsSubject.next(`${this.simTime/1e3}s: Buff: ${r.SPELLNAME} refreshed`)):(this.logsSubject.next(`${this.simTime/1e3}s: Buff: ${r.SPELLNAME} applied`),this.tankPlayer.activeBuffs.push(i))}else{let a=this.player.activeBuffs.find(s=>+s.spellId==+i.spellId);a?(a.durTimer=i.durTimer,+r.StackAmount>1&&+a.stack<+r.StackAmount?(a.stack+=1,this.logsSubject.next(`${this.simTime/1e3}s: Buff: ${r.SPELLNAME} stacked to ${a.stack}`)):this.logsSubject.next(`${this.simTime/1e3}s: Buff: ${r.SPELLNAME} refreshed`)):(this.logsSubject.next(`${this.simTime/1e3}s: Buff: ${r.SPELLNAME} applied`),this.player.activeBuffs.push(i))}}applyPeriodicEffect(i,r,o,a){let s=o[`min${a}`],l=o[`max${a}`],c=o[`amp${a}`],u=Number(r[`EffectBasePoints${a}`]),d=Number(r[`EffectDieSides${a}`]);if(+c<=0)return!1;let _=u+d;+s>0&&(_=(s+l)/2),+o.spellType==10&&(_*=-1);let f={sourceName:this.player.NAME,spellId:i,school:o.school,durTimer:o.dur*1e3,amplitude:c,ampTimer:c,stack:1,value:_,powerType:this.getPowerTypeEffect(i)};if(+o.spellType==10||+o.spellType==5||+o.spellType==7){let v=this.mob.activeDebuffs.find(b=>+b.spellId==+i&&b.sourceName===f.sourceName),T=this.dataService.getDebuffs().find(b=>+b.DB_ID==+f.spellId);return T&&+T.PER_PLAYER==0&&(v=this.mob.activeDebuffs.find(b=>+b.spellId==+i)),v?(v.durTimer=f.durTimer,+r.StackAmount>1&&+v.stack<+r.StackAmount?(v.stack+=1,this.logsSubject.next(`${this.simTime/1e3}s: Debuff: ${r.SPELLNAME} stacked to ${v.stack}`)):this.logsSubject.next(`${this.simTime/1e3}s: Debuff: ${r.SPELLNAME} refreshed`)):(this.logsSubject.next(`${this.simTime/1e3}s: Debuff: ${r.SPELLNAME} applied`),this.mob.activeDebuffs.push(f)),!0}else if(this.isHealing&&+r.SPELLTYPE==2){let v=this.tankPlayer.activeBuffs.find(T=>+T.spellId==+i);return v?(v.durTimer=f.durTimer,r.StackAmount>1&&v.stack<r.StackAmount?(v.stack+=1,this.logsSubject.next(`${this.simTime/1e3}s: Buff: ${r.SPELLNAME} stacked to ${v.stack}`)):this.logsSubject.next(`${this.simTime/1e3}s: Buff: ${r.SPELLNAME} refreshed`)):(this.logsSubject.next(`${this.simTime/1e3}s: Buff: ${r.SPELLNAME} applied`),this.tankPlayer.activeBuffs.push(f)),!1}else{let v=this.player.activeBuffs.find(T=>+T.spellId==+i);return v?(v.durTimer=f.durTimer,r.StackAmount>1&&v.stack<r.StackAmount?(v.stack+=1,this.logsSubject.next(`${this.simTime/1e3}s: Buff: ${r.SPELLNAME} stacked to ${v.stack}`)):this.logsSubject.next(`${this.simTime/1e3}s: Buff: ${r.SPELLNAME} refreshed`)):(this.logsSubject.next(`${this.simTime/1e3}s: Buff: ${r.SPELLNAME} applied`),this.player.activeBuffs.push(f)),!1}}getPowerTypeEffect(i){return[5229,2687].includes(+i)?1:4}performAutoAttack(i){if(!this.mobStats||!this.player||!this.stats)return;if(i==="Main-Hand"){let M=this.player.resources.nextSwingQueue;if(M>0){let W=this.statsService.calculateSpellDetails(M,this.player,this.stats);if(W&&this.hasEnoughPower(W.costType,W.cost)){this.player.resources.nextSwingQueue=0,this.castSpell(M);return}}}let r=0,o=0,a="melee";if(i==="Main-Hand"||i==="Off-Hand")this.stats.damage.OHmin>0?a="dual-wield":a="melee",i==="Main-Hand"?(r=this.stats.damage.MHmin,o=this.stats.damage.MHmax):i==="Off-Hand"&&(r=this.stats.damage.OHmin,o=this.stats.damage.OHmax);else if(i==="Ranged"){a="ranged",r=this.stats.damage.Rmin,o=this.stats.damage.Rmax;let M=+this.mobStats.attack_power_r;if(M!==0){let W=M/14*+this.stats.damage.Rspeed*1.05;r+=W,o+=W}}else i==="Pet"&&(a="melee",r=this.stats.pets.cat.damage.min,o=this.stats.pets.cat.damage.max);let s=this.statsService.getCombatTable(this.player,this.stats,a),l=Math.random()*100,c=0,u,d=1;for(let M of s){let W=parseFloat(M.value);if(c+=W,l<=c){u=M,d=parseFloat(M.damage)/100;break}}if(!u)return;let _=+this.player.CLASSID,f=+this.player.SPEC;d>0&&_===6&&Math.random()<=.2&&this.castSpell(11337);let v=Math.random()*(o-r)+r;v*=d;let b=this.mobStats.armor/(this.mobStats.armor+400+85*60)*100;if(v*=1-b/100,v=Math.max(0,v),this.mob&&v!==0){let M=Pn[0],W=parseFloat((this.mobStats.dmgTakenMod[M]||0).toString()),H=parseFloat((this.mobStats.dmgTakenMult[M]||0).toString());if(W+=parseFloat((this.mobStats.dmgTakenMod.all||0).toString()),H+=parseFloat((this.mobStats.dmgTakenMult.all||0).toString()),W>0&&console.log(`damage for ${i} modified by +${W.toFixed(1)}`),v=(v+W)*(1+H/100),this.damageBySource[i]=(this.damageBySource[i]||0)+v,this.mob.resources.health-=v,this.totalDamage+=v,this.mob.resources.health=Math.max(0,this.mob.resources.health),this.isRageUser(this.player)){let O=2.5,V=3.5,S=230.6;_===7&&(i==="Off-Hand"?(O=this.stats.damage.OHspeed,V=1.75):O=this.stats.damage.MHspeed),u.label==="Crit"&&(V*=2);let m=15*v/S,w=15*v/(4*S)+V*O/2;w>m&&(w=m),_===7&&f<2&&Math.random()<.4&&(w+=1),this.player.resources.rage+=w,this.logsSubject.next(`Gained ${w.toFixed(1)} rage from ${i} ${u.label}`)}}this.logsSubject.next(`${this.simTime/1e3}s: ${i} ${u.label} for ${Math.round(v)} damage`)}performMobAttack(i,r){if(this.mobStats){let o=this.mobStats.min_damage*this.mobStats.dmg_mult,a=this.mobStats.max_damage*this.mobStats.dmg_mult,s=Math.random()*(a-o)+o,l=+this.mobStats.attack_power;l!==0&&(s+=l/14*Number(this.mobStats.melee_speed)/1e3);let c=+this.mobStats.strength;c!==0&&(s+=c/7*Number(this.mobStats.melee_speed)/1e3),s*=1-r.armorDR/100;let u=this.statsService.getCombatTable(i,r,"defense",this.mobStats.hitPct),d=Math.random()*100,_=0,f,v=1;for(let T of u){let b=parseFloat(T.value);if(_+=b,d<=_){f=T,v=parseFloat(T.damage)/100;break}}if(!f)return;if(s*=v,f.label==="Block"&&(s-=Number(r.blockValue),s=Math.max(0,s)),s>0&&(s+=Number(r.dmgTakenMod.all),s+=Number(r.dmgTakenMod.physical),s=Math.max(0,s)),s>0&&(s*=1+Number(r.dmgTakenMult.all)/100,s*=1+Number(r.dmgTakenMult.physical)/100),this.isHealing||(s*=.1),this.logsSubject.next(`${this.simTime/1e3}s: Mob Attack: ${f.label}: ${s.toFixed(0)} dmg`),s>0){if(this.isRageUser(this.player)){let T=2.5*s/230.6;i.resources.rage+=T,this.logsSubject.next(`Gained ${T.toFixed(0)} rage from damage taken`),i.resources.rage=Math.min(100,i.resources.rage)}i.resources.shield.physical>0&&(s<i.resources.shield.physical?(this.logsSubject.next(`Absorbed ${s.toFixed(0)} damage`),i.resources.shield.physical-=s,s=0):(this.logsSubject.next(`Absorbed ${i.resources.shield.physical.toFixed(0)} of ${s.toFixed(0)} damage`),s-=i.resources.shield.physical,i.resources.shield.physical=0,this.removeShieldBuffs(i,"physical"))),s>0&&i.resources.shield.all>0&&(s<i.resources.shield.all?(this.logsSubject.next(`Absorbed ${s.toFixed(0)} damage`),i.resources.shield.all-=s,s=0):(this.logsSubject.next(`Absorbed ${i.resources.shield.all.toFixed(0)} of ${s.toFixed(0)} damage`),s-=i.resources.shield.all,i.resources.shield.all=0,this.removeShieldBuffs(i,"all"))),i.resources.health-=s,i.resources.health=Math.max(0,i.resources.health)}}}removeShieldBuffs(i,r){let o=this.shieldSpellIds[r]||[];for(let a of o){let s=i.activeBuffs.findIndex(l=>+l.spellId==+a);if(s>-1){i.activeBuffs.splice(s,1);let l=this.dataService.getSpells().find(c=>+c.SPELLID==+a);this.logsSubject.next(`${l.SPELLNAME} expired due to depletion`)}}}evaluateGambits(){for(let i of this.gambits)if(this.checkGambitConditions(i)&&this.canPerformAction(i)){this.performAction(i);break}}checkGambitConditions(i){let r=!0;return i.conditions.forEach(o=>{if(+o!=0){let a=Math.floor(+o/100),s=+o%100;if(a===1&&this.mob&&this.mobStats){let l=this.mob.resources.health/this.mobStats.health*100;if(s>10){let c=(11-(s-10))*10;l<c&&(r=!1)}else{let c=(11-s)*10;l>=c&&(r=!1)}}else if(a===2&&this.player&&this.stats){let l=+this.player.resources.health/this.stats.general.health*100;if(s>10){let c=(11-(s-10))*10;l<c&&(r=!1)}else{let c=(11-s)*10;l>=c&&(r=!1)}}else if(a===3&&this.player&&this.stats){let l=+this.player.resources.mana/this.stats.general.mana*100;if(s>10){let c=(11-(s-10))*10;l<c&&(r=!1)}else{let c=(11-s)*10;l>=c&&(r=!1)}}else if((a===4||a===5)&&this.tankPlayer&&this.tankStats){let l=+this.tankPlayer.resources.health/this.tankStats.general.health*100;if(s>10){let c=(11-(s-10))*10;l<c&&(r=!1)}else{let c=(11-s)*10;l>=c&&(r=!1)}}else if(a===6&&this.player&&this.stats){let l=+this.player.resources.energy;if(s>10){let c=(11-(s-10))*10;l<c&&(r=!1)}else{let c=(11-s)*10;l>=c&&(r=!1)}}else if(a===8&&this.player&&this.stats){let l=+this.player.resources.comboPoints,c=s-20;l<c&&(r=!1)}else if(a===7&&this.player&&this.stats){let l=+this.player.resources.rage;if(s>10){let c=(11-(s-10))*10;l<c&&(r=!1)}else{let c=(11-s)*10;l>=c&&(r=!1)}}else if(a===9)s===26&&!this.isTanking&&(r=!1),s===27&&this.isTanking&&(r=!1);else if(a===11&&i.type==="spell"&&this.player){let l=this.player.activeBuffs.find(u=>+u.spellId==+i.actionId),c=s-41;if(l)+l.stack>c&&(r=!1);else if(this.mob){let u=this.mob.activeDebuffs.find(d=>+d.spellId==+i.actionId);u&&+u.stack>c&&(r=!1)}}else if(a===10&&this.player){if(i.type==="pot"){let l=this.player.activeBuffs.find(c=>+c.spellId==+i.actionId);if(l)if(s===31)r=!1;else{let c=3*(s-31)*1e3;l.durTimer>c&&(r=!1)}}else if(i.type==="spell"){let l=this.dataService.getSpells().find(u=>+u.SPELLID==+i.actionId),c=this.player.activeBuffs.find(u=>+u.spellId==+i.actionId);if(this.isHealing&&this.tankPlayer&&+l.SPELLTYPE==2&&(c=this.tankPlayer.activeBuffs.find(u=>+u.spellId==+i.actionId)),c)if(s===31)r=!1;else{let u=3*(s-31)*1e3;c.durTimer>u&&(r=!1)}else if(this.mob){let u=this.mob.activeDebuffs.find(d=>+d.spellId==+i.actionId);if(u)if(s===31)r=!1;else{let d=3*(s-31)*1e3;u.durTimer>d&&(r=!1)}}}}else if(a===12&&this.player&&this.stats){let l=+this.player.resources.petFocus;if(s>10){let c=(11-(s-10))*10;l<c&&(r=!1)}else{let c=(11-s)*10;l>=c&&(r=!1)}}else r=!1}}),r}canPerformAction(i){if(this.player&&this.player.resources.spellCasting>0||this.player&&this.player.resources.recoveryTime>0)return!1;if(+i.actionId==10901){if(this.isHealing&&this.tankPlayer.activeDebuffs){if(this.tankPlayer.activeDebuffs.find(o=>+o.spellId==6788))return!1}else if(this.player.activeDebuffs.find(o=>+o.spellId==6788))return!1}if(this.player&&i.type==="spell"&&this.stats){let r=this.statsService.calculateSpellDetails(i.actionId,this.player,this.stats);if(!r||this.getCooldown(i.actionId)>0||!this.hasEnoughPower(r.costType,r.cost)||+i.actionId==11689&&!this.hasEnoughPower(4,424)||i.type==="spell"&&[6774,11275,31016,31018,9896,11198].includes(+i.actionId)&&+this.player.resources.comboPoints==0)return!1;if(+i.actionId==25300){let a=this.equippedItems.findIndex(s=>s.slot===21);if(a!==-1){let s=this.dataService.getItemsMap().get(this.equippedItems[a].dbId);if(!s||s?.sub_type!=="Dagger")return!1}}return!0}else{if(i.type==="attack")return!0;if(i.type==="pot"){let r=this.dataService.getConsumables().find(o=>+o.DB_ID==+i.actionId);if(r)return!(this.getCooldown(r.CD_SHARE)>0)}}return!1}getCooldown(i){if(!this.player)return 0;let r=this.player.cooldowns.find(o=>o.SPELLID===i);return r?r.TIME_LEFT_MS:0}performAction(i){if(!(!this.player||!this.stats)){if(this.player&&i.type==="spell"){let r=this.statsService.calculateSpellDetails(i.actionId,this.player,this.stats);r&&(r.time>0?(this.logsSubject.next(`${this.simTime/1e3}s : Start cast: ${i.name}`),this.player.resources.castTimer=r.time*1e3,this.player.resources.timeCasting=0,this.player.resources.spellCasting=i.actionId):[9881,25286,20569].includes(+i.actionId)?this.player.resources.nextSwingQueue!==+i.actionId&&(this.logsSubject.next(`${this.simTime/1e3}s: Queueing: ${i.name}`),this.player.resources.nextSwingQueue=+i.actionId):(this.logsSubject.next(`${this.simTime/1e3}s: Cast instant spell: ${i.name}`),this.castSpell(i.actionId)))}else if(i.type==="attack")this.player.resources.swingAuto=i.actionId===6603;else if(i.type==="pot"){let r=this.dataService.getConsumables().find(o=>+o.DB_ID==+i.actionId);if(r){if(this.logsSubject.next(`Using Potion: ${r.NAME}`),+r.MIN_HEALTH!=0){let o=this.getRandomInt(r.MIN_HEALTH,r.MAX_HEALTH);this.player.resources.health=Math.min(this.player.resources.health+o,this.stats.general.health),this.healingBySource[r.NAME]=(this.healingBySource[r.NAME]||0)+o}if(+r.MIN_MANA!=0&&(this.player.resources.mana=Math.min(this.player.resources.mana+this.getRandomInt(r.MIN_MANA,r.MAX_MANA),this.stats.general.mana)),+this.player.CLASSID==7&&+r.MIN_RAGE!=0&&(this.player.resources.rage=Math.min(this.player.resources.rage+this.getRandomInt(r.MIN_RAGE,r.MAX_RAGE),100)),+this.player.CLASSID==6&&+r.ENERGY!=0&&(this.player.resources.rage=Math.min(this.player.resources.energy+r.ENERGY,100)),+r.DUR>0&&+r.DUR>0){let o=this.player.activeBuffs.find(a=>a.spellId===r.SPELLID);o?(o.durTimer=r.DUR,this.logsSubject.next(`${this.simTime/1e3}s: Buff: ${r.NAME} refreshed`)):(this.logsSubject.next(`${this.simTime/1e3}s: Buff: ${r.NAME} applied`),this.player.activeBuffs.push({sourceName:this.player.NAME,spellId:r.SPELLID,school:0,durTimer:r.DUR*1e3,amplitude:0,ampTimer:0,stack:1,value:0,powerType:0}),this.stats=this.statsService.calculateStats(!0,this.player,this.equippedItems,this.players))}+r.CD>0&&this.player.cooldowns.push({SPELLID:r.CD_SHARE,TIME_LEFT_MS:r.CD*1e3})}}}}getRandomInt(i,r){return i=Math.ceil(i),r=Math.floor(r),Math.floor(Math.random()*(r-i+1))+i}getCurrentTime(){return this.simTime}getTotalDamage(){return this.totalDamage}getDps(){return this.dps}resetShieldOnBuffExpire(i,r){for(let[o,a]of Object.entries(this.shieldSpellIds))if(a.includes(+i)){let s=this.dataService.getSpells().find(l=>+l.SPELLID==+i);r.resources.shield[o]=0,this.logsSubject.next(`Shield ${o} expired due to ${s.SPELLNAME} fade`);return}}isEnergyUser(i){let r=+i.CLASSID,o=+i.SPEC;return r===6?!0:r!==0?!1:!!i.activeBuffs.find(s=>+s.spellId==768)}isRageUser(i){let r=+i.CLASSID,o=+i.SPEC;return r===7?!0:r!==0?!1:!!i.activeBuffs.find(s=>+s.spellId==9634)}isMeleeDefault(i){if(!i)return!1;let r=+i.CLASSID,o=+i.SPEC,a=this.utilityService.getRole(r,o);return r===6||r===7||a==="tank"||r===2&&a!=="healer"}getResistMultiplier(i,r,o){let a=1,s="No Resist",l=this.statsService.getResistTable(i,r),u={2:"fire",3:"nature",4:"frost",5:"shadow",6:"arcane"}[o],d=Math.random()*100,_=0;for(let f of l){if(f.label==="Binary Resist")continue;let v=parseFloat(f[u]);if(_+=v,d<=_){s=f.label,f.label.includes("Resist 25%")?a=.75:f.label.includes("Resist 50%")?a=.5:f.label.includes("Resist 75%")?a=.25:f.label.includes("Full Resist")?a=0:a=1;break}}return a}};n.\u0275fac=function(r){return new(r||n)(B(gn),B(gt),B(Gt))},n.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var qP=["dpsChart"],YP=t=>({"top-left":t}),KP=t=>({"background-color":t,color:"black"}),Td=t=>({"compact-tooltip":t}),Rw=t=>({"bottom-up":t}),Aw=(t,n)=>({equippedItems:t,slot:n}),ZP=()=>[6,7],xw=()=>[5,6,7],QP=()=>[2,5,6,7],XP=()=>[4,5];function JP(t,n){if(t&1){let e=pe();g(0,"button",17),q("click",function(){U(e);let r=E();return $(r.toggleHelpOverlay())}),Z(1,"img",18),h()}if(t&2){let e=E();C("ngClass",St(1,YP,e.currentPlayer))}}function eN(t,n){if(t&1){let e=pe();g(0,"div",19),Z(1,"div",20),Ve(2,"safeHtml"),g(3,"button",21),q("click",function(){U(e);let r=E();return $(r.toggleHelpOverlay())}),y(4,"OK"),h()()}if(t&2){let e=E();p(),C("innerHTML",Gi(2,1,e.getHelpContent()),Tt)}}function tN(t,n){if(t&1){let e=pe();g(0,"div",22),q("click",function(){U(e);let r=E();return $(r.toggleNameEdit())}),y(1),h()}if(t&2){let e=E();C("ngStyle",St(2,KP,e.getColor(e.currentPlayer.CLASSID))),p(),re(" ",e.currentPlayer.NAME," ")}}function nN(t,n){if(t&1){let e=pe();g(0,"input",23),xt("ngModelChange",function(r){U(e);let o=E();return Nt(o.newPlayerName,r)||(o.newPlayerName=r),$(r)}),q("blur",function(){U(e);let r=E();return $(r.savePlayerName())})("keyup.enter",function(){U(e);let r=E();return $(r.savePlayerName())}),h()}if(t&2){let e=E();Mt("ngModel",e.newPlayerName)}}function iN(t,n){t&1&&(g(0,"button",41),y(1," OWNED "),h())}function rN(t,n){if(t&1){let e=pe();g(0,"button",42),q("pointerdown",function(){U(e);let r=E(3);return $(r.selectedTooltip&&r.startBuyItem(r.selectedTooltip.dbId))})("pointerup",function(){U(e);let r=E(3);return $(r.cancelBuyItem())})("pointerleave",function(){U(e);let r=E(3);return $(r.cancelBuyItem())}),y(1," HOLD TO BUY... "),Z(2,"img",43),g(3,"span"),y(4),h(),Z(5,"img",44),g(6,"span"),y(7),h()()}if(t&2){let e,i,r=E(3);De("can-afford",r.selectedTooltip&&r.canAffordItem(r.selectedTooltip.dbId))("cannot-afford",r.selectedTooltip&&!r.canAffordItem(r.selectedTooltip.dbId))("buying",r.isBuying),p(4),Q(r.selectedTooltip&&(((e=r.getItems().get(r.selectedTooltip.dbId))==null?null:e.fiery_core)||0)),p(3),Q(r.selectedTooltip&&(((i=r.getItems().get(r.selectedTooltip.dbId))==null?null:i.lava_core)||0))}}function oN(t,n){if(t&1&&(g(0,"div",38),L(1,iN,2,0,"button",39)(2,rN,8,8,"button",40),h()),t&2){let e=E(2);p(),C("ngIf",e.selectedTooltip&&e.isItemOwned(e.selectedTooltip.dbId)),p(),C("ngIf",e.selectedTooltip&&!e.isItemOwned(e.selectedTooltip.dbId))}}function sN(t,n){if(t&1&&(g(0,"div",45)(1,"div",46),Z(2,"img",47),g(3,"span"),y(4),h()(),g(5,"div",46),Z(6,"img",43),g(7,"span"),y(8),h()(),g(9,"div",46),Z(10,"img",44),g(11,"span"),y(12),h()()()),t&2){let e=E(2);p(4),re("x",e.guildBank.gold.toFixed(2)),p(4),re("x",e.guildBank.fieryCores),p(4),re("x",e.guildBank.lavaCores)}}function aN(t,n){if(t&1&&(g(0,"option",51),y(1),h()),t&2){let e=n.$implicit;C("value",e),p(),re(" ",e," ")}}function lN(t,n){if(t&1){let e=pe();g(0,"div",48)(1,"select",49),q("change",function(r){U(e);let o=E(2);return $(o.onAnimationChange(r))}),L(2,aN,2,2,"option",50),h()()}if(t&2){let e=E(2);p(2),C("ngForOf",e.animationService.getAnimations())}}function cN(t,n){if(t&1&&(g(0,"option",51),y(1),h()),t&2){let e=n.$implicit;C("value",e.RACEID),p(),Q(e.RACE)}}function uN(t,n){if(t&1&&(g(0,"option",51),y(1),h()),t&2){let e=n.$implicit;C("value",e),p(),Q(e)}}function dN(t,n){if(t&1&&(g(0,"option",51),y(1),h()),t&2){let e=n.$implicit;C("value",e),p(),Q(e)}}function fN(t,n){if(t&1&&(g(0,"option",51),y(1),h()),t&2){let e=n.$implicit;C("value",e),p(),Q(e)}}function hN(t,n){if(t&1&&(g(0,"option",51),y(1),h()),t&2){let e=n.$implicit;C("value",e),p(),Q(e)}}function pN(t,n){if(t&1&&(g(0,"option",51),y(1),h()),t&2){let e=n.$implicit;C("value",e),p(),Q(e)}}function gN(t,n){if(t&1){let e=pe();g(0,"div",52)(1,"div",53)(2,"label"),y(3,"Race"),h(),g(4,"select",54),xt("ngModelChange",function(r){U(e);let o=E(2);return Nt(o.selectedRaceId,r)||(o.selectedRaceId=r),$(r)}),q("change",function(){U(e);let r=E(2);return $(r.updateRaceGender(r.selectedRaceId,r.selectedGender))}),L(5,cN,2,2,"option",50),h()(),g(6,"div",53)(7,"label"),y(8,"Gender"),h(),g(9,"select",54),xt("ngModelChange",function(r){U(e);let o=E(2);return Nt(o.selectedGender,r)||(o.selectedGender=r),$(r)}),q("change",function(){U(e);let r=E(2);return $(r.updateRaceGender(r.selectedRaceId,r.selectedGender))}),g(10,"option",51),y(11,"Male"),h(),g(12,"option",51),y(13,"Female"),h()()(),g(14,"div",53)(15,"div",55)(16,"button",56),q("pointerdown",function(){U(e);let r=E(2);return $(r.startRandomizing())})("pointerup",function(){U(e);let r=E(2);return $(r.stopRandomizing())})("pointerleave",function(){U(e);let r=E(2);return $(r.stopRandomizing())})("click",function(){U(e);let r=E(2);return $(r.randomizeCustomization())}),Z(17,"img",57),h()()(),g(18,"div",53)(19,"label"),y(20,"Skin"),h(),g(21,"select",54),xt("ngModelChange",function(r){U(e);let o=E(2);return Nt(o.currentPlayer.SKIN,r)||(o.currentPlayer.SKIN=r),$(r)}),q("change",function(){U(e);let r=E(2);return $(r.updateCustomization("SKIN",r.currentPlayer.SKIN))}),L(22,uN,2,2,"option",50),h()(),g(23,"div",53)(24,"label"),y(25,"Face"),h(),g(26,"select",54),xt("ngModelChange",function(r){U(e);let o=E(2);return Nt(o.currentPlayer.FACE,r)||(o.currentPlayer.FACE=r),$(r)}),q("change",function(){U(e);let r=E(2);return $(r.updateCustomization("FACE",r.currentPlayer.FACE))}),L(27,dN,2,2,"option",50),h()(),g(28,"div",53)(29,"label"),y(30,"Hairstyle"),h(),g(31,"select",54),xt("ngModelChange",function(r){U(e);let o=E(2);return Nt(o.currentPlayer.HAIRSTYLE,r)||(o.currentPlayer.HAIRSTYLE=r),$(r)}),q("change",function(){U(e);let r=E(2);return $(r.updateCustomization("HAIRSTYLE",r.currentPlayer.HAIRSTYLE))}),L(32,fN,2,2,"option",50),h()(),g(33,"div",53)(34,"label"),y(35,"Hair Color"),h(),g(36,"select",54),xt("ngModelChange",function(r){U(e);let o=E(2);return Nt(o.currentPlayer.HAIRCOLOR,r)||(o.currentPlayer.HAIRCOLOR=r),$(r)}),q("change",function(){U(e);let r=E(2);return $(r.updateCustomization("HAIRCOLOR",r.currentPlayer.HAIRCOLOR))}),L(37,hN,2,2,"option",50),h()(),g(38,"div",53)(39,"label"),y(40,"Facial Style"),h(),g(41,"select",54),xt("ngModelChange",function(r){U(e);let o=E(2);return Nt(o.currentPlayer.FACIALSTYLE,r)||(o.currentPlayer.FACIALSTYLE=r),$(r)}),q("change",function(){U(e);let r=E(2);return $(r.updateCustomization("FACIALSTYLE",r.currentPlayer.FACIALSTYLE))}),L(42,pN,2,2,"option",50),h()()()}if(t&2){let e=E(2);p(4),Mt("ngModel",e.selectedRaceId),p(),C("ngForOf",e.getAvailableRaces()),p(4),Mt("ngModel",e.selectedGender),p(),C("value",0),p(2),C("value",1),p(9),Mt("ngModel",e.currentPlayer.SKIN),p(),C("ngForOf",e.getRange(e.availableOptions.SKIN)),p(4),Mt("ngModel",e.currentPlayer.FACE),p(),C("ngForOf",e.getRange(e.availableOptions.FACE)),p(4),Mt("ngModel",e.currentPlayer.HAIRSTYLE),p(),C("ngForOf",e.getRange(e.availableOptions.HAIRSTYLE)),p(4),Mt("ngModel",e.currentPlayer.HAIRCOLOR),p(),C("ngForOf",e.getRange(e.availableOptions.HAIRCOLOR)),p(4),Mt("ngModel",e.currentPlayer.FACIALSTYLE),p(),C("ngForOf",e.getRange(e.availableOptions.FACIALSTYLE))}}function mN(t,n){if(t&1&&Z(0,"div",66),t&2){let e=E().$implicit,i=E(3);C("ngClass",St(2,Td,i.useCompactTooltips))("innerHTML",i.getItemTooltip(e.dbId),Tt)}}function vN(t,n){if(t&1&&Z(0,"div",66),t&2){let e=E().$implicit,i=E(5);C("ngClass",St(2,Td,i.useCompactTooltips))("innerHTML",i.getItemTooltip(e),Tt)}}function _N(t,n){if(t&1){let e=pe();g(0,"div",70)(1,"img",72),q("click",function(r){let o=U(e).$implicit,a=E(2).$implicit,s=E(3);return $(s.toggleItemTooltip(a.slot,o,!0,r))}),h(),L(2,vN,1,4,"div",64),h()}if(t&2){let e=n.$implicit,i=E(2).$implicit,r=E(3);Mn("data-quality",r.getItemQuality(e)),p(),De("selected",(r.selectedTooltip==null?null:r.selectedTooltip.slot)===i.slot&&(r.selectedTooltip==null?null:r.selectedTooltip.dbId)===e&&(r.selectedTooltip==null?null:r.selectedTooltip.isInventory)),C("src",r.getItemIcon(e),Ne),p(),C("ngIf",(r.selectedTooltip==null?null:r.selectedTooltip.slot)===i.slot&&(r.selectedTooltip==null?null:r.selectedTooltip.dbId)===e&&(r.selectedTooltip==null?null:r.selectedTooltip.isInventory))}}function yN(t,n){if(t&1){let e=pe();g(0,"div",67)(1,"div",68),L(2,_N,3,5,"div",69),Ve(3,"filterEquip"),h(),g(4,"div",70)(5,"button",71),q("click",function(){U(e);let r=E().$implicit,o=E(3);return $(o.swapItem(r.slot,null))}),y(6," Unequip "),h()()()}if(t&2){let e=E().$implicit,i=E(3);C("ngClass",St(5,Rw,i.isBottomUpSlot(e.slot))),p(2),C("ngForOf",nt(3,2,i.getFilteredInventoryItems(e.slot),Ho(7,Aw,i.equippedItems,e.slot)))}}function SN(t,n){if(t&1){let e=pe();g(0,"div",62)(1,"img",63),q("click",function(r){let o=U(e).$implicit,a=E(3);return $(a.toggleItemTooltip(o.slot,o.dbId,!1,r))}),h(),L(2,mN,1,4,"div",64)(3,yN,7,10,"div",65),h()}if(t&2){let e=n.$implicit,i=E(3);Mn("data-quality",i.getItemQuality(e.dbId)),p(),De("selected",(i.selectedTooltip==null?null:i.selectedTooltip.slot)===e.slot||i.selectedInventorySlot===e.slot),C("src",i.getItemIcon(e.dbId),Ne),p(),C("ngIf",i.selectedTooltip&&(i.selectedTooltip==null?null:i.selectedTooltip.slot)===e.slot&&(i.selectedTooltip==null?null:i.selectedTooltip.dbId)===e.dbId&&!i.selectedTooltip.isInventory),p(),C("ngIf",i.selectedInventorySlot===e.slot)}}function CN(t,n){if(t&1&&Z(0,"div",66),t&2){let e=E().$implicit,i=E(3);C("ngClass",St(2,Td,i.useCompactTooltips))("innerHTML",i.getItemTooltip(e.dbId),Tt)}}function EN(t,n){if(t&1&&Z(0,"div",66),t&2){let e=E().$implicit,i=E(5);C("ngClass",St(2,Td,i.useCompactTooltips))("innerHTML",i.getItemTooltip(e),Tt)}}function wN(t,n){if(t&1){let e=pe();g(0,"div",70)(1,"img",72),q("click",function(r){let o=U(e).$implicit,a=E(2).$implicit,s=E(3);return $(s.toggleItemTooltip(a.slot,o,!0,r))}),h(),L(2,EN,1,4,"div",64),h()}if(t&2){let e=n.$implicit,i=E(2).$implicit,r=E(3);Mn("data-quality",r.getItemQuality(e)),p(),De("selected",(r.selectedTooltip==null?null:r.selectedTooltip.slot)===i.slot&&(r.selectedTooltip==null?null:r.selectedTooltip.dbId)===e&&(r.selectedTooltip==null?null:r.selectedTooltip.isInventory)),C("src",r.getItemIcon(e),Ne),p(),C("ngIf",(r.selectedTooltip==null?null:r.selectedTooltip.slot)===i.slot&&(r.selectedTooltip==null?null:r.selectedTooltip.dbId)===e&&(r.selectedTooltip==null?null:r.selectedTooltip.isInventory))}}function DN(t,n){if(t&1){let e=pe();g(0,"div",67)(1,"div",73),L(2,wN,3,5,"div",69),Ve(3,"filterEquip"),h(),g(4,"div",70)(5,"button",71),q("click",function(){U(e);let r=E().$implicit,o=E(3);return $(o.swapItem(r.slot,null))}),y(6," Unequip "),h()()()}if(t&2){let e=E().$implicit,i=E(3);C("ngClass",St(5,Rw,i.isBottomUpSlot(e.slot))),p(2),C("ngForOf",nt(3,2,i.getFilteredInventoryItems(e.slot),Ho(7,Aw,i.equippedItems,e.slot)))}}function bN(t,n){if(t&1){let e=pe();g(0,"div",62)(1,"img",63),q("click",function(r){let o=U(e).$implicit,a=E(3);return $(a.toggleItemTooltip(o.slot,o.dbId,!1,r))}),h(),L(2,CN,1,4,"div",64)(3,DN,7,10,"div",65),h()}if(t&2){let e=n.$implicit,i=E(3);Mn("data-quality",i.getItemQuality(e.dbId)),p(),De("selected",(i.selectedTooltip==null?null:i.selectedTooltip.slot)===e.slot||i.selectedInventorySlot===e.slot),C("src",i.getItemIcon(e.dbId),Ne),p(),C("ngIf",i.selectedTooltip&&(i.selectedTooltip==null?null:i.selectedTooltip.slot)===e.slot&&(i.selectedTooltip==null?null:i.selectedTooltip.dbId)===e.dbId&&!i.selectedTooltip.isInventory),p(),C("ngIf",i.selectedInventorySlot===e.slot)}}function IN(t,n){if(t&1&&(g(0,"div",58)(1,"div",59),L(2,SN,4,6,"div",60),Ve(3,"filterBySide"),h(),g(4,"div",61),L(5,bN,4,6,"div",60),Ve(6,"filterBySide"),h()()),t&2){let e=E(2);p(2),C("ngForOf",nt(3,2,e.equippedItems,"left")),p(3),C("ngForOf",nt(6,5,e.equippedItems,"right"))}}function TN(t,n){if(t&1){let e=pe();g(0,"div",24),L(1,oN,3,2,"div",25)(2,sN,13,3,"div",26),g(3,"div",27)(4,"button",15),q("click",function(){U(e);let r=E();return $(r.setGearSubTab("equipment"))}),Z(5,"img",28),h(),g(6,"button",15),q("click",function(){U(e);let r=E();return $(r.setGearSubTab("customization"))}),Z(7,"img",29),h(),g(8,"button",15),q("click",function(){U(e);let r=E();return $(r.setGearSubTab("crafted"))}),Z(9,"img",30),h(),g(10,"button",15),q("click",function(){U(e);let r=E();return $(r.setGearSubTab("dungeon"))}),Z(11,"img",31),h(),g(12,"button",15),q("click",function(){U(e);let r=E();return $(r.setGearSubTab("mcquest"))}),Z(13,"img",32),h()(),Z(14,"div",33),L(15,lN,3,1,"div",34)(16,gN,43,15,"div",35)(17,IN,7,8,"div",36),Z(18,"div",37),h()}if(t&2){let e=E();p(),C("ngIf",e.selectedGearSubTab==="crafted"&&e.selectedTooltip),p(),C("ngIf",e.selectedGearSubTab==="crafted"),p(2),De("active",e.selectedGearSubTab==="equipment"),p(2),De("active",e.selectedGearSubTab==="customization"),p(2),De("active",e.selectedGearSubTab==="crafted"),p(2),De("active",e.selectedGearSubTab==="dungeon"),p(2),De("active",e.selectedGearSubTab==="mcquest"),p(3),C("ngIf",e.selectedGearSubTab==="customization"),p(),C("ngIf",e.selectedGearSubTab==="customization"),p(),C("ngIf",e.selectedGearSubTab!=="customization")}}function MN(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2),h(),g(3,"span",87),y(4),h()()),t&2){let e=n.$implicit,i=E(2);p(2),re("",e.label,":"),p(2),Q(i.cachedStats.general[e.key])}}function xN(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2,"Mana:"),h(),g(3,"span",87),y(4),h()()),t&2){let e=E(2);p(4),Q(e.cachedStats.general.mana)}}function RN(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2,"Ranged Attack Power:"),h(),g(3,"span",87),y(4),h()()),t&2){let e=E(2);p(4),Q(e.cachedStats.rangedAttackPower)}}function AN(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2),h(),g(3,"span",87),y(4),h()()),t&2){let e=E(2);p(2),re("Melee Damage OH (",e.cachedStats.damage.OHskill,"):"),p(2),Qn("",e.cachedStats.damage.OHmin," - ",e.cachedStats.damage.OHmax," / ",e.cachedStats.damage.OHspeed,"s")}}function PN(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2),h(),g(3,"span",87),y(4),h()()),t&2){let e=E(2);p(2),re("Ranged Damage (",e.cachedStats.damage.Rskill,"):"),p(2),Qn("",e.cachedStats.damage.Rmin," - ",e.cachedStats.damage.Rmax," / ",(e.cachedStats.damage.Rspeed/(1+e.cachedStats.attackSpeed)).toFixed(2),"s")}}function NN(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2,"Attack Speed:"),h(),g(3,"span",87),y(4),h()()),t&2){let e=E(2);p(4),re("",e.cachedStats.attackSpeed,"%")}}function ON(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2,"Melee Hit:"),h(),g(3,"span",87),y(4),h()()),t&2){let e=E(2);p(4),re("",e.cachedStats.hitChance,"%")}}function kN(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2,"Parry Chance:"),h(),g(3,"span",87),y(4),h()()),t&2){let e=E(2);p(4),re("",e.cachedStats.parryChance,"%")}}function LN(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2,"Block Chance:"),h(),g(3,"span",87),y(4),h()()),t&2){let e=E(2);p(4),re("",e.cachedStats.blockChance,"%")}}function FN(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2,"Block Value:"),h(),g(3,"span",87),y(4),h()()),t&2){let e=E(2);p(4),Q(e.cachedStats.blockValue)}}function VN(t,n){if(t&1&&(g(0,"div",102)(1,"span",103),y(2),h(),g(3,"span",104),y(4),h(),g(5,"span",104),y(6),h()()),t&2){let e=n.$implicit;p(2),Q(e.label),p(2),Q(e.value),p(2),Q(e.damage)}}function jN(t,n){if(t&1&&(g(0,"div",90)(1,"h3"),y(2,"Dual-Wield Combat Table"),h(),g(3,"div",100)(4,"div",92),y(5,"Outcome"),h(),g(6,"div",92),y(7,"Chance"),h(),g(8,"div",92),y(9,"Damage"),h(),L(10,VN,7,3,"div",101),h()()),t&2){let e=E(2);p(10),C("ngForOf",e.getCombatTable("dual-wield"))}}function HN(t,n){if(t&1&&(g(0,"div",102)(1,"span",103),y(2),h(),g(3,"span",104),y(4),h(),g(5,"span",104),y(6),h()()),t&2){let e=n.$implicit;p(2),Q(e.label),p(2),Q(e.value),p(2),Q(e.damage)}}function BN(t,n){if(t&1&&(g(0,"div",90)(1,"h3"),y(2,"Melee Combat Table"),h(),g(3,"div",100)(4,"div",92),y(5,"Outcome"),h(),g(6,"div",92),y(7,"Chance"),h(),g(8,"div",92),y(9,"Damage"),h(),L(10,HN,7,3,"div",101),h()()),t&2){let e=E(2);p(10),C("ngForOf",e.getCombatTable("melee"))}}function UN(t,n){if(t&1&&(g(0,"div",102)(1,"span",103),y(2),h(),g(3,"span",104),y(4),h(),g(5,"span",104),y(6),h()()),t&2){let e=n.$implicit;p(2),Q(e.label),p(2),Q(e.value),p(2),Q(e.damage)}}function $N(t,n){if(t&1&&(g(0,"div",90)(1,"h3"),y(2,"Ranged Combat Table"),h(),g(3,"div",100)(4,"div",92),y(5,"Outcome"),h(),g(6,"div",92),y(7,"Chance"),h(),g(8,"div",92),y(9,"Damage"),h(),L(10,UN,7,3,"div",101),h()()),t&2){let e=E(2);p(10),C("ngForOf",e.getCombatTable("ranged"))}}function GN(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2,"Spell Hit:"),h(),g(3,"span",87),y(4),h()()),t&2){let e=E(3);p(4),re("",e.cachedStats.spellHitChance,"%")}}function zN(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2),h(),g(3,"span",87),y(4),h()()),t&2){let e=n.$implicit,i=E(3);p(2),re("",e.label,":"),p(2),Q(i.cachedStats.spellPower[e.key])}}function WN(t,n){if(t&1&&(g(0,"div",102)(1,"span",103),y(2),h(),g(3,"span",104),y(4),h(),g(5,"span",104),y(6),h()()),t&2){let e=n.$implicit;p(2),Q(e.label),p(2),Q(e.value),p(2),Q(e.damage)}}function qN(t,n){if(t&1&&(g(0,"details",84)(1,"summary",81),y(2,"Spell Stats"),h(),L(3,GN,5,1,"div",83),g(4,"div",85)(5,"span",86),y(6,"Spell Critical:"),h(),g(7,"span",87),y(8),h()(),g(9,"div",85)(10,"span",86),y(11,"Mana Regen - Idle:"),h(),g(12,"span",87),y(13),h()(),g(14,"div",85)(15,"span",86),y(16,"Mana Regen - Casting:"),h(),g(17,"span",87),y(18),h()(),L(19,zN,5,2,"div",82),g(20,"div",90)(21,"h3"),y(22,"Spell Combat Table"),h(),g(23,"div",100)(24,"div",92),y(25,"Outcome"),h(),g(26,"div",92),y(27,"Chance"),h(),g(28,"div",92),y(29,"Damage"),h(),L(30,WN,7,3,"div",101),h()()()),t&2){let e=E(2);p(3),C("ngIf",e.cachedStats.spellHitChance>0),p(5),re("",e.cachedStats.spellCritChance,"%"),p(5),Q((e.cachedStats.manaPer5*.4+e.cachedStats.spiritTick).toFixed(1)),p(5),Q((e.cachedStats.manaPer5*.4+e.cachedStats.spiritTick*e.cachedStats.spiritCastPct/100).toFixed(1)),p(),C("ngForOf",e.spellPowerStats),p(11),C("ngForOf",e.getCombatTable("spell"))}}function YN(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2),h(),g(3,"span",87),y(4),h()()),t&2){let e=n.$implicit,i=E(2);p(2),re("",e.label,":"),p(2),Q(i.cachedStats.resistances[e.key])}}function KN(t,n){if(t&1&&(Kn(0),g(1,"div",102)(2,"span",103),y(3),h(),g(4,"span",104),y(5),h(),g(6,"span",104),y(7),h(),g(8,"span",104),y(9),h(),g(10,"span",104),y(11),h(),g(12,"span",104),y(13),h()(),Zn()),t&2){let e=n.$implicit;p(3),Q(e.label),p(2),Q(e.fire),p(2),Q(e.shadow),p(2),Q(e.nature),p(2),Q(e.frost),p(2),Q(e.arcane)}}function ZN(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2),h(),g(3,"span",87),y(4),h()()),t&2){let e=n.$implicit,i=E().$implicit,r=E(3);p(2),re("",e.label,":"),p(2),Q(r.cachedStats.pets[i].general[e.key])}}function QN(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2),h(),g(3,"span",87),y(4),h()()),t&2){let e=n.$implicit,i=E().$implicit,r=E(3);p(2),re("",e.label,":"),p(2),Q(r.cachedStats.pets[i].resistances[e.key])}}function XN(t,n){if(t&1&&(g(0,"div",85)(1,"span",86),y(2,"Abilities:"),h(),g(3,"span",87),y(4),h()()),t&2){let e=E().$implicit,i=E(3);p(4),Q(i.cachedStats.pets[e].abilities.join(", "))}}function JN(t,n){if(t&1&&(g(0,"div",106)(1,"h3",107),y(2),Ve(3,"titlecase"),h(),L(4,ZN,5,2,"div",82),g(5,"div",85)(6,"span",86),y(7,"Armor:"),h(),g(8,"span",87),y(9),h()(),g(10,"div",85)(11,"span",86),y(12,"Attack Power:"),h(),g(13,"span",87),y(14),h()(),g(15,"div",85)(16,"span",86),y(17,"Damage:"),h(),g(18,"span",87),y(19),h()(),g(20,"div",85)(21,"span",86),y(22,"Defense:"),h(),g(23,"span",87),y(24),h()(),L(25,QN,5,2,"div",82)(26,XN,5,1,"div",83),h()),t&2){let e=n.$implicit,i=E(3);p(2),Q(Gi(3,10,e)),p(2),C("ngForOf",i.generalStats),p(5),Q(i.cachedStats.pets[e].armor),p(5),Q(i.cachedStats.pets[e].attackPower),p(5),Qn("",i.cachedStats.pets[e].damage.min," - ",i.cachedStats.pets[e].damage.max," / ",i.cachedStats.pets[e].damage.speed,"s"),p(5),Q(300),p(),C("ngForOf",i.resistanceStats),p(),C("ngIf",i.cachedStats.pets[e].abilities.length>0)}}function eO(t,n){if(t&1&&(g(0,"details",84)(1,"summary",81),y(2,"Pet Stats"),h(),L(3,JN,27,12,"div",105),h()),t&2){let e=E(2);p(3),C("ngForOf",e.petNames)}}function tO(t,n){if(t&1&&(g(0,"div",108),Z(1,"img",109)(2,"span",110),h()),t&2){let e=n.$implicit;p(),C("alt",da(e.name))("src","/assets/icons/"+e.icon+".jpg",Ne),p(),C("innerHTML",e.updatedTooltip,Tt)}}function nO(t,n){if(t&1){let e=pe();g(0,"div",74)(1,"div",75)(2,"button",15),q("click",function(){U(e);let r=E();return $(r.setStatsSubTab("base"))}),Z(3,"img",76),h(),g(4,"button",15),q("click",function(){U(e);let r=E();return $(r.setStatsSubTab("buffed"))}),Z(5,"img",77),h()(),g(6,"div",78)(7,"div",79)(8,"h3"),y(9),h(),g(10,"details",80)(11,"summary",81),y(12,"General Stats"),h(),L(13,MN,5,2,"div",82)(14,xN,5,1,"div",83),h(),g(15,"details",84)(16,"summary",81),y(17,"Combat Stats"),h(),g(18,"div",85)(19,"span",86),y(20,"Armor:"),h(),g(21,"span",87),y(22),h()(),g(23,"div",85)(24,"span",86),y(25,"Armor %:"),h(),g(26,"span",87),y(27),h()(),g(28,"div",85)(29,"span",86),y(30,"Attack Power:"),h(),g(31,"span",87),y(32),h()(),L(33,RN,5,1,"div",83),g(34,"div",85)(35,"span",86),y(36),h(),g(37,"span",87),y(38),h()(),L(39,AN,5,4,"div",83)(40,PN,5,4,"div",83)(41,NN,5,1,"div",83)(42,ON,5,1,"div",83),g(43,"div",85)(44,"span",86),y(45,"Critical Strike:"),h(),g(46,"span",87),y(47),h()(),g(48,"div",85)(49,"span",86),y(50,"Dodge Chance:"),h(),g(51,"span",87),y(52),h()(),L(53,kN,5,1,"div",83)(54,LN,5,1,"div",83)(55,FN,5,1,"div",83),g(56,"div",85)(57,"span",86),y(58,"Defense:"),h(),g(59,"span",87),y(60),h()(),L(61,jN,11,1,"div",88)(62,BN,11,1,"div",88)(63,$N,11,1,"div",88),h(),L(64,qN,31,6,"details",89),g(65,"details",84)(66,"summary",81),y(67,"Resistances"),h(),L(68,YN,5,2,"div",82),g(69,"div",90)(70,"h3"),y(71,"Resistance Table"),h(),g(72,"div",91)(73,"div",92),y(74,"Result"),h(),g(75,"div",92),Z(76,"img",93),h(),g(77,"div",92),Z(78,"img",94),h(),g(79,"div",92),Z(80,"img",95),h(),g(81,"div",92),Z(82,"img",96),h(),g(83,"div",92),Z(84,"img",97),h(),L(85,KN,14,6,"ng-container",98),h()()(),L(86,eO,4,1,"details",89),h(),L(87,tO,3,4,"div",99),h()()}if(t&2){let e=E();p(2),De("active",e.selectedStatsSubTab==="base"),p(2),De("active",e.selectedStatsSubTab==="buffed"),p(5),re("Gear Score: ",e.cachedStats.gearscore),p(4),C("ngForOf",e.generalStats),p(),C("ngIf",!Xn(33,ZP).includes(+e.currentPlayer.CLASSID)),p(8),Q(e.cachedStats.armor),p(5),Q(e.cachedStats.armorDR),p(5),Q(e.cachedStats.attackPower),p(),C("ngIf",Xn(34,xw).includes(+e.currentPlayer.CLASSID)),p(3),re("Melee Damage (",e.cachedStats.damage.MHskill,"):"),p(2),Qn("",e.cachedStats.damage.MHmin," - ",e.cachedStats.damage.MHmax," / ",e.cachedStats.damage.MHspeed,"s"),p(),C("ngIf",e.cachedStats.damage.OHmin>0),p(),C("ngIf",e.cachedStats.damage.Rmin>0),p(),C("ngIf",e.cachedStats.attackSpeed),p(),C("ngIf",e.cachedStats.hitChance),p(5),re("",e.cachedStats.critChance,"%"),p(5),re("",e.cachedStats.dodgeChance,"%"),p(),C("ngIf",Xn(35,QP).includes(+e.currentPlayer.CLASSID)),p(),C("ngIf",e.cachedStats.blockValue>0),p(),C("ngIf",e.cachedStats.blockValue>0),p(5),Q(e.cachedStats.defense),p(),C("ngIf",e.showDualWieldTable()),p(),C("ngIf",e.showMeleeTable()),p(),C("ngIf",e.showRangedTable()),p(),C("ngIf",!Xn(36,xw).includes(+e.currentPlayer.CLASSID)),p(4),C("ngForOf",e.resistanceStats),p(17),C("ngForOf",e.getResistTable()),p(),C("ngIf",Xn(37,XP).includes(+e.currentPlayer.CLASSID)&&e.petNames.length>0),p(),C("ngForOf",e.spellTooltips)}}function iO(t,n){if(t&1&&(g(0,"h2"),y(1),h()),t&2){let e=E(2);p(),Q(e.getClassName(e.currentPlayer.CLASSID))}}function rO(t,n){if(t&1&&(g(0,"h2"),y(1),h()),t&2){let e=E(2);p(),re("",e.getRaceName(+e.currentPlayer.RACE)," Skills")}}function oO(t,n){if(t&1&&(g(0,"tr")(1,"td"),Z(2,"img",109),h(),Z(3,"td",115),Ve(4,"safeHtml"),h()),t&2){let e=n.$implicit;p(2),C("alt",da(e.SPELLNAME))("src","/assets/icons/"+e.ICON_NAME+".jpg",Ne),p(),C("innerHTML",Gi(4,4,e.TOOLTIP),Tt)}}function sO(t,n){if(t&1&&(g(0,"div",114)(1,"table"),L(2,oO,5,6,"tr",98),h()()),t&2){let e=E(2);p(2),C("ngForOf",e.getSpells(e.selectedSpellTab))}}function aO(t,n){if(t&1){let e=pe();g(0,"div",111),L(1,iO,2,1,"h2",112)(2,rO,2,1,"h2",112),g(3,"div",75)(4,"button",15),q("click",function(){U(e);let r=E();return $(r.setSpellTab("class"))}),Z(5,"img",16),h(),g(6,"button",15),q("click",function(){U(e);let r=E();return $(r.setSpellTab("racial"))}),Z(7,"img",16),h()(),L(8,sO,3,1,"div",113),h()}if(t&2){let e=E();p(),C("ngIf",e.selectedSpellTab==="class"),p(),C("ngIf",e.selectedSpellTab!=="class"),p(2),De("active",e.selectedSpellTab==="class"),p(),C("src","/assets/icons/class_"+e.getClassName(e.currentPlayer.CLASSID).toLowerCase()+".jpg",Ne),p(),De("active",e.selectedSpellTab==="racial"),p(),C("src","/assets/icons/achievement_character_"+e.getRaceName(+e.currentPlayer.RACE).toLowerCase()+"_"+(e.currentPlayer.GENDER==0?"male":"female")+".jpg",Ne),p(),C("ngIf",e.selectedSpellTab)}}function lO(t,n){if(t&1&&(g(0,"h2"),y(1),h()),t&2){let e=E(2);p(),Q(e.getTalentName())}}function cO(t,n){if(t&1){let e=pe();g(0,"button",15),q("click",function(){let r=U(e).$implicit,o=E(2);return $(o.setSpecTab(r))}),Z(1,"img",16),h()}if(t&2){let e=n.$implicit,i=E(2);De("active",i.selectedSpecTab===e),p(),C("src","/assets/icons/"+i.getTalentIcon(+e)+".jpg",Ne)}}function uO(t,n){if(t&1&&(g(0,"tr")(1,"td"),Z(2,"img",119),h(),Z(3,"td",115),Ve(4,"safeHtml"),h()),t&2){let e=n.$implicit;p(2),C("alt",da(e.SPELLNAME))("src","/assets/icons/"+e.ICON_NAME+".jpg",Ne),p(),C("innerHTML",Gi(4,4,e.TOOLTIP),Tt)}}function dO(t,n){if(t&1&&(g(0,"div",116),L(1,lO,2,1,"h2",112),g(2,"div",75),L(3,cO,2,3,"button",117),h(),g(4,"div",118)(5,"table"),L(6,uO,5,6,"tr",98),h()()()),t&2){let e=E();p(),C("ngIf",e.currentPlayer),p(2),C("ngForOf",e.talentBuilds),p(3),C("ngForOf",e.getTalents(e.selectedSpecTab))}}function fO(t,n){if(t&1&&(g(0,"option",51),y(1),h()),t&2){let e=n.$implicit;C("value",e),p(),Q(e)}}function hO(t,n){if(t&1){let e=pe();g(0,"div")(1,"label")(2,"input",133),xt("ngModelChange",function(r){U(e);let o=E(3);return Nt(o.isTanking,r)||(o.isTanking=r),$(r)}),h(),y(3," Player is Tanking "),h()()}if(t&2){let e=E(3);p(2),Mt("ngModel",e.isTanking)}}function pO(t,n){if(t&1){let e=pe();g(0,"button",15),q("click",function(){U(e);let r=E(3);return $(r.stopSimulation())}),y(1,"Stop Simulation"),h()}}function gO(t,n){if(t&1&&(g(0,"span"),y(1),Ve(2,"number"),Ve(3,"number"),h()),t&2){let e=E(4);p(),Ei(" Mana: ",nt(2,2,e.currentPlayer.resources.mana,"1.0-0")," / ",nt(3,5,e.cachedStats.general.mana,"1.0-0"))}}function mO(t,n){if(t&1&&(g(0,"span"),y(1),Ve(2,"number"),h()),t&2){let e=E(4);p(),re(" Energy: ",nt(2,1,e.currentPlayer.resources.energy,"1.0-0"))}}function vO(t,n){if(t&1&&(g(0,"span"),y(1),Ve(2,"number"),h()),t&2){let e=E(4);p(),re(" Combo: ",nt(2,1,e.currentPlayer.resources.comboPoints,"1.0-0"))}}function _O(t,n){if(t&1&&(g(0,"span"),y(1),Ve(2,"number"),h()),t&2){let e=E(4);p(),re(" Rage: ",nt(2,1,e.currentPlayer.resources.rage,"1.0-0"))}}function yO(t,n){if(t&1&&(g(0,"span"),y(1),h()),t&2){let e=E(4);p(),re("Time: ",e.simTime/1e3,"s ")}}function SO(t,n){if(t&1&&(g(0,"span"),y(1),Ve(2,"number"),h()),t&2){let e=E(4);p(),re("DPS: ",nt(2,1,e.lastDpsValue,"1.0-2"))}}function CO(t,n){if(t&1&&(g(0,"span"),y(1),Ve(2,"number"),h()),t&2){let e=E(4);p(),re("HPS: ",nt(2,1,e.lastHpsValue,"1.0-2"))}}function EO(t,n){if(t&1&&(g(0,"div")(1,"div"),y(2),Ve(3,"number"),Ve(4,"number"),h(),g(5,"div"),L(6,gO,4,8,"span",112)(7,mO,3,4,"span",112)(8,vO,3,4,"span",112)(9,_O,3,4,"span",112),h(),g(10,"div"),L(11,yO,2,1,"span",112)(12,SO,3,4,"span",112)(13,CO,3,4,"span",112),h()()),t&2){let e=E(3);p(2),Ei("Player Health: ",nt(3,9,e.currentPlayer.resources.health,"1.0-0")," / ",nt(4,12,e.cachedStats.general.health,"1.0-0")),p(4),C("ngIf",+e.currentPlayer.CLASSID!=6&&+e.currentPlayer.CLASSID!=7),p(),C("ngIf",e.isEnergyUser()),p(),C("ngIf",e.isEnergyUser()),p(),C("ngIf",e.isRageUser()),p(2),C("ngIf",e.simTime),p(),C("ngIf",!e.isHealing),p(),C("ngIf",e.isHealing)}}function wO(t,n){if(t&1&&(g(0,"div")(1,"span"),y(2),Ve(3,"number"),Ve(4,"number"),h()()),t&2){let e=E(3);p(2),Ei("Tank Health: ",nt(3,2,e.tankPlayer.resources.health,"1.0-0")," / ",nt(4,5,e.tankStats.general.health,"1.0-0"))}}function DO(t,n){if(t&1&&(g(0,"span"),y(1),Ve(2,"number"),h()),t&2){let e=E(4);p(),re(" Mana: ",nt(2,1,e.mob.resources.mana,"1.0-0"))}}function bO(t,n){if(t&1&&(g(0,"div")(1,"span"),y(2),Ve(3,"number"),h(),L(4,DO,3,4,"span",112),h()),t&2){let e=E(3);p(2),re("Mob Health: ",nt(3,2,e.mob.resources.health,"1.0-0")),p(2),C("ngIf",e.mob.resources.mana>0)}}function IO(t,n){if(t&1&&(g(0,"tr")(1,"td"),y(2),h(),g(3,"td"),y(4),Ve(5,"number"),h()()),t&2){let e=n.$implicit;p(2),Q(e.key),p(2),Q(nt(5,2,e.value,"1.0-0"))}}function TO(t,n){if(t&1&&(Kn(0),g(1,"h4"),y(2,"Damage Breakdown"),h(),g(3,"table")(4,"thead")(5,"tr")(6,"th"),y(7,"Source"),h(),g(8,"th"),y(9,"Damage"),h()()(),g(10,"tbody"),L(11,IO,6,5,"tr",98),h()(),Zn()),t&2){let e=E(3);p(11),C("ngForOf",e.damageSourceEntries)}}function MO(t,n){if(t&1&&(g(0,"tr")(1,"td"),y(2),h(),g(3,"td"),y(4),Ve(5,"number"),h()()),t&2){let e=n.$implicit;p(2),Q(e.key),p(2),Q(nt(5,2,e.value,"1.0-0"))}}function xO(t,n){if(t&1&&(Kn(0),g(1,"h4"),y(2,"Healing Breakdown"),h(),g(3,"table")(4,"thead")(5,"tr")(6,"th"),y(7,"Source"),h(),g(8,"th"),y(9,"Healing"),h()()(),g(10,"tbody"),L(11,MO,6,5,"tr",98),h()(),Zn()),t&2){let e=E(3);p(11),C("ngForOf",e.healingSourceEntries)}}function RO(t,n){if(t&1&&(g(0,"div"),y(1),h()),t&2){let e=n.$implicit;p(),Q(e)}}function AO(t,n){if(t&1){let e=pe();g(0,"div",125)(1,"h3"),y(2,"Combat Simulations (WIP)"),h(),g(3,"select",126),xt("ngModelChange",function(r){U(e);let o=E(2);return Nt(o.selectedMob,r)||(o.selectedMob=r),$(r)}),g(4,"option",127),y(5,"Select Mob"),h(),L(6,fO,2,2,"option",50),h(),g(7,"select",126),xt("ngModelChange",function(r){U(e);let o=E(2);return Nt(o.simulationSpeed,r)||(o.simulationSpeed=r),$(r)}),g(8,"option",51),y(9,"1x Speed"),h(),g(10,"option",51),y(11,"5x Speed"),h(),g(12,"option",51),y(13,"10x Speed"),h(),g(14,"option",51),y(15,"100x Speed"),h()(),L(16,hO,4,1,"div",112),g(17,"div")(18,"button",128),q("click",function(){U(e);let r=E(2);return $(r.startNewSimulation())}),y(19,"Run Simulation"),h(),L(20,pO,2,0,"button",129),h(),g(21,"div",130),L(22,EO,14,15,"div",112)(23,wO,5,8,"div",112)(24,bO,5,5,"div",112),h(),Z(25,"canvas",131,0),L(27,TO,12,1,"ng-container",112)(28,xO,12,1,"ng-container",112),g(29,"div",132),L(30,RO,2,1,"div",98),h()()}if(t&2){let e=E(2);p(3),Mt("ngModel",e.selectedMob),p(3),C("ngForOf",e.mobNames),p(),Mt("ngModel",e.simulationSpeed),p(),C("value",1),p(2),C("value",5),p(2),C("value",10),p(2),C("value",100),p(2),C("ngIf",e.getRole(e.currentPlayer.CLASSID,e.currentPlayer.SPEC)=="tank"),p(2),C("disabled",e.simulationRunning),p(2),C("ngIf",e.simulationRunning),p(2),C("ngIf",e.currentPlayer&&e.currentPlayer.resources&&(e.currentPlayer.resources.health||e.lastDpsValue)&&e.cachedStats),p(),C("ngIf",e.isHealing&&e.tankPlayer&&e.tankStats),p(),C("ngIf",e.mob&&e.mob.resources&&e.mob.resources.health),p(3),C("ngIf",!e.simulationRunning&&e.damageSourceEntries.length>0),p(),C("ngIf",!e.simulationRunning&&e.healingSourceEntries.length>0),p(2),C("ngForOf",e.simulationLogs)}}function PO(t,n){if(t&1&&(g(0,"div",142),y(1),h()),t&2){let e=n.$implicit,i=E(4);p(),Q(i.getConditionDisplay(e))}}function NO(t,n){if(t&1){let e=pe();g(0,"tr",138)(1,"td"),Z(2,"img",139),h(),g(3,"td"),y(4),h(),g(5,"td"),L(6,PO,2,1,"div",140),h(),g(7,"td")(8,"button",15),q("click",function(){let r=U(e).index,o=E(3);return $(o.removeGambit(r))}),y(9,"X"),h()(),g(10,"div",141),y(11,"\u2630"),h()()}if(t&2){let e=n.$implicit,i=E(3);p(2),C("src","/assets/icons/"+i.getActionIconData(e).iconName+".jpg",Ne),p(2),Q(e.name),p(2),C("ngForOf",e.conditions)}}function OO(t,n){if(t&1&&(g(0,"option",51),y(1),h()),t&2){let e=n.$implicit;C("value",e.id),p(),Q(e.name)}}function kO(t,n){if(t&1&&(g(0,"option",51),y(1),h()),t&2){let e=n.$implicit;C("value",e.index),p(),Q(e.value)}}function LO(t,n){if(t&1&&(g(0,"option",51),y(1),h()),t&2){let e=n.$implicit;C("value",e.index),p(),Q(e.value)}}function FO(t,n){if(t&1&&(g(0,"select",156)(1,"option",150),y(2,"Select Threshold"),h(),L(3,LO,2,2,"option",50),h()),t&2){let e=E(4);p(3),C("ngForOf",e.conditionB1Options)}}function VO(t,n){if(t&1&&(g(0,"option",51),y(1),h()),t&2){let e=n.$implicit;C("value",e.index),p(),Q(e.value)}}function jO(t,n){if(t&1&&(g(0,"option",51),y(1),h()),t&2){let e=n.$implicit;C("value",e.index),p(),Q(e.value)}}function HO(t,n){if(t&1&&(g(0,"select",159)(1,"option",150),y(2,"Select Threshold (optional)"),h(),L(3,jO,2,2,"option",50),h()),t&2){let e=E(5);p(3),C("ngForOf",e.conditionB2Options)}}function BO(t,n){if(t&1&&(g(0,"div",151)(1,"select",157)(2,"option",150),y(3,"Select Metric (optional)"),h(),L(4,VO,2,2,"option",50),h(),L(5,HO,4,1,"select",158),h()),t&2){let e,i=E(4);p(4),C("ngForOf",i.conditionAOptions),p(),C("ngIf",(e=i.gambitForm.get("conditionA2"))==null?null:e.value)}}function UO(t,n){if(t&1&&(g(0,"option",51),y(1),h()),t&2){let e=n.$implicit;C("value",e.index),p(),Q(e.value)}}function $O(t,n){if(t&1&&(g(0,"option",51),y(1),h()),t&2){let e=n.$implicit;C("value",e.index),p(),Q(e.value)}}function GO(t,n){if(t&1&&(g(0,"select",162)(1,"option",150),y(2,"Select Threshold (optional)"),h(),L(3,$O,2,2,"option",50),h()),t&2){let e=E(5);p(3),C("ngForOf",e.conditionB3Options)}}function zO(t,n){if(t&1&&(g(0,"div",151)(1,"select",160)(2,"option",150),y(3,"Select Metric (optional)"),h(),L(4,UO,2,2,"option",50),h(),L(5,GO,4,1,"select",161),h()),t&2){let e,i=E(4);p(4),C("ngForOf",i.conditionAOptions),p(),C("ngIf",(e=i.gambitForm.get("conditionA3"))==null?null:e.value)}}function WO(t,n){if(t&1){let e=pe();g(0,"div",143)(1,"form",144)(2,"select",145)(3,"option",146),y(4,"Spell"),h(),g(5,"option",147),y(6,"Attack"),h(),g(7,"option",148),y(8,"Potion"),h()(),g(9,"select",149)(10,"option",150),y(11,"Select Action"),h(),L(12,OO,2,2,"option",50),h(),g(13,"div",151)(14,"select",152)(15,"option",150),y(16,"Select Metric"),h(),L(17,kO,2,2,"option",50),h(),L(18,FO,4,1,"select",153),h(),L(19,BO,6,2,"div",154)(20,zO,6,2,"div",154),g(21,"button",155),q("click",function(){U(e);let r=E(3);return $(r.addGambit())}),y(22,"Add Gambit"),h()()()}if(t&2){let e,i,r,o=E(3);p(),C("formGroup",o.gambitForm),p(11),C("ngForOf",o.availableActions),p(5),C("ngForOf",o.conditionAOptions),p(),C("ngIf",(e=o.gambitForm.get("conditionA1"))==null?null:e.value),p(),C("ngIf",(i=o.gambitForm.get("conditionB1"))==null?null:i.value),p(),C("ngIf",(r=o.gambitForm.get("conditionB2"))==null?null:r.value)}}function qO(t,n){if(t&1){let e=pe();g(0,"div",134)(1,"h3"),y(2,"Combat Gambits (WIP)"),h(),g(3,"table",135),q("cdkDropListDropped",function(r){U(e);let o=E(2);return $(o.onGambitDrop(r))}),g(4,"tr")(5,"th"),y(6,"Icon"),h(),g(7,"th"),y(8,"Action"),h(),g(9,"th"),y(10,"Condition"),h(),g(11,"th"),y(12,"Rem"),h()(),L(13,NO,12,3,"tr",136),h(),L(14,WO,23,6,"div",137),h()}if(t&2){let e=E(2);p(13),C("ngForOf",e.gambits),p(),C("ngIf",e.availableActions.length)}}function YO(t,n){if(t&1){let e=pe();g(0,"div",120)(1,"div",75)(2,"button",15),q("click",function(){U(e);let r=E();return $(r.setGambitSubTab("setup"))}),Z(3,"img",121),h(),g(4,"button",15),q("click",function(){U(e);let r=E();return $(r.setGambitSubTab("simulations"))}),Z(5,"img",122),h()(),L(6,AO,31,16,"div",123)(7,qO,15,2,"div",124),h()}if(t&2){let e=E();p(2),De("active",e.selectedGambitSubTab==="setup"),p(2),De("active",e.selectedGambitSubTab==="simulations"),p(2),C("ngIf",e.selectedGambitSubTab==="simulations"),p(),C("ngIf",e.selectedGambitSubTab==="setup")}}var Md=(()=>{let n=class n{constructor(i,r,o,a,s,l,c,u,d,_,f){this.http=i,this.animationService=r,this.statsService=o,this.dataService=a,this.utilityService=s,this.modelViewerService=l,this.gearService=c,this.helpService=u,this.simulationService=d,this.fb=_,this.cdr=f,this.currentPlayer=null,this.players=[],this.guildBank={gold:0,fieryCores:0,lavaCores:0},this.backToGridEvent=new Ee,this.playerIndex=-1,this.origSpec=-1,this.equippedItems=[],this.inventoryItems=[],this.selectedTooltip=null,this.selectedInventorySlot=null,this.selectedTab="gear",this.selectedSpecTab=0,this.selectedSpellTab="class",this.selectedGearSubTab="equipment",this.selectedStatsSubTab="base",this.selectedGambitSubTab="setup",this.talentBuilds=[0,1,2],this.cachedStats=null,this.spellTooltips=null,this.selectedRaceId=1,this.selectedGender=0,this.availableOptions=ri[0].options,this.isEditingName=!1,this.newPlayerName="",this.useCompactTooltips=!1,this.clickX=null,this.clickY=null,this.isBuying=!1,this.buyTimer=null,this.generalStats=dd,this.resistanceStats=hd,this.spellPowerStats=fd,this.spellSchool=Pn,this.durIndex=Za,this.gambits=[{type:"spell",name:"Frostbolt",actionId:25304,conditions:[101]},{type:"spell",name:"Evocation",actionId:12051,conditions:[309]},{type:"spell",name:"Shoot",actionId:5019,conditions:[310]}],this.availableActions=[],this.conditionAOptions=[],this.conditionB1Options=[],this.conditionB2Options=[],this.conditionB3Options=[],this.conditionBOptions=Object.keys(hn).map(v=>({index:+v,value:hn[+v]})),this.formSubscriptions=[],this.selectedMob="Molten Giant",this.mob=null,this.mobNames=[],this.mobStats=null,this.simulationRunning=!1,this.simulationLogs=[],this.simulationSpeed=1,this.simTime=0,this.regenTimer=0,this.simTimer=null,this.isTanking=!1,this.totalDamage=0,this.totalHealing=0,this.damageBySource={},this.healingBySource={},this.dps=0,this.dpsHistory=[],this.hps=0,this.hpsHistory=[],this.healthHistory=[],this.manaHistory=[],this.isHealing=!1,this.tankPlayer=null,this.tankItems=[],this.tankStats=null,this.shieldSpellIds={physical:[10193],fire:[10225,17543],frost:[28609,17544],nature:[17546],shadow:[28610,17548],arcane:[17549],all:[10901,13033,17252,27778]},this.showHelpButton=!0,this.showHelpOverlay=!1,this.gambitForm=this.fb.group({type:["spell"],actionId:[""],conditionA1:[""],conditionB1:[""],conditionA2:[""],conditionB2:[""],conditionA3:[""],conditionB3:[""]})}ngOnInit(){let i=localStorage.getItem("useCompactTooltips");i!==null&&(this.useCompactTooltips=i.toLowerCase()==="true"),this.useCompactTooltips&&document.body.classList.add("compact-tooltip"),this.currentPlayer&&(this.viewPlayer(this.currentPlayer),this.updateAvailableActions(this.gambitForm.get("type")?.value),this.updateConditionAOptions()),this.mobNames=this.dataService.getRaidStats().map(r=>r.name).sort(),this.selectedMob=this.mobNames.includes("Molten Giant")?"Molten Giant":this.mobNames[0]||"",this.gambitForm.get("type").valueChanges.subscribe(r=>{this.updateAvailableActions(r),this.gambitForm.get("actionId").setValue("")}),this.formSubscriptions.push(this.gambitForm.get("conditionA1").valueChanges.subscribe(r=>{this.conditionB1Options=this.getConditionBOptions(r),this.cdr.markForCheck()}),this.gambitForm.get("conditionA2").valueChanges.subscribe(r=>{this.conditionB2Options=this.getConditionBOptions(r),this.cdr.markForCheck()}),this.gambitForm.get("conditionA3").valueChanges.subscribe(r=>{this.conditionB3Options=this.getConditionBOptions(r),this.cdr.markForCheck()})),this.simulationService.logs$.subscribe(r=>{this.simulationLogs.push(r),this.cdr.markForCheck()}),this.simulationService.dpsHistory$.subscribe(r=>this.dpsHistory=r),this.simulationService.hpsHistory$.subscribe(r=>this.hpsHistory=r),this.simulationService.healthHistory$.subscribe(r=>this.healthHistory=r),this.simulationService.manaHistory$.subscribe(r=>this.manaHistory=r),this.simulationService.damageBySource$.subscribe(r=>this.damageBySource=r),this.simulationService.healingBySource$.subscribe(r=>this.healingBySource=r),this.simulationService.simulationRunning$.subscribe(r=>this.simulationRunning=r),this.simulationService.chartUpdate$.subscribe(()=>this.updateChart())}ngOnDestroy(){this.simTimer&&clearInterval(this.simTimer),this.modelViewerService.destroyModelViewer(),this.stopRandomizing(),this.cancelBuyItem(),this.formSubscriptions.forEach(i=>i.unsubscribe())}getColor(i){return this.utilityService.getColor(i)}getHelpContent(){return this.helpService.getHelpPlayer(this.currentPlayer,this.selectedTab,this.selectedSpecTab,this.selectedSpellTab,this.selectedGearSubTab,this.selectedStatsSubTab,this.talentBuilds)}toggleHelpOverlay(){this.showHelpOverlay=!this.showHelpOverlay}onGambitDrop(i){bd(this.gambits,i.previousIndex,i.currentIndex)}startNewSimulation(){!this.currentPlayer||!this.cachedStats||(this.simulationLogs=[],this.simulationService.startSimulation(this.currentPlayer,this.players,this.equippedItems,this.gambits,this.isTanking,this.isHealing,this.simulationSpeed,this.selectedMob))}get damageSourceEntries(){return Object.keys(this.damageBySource).map(i=>({key:i,value:this.damageBySource[i]}))}get healingSourceEntries(){return Object.keys(this.healingBySource).map(i=>({key:i,value:this.healingBySource[i]}))}stopSimulation(){this.simulationService.stopSimulation(),console.log(this.healingBySource),this.cdr.detectChanges()}updateChart(){if(!this.dpsChart)return;let i=this.dpsChart.nativeElement,r=i.getContext("2d");if(!r||(r.clearRect(0,0,i.width,i.height),this.dpsHistory.length<2))return;let o=i.height,a=i.width,s=(_,f,v,T)=>{if(_.length<2)return;let b=_[_.length-1].time;r.beginPath(),r.moveTo(0,v+o-_[0].value/T*o);for(let M=1;M<_.length;M++){let W=_[M].time/b*a,H=v+o-_[M].value/T*o;r.lineTo(W,H)}r.strokeStyle=f,r.lineWidth=2,r.stroke()},l=Math.max(...this.dpsHistory.map(_=>_.value))||1;this.isHealing&&(l=Math.max(...this.hpsHistory.map(_=>_.value))||1),this.isHealing?s(this.hpsHistory,"yellow",0,l):s(this.dpsHistory,"yellow",0,l);let c=this.healthHistory;this.isHealing&&(c=this.healthHistory);let u=Math.max(...c.map(_=>_.value))||1;s(c,"red",0,u);let d=Math.max(...this.manaHistory.map(_=>_.value))||1;s(this.manaHistory,"blue",0,d)}isEnergyUser(){if(!this.currentPlayer)return!1;let i=+this.currentPlayer.CLASSID,r=+this.currentPlayer.SPEC;return i===6?!0:i!==0?!1:!!this.currentPlayer.activeBuffs.find(a=>+a.spellId==768)}isRageUser(){if(!this.currentPlayer)return!1;let i=+this.currentPlayer.CLASSID,r=+this.currentPlayer.SPEC;return i===7?!0:i!==0?!1:!!this.currentPlayer.activeBuffs.find(a=>+a.spellId==9634)}getActionName(i){return this.availableActions.find(r=>+r.id===i)?.name||"Unknown"}getActionIconData(i){if(i.type==="spell"){let r=this.getSpells("class").find(o=>+o.SPELLID==+i.actionId);return r?{iconName:r.ICON_NAME,altText:r.SPELLNAME}:{iconName:"inv_misc_questionmark",altText:i.name}}else if(i.type==="pot"){let r=this.dataService.getConsumables().find(o=>+o.DB_ID==+i.actionId);return r?{iconName:r.ICON_NAME||"inv_potion_01",altText:r.NAME}:{iconName:"inv_potion_01",altText:i.name}}else return{iconName:"inv_sword_01",altText:i.name}}loadDefaultGambit(){if(!this.currentPlayer)return;let i=this.dataService.getDefaultGambits().filter(r=>Number(r.class)===Number(this.currentPlayer?.CLASSID)&&Number(r.spec)===Number(this.currentPlayer?.SPEC));this.gambits=[],i.forEach(r=>{let o=[0];r.conditions&&(o=r.conditions.split(";").map(Number)),this.gambits.push({type:r.type,actionId:r.actionId,name:r.name,conditions:o})})}addGambit(){let{type:i,actionId:r,conditionA1:o,conditionB1:a,conditionA2:s,conditionB2:l,conditionA3:c,conditionB3:u}=this.gambitForm.value;if(i&&r){let d=[o&&a?+o*100+ +a:0,s&&l?+s*100+ +l:0,c&&u?+c*100+ +u:0].filter(f=>f!==0).slice(0,3);d.length===0&&d.push(0);let _=this.getActionName(+r);this.gambits.push({type:i,actionId:+r,name:_,conditions:d}),this.gambitForm.reset({type:"spell",actionId:"",conditionA1:"",conditionB1:"",conditionA2:"",conditionB2:"",conditionA3:"",conditionB3:""})}}removeGambit(i){this.gambits.splice(i,1)}updateConditionAOptions(){let i=this.currentPlayer?.CLASSID,r=this.currentPlayer?.SPEC;this.conditionAOptions=Object.keys(pd).map(o=>+o).filter(o=>o===6||o===8?i&&(+i==6||+i==1):o===7?i&&(+i==1||+i==7):o===9?i&&r&&this.getRole(+i,+r)==="tank":!0).map(o=>({index:o,value:pd[o]}))}updateAvailableActions(i){i==="spell"&&this.currentPlayer&&this.currentPlayer.SPEC?this.availableActions=this.getSpells("class").sort((r,o)=>r.SPELLNAME.localeCompare(o.SPELLNAME)).map(r=>({id:r.SPELLID,name:r.SPELLNAME,type:"spell"})):i==="pot"?this.availableActions=this.dataService.getConsumables().filter(r=>r.CD_SHARE>0).map(r=>({id:r.DB_ID,name:r.NAME,type:"pot"})):i==="attack"&&(this.availableActions=[{id:6603,name:"Attack:On",type:"attack"},{id:6604,name:"Attack:Off",type:"attack"}])}getConditionDisplay(i){if(i===0)return"None";let r=Math.floor(i/100),o=i%100;return`${pd[r]||"Unknown"} ${hn[o]||"Unknown"}`}getConditionBOptions(i){return i&&+i==8?Object.keys(hn).map(r=>+r).filter(r=>r>=21&&r<=25).map(r=>({index:r,value:hn[r]})):i&&+i==9?Object.keys(hn).map(r=>+r).filter(r=>r>=26&&r<=27).map(r=>({index:r,value:hn[r]})):i&&+i==10?Object.keys(hn).map(r=>+r).filter(r=>r>=31&&r<=34).map(r=>({index:r,value:hn[r]})):Object.keys(hn).map(r=>+r).filter(r=>r<=20).map(r=>({index:r,value:hn[r]}))}viewPlayer(i){if(this.currentPlayer=N({},i),!this.currentPlayer)return;this.playerIndex=this.players.findIndex(a=>a.NAME===this.currentPlayer.NAME),this.selectedTab="gear";let r=this.currentPlayer.SPEC;if(this.origSpec=r,this.isTanking=this.getRole(this.currentPlayer.CLASSID,this.currentPlayer.SPEC)==="tank",this.isHealing=this.getRole(this.currentPlayer.CLASSID,this.currentPlayer.SPEC)==="heal",this.selectedRaceId=+this.currentPlayer.RACE,this.selectedGender=+this.currentPlayer.GENDER,this.updateAvailableOptions(),this.selectedSpecTab=this.talentBuilds[r]||0,this.equippedItems=[],this.inventoryItems=[],this.selectedTooltip=null,this.selectedInventorySlot=null,[1,2,3,5,6,7,8,9,10,11,12,13,14,16,21,22,26].forEach(a=>{let s=i[`SLOT_${a}`];s&&!isNaN(+s)?this.equippedItems.push({slot:a,dbId:+s}):this.equippedItems.push({slot:a,dbId:-1})}),i.INVENTORY){let a=new Map;i.INVENTORY.split(";").map(l=>+l.trim()).filter(l=>!isNaN(l)).forEach(l=>{let c=this.dataService.getItemsMap().get(l);if(c){let d={17:21,21:21,14:22,23:22,13:23,12:13,20:5,28:26}[c.eq_type]??c.eq_type;if(d!==-1){let f={23:[21,22],13:[13,14],11:[11,12]}[d]||[d];for(let v of f){let T=a.get(v)||[];T.push(l),a.set(v,T)}}}}),a.forEach((l,c)=>{this.inventoryItems.push({slot:c,dbIds:l})})}this.recalculateStats(),this.loadDefaultGambit(),this.destroyModelViewer(),setTimeout(()=>{this.currentPlayer&&this.loadModel(this.currentPlayer)},0)}recalculateStats(){this.cachedStats=this.statsService.calculateStats(this.selectedStatsSubTab!=="base",this.currentPlayer,this.equippedItems,this.players),this.spellTooltips=this.calculateSpellTooltips()}updateAvailableOptions(){let i=ri.find(r=>r.RACEID===+this.selectedRaceId&&r.GENDER===+this.selectedGender);this.availableOptions=i?i.options:ri[0].options}updateCustomization(i,r){this.currentPlayer&&(this.currentPlayer=ue(N({},this.currentPlayer),{[i]:r}),this.players[this.playerIndex][i]=r,this.modelViewerService.updateAppearance(this.currentPlayer),this.dataService.saveVariableToStorage("players",this.players))}updateRaceGender(i,r){this.selectedRaceId=i,this.selectedGender=r,this.updateAvailableOptions(),this.currentPlayer&&(this.currentPlayer=ue(N({},this.currentPlayer),{RACE:i,GENDER:r,SKIN:0,FACE:0,HAIRSTYLE:0,HAIRCOLOR:0,FACIALSTYLE:0}),this.players[this.playerIndex].RACE=i,this.players[this.playerIndex].GENDER=r,this.modelViewerService.destroyModelViewer(),this.loadModel(this.currentPlayer),this.dataService.saveVariableToStorage("players",this.players))}randomizeCustomization(){if(!this.currentPlayer||!this.availableOptions)return;["SKIN","FACE","HAIRSTYLE","HAIRCOLOR","FACIALSTYLE"].forEach(r=>{let o=this.availableOptions[r]||0;if(o>0){let a=Math.floor(Math.random()*o);this.updateCustomization(r,a)}})}startRandomizing(){this.stopRandomizing(),this.randomizeTimeout=setTimeout(()=>{this.randomizeCustomization(),this.randomizeInterval=setInterval(()=>{this.randomizeCustomization()},25)},500)}stopRandomizing(){this.randomizeTimeout&&(clearTimeout(this.randomizeTimeout),this.randomizeTimeout=null),this.randomizeInterval&&(clearInterval(this.randomizeInterval),this.randomizeInterval=null)}setTab(i){this.selectedTab=i,i==="gambits"&&(this.selectedGambitSubTab="setup"),i==="gear"&&this.currentPlayer&&setTimeout(()=>{this.modelViewerService.destroyModelViewer(),this.currentPlayer&&this.loadModel(this.currentPlayer)},0),(i==="spec"||i==="spells"||i==="stats")&&setTimeout(()=>{let r=document.querySelector(".content-area");r&&(r.scrollTop=0)},0)}setGambitSubTab(i){this.selectedGambitSubTab=i,setTimeout(()=>{let r=document.querySelector(".content-area");r&&(r.scrollTop=0)},0)}setSpecTab(i){this.selectedSpecTab=i,this.currentPlayer&&(this.currentPlayer.SPEC=i,this.players[this.playerIndex].SPEC=i,this.recalculateStats(),this.loadDefaultGambit(),this.dataService.saveVariableToStorage("players",this.players),setTimeout(()=>{let r=document.querySelector(".content-area");r&&(r.scrollTop=0)},0))}setSpellTab(i){this.selectedSpellTab=i,setTimeout(()=>{let r=document.querySelector(".content-area");r&&(r.scrollTop=0)},0)}setGearSubTab(i){this.selectedGearSubTab=i,this.selectedTooltip=null,this.selectedInventorySlot=null,setTimeout(()=>{let r=document.querySelector(".content-area");r&&(r.scrollTop=0)},0)}setStatsSubTab(i){this.selectedStatsSubTab=i,this.recalculateStats(),setTimeout(()=>{let r=document.querySelector(".content-area");r&&(r.scrollTop=0)},0)}getFilteredInventoryItems(i){return this.gearService.getFilteredInventoryItems(i,this.currentPlayer,this.selectedGearSubTab,this.inventoryItems)}isItemOwned(i){return this.gearService.isItemOwned(i,this.inventoryItems,this.equippedItems)}canAffordItem(i){return this.gearService.canAffordItem(i,this.guildBank)}startBuyItem(i){this.isItemOwned(i)||!this.canAffordItem(i)||(this.isBuying=!0,this.buyTimer=setTimeout(()=>{this.buyItem(i),this.isBuying=!1},2e3))}cancelBuyItem(){this.buyTimer&&(clearTimeout(this.buyTimer),this.buyTimer=null,this.isBuying=!1)}buyItem(i){this.gearService.buyItem(i,this.currentPlayer,this.playerIndex,this.guildBank,this.inventoryItems,this.players),this.selectedTooltip=null,this.selectedInventorySlot=null,this.dataService.saveVariableToStorage("players",this.players),this.dataService.saveVariableToStorage("guildBank",this.guildBank)}get petNames(){return this.cachedStats?.pets?Object.keys(this.cachedStats.pets):[]}getSlotName(i){return this.utilityService.getSlotName(i)}getSlotSide(i){return this.utilityService.getSlotSide(i)}getItemIcon(i){return this.utilityService.getItemIcon(i)}getItemTooltip(i){return this.utilityService.getItemTooltip(i,this.equippedItems)}getItemQuality(i){if(i!==-1){let r=this.dataService.getItemsMap().get(i);if(r&&r.item_quality)return+r.item_quality||0}return 2}toggleItemTooltip(i,r,o=!1,a){let s=this.selectedTooltip&&this.selectedTooltip.slot===i&&this.selectedTooltip.dbId===r&&this.selectedTooltip.isInventory===o,l=this.selectedTooltip&&this.selectedTooltip.slot===i||this.selectedInventorySlot&&this.selectedInventorySlot==i;s?o&&this.selectedInventorySlot===i?(this.swapItem(i,r),this.selectedTooltip=null,this.selectedInventorySlot=null):o||(this.selectedInventorySlot?(this.selectedTooltip=null,this.selectedInventorySlot=null):(this.selectedTooltip=null,this.selectedInventorySlot=i)):l&&!o?(this.selectedTooltip=null,this.selectedInventorySlot=null):(this.selectedTooltip={slot:i,dbId:r,isInventory:o},o?this.selectedInventorySlot=i:this.selectedInventorySlot=null);let c=document.querySelector(".content-area"),u=c.getBoundingClientRect();this.clickX=a.clientX-u.left,this.clickY=a.clientY-u.top+c.scrollTop,setTimeout(()=>{let d=document.querySelector(".tooltip");if(d){let _=d.getBoundingClientRect(),f=u.height,v=_.height,T=(f-v)/2;this.clickY!==null&&(T-=this.clickY),d.style.top=`${T}px`}},0)}swapItem(i,r){if(!this.currentPlayer)return;let o=this.selectedGearSubTab==="equipment";this.gearService.swapItem(i,r,this.currentPlayer,this.playerIndex,this.equippedItems,this.players,o),[2,11,12,13,14].includes(i)||(this.modelViewerService.destroyModelViewer(),this.loadModel(this.currentPlayer)),this.dataService.saveVariableToStorage("players",this.players),this.recalculateStats(),this.selectedTooltip=null,this.selectedInventorySlot=null}loadModel(i){return mt(this,null,function*(){yield this.modelViewerService.loadModel(i,this.equippedItems)})}onAnimationChange(i){let r=i.target;this.animationService.updateAnimation2(this.modelViewerService.getModelViewer(),r.value)}toggleNameEdit(){this.currentPlayer&&(this.isEditingName=!this.isEditingName,this.isEditingName&&(this.newPlayerName=this.currentPlayer.NAME))}savePlayerName(){if(!this.newPlayerName||this.newPlayerName.trim()===""||!this.currentPlayer){this.isEditingName=!1;return}if(this.players.some((r,o)=>o!==this.playerIndex&&r.NAME.toLowerCase()===this.newPlayerName.trim().toLowerCase())){console.warn("Name already exists:",this.newPlayerName),this.isEditingName=!1;return}this.players[this.playerIndex].NAME=this.newPlayerName.trim(),this.currentPlayer.NAME=this.newPlayerName.trim(),this.isEditingName=!1,this.dataService.saveVariableToStorage("players",this.players)}destroyModelViewer(){this.modelViewerService.destroyModelViewer()}getPlayerSpells(){if(!this.currentPlayer)return[];let i=this.currentPlayer.CLASSID,r=this.currentPlayer.SPEC,o=$t[i]?.[r]?.spellList||[];return this.dataService.getSpells().filter(a=>o.includes(+a.SPELLID))}getSpells(i){return i==="class"?this.dataService.getSpells().filter(r=>{if(Number(r.CLASSID)!==Number(this.currentPlayer.CLASSID)||Number(r.RACEID)!==0)return!1;if(r.SOURCE==="Talent"){let o=this.currentPlayer?.SPEC??0,a=["SPEC_0","SPEC_1","SPEC_2"][o];return this.dataService.getTalents().some(s=>Number(s.CLASSID)===Number(this.currentPlayer?.CLASSID)&&+s.SPELLID==+r.SPELLID&&+s[a]==1)}return!0}):i==="racial"?this.dataService.getSpells().filter(r=>(Number(r.CLASSID)===Number(this.currentPlayer?.CLASSID)||+r.CLASSID==-1)&&+r.RACEID===Number(this.currentPlayer?.RACE)):[]}getTalents(i){let o=["SPEC_0","SPEC_1","SPEC_2"][i];return this.dataService.getTalents().filter(a=>Number(a.CLASSID)===Number(this.currentPlayer?.CLASSID)&&+a[o]==1)}getTalentName(){return!this.currentPlayer||this.selectedSpecTab===null?"":this.utilityService.getTalentName(this.currentPlayer,this.selectedSpecTab)}getTalentIcon(i){return this.currentPlayer?this.utilityService.getTalentIcon(this.currentPlayer,i):""}getRole(i,r){return this.utilityService.getRole(i,r)}getClassName(i=7){return this.utilityService.getClassName(i)}getRaceName(i){return this.utilityService.getRaceName(i)}getAvailableRaces(){if(!this.currentPlayer||!this.currentPlayer.CLASSID)return Array.from(new Map(ri.map(a=>[a.RACEID,a])).values());let i=TE[+this.currentPlayer.CLASSID]||[];return ri.filter(o=>i.includes(o.RACEID)).reduce((o,a)=>(o.some(s=>s.RACEID===a.RACEID)||o.push(a),o),[])}isBottomUpSlot(i){return[21,22,26,7,8,9].includes(i)}getRange(i){return Array.from({length:i},(r,o)=>o)}getItems(){return this.dataService.getItemsMap()}calculateSpellTooltips(){let i=this.dataService.getSpells(),r=this.dataService.getTalents();if(!this.currentPlayer||!this.cachedStats||!i||!r)return console.warn("Missing required data for tooltip calculation"),[];let o=+this.currentPlayer.CLASSID,a=+this.currentPlayer.SPEC,s=$t[o]?.[a]?.spellList||[],l=r.filter(c=>+c[`SPEC_${a}`]==1&&+c.CLASSID===o);return s.map(c=>{let u=i.find(v=>+v.SPELLID===c);if(!u)return console.warn(`Spell ID ${c} not found`),null;let d=u.TOOLTIP,_=this.statsService.getTalentModifications(c,l);if(d=this.updateTooltipSections(d,_),c===27871&&(u=i.find(v=>+v.SPELLID==27874)),[2,5,10,11].includes(+u.SPELLTYPE)||+u.SPELLID==10901){let v=this.statsService.calculateDamageValues(u,l,this.cachedStats,5),{minDmg1:T,maxDmg1:b,minDmg2:M,maxDmg2:W,ticks:H}=v,O=d.match(/<div class="q">(.*?)<\/div>/s);if(O){let V=O[1],S="";if(M>2&&+u.WeaponDmg==0)T>2?b-T<=1?S=`(${Math.round(b)} + ${Math.round(W)})`:W-M<=1?S=`(${Math.round(T)}-${Math.round(b)} + ${Math.round(W)})`:S=`(${Math.round(T)}-${Math.round(b)} + ${Math.round(M)}-${Math.round(W)})`:W-M<=1?S=`(${Math.round(W)})`:S=`(${Math.round(M)}-${Math.round(W)})`;else{let m=+u.EffectPointsPerComboPoint1>0?5:0;b-T<=1?S=m>0?`(Max 5 CP: ${Math.round(T)})`:`(${Math.round(T)})`:S=m>0?`(Max 5 CP: ${Math.round(T)}-${Math.round(b)})`:`(${Math.round(T)}-${Math.round(b)})`}V=`${V} ${S}`,d=d.replace(O[0],`<div class="q">${V}</div>`)}else console.warn(`No description found for ${u.SPELLNAME} (ID: ${c})`)}return{spellId:c,name:u.SPELLNAME,icon:u.ICON_NAME,updatedTooltip:d}}).filter(c=>c!==null)}updateTooltipSections(i,r){let o=i;if(r.rangeMod){let a=o.match(/(?:(\d+(?:\.\d+)?)\s*-\s*)?(\d+(?:\.\d+)?)\s*yd(?:\s*range)?/i);if(a){let s=a[1]?parseFloat(a[1]):null,l=parseFloat(a[2]);r.rangeMod.type==="percent"?l*=1+r.rangeMod.value/100:l+=r.rangeMod.value;let c=s!==null?`${s} - ${a[2]} (${Math.round(l)}) yd range`:`${a[2]} (${Math.round(l)}) yd range`;o=o.replace(a[0],c)}else if(o.includes("melee range")){let s=`Melee range (${r.rangeMod.value} yd)`;o=o.replace("melee range",s)}}if(r.costMod){let a=o.match(/(\d+)\s*(mana|energy|rage)/i);if(a){let l=parseInt(a[1]);r.costMod.type==="percent"?l*=1-r.costMod.value/100:l-=r.costMod.value;let c=`${a[1]} (${Math.round(l)}) ${a[2]}`;o=o.replace(a[0],c)}let s=o.match(/(\d+)% of base mana/i);if(s){let l=parseInt(s[1]);r.costMod.type==="percent"?l*=1-r.costMod.value/100:l-=r.costMod.value;let c=`${s[1]} (${l.toFixed(1)})% of base mana`;o=o.replace(s[0],c)}}if(r.castTimeMod){let a=o.match(/(\d+(?:\.\d+)?)\s*sec\s*cast/i);if(a){let s=parseFloat(a[1]),l=Math.max(0,s-r.castTimeMod.value),c=`${a[1]} (${l.toFixed(1)}) sec cast`;o=o.replace(a[0],c)}}if(r.cooldownMod){let a=o.match(/(\d+(?:\.\d+)?)\s*sec\s*cooldown/i);if(a){let c=parseFloat(a[1]),u=Math.max(0,c-r.cooldownMod.value),d=`${a[1]} (${u.toFixed(1)}) sec cooldown`;o=o.replace(a[0],d)}let s=o.match(/(\d+(?:\.\d+)?)\s*min\s*cooldown/i);if(s){let c=parseFloat(s[1]),u=Math.max(0,c-r.cooldownMod.value/60),d=`${s[1]} (${u.toFixed(2)}) min cooldown`;o=o.replace(s[0],d)}let l=o.match(/(\d+(?:\.\d+)?)\s*hour\s*cooldown/i);if(l){let c=parseFloat(l[1]),u=Math.max(0,c-r.cooldownMod.value/3600),d=`${l[1]} (${u.toFixed(2)}) hr cooldown`;o=o.replace(l[0],d)}}if(r.durationMod){let a=o.match(/over\s+(\d+(?:\.\d+)?)\s*(?:sec|seconds)/i);if(a){let s=parseFloat(a[1]);r.durationMod.type==="percent"?s*=1+r.durationMod.value/100:s+=r.durationMod.value;let l=`over ${a[1]} (${Math.round(s)}) sec`;o=o.replace(a[0],l)}}return o}getResistTable(){return this.statsService.getResistTable(this.cachedStats.resistances,-15)}getCombatTable(i){return this.currentPlayer?this.statsService.getCombatTable(this.currentPlayer,this.cachedStats,i):[]}showDualWieldTable(){return this.cachedStats?this.cachedStats.damage.OHmin>0:!1}showMeleeTable(){return this.currentPlayer?[2,6,7].includes(+this.currentPlayer.CLASSID)||$t[this.currentPlayer.CLASSID]?.[this.currentPlayer.SPEC]?.role==="tank":!1}showRangedTable(){return Number(this.currentPlayer?.CLASSID)===5}get lastDpsValue(){return this.dpsHistory.length?this.dpsHistory[this.dpsHistory.length-1].value:null}get lastHpsValue(){return this.hpsHistory.length?this.hpsHistory[this.hpsHistory.length-1].value:null}backToGrid(){console.log("Back to grid clicked",this.playerIndex,this.currentPlayer,this.players,this.guildBank),this.playerIndex!==-1&&this.currentPlayer&&this.origSpec!==this.currentPlayer.SPEC&&(this.players[this.playerIndex].SPEC=this.currentPlayer.SPEC,this.guildBank.gold>500?this.guildBank.gold-=50:this.guildBank.gold*=.9,this.dataService.saveVariableToStorage("guildBank",this.guildBank),this.dataService.saveVariableToStorage("players",this.players)),this.stopRandomizing(),this.cancelBuyItem(),this.destroyModelViewer(),this.backToGridEvent.emit()}};n.\u0275fac=function(r){return new(r||n)(K(Yi),K(_s),K(gn),K(gt),K(Gt),K(Tw),K(gs),K(vd),K(Mw),K(bC),K(Ut))},n.\u0275cmp=jt({type:n,selectors:[["app-player-view"]],viewQuery:function(r,o){if(r&1&&Vo(qP,5),r&2){let a;xr(a=Rr())&&(o.dpsChart=a.first)}},inputs:{currentPlayer:"currentPlayer",players:"players",guildBank:"guildBank"},outputs:{backToGridEvent:"backToGridEvent"},decls:27,vars:26,consts:[["dpsChart",""],["class","help-button",3,"ngClass","click",4,"ngIf"],["class","help-overlay",4,"ngIf"],[1,"player-view"],[1,"player-header"],["class","player-name",3,"ngStyle","click",4,"ngIf"],["class","player-name-input",3,"ngModel","ngModelChange","blur","keyup.enter",4,"ngIf"],["alt","role icon",1,"role-icon2",3,"src"],[1,"content-area"],["class","model-wrapper",4,"ngIf"],["class","stats-tab-content",4,"ngIf"],["class","spells",4,"ngIf"],["class","spec",4,"ngIf"],["class","gambits-content",4,"ngIf"],[1,"tab-buttons"],[3,"click"],[3,"src"],[1,"help-button",3,"click","ngClass"],["src","/assets/icons/inv_misc_questionmark.jpg","alt","Help"],[1,"help-overlay"],[1,"help-content",3,"innerHTML"],[1,"help-close-btn",3,"click"],[1,"player-name",3,"click","ngStyle"],[1,"player-name-input",3,"ngModelChange","blur","keyup.enter","ngModel"],[1,"model-wrapper"],["class","buy-button-container",4,"ngIf"],["class","guild-bank-bar",4,"ngIf"],[1,"spec-tabs","gear-sub-tabs"],["src","/assets/icons/inv_misc_bag_08.jpg"],["src","/assets/icons/vas_racechange.jpg"],["src","/assets/icons/inv_misc_coin_02.jpg"],["src","/assets/icons/spell_nature_astralrecalgroup.jpg"],["src","/assets/icons/achievement_boss_ragnaros.jpg"],["id","model-viewer"],["class","select-wrapper",4,"ngIf"],["class","customization-form",4,"ngIf"],["class","item-columns-container",4,"ngIf"],[2,"height","127px"],[1,"buy-button-container"],["class","buy-button owned","disabled","",4,"ngIf"],["class","buy-button",3,"can-afford","cannot-afford","buying","pointerdown","pointerup","pointerleave",4,"ngIf"],["disabled","",1,"buy-button","owned"],[1,"buy-button",3,"pointerdown","pointerup","pointerleave"],["src","/assets/icons/spell_fire_flamebolt.jpg","alt","Fiery Core",1,"bank-icon"],["src","/assets/icons/spell_nature_earthquake.jpg","alt","Lava Core",1,"bank-icon"],[1,"guild-bank-bar"],[1,"guild-bank-item"],["src","/assets/icons/ui_plundercoins.jpg","alt","Gold",1,"bank-icon"],[1,"select-wrapper"],[3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"customization-form"],[1,"form-group"],[3,"ngModelChange","change","ngModel"],[1,"centered-button"],[1,"toggle-customization",3,"pointerdown","pointerup","pointerleave","click"],["src","/assets/icons/inv_misc_dice_01.jpg"],[1,"item-columns-container"],[1,"item-column","left"],["class","item-slot",4,"ngFor","ngForOf"],[1,"item-column","right"],[1,"item-slot"],["alt","Item icon",1,"item-icon",3,"click","src"],["class","tooltip",3,"ngClass","innerHTML",4,"ngIf"],["class","inventory-list",3,"ngClass",4,"ngIf"],[1,"tooltip",3,"ngClass","innerHTML"],[1,"inventory-list",3,"ngClass"],[1,"inventory-grid"],["class","inventory-item",4,"ngFor","ngForOf"],[1,"inventory-item"],[1,"unequip-button",3,"click"],["alt","Inventory item",1,"item-icon",3,"click","src"],[1,"inventory-grid","right"],[1,"stats-tab-content"],[1,"spec-tabs"],["src","assets/icons/spell_holy_blessingofstrength.jpg","alt","Base Stats"],["src","assets/icons/spell_nature_strength.jpg","alt","Buffed Stats"],[1,"stats-grid"],[1,"stats-content"],["open",""],[1,"section-title"],["class","stat-item",4,"ngFor","ngForOf"],["class","stat-item",4,"ngIf"],["close",""],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],["class","combat-table",4,"ngIf"],["close","",4,"ngIf"],[1,"combat-table"],[1,"table-grid2"],[1,"table-header"],["src","/assets/icons/spell_fire_flamebolt.jpg","alt","Fire icon","title","Fire",1,"spell-icon"],["src","/assets/icons/spell_shadow_shadowbolt.jpg","alt","Shadow icon","title","Shadow",1,"spell-icon"],["src","/assets/icons/spell_nature_resistnature.jpg","alt","Nature icon","title","Nature",1,"spell-icon"],["src","/assets/icons/spell_frost_frostbolt02.jpg","alt","Frost icon","title","Frost",1,"spell-icon"],["src","/assets/icons/spell_nature_starfall.jpg","alt","Arcane icon","title","Arcane",1,"spell-icon"],[4,"ngFor","ngForOf"],["class","spell-item",4,"ngFor","ngForOf"],[1,"table-grid"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[1,"table-label"],[1,"table-value"],["class","pet-section",4,"ngFor","ngForOf"],[1,"pet-section"],[1,"pet-title"],[1,"spell-item"],[1,"spell-icon",3,"src","alt"],[1,"spell-tooltip",3,"innerHTML"],[1,"spells"],[4,"ngIf"],["class","spells-content",4,"ngIf"],[1,"spells-content"],[3,"innerHTML"],[1,"spec"],[3,"active","click",4,"ngFor","ngForOf"],[1,"talents"],[1,"talent-icon",3,"src","alt"],[1,"gambits-content"],["src","/assets/icons/inv_misc_note_03.jpg"],["src","/assets/icons/spell_nature_timestop.jpg"],["class","combat-simulations",4,"ngIf"],["class","gambit-setup",4,"ngIf"],[1,"combat-simulations"],[3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"click","disabled"],[3,"click",4,"ngIf"],[1,"resources-display"],["width","300","height","150",2,"border","1px solid #ccc","margin-top","10px"],[1,"simulation-logs"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"gambit-setup"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",4,"ngFor","ngForOf"],["class","add-gambit",4,"ngIf"],["cdkDrag",""],[1,"spell-icon",3,"src"],["class","condition",4,"ngFor","ngForOf"],["cdkDragHandle","",1,"cdk-drag-handle"],[1,"condition"],[1,"add-gambit"],[3,"formGroup"],["formControlName","type"],["value","spell"],["value","attack"],["value","pot"],["formControlName","actionId"],["value",""],[1,"condition-group"],["formControlName","conditionA1"],["formControlName","conditionB1",4,"ngIf"],["class","condition-group",4,"ngIf"],["type","submit",3,"click"],["formControlName","conditionB1"],["formControlName","conditionA2"],["formControlName","conditionB2",4,"ngIf"],["formControlName","conditionB2"],["formControlName","conditionA3"],["formControlName","conditionB3",4,"ngIf"],["formControlName","conditionB3"]],template:function(r,o){r&1&&(L(0,JP,2,3,"button",1)(1,eN,5,3,"div",2),g(2,"div",3)(3,"div",4),L(4,tN,2,4,"div",5)(5,nN,1,1,"input",6),Z(6,"img",7),h(),g(7,"div",8),L(8,TN,19,15,"div",9),g(9,"div",8),L(10,nO,88,38,"div",10)(11,aO,9,9,"div",11)(12,dO,7,3,"div",12)(13,YO,8,6,"div",13),h(),g(14,"div",14)(15,"button",15),q("click",function(){return o.setTab("gear")}),Z(16,"img",16),h(),g(17,"button",15),q("click",function(){return o.setTab("stats")}),Z(18,"img",16),h(),g(19,"button",15),q("click",function(){return o.setTab("spells")}),Z(20,"img",16),h(),g(21,"button",15),q("click",function(){return o.setTab("spec")}),Z(22,"img",16),h(),g(23,"button",15),q("click",function(){return o.setTab("gambits")}),Z(24,"img",16),h(),g(25,"button",15),q("click",function(){return o.backToGrid()}),Z(26,"img",16),h()()()()),r&2&&(C("ngIf",o.showHelpButton),p(),C("ngIf",o.showHelpOverlay),p(3),C("ngIf",!o.isEditingName),p(),C("ngIf",o.isEditingName),p(),C("src","assets/icons/role_"+o.getRole(o.currentPlayer.CLASSID,o.currentPlayer.SPEC)+"2.png",Ne),p(2),C("ngIf",o.selectedTab=="gear"),p(2),C("ngIf",o.selectedTab=="stats"),p(),C("ngIf",o.selectedTab==="spells"),p(),C("ngIf",o.selectedTab==="spec"),p(),C("ngIf",o.selectedTab==="gambits"),p(2),De("active",o.selectedTab==="gear"),p(),C("src","/assets/icons/inv_chest_chain.jpg",Ne),p(),De("active",o.selectedTab==="stats"),p(),C("src","/assets/icons/inv_misc_note_01.jpg",Ne),p(),De("active",o.selectedTab==="spells"),p(),C("src","/assets/icons/inv_misc_book_11.jpg",Ne),p(),De("active",o.selectedTab==="spec"),p(),C("src","/assets/icons/inv_7xp_inscription_talenttome02.jpg",Ne),p(),De("active",o.selectedTab==="gambits"),p(),C("src","/assets/icons/trade_engineering.jpg",Ne),p(2),C("src","/assets/icons/achievement_bg_returnxflags_def_wsg.jpg",Ne))},dependencies:[Di,Ar,Wi,Pr,Nr,Xo,SC,Nu,Ou,Mu,Hg,Qo,xu,hC,Aa,Ew,Cw,Sw,vw,IC,Wg,qg,dg,ug,_d,BE,UE],styles:['.player-view[_ngcontent-%COMP%]{background-color:#000;width:100%;max-width:800px;min-height:600px;position:relative;margin:0 auto}.model-wrapper[_ngcontent-%COMP%]{min-height:600px;max-width:400px;width:100%;margin:0 auto;position:relative}.select-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}.item-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:2px;width:60px;pointer-events:auto}.item-columns-container[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;justify-content:space-between;z-index:10;pointer-events:none}.inventory-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,50px);gap:5px}.inventory-grid.right[_ngcontent-%COMP%]{direction:rtl;justify-content:end}.inventory-list.bottom-up[_ngcontent-%COMP%]{transform:translateY(calc(-100% + 50px))}.item-column.left[_ngcontent-%COMP%]{align-items:flex-end}.item-column.right[_ngcontent-%COMP%]{align-items:flex-start}.tooltip[_ngcontent-%COMP%]{position:absolute;background:#222;color:#fff;padding:10px;border-radius:5px;white-space:pre-wrap;z-index:100;top:0;left:80px;width:150px;font-size:12px}[_nghost-%COMP%]     body.compact-tooltip .tooltip{width:125px!important;min-width:125px!important;font-size:10px!important}.tooltip.compact-tooltip[_ngcontent-%COMP%]{width:125px!important;min-width:125px!important;font-size:10px!important}.item-column.right[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]{left:auto;right:80px}.item-column.right[_ngcontent-%COMP%]   .inventory-list[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]:nth-child(3n)   .tooltip[_ngcontent-%COMP%]{left:auto;right:25px}.item-column.left[_ngcontent-%COMP%]   .inventory-list[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]:nth-child(3n)   .tooltip[_ngcontent-%COMP%]{left:25px;right:auto}.inventory-list[_ngcontent-%COMP%]{position:absolute;background:#333;padding:10px;border-radius:5px;z-index:100;top:0;left:60px;display:flex;flex-direction:column;gap:5px}.item-column.right[_ngcontent-%COMP%]   .inventory-list[_ngcontent-%COMP%]{left:auto;right:60px}.inventory-item[_ngcontent-%COMP%]{position:relative;direction:ltr}.item-slot[_ngcontent-%COMP%]{position:relative}.item-icon[_ngcontent-%COMP%]{width:50px;height:50px;border:2px solid #333;cursor:pointer}.item-icon.selected[_ngcontent-%COMP%]{border:2px solid #007bff}.item-slot[data-quality="2"][_ngcontent-%COMP%]   .item-icon.selected[_ngcontent-%COMP%]{border:2px solid #00ff00}.item-slot[data-quality="3"][_ngcontent-%COMP%]   .item-icon.selected[_ngcontent-%COMP%]{border:2px solid #007bff}.item-slot[data-quality="4"][_ngcontent-%COMP%]   .item-icon.selected[_ngcontent-%COMP%]{border:2px solid #800080}.item-slot[data-quality="5"][_ngcontent-%COMP%]   .item-icon.selected[_ngcontent-%COMP%]{border:2px solid #ffa500}.inventory-item[data-quality="2"][_ngcontent-%COMP%]   .item-icon.selected[_ngcontent-%COMP%]{border:2px solid #00ff00!important}.inventory-item[data-quality="3"][_ngcontent-%COMP%]   .item-icon.selected[_ngcontent-%COMP%]{border:2px solid #007bff!important}.inventory-item[data-quality="4"][_ngcontent-%COMP%]   .item-icon.selected[_ngcontent-%COMP%]{border:2px solid #800080!important}.inventory-item[data-quality="5"][_ngcontent-%COMP%]   .item-icon.selected[_ngcontent-%COMP%]{border:2px solid #ffa500!important}select[_ngcontent-%COMP%]{margin-top:20px;padding:5px}#model-viewer[_ngcontent-%COMP%]{width:400px;height:600px;position:relative;z-index:0;margin-bottom:20px}.content-area[_ngcontent-%COMP%]{flex:1 1 auto;overflow-y:auto;max-height:calc(100vh - 191px);display:flex;flex-direction:column;gap:10px}.spells[_ngcontent-%COMP%], .spec[_ngcontent-%COMP%]{max-width:400px;margin:0 auto}.spells[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], .spec[_ngcontent-%COMP%]   .talents[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.spells[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spec[_ngcontent-%COMP%]   .talents[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;vertical-align:top}.spells[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, .spec[_ngcontent-%COMP%]   .talents[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:20%;text-align:center}.spells[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), .spec[_ngcontent-%COMP%]   .talents[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:80%}.spell-icon[_ngcontent-%COMP%], .talent-icon[_ngcontent-%COMP%]{width:56px;height:56px}.spec-tabs[_ngcontent-%COMP%]{position:fixed;bottom:54px;left:50%;transform:translate(-50%);width:100%;max-width:400px;display:flex;justify-content:center;gap:20px;background:#222;z-index:1001}.spec-tabs[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:48px;max-height:48px;width:auto;height:auto;display:block}.spec-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px}.spec-tabs[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background:#007bff;color:#fff}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:10px;width:100%;max-width:400px}.stats-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:5px 10px 5px 0}.stat-label[_ngcontent-%COMP%]{font-weight:700}.stat-value[_ngcontent-%COMP%]{color:gold}.section-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;cursor:pointer;padding:.5rem;border-radius:4px}.pet-section[_ngcontent-%COMP%]{margin-top:1rem;padding-left:1rem;border-left:2px solid #ccc}.pet-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;margin-bottom:.5rem;text-transform:capitalize}details[_ngcontent-%COMP%]{margin-bottom:1rem}summary[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.tab-buttons[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;display:flex;justify-content:center;background:transparent;padding:0;z-index:1000}.tab-buttons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:48px;max-height:48px;width:auto;height:auto;display:block}.tab-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center}.tab-buttons[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background:#007bff;color:#fff}.unequip-button[_ngcontent-%COMP%]{padding:5px 10px;background:#444;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:12px}.unequip-button[_ngcontent-%COMP%]:hover{background:#666}.player-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:200px;height:36px;margin:0 auto 20px;position:sticky;top:0;background:#fff;z-index:10;padding:0;cursor:pointer}.player-name[_ngcontent-%COMP%]{flex:1;padding:0;border:none;border-radius:0;text-align:center;font-size:16px;height:100%;display:flex;align-items:center;justify-content:center}.player-name-input[_ngcontent-%COMP%]{flex:1;padding:0 8px;border:1px solid #ccc;border-radius:4px;text-align:center;font-size:16px;height:100%;box-sizing:border-box}.role-icon2[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:30px;height:30px;pointer-events:none}.customization-form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;justify-content:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;border-radius:4px;border:1px solid #ccc;min-width:120px}.centered-button[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:16px 0}.help-button[_ngcontent-%COMP%]{position:fixed;width:36px;height:36px;border:none;background:#1a1a1a;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0;box-shadow:0 2px 8px #0006;z-index:1000}.help-button.top-left[_ngcontent-%COMP%]{top:10px;left:10px}.help-button.bottom-left[_ngcontent-%COMP%]{bottom:10px;left:10px}.help-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.help-overlay[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:80%;height:80%;background:#000c;border-radius:10px;display:flex;flex-direction:column;z-index:2000;padding:20px;box-sizing:border-box}.help-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;color:#fff;font-size:16px;padding:10px}.help-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;font-size:1.5em}.help-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;padding-left:20px;margin:10px 0}.help-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.help-close-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;background:linear-gradient(135deg,#4e73df,#224abe);color:#fff;font-size:1.1rem;font-weight:700;cursor:pointer;margin-top:10px;align-self:center}.help-close-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#6b8cff,#3a5ed6)}.guild-bank-bar[_ngcontent-%COMP%]{position:fixed;bottom:127px;left:50%;transform:translate(-50%);width:100%;max-width:300px;display:flex;justify-content:center;gap:20px;background:#222;padding:5px;max-height:20px;z-index:1002}.guild-bank-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.bank-icon[_ngcontent-%COMP%]{width:20px;height:20px}.buy-button-container[_ngcontent-%COMP%]{position:fixed;bottom:160px;left:50%;transform:translate(-50%);width:100%;max-width:300px;display:flex;justify-content:center;z-index:1003}.buy-button[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:5px;color:#fff;font-size:14px;cursor:pointer;width:100%;max-width:250px;transition:background .2s;display:flex;align-items:center;justify-content:center;gap:5px}.buy-button.can-afford[_ngcontent-%COMP%]{background:linear-gradient(to right,#00d4ff,#0057b8 0% 100%);transition:background .1s linear}.buy-button.cannot-afford[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ff4500,#ff8c00)}.buy-button.owned[_ngcontent-%COMP%]{background:linear-gradient(45deg,#666,#999);cursor:not-allowed}.buy-button.buying[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blueShift 2s linear forwards}@keyframes _ngcontent-%COMP%_blueShift{0%{background:linear-gradient(to right,#00d4ff 0% 0%,#0057b8 0% 100%)}10%{background:linear-gradient(to right,#00d4ff 0% 10%,#0057b8 10% 100%)}20%{background:linear-gradient(to right,#00d4ff 0% 20%,#0057b8 20% 100%)}30%{background:linear-gradient(to right,#00d4ff 0% 30%,#0057b8 30% 100%)}40%{background:linear-gradient(to right,#00d4ff 0% 40%,#0057b8 40% 100%)}50%{background:linear-gradient(to right,#00d4ff 0% 50%,#0057b8 50% 100%)}60%{background:linear-gradient(to right,#00d4ff 0% 60%,#0057b8 60% 100%)}70%{background:linear-gradient(to right,#00d4ff 0% 70%,#0057b8 70% 100%)}80%{background:linear-gradient(to right,#00d4ff 0% 80%,#0057b8 80% 100%)}90%{background:linear-gradient(to right,#00d4ff 0% 90%,#0057b8 90% 100%)}to{background:linear-gradient(to right,#00d4ff 0% 100%,#0057b8 100% 100%)}}.spell-list[_ngcontent-%COMP%]{margin-top:20px}.spell-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.spell-icon[_ngcontent-%COMP%]{width:32px;height:32px;margin-right:10px}.spell-name[_ngcontent-%COMP%]{font-weight:700;margin-right:10px}.spell-tooltip[_ngcontent-%COMP%]{font-size:.9em;color:#e0dbdb}.combat-tables[_ngcontent-%COMP%]{margin-bottom:20px}.combat-table[_ngcontent-%COMP%]{margin-bottom:15px}.table-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:5px}.table-grid2[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr 1fr;gap:5px}.table-header[_ngcontent-%COMP%]{font-weight:700;background-color:#08014e;padding:5px;border:1px solid #ccc}.table-row[_ngcontent-%COMP%]{display:contents}.table-label[_ngcontent-%COMP%], .table-value[_ngcontent-%COMP%]{padding:5px;border:1px solid #ccc}.table-label[_ngcontent-%COMP%]{font-weight:700}.gambits-content[_ngcontent-%COMP%]{max-width:400px;margin:0 auto}.gambits-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.gambits-content[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .gambits-content[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border:1px solid #0f0f0f;text-align:left}.gambits-content[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#0f0f0f}.gambits-content[_ngcontent-%COMP%]   tr[cdkDrag][_ngcontent-%COMP%]:nth-child(2n){background-color:#04013b}.gambits-content[_ngcontent-%COMP%]   tr[cdkDrag][_ngcontent-%COMP%]:nth-child(odd){background-color:#0c0707}.gambits-content[_ngcontent-%COMP%]   tr[cdkDrag][_ngcontent-%COMP%]:hover{background-color:#0f0f0f}.gambits-content[_ngcontent-%COMP%]   .condition[_ngcontent-%COMP%]{margin-bottom:2px;line-height:1.2}.cdk-drag-handle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;cursor:move;padding:0 10px}.cdk-drag-preview[_ngcontent-%COMP%]{background-color:#0f0f0f;box-shadow:0 5px 5px -3px #0003}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3}.add-gambit[_ngcontent-%COMP%]{margin-top:20px}.add-gambit[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .add-gambit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px;padding:5px}.add-gambit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:400px}']});let t=n;return t})();var ZO=(t,n)=>({"top-left":t,"bottom-left":n}),xd=t=>({"active-swap":t});function QO(t,n){if(t&1){let e=pe();g(0,"button",9),q("click",function(){U(e);let r=E();return $(r.toggleHelpOverlay())}),Z(1,"img",10),h()}if(t&2){let e=E();C("ngClass",Ho(1,ZO,e.menuSelected==="raidConfig"&&e.currentPlayer,!(e.menuSelected==="raidConfig"&&e.currentPlayer)))}}function XO(t,n){if(t&1){let e=pe();g(0,"div",11),Z(1,"div",12),Ve(2,"safeHtml"),g(3,"button",13),q("click",function(){U(e);let r=E();return $(r.toggleHelpOverlay())}),y(4,"OK"),h()()}if(t&2){let e=E();p(),C("innerHTML",Gi(2,1,e.getHelpContent()),Tt)}}function JO(t,n){if(t&1){let e=pe();g(0,"div",14)(1,"button",15),q("click",function(){U(e);let r=E();return $(r.setMenuLevel("mcr"))}),y(2,"MC Raiders"),h(),g(3,"button",15),q("click",function(){U(e);let r=E();return $(r.setMenuLevel("tgif"))}),y(4,"TGIF"),h(),g(5,"button",15),q("click",function(){U(e);let r=E();return $(r.setMenuLevel("mc"))}),y(6,"Molten Core"),h(),g(7,"button",15),q("click",function(){U(e);let r=E();return $(r.setMenuLevel("dungeon"))}),y(8,"Dungeons"),h(),g(9,"button",15),q("click",function(){U(e);let r=E();return $(r.setMenuLevel("raidConfig"))}),y(10,"Raid Setup"),h(),g(11,"button",15),q("click",function(){U(e);let r=E();return $(r.setMenuLevel("settings"))}),y(12,"Settings"),h()()}}function ek(t,n){t&1&&(g(0,"video",18),Z(1,"source",19),y(2," Your browser does not support the video tag. "),h())}function tk(t,n){t&1&&(g(0,"video",18),Z(1,"source",20),y(2," Your browser does not support the video tag. "),h())}function nk(t,n){if(t&1&&(g(0,"div")(1,"div",16)(2,"h2"),y(3,"MCR Raiders"),h(),L(4,ek,3,0,"video",17)(5,tk,3,0,"video",17),y(6," (Music video by MyndFlame from Illegal Danish) "),Z(7,"br")(8,"br"),y(9," Help dad-guild TGIF gear up and progress through Molten Core raid. How many weeks will it take you to down Rag? (coming soon"),g(10,"sup"),y(11,"\u2122"),h(),y(12,") "),h()()),t&2){let e=E();p(4),C("ngIf",!e.profanityFilter),p(),C("ngIf",e.profanityFilter)}}function ik(t,n){t&1&&(g(0,"div",21),Z(1,"img",22),y(2,"Well met! 6/2/19 "),Z(3,"img",23),y(4,"NAXX OUT! 12/20/20 "),Z(5,"img",24),y(6,"For the Alliance! 2/21/21 "),Z(7,"img",25),y(8,"RIP Elfenrir 3/22/21 "),Z(9,"img",26),y(10,"RIP Skriblius 1/3/23 "),g(11,"h4"),y(12,"Quotes"),h(),g(13,"p"),y(14,'"Gault down!" - Gault'),h(),g(15,"p"),y(16,'"I would say 87% of my frustration basically is from Molten Core. Not even joking. That place is literal hell." - Halador'),h(),g(17,"p"),y(18,'"TGIF is LFM 7 more hunters to round out our raid group. 500g to each hunter who joins" - Secant'),h(),g(19,"p"),y(20,`"Hey! We don't play with doors." - Cosine`),h()())}function rk(t,n){t&1&&(g(0,"div"),Z(1,"app-moltencore"),h())}function ok(t,n){if(t&1){let e=pe();Kn(0),g(1,"button",30),q("click",function(){U(e);let r=E().$implicit,o=E(3);return $(o.handlePlayerClick(r))}),g(2,"div",31),y(3),h(),y(4),h(),Z(5,"img",32),Zn()}if(t&2){let e=E().$implicit,i=E(3);p(),C("ngStyle",i.getCellStyle(e)),p(2),re(" ",i.getGearScore(e.NAME).toFixed(1)," "),p(),re(" ",e.NAME," "),p(),C("src","assets/icons/role_"+i.getRole(e.CLASSID,e.SPEC)+"2.png",Ne)}}function sk(t,n){if(t&1&&(g(0,"td",29),L(1,ok,6,4,"ng-container",4),h()),t&2){let e=n.$implicit;p(),C("ngIf",e)}}function ak(t,n){if(t&1&&(g(0,"tr"),L(1,sk,2,1,"td",28),h()),t&2){let e=n.$implicit;p(),C("ngForOf",e)}}function lk(t,n){if(t&1){let e=pe();g(0,"div",33)(1,"button",34),q("click",function(){U(e);let r=E(2);return $(r.toggleSwapMode())}),y(2," Swap Mode "),h(),g(3,"button",35),q("click",function(){U(e);let r=E(2);return $(r.optimizeGear())}),y(4,"Optimize Gear"),h()()}if(t&2){let e=E(2);p(),C("ngClass",St(1,xd,e.swapMode))}}function ck(t,n){if(t&1&&(g(0,"div")(1,"table"),L(2,ak,2,1,"tr",27),h(),L(3,lk,5,3,"div",7),h()),t&2){let e=E();p(2),C("ngForOf",e.grid),p(),C("ngIf",e.menuSelected==="raidConfig")}}function uk(t,n){if(t&1&&(g(0,"div",36),Z(1,"app-dungeon",37),h()),t&2){let e=E();p(),C("players",e.players)("grid",e.grid)("guildBank",e.guildBank)("playerGearScores",e.playerGearScores)}}function dk(t,n){if(t&1){let e=pe();g(0,"app-player-view",39),q("backToGridEvent",function(){U(e);let r=E(2);return $(r.backToGrid())}),h()}if(t&2){let e=E(2);C("currentPlayer",e.currentPlayer)("players",e.players)("guildBank",e.guildBank)}}function fk(t,n){if(t&1&&(g(0,"div"),L(1,dk,1,3,"app-player-view",38),h()),t&2){let e=E();p(),C("ngIf",e.currentPlayer)}}function hk(t,n){if(t&1){let e=pe();g(0,"div",33)(1,"button",34),q("click",function(){U(e);let r=E();return $(r.toggleHelpButton())}),y(2),h(),g(3,"button",34),q("click",function(){U(e);let r=E();return $(r.toggleCompactTooltips())}),y(4),h(),g(5,"button",34),q("click",function(){U(e);let r=E();return $(r.toggleProfanity())}),y(6),h(),g(7,"button",40),q("pointerdown",function(){U(e);let r=E();return $(r.startResetProgress())})("pointerup",function(){U(e);let r=E();return $(r.cancelResetProgress())})("pointerleave",function(){U(e);let r=E();return $(r.cancelResetProgress())}),y(8," Reset Progress "),h(),g(9,"button",40),q("pointerdown",function(){U(e);let r=E();return $(r.startResetAll())})("pointerup",function(){U(e);let r=E();return $(r.cancelResetAll())})("pointerleave",function(){U(e);let r=E();return $(r.cancelResetAll())}),y(10," Reset Storage "),h()()}if(t&2){let e=E();p(),C("ngClass",St(10,xd,!e.showHelpButton)),p(),re(" Help: ",e.showHelpButton?"On":"Off"," "),p(),C("ngClass",St(12,xd,e.useCompactTooltips)),p(),re(" Tooltips: ",e.useCompactTooltips?"Small":"Normal"," "),p(),C("ngClass",St(14,xd,!e.profanityFilter)),p(),re(" Profanity: ",e.profanityFilter?"Off":"On"," "),p(),De("buying",e.isResettingP),p(2),De("buying",e.isResettingA)}}function pk(t,n){if(t&1){let e=pe();g(0,"button",41),q("click",function(){U(e);let r=E();return $(r.setMenuLevel("home"))}),Z(1,"img",42),h()}t&2&&(p(),C("src","/assets/icons/achievement_bg_returnxflags_def_wsg.jpg",Ne))}function gk(t,n){if(t&1){let e=pe();g(0,"button",45),q("click",function(){U(e);let r=E(2);return $(r.forceUpdate())}),y(1,"Update"),h()}}function mk(t,n){if(t&1){let e=pe();g(0,"button",15),q("click",function(){U(e);let r=E(2);return $(r.promptInstall())}),y(1,"Install"),h()}}function vk(t,n){if(t&1){let e=pe();g(0,"button",45),q("click",function(){U(e);let r=E(2);return $(r.forceUpdate())}),y(1,"Reload"),h()}}function _k(t,n){t&1&&(g(0,"p"),y(1,"To install on iOS, share and choose 'Add to Home Screen'."),h())}function yk(t,n){if(t&1&&(g(0,"div"),y(1," Version 0.1.12 "),L(2,gk,2,0,"button",43)(3,mk,2,0,"button",44)(4,vk,2,0,"button",43)(5,_k,2,0,"p",4),h()),t&2){let e=E();p(2),C("ngIf",e.updateAvailable&&!e.showInstall),p(),C("ngIf",e.showInstall),p(),C("ngIf",!e.updateAvailable&&!e.showInstall),p(),C("ngIf",!e.isInstalled&&!e.showInstall&&e.onIOS)}}var Pw=(()=>{let n=class n{constructor(i,r,o,a,s,l,c,u,d){this.http=r,this.swUpdate=o,this.animationService=a,this.statsService=s,this.dataService=l,this.utilityService=c,this.helpService=u,this.gearService=d,this.players=[],this.generalStats=dd,this.resistanceStats=hd,this.spellPowerStats=fd,this.menuSelected="home",this.cachedStats=null,this.grid=[],this.currentPlayer=null,this.playerIndex=-1,this.guildBank={gold:0,fieryCores:0,lavaCores:0},this.isResettingA=!1,this.resetTimerA=null,this.isResettingP=!1,this.resetTimerP=null,this.showHelpButton=!0,this.showHelpOverlay=!1,this.useCompactTooltips=!1,this.clickX=null,this.clickY=null,this.playerGearScores=new Map,this.profanityFilter=!0,this.updateAvailable=!1,this.showInstall=!1,this.isInstalled=!1,this.swapMode=!1,this.firstSwapPlayer=null}ngOnInit(){window.CONTENT_PATH="/assets/modelviewer/classic/";let i=localStorage.getItem("players");if(i)try{this.players=JSON.parse(i),console.log("Loaded players from localStorage:",this.players),this.initPlayerDungeons(),this.loadAdditionalData()}catch(s){console.error("Error parsing saved players from localStorage:",s),this.loadFromCsv()}else this.loadFromCsv();let r=localStorage.getItem("guildBank");r?this.guildBank=JSON.parse(r):this.guildBank={gold:0,fieryCores:0,lavaCores:0};let o=localStorage.getItem("showHelpButton");o!==null&&o.toLowerCase()==="false"&&(this.showHelpButton=!1);let a=localStorage.getItem("useCompactTooltips");a!==null&&a.toLowerCase()==="true"&&(this.useCompactTooltips=!0),this.useCompactTooltips&&document.body.classList.add("compact-tooltip"),this.swUpdate.isEnabled&&this.swUpdate.versionUpdates.subscribe(s=>{s.type==="VERSION_READY"&&(console.log("New version available:",s),confirm("A new version is available. Reload now?")&&window.location.reload())}),window.addEventListener("beforeinstallprompt",s=>{s.preventDefault(),this.installPromptEvent=s,this.showInstall=!0,console.log("PWA install prompt available")}),this.isInstalled=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://"),window.addEventListener("beforeinstallprompt",s=>{s.preventDefault(),this.installPromptEvent=s,this.showInstallButton()}),window.addEventListener("appinstalled",s=>{console.log("The app was installed"),this.isInstalled=!0})}promptInstall(){this.installPromptEvent&&(this.installPromptEvent.prompt(),this.installPromptEvent.userChoice.then(i=>{i.outcome==="accepted"?(console.log("User accepted the install prompt"),this.showInstall=!1):console.log("User dismissed the install prompt"),this.installPromptEvent=null}))}onIOS(){let i=window.navigator;return"standalone"in i&&!i.standalone}forceUpdate(){this.updateAvailable?this.swUpdate.activateUpdate().then(()=>document.location.reload()):window.location.reload(!0)}showInstallButton(){this.showInstall=!0}hideInstallButton(){this.showInstall=!1}initPlayerDungeons(){this.players.forEach((i,r)=>{i.DUNGEON_EXP===void 0&&(i.DUNGEON_EXP=""),this.players[r]=N({},i)})}loadFromCsv(){this.http.get("assets/players.csv",{responseType:"text"}).subscribe({next:i=>{this.players=this.dataService.parseCsv(i,["RACE","GENDER","SKIN","FACE","HAIRSTYLE","HAIRCOLOR","FACIALSTYLE","GROUP","POSITION","CLASSID","SPEC"]),this.players.forEach((r,o)=>{let a=ri.find(s=>s.RACEID===+r.RACE&&s.GENDER===+r.GENDER);if(a){let s=a.options;r.SKIN=Math.floor(Math.random()*s.SKIN),r.FACE=Math.floor(Math.random()*s.FACE),r.HAIRSTYLE=Math.floor(Math.random()*s.HAIRSTYLE),r.HAIRCOLOR=Math.floor(Math.random()*s.HAIRCOLOR),r.FACIALSTYLE=Math.floor(Math.random()*s.FACIALSTYLE),this.players[o]=N({},r)}}),console.log("Randomized players:",this.players),this.initPlayerDungeons(),this.savePlayersToStorage(),this.loadAdditionalData()},error:i=>console.error("Failed to load players.csv:",i)})}loadAdditionalData(){this.dataService.loadAllData().subscribe({next:()=>{this.buildGrid()},error:i=>console.error("Failed to load additional data:",i)})}savePlayersToStorage(){this.dataService.saveVariableToStorage("players",this.players)}setMenuLevel(i){this.menuSelected==="dungeon"&&this.dungeonComponent.syncDataToService(),this.menuSelected=i,i==="home"?this.stopAllVideos():i==="raidConfig"?this.calcAllGearScores():i==="dungeon"&&setTimeout(()=>{this.dungeonComponent.syncDataFromService()},100)}toggleHelpOverlay(){this.showHelpOverlay=!this.showHelpOverlay}toggleHelpButton(){this.showHelpButton=!this.showHelpButton,localStorage.setItem("showHelpButton",`${this.showHelpButton}`)}toggleCompactTooltips(){this.useCompactTooltips=!this.useCompactTooltips,localStorage.setItem("useCompactTooltips",`${this.useCompactTooltips}`),this.useCompactTooltips?document.body.classList.add("compact-tooltip"):document.body.classList.remove("compact-tooltip")}getHelpContent(){return this.helpService.getHelpContent(this.menuSelected)}stopAllVideos(){document.querySelectorAll("video").forEach(r=>{r.pause(),r.currentTime=0})}buildGrid(){this.grid=Array.from({length:8},()=>Array(5).fill(null)),this.players.forEach((i,r)=>{let o=+i.GROUP-1,a=+i.POSITION-1;o>=0&&o<8&&a>=0&&a<5&&(this.grid[o][a]=i)})}getColor(i){return this.utilityService.getColor(i)}toggleProfanity(){this.profanityFilter=!this.profanityFilter}backToGrid(){this.currentPlayer=null,this.calcAllGearScores()}getRole(i,r){return this.utilityService.getRole(i,r)}startResetAll(){this.isResettingA=!0,this.resetTimerA=setTimeout(()=>{this.resetStorage(),this.isResettingA=!1},2e3)}cancelResetAll(){this.resetTimerA&&(clearTimeout(this.resetTimerA),this.resetTimerA=null,this.isResettingA=!1)}startResetProgress(){this.isResettingP=!0,this.resetTimerP=setTimeout(()=>{this.resetProgress(),this.isResettingP=!1},2e3)}cancelResetProgress(){this.resetTimerP&&(clearTimeout(this.resetTimerP),this.resetTimerP=null,this.isResettingP=!1)}viewPlayer(i){i&&(this.currentPlayer=N({},i))}calcAllGearScores(){this.playerGearScores.clear(),this.players.forEach((i,r)=>{let o=this.statsService.getPlayerGearScore(this.players,r);this.playerGearScores.set(i.NAME,o)})}getGearScore(i){return this.playerGearScores.get(i)??0}toggleSwapMode(){this.swapMode?(this.swapMode=!1,this.firstSwapPlayer=null):this.swapMode=!0}handlePlayerClick(i){if(!this.swapMode)return this.viewPlayer(i);if(i.GROUP&&i.POSITION){let r={name:i.NAME,group:+i.GROUP,pos:+i.POSITION};if(console.log(r),!this.firstSwapPlayer)this.firstSwapPlayer=r;else{if(this.firstSwapPlayer.group===r.group&&this.firstSwapPlayer.pos===r.pos){this.firstSwapPlayer=null,this.swapMode=!1;return}let a=this.grid.flat().filter(s=>s&&s.GROUP!=null&&s.POSITION!=null).find(s=>+s.GROUP===this.firstSwapPlayer.group&&+s.POSITION===this.firstSwapPlayer.pos);if(!a){console.warn("No matching player found for swap"),this.firstSwapPlayer=null,this.swapMode=!1;return}if(console.log("found both players"),this.firstSwapPlayer?.name){let s=this.players.findIndex(d=>d.NAME===(this.firstSwapPlayer?.name||"")),l=this.players.findIndex(d=>d.NAME===i.NAME),c=+i.GROUP,u=+i.POSITION;this.players[l].GROUP=+a.GROUP,this.players[l].POSITION=+a.POSITION,this.players[s].GROUP=c,this.players[s].POSITION=u,this.firstSwapPlayer=null,this.swapMode=!1,this.buildGrid(),this.savePlayersToStorage()}}}}updatePlayerGroups(){this.grid.forEach((i,r)=>{i.forEach((o,a)=>{if(o){let s=this.players.findIndex(l=>l.NAME===o.NAME);s!==-1&&(this.players[s].GROUP=r+1,this.players[s].POSITION=a+1)}})}),this.savePlayersToStorage()}getCellStyle(i){let r={"background-color":this.getColor(i.CLASSID),color:"black"};if(this.swapMode&&this.firstSwapPlayer)+i.GROUP===this.firstSwapPlayer.group&&+i.POSITION===this.firstSwapPlayer.pos?r.border="2px solid red":r.border="1px solid black";else return{"background-color":this.getColor(i.CLASSID),color:"black"};return r}onPlayerUpdated(i){console.log("Players updated:",i),this.players=i}onGuildBankUpdated(i){console.log("Guild bank updated:",i),this.guildBank=i}optimizeGear(){this.gearService.optimizeGear(this.players),this.savePlayersToStorage()}resetStorage(){localStorage.removeItem("players"),localStorage.removeItem("guildWeek"),localStorage.removeItem("guildBank"),localStorage.removeItem("dungeonAssignment"),localStorage.removeItem("dungeonProgress"),location.reload()}resetProgress(){let i=[...this.players];this.http.get("assets/players.csv",{responseType:"text"}).subscribe({next:r=>{let o=this.dataService.parseCsv(r,["RACE","GENDER","SKIN","FACE","HAIRSTYLE","HAIRCOLOR","FACIALSTYLE","GROUP","POSITION","CLASSID","SPEC"]);this.players=o.map((a,s)=>{let l=i[s]||{};return ue(N({},a),{GROUP:l.GROUP||a.GROUP,POSITION:l.POSITION||a.POSITION,NAME:l.NAME||a.NAME,PET:l.PET||a.PET,CLASSID:l.CLASSID||a.CLASSID,SPEC:l.SPEC||a.SPEC,RACE:l.RACE||a.RACE,GENDER:l.GENDER||a.GENDER,SKIN:l.SKIN||a.SKIN,FACE:l.FACE||a.FACE,HAIRSTYLE:l.HAIRSTYLE||a.HAIRSTYLE,HAIRCOLOR:l.HAIRCOLOR||a.HAIRCOLOR,FACIALSTYLE:l.FACIALSTYLE||a.FACIALSTYLE})}),this.savePlayersToStorage(),localStorage.removeItem("guildWeek"),localStorage.removeItem("guildBank"),localStorage.removeItem("dungeonAssignment"),localStorage.removeItem("dungeonProgress"),location.reload()},error:r=>{console.error("Failed to load players.csv:",r),this.savePlayersToStorage(),localStorage.removeItem("guildWeek"),localStorage.removeItem("guildBank"),localStorage.removeItem("dungeonAssignment"),localStorage.removeItem("dungeonProgress"),location.reload()}})}};n.\u0275fac=function(r){return new(r||n)(K(He),K(Yi),K(md),K(_s),K(gn),K(gt),K(Gt),K(vd),K(gs))},n.\u0275cmp=jt({type:n,selectors:[["app-root"]],viewQuery:function(r,o){if(r&1&&Vo(ms,5),r&2){let a;xr(a=Rr())&&(o.dungeonComponent=a.first)}},standalone:!1,decls:14,vars:12,consts:[[1,"maincontainer"],["class","help-button",3,"ngClass","click",4,"ngIf"],["class","help-overlay",4,"ngIf"],["class","menu-buttons",4,"ngIf"],[4,"ngIf"],["class","tgif-section",4,"ngIf"],["class","dungeon-content",4,"ngIf"],["class","settings-buttons",4,"ngIf"],["class","return-home-btn",3,"click",4,"ngIf"],[1,"help-button",3,"click","ngClass"],["src","/assets/icons/inv_misc_questionmark.jpg","alt","Help"],[1,"help-overlay"],[1,"help-content",3,"innerHTML"],[1,"help-close-btn",3,"click"],[1,"menu-buttons"],[1,"menu-btn",3,"click"],[1,"mcr-video-section"],["class","mcr-video","controls","",4,"ngIf"],["controls","",1,"mcr-video"],["src","/assets/video/MCRaiders.mp4","type","video/mp4"],["src","/assets/video/MCRaiders_edit.mp4","type","video/mp4"],[1,"tgif-section"],["src","/assets/images/tabard.png","alt","TGIF success"],["src","/assets/images/kelthuzad.jpg","alt","Naxx done"],["src","/assets/images/tgif_shield.jpg","alt","TGIF success"],["src","/assets/images/elfenrir.png","alt",""],["src","/assets/images/skriblius.jpg","alt","RIP Skriblius"],[4,"ngFor","ngForOf"],["class","player-cell",4,"ngFor","ngForOf"],[1,"player-cell"],[3,"click","ngStyle"],[1,"player-gearscore"],["alt","role icon",1,"role-icon",3,"src"],[1,"settings-buttons"],[3,"click","ngClass"],[3,"click"],[1,"dungeon-content"],[3,"players","grid","guildBank","playerGearScores"],[3,"currentPlayer","players","guildBank","backToGridEvent",4,"ngIf"],[3,"backToGridEvent","currentPlayer","players","guildBank"],[3,"pointerdown","pointerup","pointerleave"],[1,"return-home-btn",3,"click"],[3,"src"],["nbButton","","outline","","status","danger","style","margin:0px 5px;","size","large","title","Force Update to Latest Version",3,"click",4,"ngIf"],["class","menu-btn",3,"click",4,"ngIf"],["nbButton","","outline","","status","danger","size","large","title","Force Update to Latest Version",2,"margin","0px 5px",3,"click"]],template:function(r,o){r&1&&(g(0,"div",0),L(1,QO,2,4,"button",1)(2,XO,5,3,"div",2)(3,JO,13,0,"div",3)(4,nk,13,2,"div",4)(5,ik,21,0,"div",5)(6,rk,2,0,"div",4)(7,ck,4,2,"div",4)(8,uk,2,4,"div",6)(9,fk,2,1,"div",4)(10,hk,11,16,"div",7)(11,pk,2,1,"button",8)(12,yk,6,4,"div",4),h(),Z(13,"router-outlet")),r&2&&(p(),C("ngIf",!o.currentPlayer&&o.showHelpButton),p(),C("ngIf",!o.currentPlayer&&o.showHelpOverlay),p(),C("ngIf",o.menuSelected==="home"),p(),C("ngIf",o.menuSelected==="mcr"),p(),C("ngIf",o.menuSelected==="tgif"),p(),C("ngIf",o.menuSelected==="mc"),p(),C("ngIf",!o.currentPlayer&&o.menuSelected==="raidConfig"),p(),C("ngIf",o.menuSelected==="dungeon"),p(),C("ngIf",o.menuSelected==="raidConfig"&&o.currentPlayer),p(),C("ngIf",o.menuSelected==="settings"),p(),C("ngIf",o.menuSelected!=="home"&&(o.menuSelected!=="raidConfig"||!o.currentPlayer)),p(),C("ngIf",o.menuSelected==="home"))},dependencies:[Ar,Wi,Pr,Nr,za,ms,HE,Md,_d],styles:[".maincontainer[_ngcontent-%COMP%]{background-color:#000;color:#fff;display:flex;flex-direction:column;align-items:center;padding:20px;box-sizing:border-box;min-width:100vw;overflow-x:auto}table[_ngcontent-%COMP%]{border-collapse:collapse}td[_ngcontent-%COMP%]{width:100px;height:50px;padding:0;text-align:center;vertical-align:middle}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:100%;box-sizing:border-box}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,100px);gap:10px;margin-bottom:20px}.row[_ngcontent-%COMP%]{display:contents}.cell[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px;height:50px;cursor:pointer}.return-home-btn[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:10px;width:36px;height:36px;border:none;background:#1a1a1a;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0;box-shadow:0 2px 8px #0006}.settings-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px;margin-top:20px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-touch-callout:none}.settings-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:14px 28px;font-size:1.1rem;font-weight:700;border-radius:10px;border:none;background:linear-gradient(135deg,#4e73df,#224abe);color:#fff;cursor:pointer;box-shadow:0 4px 10px #00000040;transition:transform .15s ease,box-shadow .15s ease;width:auto;min-width:200px;max-width:280px}.settings-buttons[_ngcontent-%COMP%]   button.active-swap[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff4e50,#f9d423);color:#fff;box-shadow:0 4px 10px #ff4e5080}.settings-buttons[_ngcontent-%COMP%]   button.buying[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blueShift 2s linear forwards}.settings-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 14px #0000004d}.settings-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 3px 8px #0003}.return-home-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.player-cell[_ngcontent-%COMP%]{position:relative}.role-icon[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:22px;height:22px;pointer-events:none}.player-gearscore[_ngcontent-%COMP%]{font-size:.75em;color:#000;margin-top:0}.role-icon2[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:30px;height:30px;pointer-events:none}.menu-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px;margin:20px auto}.menu-btn[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:16px 24px;border:none;border-radius:12px;font-size:1.2rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;cursor:pointer;color:#fff;background:linear-gradient(135deg,#ff6b6b,#f94d6a);box-shadow:0 4px 10px #00000040;transition:transform .15s ease,box-shadow .15s ease}.menu-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 14px #0000004d}.menu-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 3px 8px #0003}.mcr-video-section[_ngcontent-%COMP%]{margin-bottom:20px}.mcr-video[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.tgif-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:400px;width:100%;height:auto;display:block;margin-bottom:10px}.help-button[_ngcontent-%COMP%]{position:fixed;width:36px;height:36px;border:none;background:#1a1a1a;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0;box-shadow:0 2px 8px #0006;z-index:1000}.help-button.top-left[_ngcontent-%COMP%]{top:10px;left:10px}.help-button.bottom-left[_ngcontent-%COMP%]{bottom:10px;left:10px}.help-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.help-overlay[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:80%;height:80%;background:#000c;border-radius:10px;display:flex;flex-direction:column;z-index:2000;padding:20px;box-sizing:border-box}.help-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;color:#fff;font-size:16px;padding:10px}.help-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;font-size:1.5em}.help-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;padding-left:20px;margin:10px 0}.help-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.help-close-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;background:linear-gradient(135deg,#4e73df,#224abe);color:#fff;font-size:1.1rem;font-weight:700;cursor:pointer;margin-top:10px;align-self:center}.help-close-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#6b8cff,#3a5ed6)}.buy-button.buying[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blueShift 2s linear forwards}@keyframes _ngcontent-%COMP%_blueShift{0%{background:linear-gradient(to right,#00d4ff 0% 0%,#0057b8 0% 100%)}10%{background:linear-gradient(to right,#00d4ff 0% 10%,#0057b8 10% 100%)}20%{background:linear-gradient(to right,#00d4ff 0% 20%,#0057b8 20% 100%)}30%{background:linear-gradient(to right,#00d4ff 0% 30%,#0057b8 30% 100%)}40%{background:linear-gradient(to right,#00d4ff 0% 40%,#0057b8 40% 100%)}50%{background:linear-gradient(to right,#00d4ff 0% 50%,#0057b8 50% 100%)}60%{background:linear-gradient(to right,#00d4ff 0% 60%,#0057b8 60% 100%)}70%{background:linear-gradient(to right,#00d4ff 0% 70%,#0057b8 70% 100%)}80%{background:linear-gradient(to right,#00d4ff 0% 80%,#0057b8 80% 100%)}90%{background:linear-gradient(to right,#00d4ff 0% 90%,#0057b8 90% 100%)}to{background:linear-gradient(to right,#00d4ff 0% 100%,#0057b8 100% 100%)}}"]});let t=n;return t})();var Nw=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=$e({type:n,bootstrap:[Pw]}),n.\u0275inj=Be({imports:[Dg,Di,Xo,IE,Rg,ms,Md,VE.register("ngsw-worker.js",{enabled:!rS(),registrationStrategy:"registerWhenStable:30000"})]});let t=n;return t})();wg().bootstrapModule(Nw).catch(t=>console.error(t));
